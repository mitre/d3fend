import{K as Qt,X as Zt,s as Ee,e as L,t as le,b as z,d as N,f as T,h as ie,i as k,j as q,x as p,k as O,l as R,al as Ke,p as K,m as he,A as Fe,o as Ge,N as Ae,v as F,L as ot,G as X,P as rt,I as P,Y as zt,W as De,a3 as et,n as ye,c as He,u as je,g as Xe,a as Ue,q as xt,y as $t,Q as st,R as ct}from"./scheduler.Df3gJpkL.js";import{S as Be,i as Me,t as b,g as B,a as y,e as M,c as oe,b as re,m as se,d as ce}from"./index.DTzUNj_H.js";import{e as Z}from"./each.CU-7MgHx.js";import{u as en}from"./stores.D0bXrGtW.js";import{f as fe}from"./lib.VMLB1uup.js";import{l as Qe,P as tn}from"./layers.koMKTsGQ.js";import{c as nn,I as Ze}from"./actions.DG4lP4jf.js";import{p as ln,f as on}from"./utils.xEKteSAW.js";/* empty css                                              */const rn=["top","right","bottom","left"],Le=Math.min,de=Math.max,Ne=Math.round,Te=Math.floor,ae=t=>({x:t,y:t}),sn={left:"right",right:"left",bottom:"top",top:"bottom"},cn={start:"end",end:"start"};function ft(t,e,i){return de(t,Le(e,i))}function Re(t,e){return typeof t=="function"?t(e):t}function me(t){return t.split("-")[0]}function ze(t){return t.split("-")[1]}function qt(t){return t==="x"?"y":"x"}function Wt(t){return t==="y"?"height":"width"}function be(t){return["top","bottom"].includes(me(t))?"y":"x"}function Ht(t){return qt(be(t))}function fn(t,e,i){i===void 0&&(i=!1);const l=ze(t),n=Ht(t),r=Wt(n);let o=n==="x"?l===(i?"end":"start")?"right":"left":l==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=Ie(o)),[o,Ie(o)]}function an(t){const e=Ie(t);return[xe(t),e,xe(e)]}function xe(t){return t.replace(/start|end/g,e=>cn[e])}function un(t,e,i){const l=["left","right"],n=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:l:e?l:n;case"left":case"right":return e?r:o;default:return[]}}function dn(t,e,i,l){const n=ze(t);let r=un(me(t),i==="start",l);return n&&(r=r.map(o=>o+"-"+n),e&&(r=r.concat(r.map(xe)))),r}function Ie(t){return t.replace(/left|right|bottom|top/g,e=>sn[e])}function hn(t){return{top:0,right:0,bottom:0,left:0,...t}}function mn(t){return typeof t!="number"?hn(t):{top:t,right:t,bottom:t,left:t}}function Ve(t){const{x:e,y:i,width:l,height:n}=t;return{width:l,height:n,top:i,left:e,right:e+l,bottom:i+n,x:e,y:i}}function at(t,e,i){let{reference:l,floating:n}=t;const r=be(e),o=Ht(e),c=Wt(o),s=me(e),f=r==="y",a=l.x+l.width/2-n.width/2,d=l.y+l.height/2-n.height/2,u=l[c]/2-n[c]/2;let h;switch(s){case"top":h={x:a,y:l.y-n.height};break;case"bottom":h={x:a,y:l.y+l.height};break;case"right":h={x:l.x+l.width,y:d};break;case"left":h={x:l.x-n.width,y:d};break;default:h={x:l.x,y:l.y}}switch(ze(e)){case"start":h[o]-=u*(i&&f?-1:1);break;case"end":h[o]+=u*(i&&f?-1:1);break}return h}const _n=async(t,e,i)=>{const{placement:l="bottom",strategy:n="absolute",middleware:r=[],platform:o}=i,c=r.filter(Boolean),s=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:a,y:d}=at(f,l,s),u=l,h={},_=0;for(let m=0;m<c.length;m++){const{name:v,fn:w}=c[m],{x:E,y:A,data:I,reset:V}=await w({x:a,y:d,initialPlacement:l,placement:u,strategy:n,middlewareData:h,rects:f,platform:o,elements:{reference:t,floating:e}});a=E??a,d=A??d,h={...h,[v]:{...h[v],...I}},V&&_<=50&&(_++,typeof V=="object"&&(V.placement&&(u=V.placement),V.rects&&(f=V.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):V.rects),{x:a,y:d}=at(f,u,s)),m=-1)}return{x:a,y:d,placement:u,strategy:n,middlewareData:h}};async function Pe(t,e){var i;e===void 0&&(e={});const{x:l,y:n,platform:r,rects:o,elements:c,strategy:s}=t,{boundary:f="clippingAncestors",rootBoundary:a="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=Re(e,t),_=mn(h),v=c[u?d==="floating"?"reference":"floating":d],w=Ve(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(v)))==null||i?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:f,rootBoundary:a,strategy:s})),E=d==="floating"?{x:l,y:n,width:o.floating.width,height:o.floating.height}:o.reference,A=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),I=await(r.isElement==null?void 0:r.isElement(A))?await(r.getScale==null?void 0:r.getScale(A))||{x:1,y:1}:{x:1,y:1},V=Ve(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:E,offsetParent:A,strategy:s}):E);return{top:(w.top-V.top+_.top)/I.y,bottom:(V.bottom-w.bottom+_.bottom)/I.y,left:(w.left-V.left+_.left)/I.x,right:(V.right-w.right+_.right)/I.x}}const pn=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,l;const{placement:n,middlewareData:r,rects:o,initialPlacement:c,platform:s,elements:f}=e,{mainAxis:a=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:m=!0,...v}=Re(t,e);if((i=r.arrow)!=null&&i.alignmentOffset)return{};const w=me(n),E=be(c),A=me(c)===c,I=await(s.isRTL==null?void 0:s.isRTL(f.floating)),V=u||(A||!m?[Ie(c)]:an(c)),H=_!=="none";!u&&H&&V.push(...dn(c,m,_,I));const $=[c,...V],C=await Pe(e,v),j=[];let g=((l=r.flip)==null?void 0:l.overflows)||[];if(a&&j.push(C[w]),d){const S=fn(n,o,I);j.push(C[S[0]],C[S[1]])}if(g=[...g,{placement:n,overflows:j}],!j.every(S=>S<=0)){var D,pe;const S=(((D=r.flip)==null?void 0:D.index)||0)+1,we=$[S];if(we)return{data:{index:S,overflows:g},reset:{placement:we}};let ne=(pe=g.filter(ee=>ee.overflows[0]<=0).sort((ee,Y)=>ee.overflows[1]-Y.overflows[1])[0])==null?void 0:pe.placement;if(!ne)switch(h){case"bestFit":{var W;const ee=(W=g.filter(Y=>{if(H){const J=be(Y.placement);return J===E||J==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(J=>J>0).reduce((J,Oe)=>J+Oe,0)]).sort((Y,J)=>Y[1]-J[1])[0])==null?void 0:W[0];ee&&(ne=ee);break}case"initialPlacement":ne=c;break}if(n!==ne)return{reset:{placement:ne}}}return{}}}};function ut(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function dt(t){return rn.some(e=>t[e]>=0)}const gn=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:l="referenceHidden",...n}=Re(t,e);switch(l){case"referenceHidden":{const r=await Pe(e,{...n,elementContext:"reference"}),o=ut(r,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:dt(o)}}}case"escaped":{const r=await Pe(e,{...n,altBoundary:!0}),o=ut(r,i.floating);return{data:{escapedOffsets:o,escaped:dt(o)}}}default:return{}}}}};async function bn(t,e){const{placement:i,platform:l,elements:n}=t,r=await(l.isRTL==null?void 0:l.isRTL(n.floating)),o=me(i),c=ze(i),s=be(i)==="y",f=["left","top"].includes(o)?-1:1,a=r&&s?-1:1,d=Re(e,t);let{mainAxis:u,crossAxis:h,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return c&&typeof _=="number"&&(h=c==="end"?_*-1:_),s?{x:h*a,y:u*f}:{x:u*f,y:h*a}}const vn=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,l;const{x:n,y:r,placement:o,middlewareData:c}=e,s=await bn(e,t);return o===((i=c.offset)==null?void 0:i.placement)&&(l=c.arrow)!=null&&l.alignmentOffset?{}:{x:n+s.x,y:r+s.y,data:{...s,placement:o}}}}},kn=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:l,placement:n}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:v=>{let{x:w,y:E}=v;return{x:w,y:E}}},...s}=Re(t,e),f={x:i,y:l},a=await Pe(e,s),d=be(me(n)),u=qt(d);let h=f[u],_=f[d];if(r){const v=u==="y"?"top":"left",w=u==="y"?"bottom":"right",E=h+a[v],A=h-a[w];h=ft(E,h,A)}if(o){const v=d==="y"?"top":"left",w=d==="y"?"bottom":"right",E=_+a[v],A=_-a[w];_=ft(E,_,A)}const m=c.fn({...e,[u]:h,[d]:_});return{...m,data:{x:m.x-i,y:m.y-l}}}}};function ke(t){return jt(t)?(t.nodeName||"").toLowerCase():"#document"}function U(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function te(t){var e;return(e=(jt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function jt(t){return t instanceof Node||t instanceof U(t).Node}function G(t){return t instanceof Element||t instanceof U(t).Element}function x(t){return t instanceof HTMLElement||t instanceof U(t).HTMLElement}function ht(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof U(t).ShadowRoot}function Se(t){const{overflow:e,overflowX:i,overflowY:l,display:n}=Q(t);return/auto|scroll|overlay|hidden|clip/.test(e+l+i)&&!["inline","contents"].includes(n)}function wn(t){return["table","td","th"].includes(ke(t))}function qe(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function tt(t){const e=nt(),i=G(t)?Q(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(l=>(i.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(i.contain||"").includes(l))}function yn(t){let e=ue(t);for(;x(e)&&!ve(e);){if(tt(e))return e;if(qe(e))return null;e=ue(e)}return null}function nt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ve(t){return["html","body","#document"].includes(ke(t))}function Q(t){return U(t).getComputedStyle(t)}function We(t){return G(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ue(t){if(ke(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ht(t)&&t.host||te(t);return ht(e)?e.host:e}function Xt(t){const e=ue(t);return ve(e)?t.ownerDocument?t.ownerDocument.body:t.body:x(e)&&Se(e)?e:Xt(e)}function Ce(t,e,i){var l;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=Xt(t),r=n===((l=t.ownerDocument)==null?void 0:l.body),o=U(n);if(r){const c=$e(o);return e.concat(o,o.visualViewport||[],Se(n)?n:[],c&&i?Ce(c):[])}return e.concat(n,Ce(n,[],i))}function $e(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ut(t){const e=Q(t);let i=parseFloat(e.width)||0,l=parseFloat(e.height)||0;const n=x(t),r=n?t.offsetWidth:i,o=n?t.offsetHeight:l,c=Ne(i)!==r||Ne(l)!==o;return c&&(i=r,l=o),{width:i,height:l,$:c}}function lt(t){return G(t)?t:t.contextElement}function ge(t){const e=lt(t);if(!x(e))return ae(1);const i=e.getBoundingClientRect(),{width:l,height:n,$:r}=Ut(e);let o=(r?Ne(i.width):i.width)/l,c=(r?Ne(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const Cn=ae(0);function Yt(t){const e=U(t);return!nt()||!e.visualViewport?Cn:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function En(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==U(t)?!1:e}function _e(t,e,i,l){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),r=lt(t);let o=ae(1);e&&(l?G(l)&&(o=ge(l)):o=ge(t));const c=En(r,i,l)?Yt(r):ae(0);let s=(n.left+c.x)/o.x,f=(n.top+c.y)/o.y,a=n.width/o.x,d=n.height/o.y;if(r){const u=U(r),h=l&&G(l)?U(l):l;let _=u,m=$e(_);for(;m&&l&&h!==_;){const v=ge(m),w=m.getBoundingClientRect(),E=Q(m),A=w.left+(m.clientLeft+parseFloat(E.paddingLeft))*v.x,I=w.top+(m.clientTop+parseFloat(E.paddingTop))*v.y;s*=v.x,f*=v.y,a*=v.x,d*=v.y,s+=A,f+=I,_=U(m),m=$e(_)}}return Ve({width:a,height:d,x:s,y:f})}function An(t){let{elements:e,rect:i,offsetParent:l,strategy:n}=t;const r=n==="fixed",o=te(l),c=e?qe(e.floating):!1;if(l===o||c&&r)return i;let s={scrollLeft:0,scrollTop:0},f=ae(1);const a=ae(0),d=x(l);if((d||!d&&!r)&&((ke(l)!=="body"||Se(o))&&(s=We(l)),x(l))){const u=_e(l);f=ge(l),a.x=u.x+l.clientLeft,a.y=u.y+l.clientTop}return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-s.scrollLeft*f.x+a.x,y:i.y*f.y-s.scrollTop*f.y+a.y}}function Rn(t){return Array.from(t.getClientRects())}function Jt(t){return _e(te(t)).left+We(t).scrollLeft}function Sn(t){const e=te(t),i=We(t),l=t.ownerDocument.body,n=de(e.scrollWidth,e.clientWidth,l.scrollWidth,l.clientWidth),r=de(e.scrollHeight,e.clientHeight,l.scrollHeight,l.clientHeight);let o=-i.scrollLeft+Jt(t);const c=-i.scrollTop;return Q(l).direction==="rtl"&&(o+=de(e.clientWidth,l.clientWidth)-n),{width:n,height:r,x:o,y:c}}function On(t,e){const i=U(t),l=te(t),n=i.visualViewport;let r=l.clientWidth,o=l.clientHeight,c=0,s=0;if(n){r=n.width,o=n.height;const f=nt();(!f||f&&e==="fixed")&&(c=n.offsetLeft,s=n.offsetTop)}return{width:r,height:o,x:c,y:s}}function Tn(t,e){const i=_e(t,!0,e==="fixed"),l=i.top+t.clientTop,n=i.left+t.clientLeft,r=x(t)?ge(t):ae(1),o=t.clientWidth*r.x,c=t.clientHeight*r.y,s=n*r.x,f=l*r.y;return{width:o,height:c,x:s,y:f}}function mt(t,e,i){let l;if(e==="viewport")l=On(t,i);else if(e==="document")l=Sn(te(t));else if(G(e))l=Tn(e,i);else{const n=Yt(t);l={...e,x:e.x-n.x,y:e.y-n.y}}return Ve(l)}function Kt(t,e){const i=ue(t);return i===e||!G(i)||ve(i)?!1:Q(i).position==="fixed"||Kt(i,e)}function Dn(t,e){const i=e.get(t);if(i)return i;let l=Ce(t,[],!1).filter(c=>G(c)&&ke(c)!=="body"),n=null;const r=Q(t).position==="fixed";let o=r?ue(t):t;for(;G(o)&&!ve(o);){const c=Q(o),s=tt(o);!s&&c.position==="fixed"&&(n=null),(r?!s&&!n:!s&&c.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Se(o)&&!s&&Kt(t,o))?l=l.filter(a=>a!==o):n=c,o=ue(o)}return e.set(t,l),l}function Ln(t){let{element:e,boundary:i,rootBoundary:l,strategy:n}=t;const o=[...i==="clippingAncestors"?qe(e)?[]:Dn(e,this._c):[].concat(i),l],c=o[0],s=o.reduce((f,a)=>{const d=mt(e,a,n);return f.top=de(d.top,f.top),f.right=Le(d.right,f.right),f.bottom=Le(d.bottom,f.bottom),f.left=de(d.left,f.left),f},mt(e,c,n));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function Nn(t){const{width:e,height:i}=Ut(t);return{width:e,height:i}}function In(t,e,i){const l=x(e),n=te(e),r=i==="fixed",o=_e(t,!0,r,e);let c={scrollLeft:0,scrollTop:0};const s=ae(0);if(l||!l&&!r)if((ke(e)!=="body"||Se(n))&&(c=We(e)),l){const d=_e(e,!0,r,e);s.x=d.x+e.clientLeft,s.y=d.y+e.clientTop}else n&&(s.x=Jt(n));const f=o.left+c.scrollLeft-s.x,a=o.top+c.scrollTop-s.y;return{x:f,y:a,width:o.width,height:o.height}}function Ye(t){return Q(t).position==="static"}function _t(t,e){return!x(t)||Q(t).position==="fixed"?null:e?e(t):t.offsetParent}function Gt(t,e){const i=U(t);if(qe(t))return i;if(!x(t)){let n=ue(t);for(;n&&!ve(n);){if(G(n)&&!Ye(n))return n;n=ue(n)}return i}let l=_t(t,e);for(;l&&wn(l)&&Ye(l);)l=_t(l,e);return l&&ve(l)&&Ye(l)&&!tt(l)?i:l||yn(t)||i}const Vn=async function(t){const e=this.getOffsetParent||Gt,i=this.getDimensions,l=await i(t.floating);return{reference:In(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function Pn(t){return Q(t).direction==="rtl"}const Fn={convertOffsetParentRelativeRectToViewportRelativeRect:An,getDocumentElement:te,getClippingRect:Ln,getOffsetParent:Gt,getElementRects:Vn,getClientRects:Rn,getDimensions:Nn,getScale:ge,isElement:G,isRTL:Pn};function Bn(t,e){let i=null,l;const n=te(t);function r(){var c;clearTimeout(l),(c=i)==null||c.disconnect(),i=null}function o(c,s){c===void 0&&(c=!1),s===void 0&&(s=1),r();const{left:f,top:a,width:d,height:u}=t.getBoundingClientRect();if(c||e(),!d||!u)return;const h=Te(a),_=Te(n.clientWidth-(f+d)),m=Te(n.clientHeight-(a+u)),v=Te(f),E={rootMargin:-h+"px "+-_+"px "+-m+"px "+-v+"px",threshold:de(0,Le(1,s))||1};let A=!0;function I(V){const H=V[0].intersectionRatio;if(H!==s){if(!A)return o();H?o(!1,H):l=setTimeout(()=>{o(!1,1e-7)},1e3)}A=!1}try{i=new IntersectionObserver(I,{...E,root:n.ownerDocument})}catch{i=new IntersectionObserver(I,E)}i.observe(t)}return o(!0),r}function Mn(t,e,i,l){l===void 0&&(l={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:s=!1}=l,f=lt(t),a=n||r?[...f?Ce(f):[],...Ce(e)]:[];a.forEach(w=>{n&&w.addEventListener("scroll",i,{passive:!0}),r&&w.addEventListener("resize",i)});const d=f&&c?Bn(f,i):null;let u=-1,h=null;o&&(h=new ResizeObserver(w=>{let[E]=w;E&&E.target===f&&h&&(h.unobserve(e),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var A;(A=h)==null||A.observe(e)})),i()}),f&&!s&&h.observe(f),h.observe(e));let _,m=s?_e(t):null;s&&v();function v(){const w=_e(t);m&&(w.x!==m.x||w.y!==m.y||w.width!==m.width||w.height!==m.height)&&i(),m=w,_=requestAnimationFrame(v)}return i(),()=>{var w;a.forEach(E=>{n&&E.removeEventListener("scroll",i),r&&E.removeEventListener("resize",i)}),d==null||d(),(w=h)==null||w.disconnect(),h=null,s&&cancelAnimationFrame(_)}}const zn=vn,qn=kn,Wn=pn,Hn=gn,jn=(t,e,i)=>{const l=new Map,n={platform:Fn,...i},r={...n.platform,_c:l};return _n(t,e,{...n,platform:r})};function Xn(t){let e,i;const l={autoUpdate:!0};let n=t;const r=a=>({...l,...t||{},...a||{}}),o=a=>{e&&i&&(n=r(a),jn(e,i,n).then(d=>{Object.assign(i.style,{position:d.strategy,left:`${d.x}px`,top:`${d.y}px`}),n!=null&&n.onComputed&&n.onComputed(d)}))},c=a=>{if("subscribe"in a)return f(a),{};e=a,o()},s=(a,d)=>{let u;i=a,n=r(d),setTimeout(()=>o(d),0),o(d);const h=()=>{u&&(u(),u=void 0)},_=({autoUpdate:m}=n||{})=>{h(),m!==!1&&Zt().then(()=>Mn(e,i,()=>o(n),m===!0?{}:m))};return u=_(),{update(m){o(m),u=_(m)},destroy(){h()}}},f=a=>{const d=a.subscribe(u=>{e===void 0?(e=u,o()):(Object.assign(e,u),o())});Qt(d)};return[c,s,o]}function pt(t,e,i){const l=t.slice();return l[22]=e[i],l[23]=e,l[24]=i,l}function Je(t){const e=t.slice(),i=e[5](e[0]["@id"]);return e[21]=i,e}function gt(t){let e,i,l,n,r=Z(t[21]),o=[];for(let s=0;s<r.length;s+=1)o[s]=kt(pt(t,r,s));const c=s=>y(o[s],1,1,()=>{o[s]=null});return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=N(s,"DIV",{class:!0});var f=T(e);for(let a=0;a<o.length;a+=1)o[a].l(f);f.forEach(k),this.h()},h(){p(e,"class","layer--popover svelte-1k28b8u")},m(s,f){O(s,e,f);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t[19](e),i=!0,l||(n=[Ke(t[8].call(null,e)),Ke(nn.call(null,e)),K(e,"outsideclick",t[9])],l=!0)},p(s,f){if(f&7281){r=Z(s[21]);let a;for(a=0;a<r.length;a+=1){const d=pt(s,r,a);o[a]?(o[a].p(d,f),b(o[a],1)):(o[a]=kt(d),o[a].c(),b(o[a],1),o[a].m(e,null))}for(B(),a=r.length;a<o.length;a+=1)c(a);M()}},i(s){if(!i){for(let f=0;f<r.length;f+=1)b(o[f]);i=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)y(o[f]);i=!1},d(s){s&&k(e),Ae(o,s),t[19](null),l=!1,Fe(n)}}}function bt(t){let e,i,l,n;const r=[Yn,Un],o=[];function c(s,f){return s[4]!==s[22].id?0:1}return e=c(t),i=o[e]=r[e](t),{c(){i.c(),l=F()},l(s){i.l(s),l=F()},m(s,f){o[e].m(s,f),O(s,l,f),n=!0},p(s,f){let a=e;e=c(s),e===a?o[e].p(s,f):(B(),y(o[a],1,1,()=>{o[a]=null}),M(),i=o[e],i?i.p(s,f):(i=o[e]=r[e](s),i.c()),b(i,1),i.m(l.parentNode,l))},i(s){n||(b(i),n=!0)},o(s){y(i),n=!1},d(s){s&&k(l),o[e].d(s)}}}function Un(t){let e,i,l,n,r,o,c,s,f,a,d,u;function h(){t[17].call(i,t[23],t[24])}function _(){return t[18](t[22])}return r=new Ze({props:{size:33,iconName:"check",description:"Save Description",title:"Save Description"}}),r.$on("iconClick",_),c=new Ze({props:{size:33,iconName:"close",description:"close",title:"close"}}),c.$on("iconClick",t[12]),{c(){e=L("div"),i=L("textarea"),l=z(),n=L("div"),oe(r.$$.fragment),o=z(),oe(c.$$.fragment),s=z(),this.h()},l(m){e=N(m,"DIV",{class:!0,style:!0,id:!0});var v=T(e);i=N(v,"TEXTAREA",{id:!0,name:!0,class:!0}),T(i).forEach(k),l=q(v),n=N(v,"DIV",{class:!0});var w=T(n);re(r.$$.fragment,w),o=q(w),re(c.$$.fragment,w),w.forEach(k),s=q(v),v.forEach(k),this.h()},h(){p(i,"id","layer-description"),p(i,"name","Description"),i.required=!0,p(i,"class","svelte-1k28b8u"),p(n,"class","popover-btns svelte-1k28b8u"),p(e,"class","layer--comment svelte-1k28b8u"),X(e,"--itemColor",t[22].color),p(e,"id",f=t[22].id)},m(m,v){O(m,e,v),R(e,i),rt(i,t[22].comment),R(e,l),R(e,n),se(r,n,null),R(n,o),se(c,n,null),R(e,s),a=!0,d||(u=K(i,"input",h),d=!0)},p(m,v){t=m,v&33&&rt(i,t[22].comment),(!a||v&33)&&X(e,"--itemColor",t[22].color),(!a||v&33&&f!==(f=t[22].id))&&p(e,"id",f)},i(m){a||(b(r.$$.fragment,m),b(c.$$.fragment,m),a=!0)},o(m){y(r.$$.fragment,m),y(c.$$.fragment,m),a=!1},d(m){m&&k(e),ce(r),ce(c),d=!1,u()}}}function Yn(t){let e,i,l=t[22].comment+"",n,r,o,c,s=!t[6].isReadonly&&vt(t);return{c(){e=L("div"),i=L("pre"),n=le(l),r=z(),s&&s.c(),o=z(),this.h()},l(f){e=N(f,"DIV",{class:!0,style:!0});var a=T(e);i=N(a,"PRE",{class:!0});var d=T(i);n=ie(d,l),d.forEach(k),r=q(a),s&&s.l(a),o=q(a),a.forEach(k),this.h()},h(){p(i,"class","popover--text svelte-1k28b8u"),p(e,"class","layer--comment svelte-1k28b8u"),X(e,"--itemColor",t[22].color)},m(f,a){O(f,e,a),R(e,i),R(i,n),R(e,r),s&&s.m(e,null),R(e,o),c=!0},p(f,a){(!c||a&33)&&l!==(l=f[22].comment+"")&&he(n,l),f[6].isReadonly?s&&(B(),y(s,1,1,()=>{s=null}),M()):s?(s.p(f,a),a&64&&b(s,1)):(s=vt(f),s.c(),b(s,1),s.m(e,o)),(!c||a&33)&&X(e,"--itemColor",f[22].color)},i(f){c||(b(s),c=!0)},o(f){y(s),c=!1},d(f){f&&k(e),s&&s.d()}}}function vt(t){let e,i,l,n,r,o;l=new Ze({props:{size:33,iconName:"edit",description:"Edit Description",title:"Edit Description",pathColor:"black"}});function c(){return t[15](t[22])}function s(...f){return t[16](t[22],...f)}return{c(){e=L("div"),i=L("span"),oe(l.$$.fragment),this.h()},l(f){e=N(f,"DIV",{class:!0,role:!0,tabindex:!0});var a=T(e);i=N(a,"SPAN",{});var d=T(i);re(l.$$.fragment,d),d.forEach(k),a.forEach(k),this.h()},h(){p(e,"class","edit-btn svelte-1k28b8u"),p(e,"role","button"),p(e,"tabindex","0")},m(f,a){O(f,e,a),R(e,i),se(l,i,null),n=!0,r||(o=[K(e,"click",c),K(e,"keyup",s)],r=!0)},p(f,a){t=f},i(f){n||(b(l.$$.fragment,f),n=!0)},o(f){y(l.$$.fragment,f),n=!1},d(f){f&&k(e),ce(l),r=!1,Fe(o)}}}function kt(t){let e,i,l=t[22].comment!==""&&bt(t);return{c(){l&&l.c(),e=F()},l(n){l&&l.l(n),e=F()},m(n,r){l&&l.m(n,r),O(n,e,r),i=!0},p(n,r){n[22].comment!==""?l?(l.p(n,r),r&33&&b(l,1)):(l=bt(n),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(B(),y(l,1,1,()=>{l=null}),M())},i(n){i||(b(l),i=!0)},o(n){y(l),i=!1},d(n){n&&k(e),l&&l.d(n)}}}function Jn(t){let e,i,l=t[0]["rdfs:label"]+"",n,r,o,c,s,f=t[1]&&gt(Je(t));return{c(){e=L("div"),i=L("a"),n=le(l),r=z(),f&&f.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var d=T(e);i=N(d,"A",{class:!0,href:!0});var u=T(i);n=ie(u,l),u.forEach(k),r=q(d),f&&f.l(d),d.forEach(k),this.h()},h(){p(i,"class","layer-trigger"),p(i,"href",null),p(e,"class","layer-container")},m(a,d){O(a,e,d),R(e,i),R(i,n),t[14](i),R(e,r),f&&f.m(e,null),o=!0,c||(s=[Ke(t[7].call(null,i)),K(i,"click",t[9])],c=!0)},p(a,[d]){(!o||d&1)&&l!==(l=a[0]["rdfs:label"]+"")&&he(n,l),a[1]?f?(f.p(Je(a),d),d&2&&b(f,1)):(f=gt(Je(a)),f.c(),b(f,1),f.m(e,null)):f&&(B(),y(f,1,1,()=>{f=null}),M())},i(a){o||(b(f),o=!0)},o(a){y(f),o=!1},d(a){a&&k(e),t[14](null),f&&f.d(),c=!1,Fe(s)}}}function Kn(t,e,i){let l;Ge(t,Qe,C=>i(6,l=C));let{leaf:n}=e,{leafClick:r}=e,o,c,s,f,a="";const[d,u]=Xn({strategy:"absolute",placement:"right",middleware:[zn(20),Wn(),qn(),Hn()],onComputed({middlewareData:C}){C.hide&&s&&Object.assign(s.style,{visibility:C.hide.referenceHidden?"hidden":"visible"})}}),h=C=>{i(1,o=!o),r(C,n,null)},_=C=>{const j=l.profiles[l.selectedProfile].includedLayers;return ln(j,C,l[l.selectedStore])},m=C=>{i(4,f=C)},v=C=>{Qe.saveLayerTechniqueComment(C,n["@id"],a,tn.layers),w()},w=()=>{i(4,f=null),a=""};function E(C){ot[C?"unshift":"push"](()=>{c=C,i(2,c)})}const A=C=>m(C.id),I=(C,j)=>on(j,m,C.id);function V(C,j){C[j].comment=this.value,i(5,_),i(0,n)}const H=C=>v(C.id);function $(C){ot[C?"unshift":"push"](()=>{s=C,i(3,s)})}return t.$$set=C=>{"leaf"in C&&i(0,n=C.leaf),"leafClick"in C&&i(13,r=C.leafClick)},[n,o,c,s,f,_,l,d,u,h,m,v,w,r,E,A,I,V,H,$]}class Gn extends Be{constructor(e){super(),Me(this,e,Kn,Jn,Ee,{leaf:0,leafClick:13})}}function wt(t,e,i){const l=t.slice();return l[12]=e[i],l}function yt(t){let e,i=t[0]["d3f:ref-count"]["@value"]+"",l,n;return{c(){e=L("span"),l=le(i),this.h()},l(r){e=N(r,"SPAN",{class:!0,title:!0});var o=T(e);l=ie(o,i),o.forEach(k),this.h()},h(){p(e,"class","ref-count svelte-1bzm6qf"),p(e,"title",n="This technique has "+t[0]["d3f:ref-count"]["@value"]+" public references.")},m(r,o){O(r,e,o),R(e,l)},p(r,o){o&1&&i!==(i=r[0]["d3f:ref-count"]["@value"]+"")&&he(l,i),o&1&&n!==(n="This technique has "+r[0]["d3f:ref-count"]["@value"]+" public references.")&&p(e,"title",n)},d(r){r&&k(e)}}}function Qn(t){let e,i=t[0]["rdfs:label"]+"",l,n,r,o;return{c(){e=L("a"),l=le(i),this.h()},l(c){e=N(c,"A",{href:!0});var s=T(e);l=ie(s,i),s.forEach(k),this.h()},h(){p(e,"href",n="/technique/"+t[0]["@id"])},m(c,s){O(c,e,s),R(e,l),r||(o=K(e,"click",et(t[9])),r=!0)},p(c,s){s&1&&i!==(i=c[0]["rdfs:label"]+"")&&he(l,i),s&1&&n!==(n="/technique/"+c[0]["@id"])&&p(e,"href",n)},i:ye,o:ye,d(c){c&&k(e),r=!1,o()}}}function Zn(t){let e,i;return e=new Gn({props:{leaf:t[0],leafClick:t[8]}}),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const r={};n&1&&(r.leaf=l[0]),e.$set(r)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Ct(t){let e,i,l=Z(fe(t[0].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Et(wt(t,l,o));const r=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&19){l=Z(fe(o[0].children));let s;for(s=0;s<l.length;s+=1){const f=wt(o,l,s);n[s]?(n[s].p(f,c),b(n[s],1)):(n[s]=Et(f),n[s].c(),b(n[s],1),n[s].m(e.parentNode,e))}for(B(),s=l.length;s<n.length;s+=1)r(s);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)b(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ae(n,o)}}}function Et(t){let e,i;return e=new it({props:{leaf:t[12],depth:t[1]+1,recursive:!0,parent:t[0]["@id"],theme:t[4]}}),e.$on("elementClick",t[10]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const r={};n&1&&(r.leaf=l[12]),n&2&&(r.depth=l[1]+1),n&1&&(r.parent=l[0]["@id"]),n&16&&(r.theme=l[4]),e.$set(r)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function xn(t){let e,i,l,n,r,o,c,s,f=t[0]["d3f:ref-count"]&&t[6].display_refcount&&yt(t);const a=[Zn,Qn],d=[];function u(_,m){return _[7].matrixCommentMode?0:1}n=u(t),r=d[n]=a[n](t);let h=t[0].children&&Ct(t);return{c(){f&&f.c(),e=z(),i=L("div"),l=L("div"),r.c(),o=z(),h&&h.c(),c=F(),this.h()},l(_){f&&f.l(_),e=q(_),i=N(_,"DIV",{style:!0,class:!0,"data-parent":!0});var m=T(i);l=N(m,"DIV",{style:!0,class:!0});var v=T(l);r.l(v),v.forEach(k),m.forEach(k),o=q(_),h&&h.l(_),c=F(),this.h()},h(){var _,m;p(l,"style",""),p(l,"class","svelte-1bzm6qf"),P(l,"indent",t[2]),X(i,"--layer-color",((_=t[0].classes)==null?void 0:_.color)||t[5]),X(i,"--layer-select",((m=t[0].classes)==null?void 0:m.select)||""),p(i,"class","tree-leaf svelte-1bzm6qf"),p(i,"data-parent",t[3]),P(i,"poster_border",t[4]=="poster"),P(i,"sub-leaf",t[2]),P(i,"hidden",!t[0].hasOwnProperty("d3f:ref-count"))},m(_,m){f&&f.m(_,m),O(_,e,m),O(_,i,m),R(i,l),d[n].m(l,null),O(_,o,m),h&&h.m(_,m),O(_,c,m),s=!0},p(_,[m]){var w,E;_[0]["d3f:ref-count"]&&_[6].display_refcount?f?f.p(_,m):(f=yt(_),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);let v=n;n=u(_),n===v?d[n].p(_,m):(B(),y(d[v],1,1,()=>{d[v]=null}),M(),r=d[n],r?r.p(_,m):(r=d[n]=a[n](_),r.c()),b(r,1),r.m(l,null)),(!s||m&4)&&P(l,"indent",_[2]),(!s||m&33)&&X(i,"--layer-color",((w=_[0].classes)==null?void 0:w.color)||_[5]),(!s||m&1)&&X(i,"--layer-select",((E=_[0].classes)==null?void 0:E.select)||""),(!s||m&8)&&p(i,"data-parent",_[3]),(!s||m&16)&&P(i,"poster_border",_[4]=="poster"),(!s||m&4)&&P(i,"sub-leaf",_[2]),(!s||m&1)&&P(i,"hidden",!_[0].hasOwnProperty("d3f:ref-count")),_[0].children?h?(h.p(_,m),m&1&&b(h,1)):(h=Ct(_),h.c(),b(h,1),h.m(c.parentNode,c)):h&&(B(),y(h,1,1,()=>{h=null}),M())},i(_){s||(b(r),b(h),s=!0)},o(_){y(r),y(h),s=!1},d(_){_&&(k(e),k(i),k(o),k(c)),f&&f.d(_),d[n].d(),h&&h.d(_)}}}function $n(t,e,i){let l,n,r;Ge(t,en,m=>i(6,n=m)),Ge(t,Qe,m=>i(7,r=m));let{leaf:o}=e,{depth:c=0}=e,{recursive:s=!1}=e,{parent:f=""}=e,{theme:a}=e;const d=zt(),u=(m,v,w)=>{d("elementClick",{event:m,element:v,href:w})},h=m=>u(m,o,`/technique/${o["@id"]}`);function _(m){De.call(this,t,m)}return t.$$set=m=>{"leaf"in m&&i(0,o=m.leaf),"depth"in m&&i(1,c=m.depth),"recursive"in m&&i(2,s=m.recursive),"parent"in m&&i(3,f=m.parent),"theme"in m&&i(4,a=m.theme)},t.$$.update=()=>{t.$$.dirty&4&&i(5,l=s?"#f3f3f3":"white")},[o,c,s,f,a,l,n,r,u,h,_]}class it extends Be{constructor(e){super(),Me(this,e,$n,xn,Ee,{leaf:0,depth:1,recursive:2,parent:3,theme:4})}}const el=t=>({}),At=t=>({});function Rt(t,e,i){const l=t.slice();return l[23]=e[i],l}function St(t,e,i){const l=t.slice();return l[26]=e[i],l}function Ot(t,e,i){const l=t.slice();return l[26]=e[i],l}const tl=t=>({}),Tt=t=>({});function Dt(t){let e,i,l=Z(t[0]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Mt(Rt(t,l,o));const r=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){e=L("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=N(o,"DIV",{class:!0});var c=T(e);for(let s=0;s<n.length;s+=1)n[s].l(c);c.forEach(k),this.h()},h(){p(e,"class","tree-trunk svelte-1le6etk"),P(e,"tree-trunk-first",!t[2])},m(o,c){O(o,e,c);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);i=!0},p(o,c){if(c&1019){l=Z(o[0]);let s;for(s=0;s<l.length;s+=1){const f=Rt(o,l,s);n[s]?(n[s].p(f,c),b(n[s],1)):(n[s]=Mt(f),n[s].c(),b(n[s],1),n[s].m(e,null))}for(B(),s=l.length;s<n.length;s+=1)r(s);M()}(!i||c&4)&&P(e,"tree-trunk-first",!o[2])},i(o){if(!i){for(let c=0;c<l.length;c+=1)b(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ae(n,o)}}}function Lt(t){let e=(t[5],t[6]),i,l,n=Vt(t);return{c(){n.c(),i=F()},l(r){n.l(r),i=F()},m(r,o){n.m(r,o),O(r,i,o),l=!0},p(r,o){o&96&&Ee(e,e=(r[5],r[6]))?(B(),y(n,1,1,ye),M(),n=Vt(r),n.c(),b(n,1),n.m(i.parentNode,i)):n.p(r,o)},i(r){l||(b(n),l=!0)},o(r){y(n),l=!1},d(r){r&&k(i),n.d(r)}}}function nl(t){let e,i,l=t[23]["rdfs:label"]+"",n,r,o,c,s;function f(...a){return t[17](t[23],...a)}return{c(){e=L("div"),i=L("a"),n=le(l),this.h()},l(a){e=N(a,"DIV",{class:!0});var d=T(e);i=N(d,"A",{href:!0,class:!0});var u=T(i);n=ie(u,l),u.forEach(k),d.forEach(k),this.h()},h(){p(i,"href",r="/technique/"+t[23]["@id"]),p(i,"class","svelte-1le6etk"),p(e,"class",o="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk"),P(e,"poster_border",t[4]==="poster")},m(a,d){O(a,e,d),R(e,i),R(i,n),c||(s=K(i,"click",et(f)),c=!0)},p(a,d){t=a,d&1&&l!==(l=t[23]["rdfs:label"]+"")&&he(n,l),d&1&&r!==(r="/technique/"+t[23]["@id"])&&p(i,"href",r),d&2&&o!==(o="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk")&&p(e,"class",o),d&18&&P(e,"poster_border",t[4]==="poster")},d(a){a&&k(e),c=!1,s()}}}function ll(t){let e,i,l=t[23]["rdfs:label"]+"",n,r,o,c,s,f,a,d,u=t[23]["rdfs:label"]+"",h,_,m,v,w,E,A,I,V="+",H,$,C;function j(){return t[13](t[23])}function g(){return t[14](t[23])}function D(...W){return t[15](t[23],...W)}function pe(){return t[16](t[23])}return{c(){e=L("div"),i=L("div"),n=le(l),o=z(),c=L("div"),s=le("−"),a=z(),d=L("a"),h=le(u),v=z(),w=L("div"),E=L("div"),A=L("div"),I=L("a"),I.textContent=V,this.h()},l(W){e=N(W,"DIV",{class:!0});var S=T(e);i=N(S,"DIV",{class:!0,title:!0});var we=T(i);n=ie(we,l),we.forEach(k),o=q(S),c=N(S,"DIV",{class:!0,title:!0});var ne=T(c);s=ie(ne,"−"),ne.forEach(k),a=q(S),d=N(S,"A",{class:!0,href:!0});var ee=T(d);h=ie(ee,u),ee.forEach(k),S.forEach(k),v=q(W),w=N(W,"DIV",{class:!0});var Y=T(w);E=N(Y,"DIV",{class:!0});var J=T(E);A=N(J,"DIV",{class:!0,title:!0});var Oe=T(A);I=N(Oe,"A",{class:!0,"data-svelte-h":!0}),$t(I)!=="svelte-1h7ue1"&&(I.textContent=V),Oe.forEach(k),J.forEach(k),Y.forEach(k),this.h()},h(){p(i,"class","fork-open svelte-1le6etk"),p(i,"title",r="Expand "+t[23]["rdfs:label"]),P(i,"hide",!t[9](t[23])),p(c,"class","button-collapse small-button left svelte-1le6etk"),p(c,"title",f="Collapse "+t[23]["rdfs:label"]),P(c,"hide",t[9](t[23])),p(d,"class","center svelte-1le6etk"),p(d,"href",_="/tactic/"+t[23]["@id"]),P(d,"hide",t[9](t[23])),p(e,"class",m="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk"),P(e,"poster_border",t[4]=="poster"),p(I,"class","button-open small-button svelte-1le6etk"),p(A,"class","tree-branch-fork tree-level-1 svelte-1le6etk"),p(A,"title",H="Expand "+t[23]["rdfs:label"]),p(E,"class","tree-branch svelte-1le6etk"),p(w,"class","tree-trunk svelte-1le6etk"),P(w,"hide",!t[9](t[23]))},m(W,S){O(W,e,S),R(e,i),R(i,n),R(e,o),R(e,c),R(c,s),R(e,a),R(e,d),R(d,h),O(W,v,S),O(W,w,S),R(w,E),R(E,A),R(A,I),$||(C=[K(i,"click",j),K(c,"click",g),K(d,"click",et(D)),K(A,"click",pe)],$=!0)},p(W,S){t=W,S&1&&l!==(l=t[23]["rdfs:label"]+"")&&he(n,l),S&1&&r!==(r="Expand "+t[23]["rdfs:label"])&&p(i,"title",r),S&513&&P(i,"hide",!t[9](t[23])),S&1&&f!==(f="Collapse "+t[23]["rdfs:label"])&&p(c,"title",f),S&513&&P(c,"hide",t[9](t[23])),S&1&&u!==(u=t[23]["rdfs:label"]+"")&&he(h,u),S&1&&_!==(_="/tactic/"+t[23]["@id"])&&p(d,"href",_),S&513&&P(d,"hide",t[9](t[23])),S&2&&m!==(m="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk")&&p(e,"class",m),S&18&&P(e,"poster_border",t[4]=="poster"),S&1&&H!==(H="Expand "+t[23]["rdfs:label"])&&p(A,"title",H),S&513&&P(w,"hide",!t[9](t[23]))},d(W){W&&(k(e),k(v),k(w)),$=!1,Fe(C)}}}function il(t){let e,i,l=Z(fe(t[23].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Nt(Ot(t,l,o));const r=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&17){l=Z(fe(o[23].children));let s;for(s=0;s<l.length;s+=1){const f=Ot(o,l,s);n[s]?(n[s].p(f,c),b(n[s],1)):(n[s]=Nt(f),n[s].c(),b(n[s],1),n[s].m(e.parentNode,e))}for(B(),s=l.length;s<n.length;s+=1)r(s);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)b(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ae(n,o)}}}function ol(t){let e,i,l=t[23].children&&It(t);return{c(){l&&l.c(),e=F()},l(n){l&&l.l(n),e=F()},m(n,r){l&&l.m(n,r),O(n,e,r),i=!0},p(n,r){n[23].children?l?(l.p(n,r),r&1&&b(l,1)):(l=It(n),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(B(),y(l,1,1,()=>{l=null}),M())},i(n){i||(b(l),i=!0)},o(n){y(l),i=!1},d(n){n&&k(e),l&&l.d(n)}}}function Nt(t){let e,i;return e=new it({props:{leaf:t[26],theme:t[4]}}),e.$on("elementClick",t[19]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const r={};n&1&&(r.leaf=l[26]),n&16&&(r.theme=l[4]),e.$set(r)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function It(t){let e,i;return e=new cl({props:{tree:fe(t[23].children),treeLevel:t[1]+1,recursive:!0,theme:t[4]}}),e.$on("elementClick",t[18]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const r={};n&1&&(r.tree=fe(l[23].children)),n&2&&(r.treeLevel=l[1]+1),n&16&&(r.theme=l[4]),e.$set(r)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Vt(t){let e,i,l,n,r;function o(u,h){return u[1]==0?ll:nl}let c=o(t),s=c(t);const f=[ol,il],a=[];function d(u,h){return u[1]<u[3]?0:u[23].children?1:-1}return~(l=d(t))&&(n=a[l]=f[l](t)),{c(){e=L("div"),s.c(),i=z(),n&&n.c(),this.h()},l(u){e=N(u,"DIV",{class:!0});var h=T(e);s.l(h),i=q(h),n&&n.l(h),h.forEach(k),this.h()},h(){p(e,"class","tree-branch svelte-1le6etk"),P(e,"hide_sibling",t[1]==0&&t[9](t[23]))},m(u,h){O(u,e,h),s.m(e,null),R(e,i),~l&&a[l].m(e,null),r=!0},p(u,h){c===(c=o(u))&&s?s.p(u,h):(s.d(1),s=c(u),s&&(s.c(),s.m(e,i)));let _=l;l=d(u),l===_?~l&&a[l].p(u,h):(n&&(B(),y(a[_],1,1,()=>{a[_]=null}),M()),~l?(n=a[l],n?n.p(u,h):(n=a[l]=f[l](u),n.c()),b(n,1),n.m(e,null)):n=null),(!r||h&515)&&P(e,"hide_sibling",u[1]==0&&u[9](u[23]))},i(u){r||(b(n),r=!0)},o(u){y(n),r=!1},d(u){u&&k(e),s.d(),~l&&a[l].d()}}}function Pt(t){let e,i,l,n=t[23].children&&Ft(t);return{c(){e=L("div"),n&&n.c(),i=z(),this.h()},l(r){e=N(r,"DIV",{class:!0});var o=T(e);n&&n.l(o),i=q(o),o.forEach(k),this.h()},h(){p(e,"class","tree-branch test svelte-1le6etk")},m(r,o){O(r,e,o),n&&n.m(e,null),R(e,i),l=!0},p(r,o){r[23].children?n?(n.p(r,o),o&1&&b(n,1)):(n=Ft(r),n.c(),b(n,1),n.m(e,i)):n&&(B(),y(n,1,1,()=>{n=null}),M())},i(r){l||(b(n),l=!0)},o(r){y(n),l=!1},d(r){r&&k(e),n&&n.d()}}}function Ft(t){let e,i,l=Z(fe(t[23].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Bt(St(t,l,o));const r=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&17){l=Z(fe(o[23].children));let s;for(s=0;s<l.length;s+=1){const f=St(o,l,s);n[s]?(n[s].p(f,c),b(n[s],1)):(n[s]=Bt(f),n[s].c(),b(n[s],1),n[s].m(e.parentNode,e))}for(B(),s=l.length;s<n.length;s+=1)r(s);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)b(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ae(n,o)}}}function Bt(t){let e,i;return e=new it({props:{leaf:t[26],theme:t[4]}}),e.$on("elementClick",t[20]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const r={};n&1&&(r.leaf=l[26]),n&16&&(r.theme=l[4]),e.$set(r)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Mt(t){let e,i,l,n=t[1]<=t[3]&&Lt(t),r=t[1]>t[3]&&Pt(t);return{c(){n&&n.c(),e=z(),r&&r.c(),i=F()},l(o){n&&n.l(o),e=q(o),r&&r.l(o),i=F()},m(o,c){n&&n.m(o,c),O(o,e,c),r&&r.m(o,c),O(o,i,c),l=!0},p(o,c){o[1]<=o[3]?n?(n.p(o,c),c&10&&b(n,1)):(n=Lt(o),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(B(),y(n,1,1,()=>{n=null}),M()),o[1]>o[3]?r?(r.p(o,c),c&10&&b(r,1)):(r=Pt(o),r.c(),b(r,1),r.m(i.parentNode,i)):r&&(B(),y(r,1,1,()=>{r=null}),M())},i(o){l||(b(n),b(r),l=!0)},o(o){y(n),y(r),l=!1},d(o){o&&(k(e),k(i)),n&&n.d(o),r&&r.d(o)}}}function rl(t){let e,i,l,n;const r=t[12].above,o=He(r,t,t[11],Tt);let c=t[0].length>0&&Dt(t);const s=t[12].default,f=He(s,t,t[11],null),a=t[12].below,d=He(a,t,t[11],At);return{c(){o&&o.c(),e=z(),c&&c.c(),i=z(),f&&f.c(),l=z(),d&&d.c()},l(u){o&&o.l(u),e=q(u),c&&c.l(u),i=q(u),f&&f.l(u),l=q(u),d&&d.l(u)},m(u,h){o&&o.m(u,h),O(u,e,h),c&&c.m(u,h),O(u,i,h),f&&f.m(u,h),O(u,l,h),d&&d.m(u,h),n=!0},p(u,[h]){o&&o.p&&(!n||h&2048)&&je(o,r,u,u[11],n?Ue(r,u[11],h,tl):Xe(u[11]),Tt),u[0].length>0?c?(c.p(u,h),h&1&&b(c,1)):(c=Dt(u),c.c(),b(c,1),c.m(i.parentNode,i)):c&&(B(),y(c,1,1,()=>{c=null}),M()),f&&f.p&&(!n||h&2048)&&je(f,s,u,u[11],n?Ue(s,u[11],h,null):Xe(u[11]),null),d&&d.p&&(!n||h&2048)&&je(d,a,u,u[11],n?Ue(a,u[11],h,el):Xe(u[11]),At)},i(u){n||(b(o,u),b(c),b(f,u),b(d,u),n=!0)},o(u){y(o,u),y(c),y(f,u),y(d,u),n=!1},d(u){u&&(k(e),k(i),k(l)),o&&o.d(u),c&&c.d(u),f&&f.d(u),d&&d.d(u)}}}function sl(t,e,i){let{$$slots:l={},$$scope:n}=e,{tree:r}=e,{treeLevel:o=0}=e,{recursive:c=!1}=e,{row_depth:s=1}=e,{theme:f}=e,{min_display_priority:a=0}=e;const d=zt();function u(g,D,pe){d("elementClick",{event:g,element:D,href:pe})}o>0&&r.sort((g,D)=>g["@id"].localeCompare(D["@id"]));let h=new Set,_=new Set;xt(async()=>{if(localStorage.getItem("show_set"))try{JSON.parse(localStorage.getItem("show_set")).forEach(g=>h.add(g))}catch{console.warn("Failed to load show_set from localeStorage, deleting show_set"),localStorage.removeItem("show_set"),i(5,h)}if(localStorage.getItem("hide_set"))try{JSON.parse(localStorage.getItem("hide_set")).forEach(g=>_.add(g)),i(6,_)}catch{console.warn("Failed to load hide_set from localeStorage, deleting hide_set"),localStorage.removeItem("hide_set")}});function m(g){if(g["d3f:display-order"]){if(g["d3f:display-order"]["@value"]>=a)return!0}else return!1}function v(g){let D=g["@id"];console.debug("before"),console.debug("show: "+Array.from(h)),console.debug("hide: "+Array.from(_)),h.has(D)?(h.delete(D),_.add(D)):_.has(D)?(h.add(D),_.delete(D)):_.has(D)&&h.has(D)?(h.delete(D),_.delete(D)):!_.has(D)&&!h.has(D)&&m(g)?_.add(D):h.add(D),i(5,h),i(6,_),h&&localStorage.setItem("show_set",JSON.stringify([...h])),_&&localStorage.setItem("hide_set",JSON.stringify([..._])),console.debug("after"),console.debug("show: "+Array.from(h)),console.debug("hide: "+Array.from(_))}function w(g){return m(g),h.has(g["@id"]),_.has(g["@id"]),!((m(g)||h.has(g["@id"]))&&!_.has(g["@id"]))}const E=g=>v(g),A=g=>v(g),I=(g,D)=>u(D,g,`/tactic/${g["@id"]}`),V=g=>v(g),H=(g,D)=>u(D,g,`/technique/${g["@id"]}`);function $(g){De.call(this,t,g)}function C(g){De.call(this,t,g)}function j(g){De.call(this,t,g)}return t.$$set=g=>{"tree"in g&&i(0,r=g.tree),"treeLevel"in g&&i(1,o=g.treeLevel),"recursive"in g&&i(2,c=g.recursive),"row_depth"in g&&i(3,s=g.row_depth),"theme"in g&&i(4,f=g.theme),"min_display_priority"in g&&i(10,a=g.min_display_priority),"$$scope"in g&&i(11,n=g.$$scope)},[r,o,c,s,f,h,_,u,v,w,a,n,l,E,A,I,V,H,$,C,j]}class cl extends Be{constructor(e){super(),Me(this,e,sl,rl,Ee,{tree:0,treeLevel:1,recursive:2,row_depth:3,theme:4,min_display_priority:10})}}function fl(t){let e,i,l;return{c(){e=st("svg"),i=st("circle"),this.h()},l(n){e=ct(n,"svg",{height:!0,width:!0,style:!0,class:!0,viewBox:!0});var r=T(e);i=ct(r,"circle",{role:!0,cx:!0,cy:!0,r:!0,stroke:!0,fill:!0,"stroke-width":!0,"stroke-dasharray":!0,"stroke-linecap":!0}),T(i).forEach(k),r.forEach(k),this.h()},h(){p(i,"role","presentation"),p(i,"cx","16"),p(i,"cy","16"),p(i,"r",t[4]),p(i,"stroke",t[2]),p(i,"fill","none"),p(i,"stroke-width",t[3]),p(i,"stroke-dasharray",l=t[7]+",100"),p(i,"stroke-linecap","round"),p(e,"height",t[0]),p(e,"width",t[0]),X(e,"animation-duration",t[1]+"ms"),X(e,"display",t[5]),X(e,"margin",t[6]),p(e,"class","svelte-spinner svelte-1195q9f"),p(e,"viewBox","0 0 32 32")},m(n,r){O(n,e,r),R(e,i)},p(n,[r]){r&16&&p(i,"r",n[4]),r&4&&p(i,"stroke",n[2]),r&8&&p(i,"stroke-width",n[3]),r&128&&l!==(l=n[7]+",100")&&p(i,"stroke-dasharray",l),r&1&&p(e,"height",n[0]),r&1&&p(e,"width",n[0]),r&2&&X(e,"animation-duration",n[1]+"ms"),r&32&&X(e,"display",n[5]),r&64&&X(e,"margin",n[6])},i:ye,o:ye,d(n){n&&k(e)}}}function al(t,e,i){let{size:l=25}=e,{speed:n=750}=e,{color:r="rgba(0,0,0,0.4)"}=e,{thickness:o=2}=e,{gap:c=40}=e,{radius:s=10}=e,{display:f="block"}=e,{margin:a="auto"}=e,d;return t.$$set=u=>{"size"in u&&i(0,l=u.size),"speed"in u&&i(1,n=u.speed),"color"in u&&i(2,r=u.color),"thickness"in u&&i(3,o=u.thickness),"gap"in u&&i(8,c=u.gap),"radius"in u&&i(4,s=u.radius),"display"in u&&i(5,f=u.display),"margin"in u&&i(6,a=u.margin)},t.$$.update=()=>{t.$$.dirty&272&&i(7,d=2*Math.PI*s*(100-c)/100)},[l,n,r,o,s,f,a,d,c]}class kl extends Be{constructor(e){super(),Me(this,e,al,fl,Ee,{size:0,speed:1,color:2,thickness:3,gap:8,radius:4,display:5,margin:6})}}export{kl as L,cl as T,Xn as c,zn as o,qn as s};
