import{g as cr,b as dr,a as Oi,f as Ii,c as Ti,u as Ut,d as qt,h as Ai,i as _r,j as Dt,F as Fi,n as ji,e as Li,P as Ui,S as qi,k as zi,l as Vi,m as Bi,o as Mi,w as Hi,p as $i,q as Qi}from"../chunks/PropertyPanel.OBUFATSe.js";import{s as hr}from"../chunks/sortBy.ChsTRid8.js";import{as as qe,s as at,c as ot,e as G,t as k,b as le,d as K,f as pe,h as P,j as re,i as o,x as W,k as c,l as L,p as ve,a4 as Nt,ar as Mt,u as ft,g as ut,a as ct,m as H,A as mt,o as Ze,W as Rt,L as Je,n as Ce,y as De,v as ge,N as Ge,V as bt,G as nt,r as ll,Y as nl,I as dl,q as Gl,Q as vr,R as mr,P as rt,a2 as Js,ap as pr,aq as Gi,ak as Ki}from"../chunks/scheduler.Df3gJpkL.js";import{S as st,i as it,g as kt,a as me,e as Pt,t as he,c as Ae,b as Fe,m as je,d as Le,f as Et}from"../chunks/index.DTzUNj_H.js";import{e as Re}from"../chunks/each.CU-7MgHx.js";import{c as Ji,a as Yi}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{c as Xi,s as Tl}from"../chunks/schema.CHP6_69y.js";import{p as Zi}from"../chunks/stores.h7CWNzXc.js";import{g as Wi}from"../chunks/entry.DNFlw6eq.js";import{A as Kl}from"../chunks/Alert.CfQxrXIg.js";import{T as Bt,b as de,a as Ys,G as gl,m as xi,d as bl,o as en}from"../chunks/lib.VMLB1uup.js";/* empty css                     */import{j as tn,u as ln,l as rn,m as gr,n as br,o as Er,p as an,q as sn,r as nn,s as on,t as fn,i as kr,M as un,S as cn,B as dn,a as _n,b as hn}from"../chunks/style.CqhISwJS.js";import{d as Xs,e as Ul,n as ml,m as il,o as vn,i as Al,c as mn,s as Pr,a as pn,b as gn}from"../chunks/graphStore.Xc3jF7-y.js";import{G as Ht}from"../chunks/_Graph.Ck0s9kh8.js";import{t as El,T as Zs}from"../chunks/ToggleBar.QuyRc22M.js";import{J as wr}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as bn}from"../chunks/Title.B-pDgfy6.js";import{C as En}from"../chunks/Controls.CFWEXf_T.js";async function kn({fetch:a}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:l}},{value:{["@graph"]:r}},{value:{["@graph"]:t}},{value:{["@graph"]:s}},{value:{["@graph"]:i}},{value:{da_graph:{["@graph"]:n}}}]=await Promise.allSettled(e.map(g=>a(g).then(b=>b.json()))),f=hr(cr(l,"rdfs:label"),g=>g["rdfs:label"]),v=dr(r,"d3f:DigitalArtifact"),m=Oi(t,"d3f:DigitalEvent").map(g=>({...g,children:cr(Ii(g.children,g["rdfs:label"]),"rdfs:label")})),_=hr(s,g=>g["rdfs:label"]),u=Ti(i),d=dr(n,"d3f:DigitalInformation");return{attack:f,dao:v,events:m,weaknesses:_,properties:u,digital_information:d}}const Kd=Object.freeze(Object.defineProperty({__proto__:null,load:kn},Symbol.toStringTag,{value:"Module"})),yr=a=>tn(a);function Pn(){const{zoomIn:a,zoomOut:e,fitView:l,onbeforedelete:r,snapGrid:t,viewport:s,width:i,height:n,minZoom:f,maxZoom:v,panZoom:h,nodes:m,edges:_,domNode:u,nodeLookup:d,nodeOrigin:g,edgeLookup:b,connectionLookup:w}=ln(),N=p=>{var A,S;const R=qe(d),C=yr(p)?p:R.get(p.id),F=C.parentId?on(C.position,C.measured,C.parentId,R,qe(g)):C.position,I={id:C.id,position:F,width:((A=C.measured)==null?void 0:A.width)??C.width,height:((S=C.measured)==null?void 0:S.height)??C.height,data:C.data};return br(I)},y=(p,R,C={replace:!1})=>{var A;const F=(A=qe(d).get(p))==null?void 0:A.internals.userNode;if(!F)return;const I=typeof R=="function"?R(F):R;C.replace?m.update(S=>S.map(T=>T.id===p?yr(I)?I:{...T,...I}:T)):(Object.assign(F,I),m.update(S=>S))},E=p=>qe(d).get(p);return{zoomIn:a,zoomOut:e,getInternalNode:E,getNode:p=>{var R;return(R=E(p))==null?void 0:R.internals.userNode},getNodes:p=>p===void 0?qe(m):Sr(qe(d),p),getEdge:p=>qe(b).get(p),getEdges:p=>p===void 0?qe(_):Sr(qe(b),p),setZoom:(p,R)=>{const C=qe(h);return C?C.scaleTo(p,{duration:R==null?void 0:R.duration}):Promise.resolve(!1)},getZoom:()=>qe(s).zoom,setViewport:async(p,R)=>{const C=qe(s),F=qe(h);return F?(await F.setViewport({x:p.x??C.x,y:p.y??C.y,zoom:p.zoom??C.zoom},{duration:R==null?void 0:R.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>qe(s),setCenter:async(p,R,C)=>{const F=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:qe(v),I=qe(h);return I?(await I.setViewport({x:qe(i)/2-p*F,y:qe(n)/2-R*F,zoom:F},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:l,fitBounds:async(p,R)=>{const C=qe(h);if(!C)return Promise.resolve(!1);const F=rn(p,qe(i),qe(n),qe(f),qe(v),(R==null?void 0:R.padding)??.1);return await C.setViewport(F,{duration:R==null?void 0:R.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,R=!0,C)=>{const F=gr(p),I=F?p:N(p);return I?(C||qe(m)).filter(A=>{const S=qe(d).get(A.id);if(!S||!F&&A.id===p.id)return!1;const T=br(S),D=Er(T,I);return R&&D>0||D>=I.width*I.height}):[]},isNodeIntersecting:(p,R,C=!0)=>{const I=gr(p)?p:N(p);if(!I)return!1;const A=Er(I,R);return C&&A>0||A>=I.width*I.height},deleteElements:async({nodes:p=[],edges:R=[]})=>{const{nodes:C,edges:F}=await an({nodesToRemove:p,edgesToRemove:R,nodes:qe(m),edges:qe(_),onBeforeDelete:qe(r)});return C&&m.update(I=>I.filter(A=>!C.some(({id:S})=>S===A.id))),F&&_.update(I=>I.filter(A=>!F.some(({id:S})=>S===A.id))),{deletedNodes:C,deletedEdges:F}},screenToFlowPosition:(p,R={snapToGrid:!0})=>{const C=qe(u);if(!C)return p;const F=R.snapToGrid?qe(t):!1,{x:I,y:A,zoom:S}=qe(s),{x:T,y:D}=C.getBoundingClientRect(),j={x:p.x-T,y:p.y-D};return sn(j,[I,A,S],F!==null,F||[1,1])},flowToScreenPosition:p=>{const R=qe(u);if(!R)return p;const{x:C,y:F,zoom:I}=qe(s),{x:A,y:S}=R.getBoundingClientRect(),T=fn(p,[C,F,I]);return{x:T.x+A,y:T.y+S}},toObject:()=>({nodes:qe(m).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:qe(_).map(p=>({...p})),viewport:{...qe(s)}}),updateNode:y,updateNodeData:(p,R,C)=>{var A;const F=(A=qe(d).get(p))==null?void 0:A.internals.userNode;if(!F)return;const I=typeof R=="function"?R(F):R;F.data=C!=null&&C.replace?I:{...F.data,...I},m.update(S=>S)},getNodesBounds:p=>{const R=qe(d),C=qe(g);return nn(p,{nodeLookup:R,nodeOrigin:C})},getHandleConnections:({type:p,id:R,nodeId:C})=>{var F;return Array.from(((F=qe(w).get(`${C}-${p}-${R??null}`))==null?void 0:F.values())??[])},viewport:s}}function Sr(a,e){var r;const l=[];for(const t of e){const s=a.get(t);if(s){const i="internals"in s?(r=s.internals)==null?void 0:r.userNode:s;l.push(i)}}return l}var ql={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(a,e){(function(l,r){r(e)})(Ji,function(l){function r(){for(var Q=arguments.length,q=Array(Q),J=0;J<Q;J++)q[J]=arguments[J];if(q.length>1){q[0]=q[0].slice(0,-1);for(var ue=q.length-1,oe=1;oe<ue;++oe)q[oe]=q[oe].slice(1,-1);return q[ue]=q[ue].slice(1),q.join("")}else return q[0]}function t(Q){return"(?:"+Q+")"}function s(Q){return Q===void 0?"undefined":Q===null?"null":Object.prototype.toString.call(Q).split(" ").pop().split("]").shift().toLowerCase()}function i(Q){return Q.toUpperCase()}function n(Q){return Q!=null?Q instanceof Array?Q:typeof Q.length!="number"||Q.split||Q.setInterval||Q.call?[Q]:Array.prototype.slice.call(Q):[]}function f(Q,q){var J=Q;if(q)for(var ue in q)J[ue]=q[ue];return J}function v(Q){var q="[A-Za-z]",J="[0-9]",ue=r(J,"[A-Fa-f]"),oe=t(t("%[EFef]"+ue+"%"+ue+ue+"%"+ue+ue)+"|"+t("%[89A-Fa-f]"+ue+"%"+ue+ue)+"|"+t("%"+ue+ue)),Oe="[\\:\\/\\?\\#\\[\\]\\@]",Ie="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",$e=r(Oe,Ie),We=Q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ht=Q?"[\\uE000-\\uF8FF]":"[]",Be=r(q,J,"[\\-\\.\\_\\~]",We);t(q+r(q,J,"[\\+\\-\\.]")+"*"),t(t(oe+"|"+r(Be,Ie,"[\\:]"))+"*");var Xe=t(t("25[0-5]")+"|"+t("2[0-4]"+J)+"|"+t("1"+J+J)+"|"+t("0?[1-9]"+J)+"|0?0?"+J),vt=t(Xe+"\\."+Xe+"\\."+Xe+"\\."+Xe),Ue=t(ue+"{1,4}"),tt=t(t(Ue+"\\:"+Ue)+"|"+vt),pt=t(t(Ue+"\\:")+"{6}"+tt),lt=t("\\:\\:"+t(Ue+"\\:")+"{5}"+tt),Jt=t(t(Ue)+"?\\:\\:"+t(Ue+"\\:")+"{4}"+tt),Ft=t(t(t(Ue+"\\:")+"{0,1}"+Ue)+"?\\:\\:"+t(Ue+"\\:")+"{3}"+tt),jt=t(t(t(Ue+"\\:")+"{0,2}"+Ue)+"?\\:\\:"+t(Ue+"\\:")+"{2}"+tt),tl=t(t(t(Ue+"\\:")+"{0,3}"+Ue)+"?\\:\\:"+Ue+"\\:"+tt),Wt=t(t(t(Ue+"\\:")+"{0,4}"+Ue)+"?\\:\\:"+tt),Tt=t(t(t(Ue+"\\:")+"{0,5}"+Ue)+"?\\:\\:"+Ue),Lt=t(t(t(Ue+"\\:")+"{0,6}"+Ue)+"?\\:\\:"),xt=t([pt,lt,Jt,Ft,jt,tl,Wt,Tt,Lt].join("|")),Vt=t(t(Be+"|"+oe)+"+");t("[vV]"+ue+"+\\."+r(Be,Ie,"[\\:]")+"+"),t(t(oe+"|"+r(Be,Ie))+"*");var al=t(oe+"|"+r(Be,Ie,"[\\:\\@]"));return t(t(oe+"|"+r(Be,Ie,"[\\@]"))+"+"),t(t(al+"|"+r("[\\/\\?]",ht))+"*"),{NOT_SCHEME:new RegExp(r("[^]",q,J,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Be,Ie),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Be,Ie),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Be,Ie),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Be,Ie),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Be,Ie,"[\\:\\@\\/\\?]",ht),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Be,Ie,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Be,Ie),"g"),UNRESERVED:new RegExp(Be,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Be,$e),"g"),PCT_ENCODED:new RegExp(oe,"g"),IPV4ADDRESS:new RegExp("^("+vt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+xt+")"+t(t("\\%25|\\%(?!"+ue+"{2})")+"("+Vt+")")+"?\\]?$")}}var h=v(!1),m=v(!0),_=function(){function Q(q,J){var ue=[],oe=!0,Oe=!1,Ie=void 0;try{for(var $e=q[Symbol.iterator](),We;!(oe=(We=$e.next()).done)&&(ue.push(We.value),!(J&&ue.length===J));oe=!0);}catch(ht){Oe=!0,Ie=ht}finally{try{!oe&&$e.return&&$e.return()}finally{if(Oe)throw Ie}}return ue}return function(q,J){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return Q(q,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(Q){if(Array.isArray(Q)){for(var q=0,J=Array(Q.length);q<Q.length;q++)J[q]=Q[q];return J}else return Array.from(Q)},d=2147483647,g=36,b=1,w=26,N=38,y=700,E=72,p=128,R="-",C=/^xn--/,F=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=g-b,T=Math.floor,D=String.fromCharCode;function j(Q){throw new RangeError(A[Q])}function $(Q,q){for(var J=[],ue=Q.length;ue--;)J[ue]=q(Q[ue]);return J}function x(Q,q){var J=Q.split("@"),ue="";J.length>1&&(ue=J[0]+"@",Q=J[1]),Q=Q.replace(I,".");var oe=Q.split("."),Oe=$(oe,q).join(".");return ue+Oe}function ae(Q){for(var q=[],J=0,ue=Q.length;J<ue;){var oe=Q.charCodeAt(J++);if(oe>=55296&&oe<=56319&&J<ue){var Oe=Q.charCodeAt(J++);(Oe&64512)==56320?q.push(((oe&1023)<<10)+(Oe&1023)+65536):(q.push(oe),J--)}else q.push(oe)}return q}var ie=function(q){return String.fromCodePoint.apply(String,u(q))},V=function(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:g},U=function(q,J){return q+22+75*(q<26)-((J!=0)<<5)},z=function(q,J,ue){var oe=0;for(q=ue?T(q/y):q>>1,q+=T(q/J);q>S*w>>1;oe+=g)q=T(q/S);return T(oe+(S+1)*q/(q+N))},Z=function(q){var J=[],ue=q.length,oe=0,Oe=p,Ie=E,$e=q.lastIndexOf(R);$e<0&&($e=0);for(var We=0;We<$e;++We)q.charCodeAt(We)>=128&&j("not-basic"),J.push(q.charCodeAt(We));for(var ht=$e>0?$e+1:0;ht<ue;){for(var Be=oe,Xe=1,vt=g;;vt+=g){ht>=ue&&j("invalid-input");var Ue=V(q.charCodeAt(ht++));(Ue>=g||Ue>T((d-oe)/Xe))&&j("overflow"),oe+=Ue*Xe;var tt=vt<=Ie?b:vt>=Ie+w?w:vt-Ie;if(Ue<tt)break;var pt=g-tt;Xe>T(d/pt)&&j("overflow"),Xe*=pt}var lt=J.length+1;Ie=z(oe-Be,lt,Be==0),T(oe/lt)>d-Oe&&j("overflow"),Oe+=T(oe/lt),oe%=lt,J.splice(oe++,0,Oe)}return String.fromCodePoint.apply(String,J)},O=function(q){var J=[];q=ae(q);var ue=q.length,oe=p,Oe=0,Ie=E,$e=!0,We=!1,ht=void 0;try{for(var Be=q[Symbol.iterator](),Xe;!($e=(Xe=Be.next()).done);$e=!0){var vt=Xe.value;vt<128&&J.push(D(vt))}}catch(sl){We=!0,ht=sl}finally{try{!$e&&Be.return&&Be.return()}finally{if(We)throw ht}}var Ue=J.length,tt=Ue;for(Ue&&J.push(R);tt<ue;){var pt=d,lt=!0,Jt=!1,Ft=void 0;try{for(var jt=q[Symbol.iterator](),tl;!(lt=(tl=jt.next()).done);lt=!0){var Wt=tl.value;Wt>=oe&&Wt<pt&&(pt=Wt)}}catch(sl){Jt=!0,Ft=sl}finally{try{!lt&&jt.return&&jt.return()}finally{if(Jt)throw Ft}}var Tt=tt+1;pt-oe>T((d-Oe)/Tt)&&j("overflow"),Oe+=(pt-oe)*Tt,oe=pt;var Lt=!0,xt=!1,Vt=void 0;try{for(var al=q[Symbol.iterator](),nr;!(Lt=(nr=al.next()).done);Lt=!0){var or=nr.value;if(or<oe&&++Oe>d&&j("overflow"),or==oe){for(var fl=Oe,ul=g;;ul+=g){var cl=ul<=Ie?b:ul>=Ie+w?w:ul-Ie;if(fl<cl)break;var fr=fl-cl,ur=g-cl;J.push(D(U(cl+fr%ur,0))),fl=T(fr/ur)}J.push(D(U(fl,0))),Ie=z(Oe,Tt,tt==Ue),Oe=0,++tt}}}catch(sl){xt=!0,Vt=sl}finally{try{!Lt&&al.return&&al.return()}finally{if(xt)throw Vt}}++Oe,++oe}return J.join("")},M=function(q){return x(q,function(J){return C.test(J)?Z(J.slice(4).toLowerCase()):J})},be=function(q){return x(q,function(J){return F.test(J)?"xn--"+O(J):J})},ye={version:"2.1.0",ucs2:{decode:ae,encode:ie},decode:Z,encode:O,toASCII:be,toUnicode:M},se={};function Y(Q){var q=Q.charCodeAt(0),J=void 0;return q<16?J="%0"+q.toString(16).toUpperCase():q<128?J="%"+q.toString(16).toUpperCase():q<2048?J="%"+(q>>6|192).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase():J="%"+(q>>12|224).toString(16).toUpperCase()+"%"+(q>>6&63|128).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase(),J}function ee(Q){for(var q="",J=0,ue=Q.length;J<ue;){var oe=parseInt(Q.substr(J+1,2),16);if(oe<128)q+=String.fromCharCode(oe),J+=3;else if(oe>=194&&oe<224){if(ue-J>=6){var Oe=parseInt(Q.substr(J+4,2),16);q+=String.fromCharCode((oe&31)<<6|Oe&63)}else q+=Q.substr(J,6);J+=6}else if(oe>=224){if(ue-J>=9){var Ie=parseInt(Q.substr(J+4,2),16),$e=parseInt(Q.substr(J+7,2),16);q+=String.fromCharCode((oe&15)<<12|(Ie&63)<<6|$e&63)}else q+=Q.substr(J,9);J+=9}else q+=Q.substr(J,3),J+=3}return q}function X(Q,q){function J(ue){var oe=ee(ue);return oe.match(q.UNRESERVED)?oe:ue}return Q.scheme&&(Q.scheme=String(Q.scheme).replace(q.PCT_ENCODED,J).toLowerCase().replace(q.NOT_SCHEME,"")),Q.userinfo!==void 0&&(Q.userinfo=String(Q.userinfo).replace(q.PCT_ENCODED,J).replace(q.NOT_USERINFO,Y).replace(q.PCT_ENCODED,i)),Q.host!==void 0&&(Q.host=String(Q.host).replace(q.PCT_ENCODED,J).toLowerCase().replace(q.NOT_HOST,Y).replace(q.PCT_ENCODED,i)),Q.path!==void 0&&(Q.path=String(Q.path).replace(q.PCT_ENCODED,J).replace(Q.scheme?q.NOT_PATH:q.NOT_PATH_NOSCHEME,Y).replace(q.PCT_ENCODED,i)),Q.query!==void 0&&(Q.query=String(Q.query).replace(q.PCT_ENCODED,J).replace(q.NOT_QUERY,Y).replace(q.PCT_ENCODED,i)),Q.fragment!==void 0&&(Q.fragment=String(Q.fragment).replace(q.PCT_ENCODED,J).replace(q.NOT_FRAGMENT,Y).replace(q.PCT_ENCODED,i)),Q}function _e(Q){return Q.replace(/^0*(.*)/,"$1")||"0"}function Te(Q,q){var J=Q.match(q.IPV4ADDRESS)||[],ue=_(J,2),oe=ue[1];return oe?oe.split(".").map(_e).join("."):Q}function Se(Q,q){var J=Q.match(q.IPV6ADDRESS)||[],ue=_(J,3),oe=ue[1],Oe=ue[2];if(oe){for(var Ie=oe.toLowerCase().split("::").reverse(),$e=_(Ie,2),We=$e[0],ht=$e[1],Be=ht?ht.split(":").map(_e):[],Xe=We.split(":").map(_e),vt=q.IPV4ADDRESS.test(Xe[Xe.length-1]),Ue=vt?7:8,tt=Xe.length-Ue,pt=Array(Ue),lt=0;lt<Ue;++lt)pt[lt]=Be[lt]||Xe[tt+lt]||"";vt&&(pt[Ue-1]=Te(pt[Ue-1],q));var Jt=pt.reduce(function(Tt,Lt,xt){if(!Lt||Lt==="0"){var Vt=Tt[Tt.length-1];Vt&&Vt.index+Vt.length===xt?Vt.length++:Tt.push({index:xt,length:1})}return Tt},[]),Ft=Jt.sort(function(Tt,Lt){return Lt.length-Tt.length})[0],jt=void 0;if(Ft&&Ft.length>1){var tl=pt.slice(0,Ft.index),Wt=pt.slice(Ft.index+Ft.length);jt=tl.join(":")+"::"+Wt.join(":")}else jt=pt.join(":");return Oe&&(jt+="%"+Oe),jt}else return Q}var B=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ce="".match(/(){0}/)[1]===void 0;function Ve(Q){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J={},ue=q.iri!==!1?m:h;q.reference==="suffix"&&(Q=(q.scheme?q.scheme+":":"")+"//"+Q);var oe=Q.match(B);if(oe){ce?(J.scheme=oe[1],J.userinfo=oe[3],J.host=oe[4],J.port=parseInt(oe[5],10),J.path=oe[6]||"",J.query=oe[7],J.fragment=oe[8],isNaN(J.port)&&(J.port=oe[5])):(J.scheme=oe[1]||void 0,J.userinfo=Q.indexOf("@")!==-1?oe[3]:void 0,J.host=Q.indexOf("//")!==-1?oe[4]:void 0,J.port=parseInt(oe[5],10),J.path=oe[6]||"",J.query=Q.indexOf("?")!==-1?oe[7]:void 0,J.fragment=Q.indexOf("#")!==-1?oe[8]:void 0,isNaN(J.port)&&(J.port=Q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?oe[4]:void 0)),J.host&&(J.host=Se(Te(J.host,ue),ue)),J.scheme===void 0&&J.userinfo===void 0&&J.host===void 0&&J.port===void 0&&!J.path&&J.query===void 0?J.reference="same-document":J.scheme===void 0?J.reference="relative":J.fragment===void 0?J.reference="absolute":J.reference="uri",q.reference&&q.reference!=="suffix"&&q.reference!==J.reference&&(J.error=J.error||"URI is not a "+q.reference+" reference.");var Oe=se[(q.scheme||J.scheme||"").toLowerCase()];if(!q.unicodeSupport&&(!Oe||!Oe.unicodeSupport)){if(J.host&&(q.domainHost||Oe&&Oe.domainHost))try{J.host=ye.toASCII(J.host.replace(ue.PCT_ENCODED,ee).toLowerCase())}catch(Ie){J.error=J.error||"Host's domain name can not be converted to ASCII via punycode: "+Ie}X(J,h)}else X(J,ue);Oe&&Oe.parse&&Oe.parse(J,q)}else J.error=J.error||"URI can not be parsed.";return J}function Me(Q,q){var J=q.iri!==!1?m:h,ue=[];return Q.userinfo!==void 0&&(ue.push(Q.userinfo),ue.push("@")),Q.host!==void 0&&ue.push(Se(Te(String(Q.host),J),J).replace(J.IPV6ADDRESS,function(oe,Oe,Ie){return"["+Oe+(Ie?"%25"+Ie:"")+"]"})),(typeof Q.port=="number"||typeof Q.port=="string")&&(ue.push(":"),ue.push(String(Q.port))),ue.length?ue.join(""):void 0}var xe=/^\.\.?\//,ze=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,yt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ke(Q){for(var q=[];Q.length;)if(Q.match(xe))Q=Q.replace(xe,"");else if(Q.match(ze))Q=Q.replace(ze,"/");else if(Q.match(He))Q=Q.replace(He,"/"),q.pop();else if(Q==="."||Q==="..")Q="";else{var J=Q.match(yt);if(J){var ue=J[0];Q=Q.slice(ue.length),q.push(ue)}else throw new Error("Unexpected dot segment condition")}return q.join("")}function Qe(Q){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=q.iri?m:h,ue=[],oe=se[(q.scheme||Q.scheme||"").toLowerCase()];if(oe&&oe.serialize&&oe.serialize(Q,q),Q.host&&!J.IPV6ADDRESS.test(Q.host)){if(q.domainHost||oe&&oe.domainHost)try{Q.host=q.iri?ye.toUnicode(Q.host):ye.toASCII(Q.host.replace(J.PCT_ENCODED,ee).toLowerCase())}catch($e){Q.error=Q.error||"Host's domain name can not be converted to "+(q.iri?"Unicode":"ASCII")+" via punycode: "+$e}}X(Q,J),q.reference!=="suffix"&&Q.scheme&&(ue.push(Q.scheme),ue.push(":"));var Oe=Me(Q,q);if(Oe!==void 0&&(q.reference!=="suffix"&&ue.push("//"),ue.push(Oe),Q.path&&Q.path.charAt(0)!=="/"&&ue.push("/")),Q.path!==void 0){var Ie=Q.path;!q.absolutePath&&(!oe||!oe.absolutePath)&&(Ie=Ke(Ie)),Oe===void 0&&(Ie=Ie.replace(/^\/\//,"/%2F")),ue.push(Ie)}return Q.query!==void 0&&(ue.push("?"),ue.push(Q.query)),Q.fragment!==void 0&&(ue.push("#"),ue.push(Q.fragment)),ue.join("")}function Ye(Q,q){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=arguments[3],oe={};return ue||(Q=Ve(Qe(Q,J),J),q=Ve(Qe(q,J),J)),J=J||{},!J.tolerant&&q.scheme?(oe.scheme=q.scheme,oe.userinfo=q.userinfo,oe.host=q.host,oe.port=q.port,oe.path=Ke(q.path||""),oe.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(oe.userinfo=q.userinfo,oe.host=q.host,oe.port=q.port,oe.path=Ke(q.path||""),oe.query=q.query):(q.path?(q.path.charAt(0)==="/"?oe.path=Ke(q.path):((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path?oe.path="/"+q.path:Q.path?oe.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+q.path:oe.path=q.path,oe.path=Ke(oe.path)),oe.query=q.query):(oe.path=Q.path,q.query!==void 0?oe.query=q.query:oe.query=Q.query),oe.userinfo=Q.userinfo,oe.host=Q.host,oe.port=Q.port),oe.scheme=Q.scheme),oe.fragment=q.fragment,oe}function gt(Q,q,J){var ue=f({scheme:"null"},J);return Qe(Ye(Ve(Q,ue),Ve(q,ue),ue,!0),ue)}function At(Q,q){return typeof Q=="string"?Q=Qe(Ve(Q,q),q):s(Q)==="object"&&(Q=Ve(Qe(Q,q),q)),Q}function Ot(Q,q,J){return typeof Q=="string"?Q=Qe(Ve(Q,J),J):s(Q)==="object"&&(Q=Qe(Q,J)),typeof q=="string"?q=Qe(Ve(q,J),J):s(q)==="object"&&(q=Qe(q,J)),Q===q}function Qt(Q,q){return Q&&Q.toString().replace(!q||!q.iri?h.ESCAPE:m.ESCAPE,Y)}function _t(Q,q){return Q&&Q.toString().replace(!q||!q.iri?h.PCT_ENCODED:m.PCT_ENCODED,ee)}var ne={scheme:"http",domainHost:!0,parse:function(q,J){return q.host||(q.error=q.error||"HTTP URIs must have a host."),q},serialize:function(q,J){var ue=String(q.scheme).toLowerCase()==="https";return(q.port===(ue?443:80)||q.port==="")&&(q.port=void 0),q.path||(q.path="/"),q}},Ne={scheme:"https",domainHost:ne.domainHost,parse:ne.parse,serialize:ne.serialize};function Pe(Q){return typeof Q.secure=="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"}var we={scheme:"ws",domainHost:!0,parse:function(q,J){var ue=q;return ue.secure=Pe(ue),ue.resourceName=(ue.path||"/")+(ue.query?"?"+ue.query:""),ue.path=void 0,ue.query=void 0,ue},serialize:function(q,J){if((q.port===(Pe(q)?443:80)||q.port==="")&&(q.port=void 0),typeof q.secure=="boolean"&&(q.scheme=q.secure?"wss":"ws",q.secure=void 0),q.resourceName){var ue=q.resourceName.split("?"),oe=_(ue,2),Oe=oe[0],Ie=oe[1];q.path=Oe&&Oe!=="/"?Oe:void 0,q.query=Ie,q.resourceName=void 0}return q.fragment=void 0,q}},fe={scheme:"wss",domainHost:we.domainHost,parse:we.parse,serialize:we.serialize},te={},ke="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Ee="[0-9A-Fa-f]",et=t(t("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+t("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+t("%"+Ee+Ee)),St="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",wt="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",It=r(wt,'[\\"\\\\]'),Gt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Kt=new RegExp(ke,"g"),zt=new RegExp(et,"g"),Ct=new RegExp(r("[^]",St,"[\\.]",'[\\"]',It),"g"),rr=new RegExp(r("[^]",ke,Gt),"g"),Ci=rr;function Il(Q){var q=ee(Q);return q.match(Kt)?q:Q}var ar={scheme:"mailto",parse:function(q,J){var ue=q,oe=ue.to=ue.path?ue.path.split(","):[];if(ue.path=void 0,ue.query){for(var Oe=!1,Ie={},$e=ue.query.split("&"),We=0,ht=$e.length;We<ht;++We){var Be=$e[We].split("=");switch(Be[0]){case"to":for(var Xe=Be[1].split(","),vt=0,Ue=Xe.length;vt<Ue;++vt)oe.push(Xe[vt]);break;case"subject":ue.subject=_t(Be[1],J);break;case"body":ue.body=_t(Be[1],J);break;default:Oe=!0,Ie[_t(Be[0],J)]=_t(Be[1],J);break}}Oe&&(ue.headers=Ie)}ue.query=void 0;for(var tt=0,pt=oe.length;tt<pt;++tt){var lt=oe[tt].split("@");if(lt[0]=_t(lt[0]),J.unicodeSupport)lt[1]=_t(lt[1],J).toLowerCase();else try{lt[1]=ye.toASCII(_t(lt[1],J).toLowerCase())}catch(Jt){ue.error=ue.error||"Email address's domain name can not be converted to ASCII via punycode: "+Jt}oe[tt]=lt.join("@")}return ue},serialize:function(q,J){var ue=q,oe=n(q.to);if(oe){for(var Oe=0,Ie=oe.length;Oe<Ie;++Oe){var $e=String(oe[Oe]),We=$e.lastIndexOf("@"),ht=$e.slice(0,We).replace(zt,Il).replace(zt,i).replace(Ct,Y),Be=$e.slice(We+1);try{Be=J.iri?ye.toUnicode(Be):ye.toASCII(_t(Be,J).toLowerCase())}catch(tt){ue.error=ue.error||"Email address's domain name can not be converted to "+(J.iri?"Unicode":"ASCII")+" via punycode: "+tt}oe[Oe]=ht+"@"+Be}ue.path=oe.join(",")}var Xe=q.headers=q.headers||{};q.subject&&(Xe.subject=q.subject),q.body&&(Xe.body=q.body);var vt=[];for(var Ue in Xe)Xe[Ue]!==te[Ue]&&vt.push(Ue.replace(zt,Il).replace(zt,i).replace(rr,Y)+"="+Xe[Ue].replace(zt,Il).replace(zt,i).replace(Ci,Y));return vt.length&&(ue.query=vt.join("&")),ue}},Ni=/^([^\:]+)\:(.*)/,sr={scheme:"urn",parse:function(q,J){var ue=q.path&&q.path.match(Ni),oe=q;if(ue){var Oe=J.scheme||oe.scheme||"urn",Ie=ue[1].toLowerCase(),$e=ue[2],We=Oe+":"+(J.nid||Ie),ht=se[We];oe.nid=Ie,oe.nss=$e,oe.path=void 0,ht&&(oe=ht.parse(oe,J))}else oe.error=oe.error||"URN can not be parsed.";return oe},serialize:function(q,J){var ue=J.scheme||q.scheme||"urn",oe=q.nid,Oe=ue+":"+(J.nid||oe),Ie=se[Oe];Ie&&(q=Ie.serialize(q,J));var $e=q,We=q.nss;return $e.path=(oe||J.nid)+":"+We,$e}},Ri=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ir={scheme:"urn:uuid",parse:function(q,J){var ue=q;return ue.uuid=ue.nss,ue.nss=void 0,!J.tolerant&&(!ue.uuid||!ue.uuid.match(Ri))&&(ue.error=ue.error||"UUID is not valid."),ue},serialize:function(q,J){var ue=q;return ue.nss=(q.uuid||"").toLowerCase(),ue}};se[ne.scheme]=ne,se[Ne.scheme]=Ne,se[we.scheme]=we,se[fe.scheme]=fe,se[ar.scheme]=ar,se[sr.scheme]=sr,se[ir.scheme]=ir,l.SCHEMES=se,l.pctEncChar=Y,l.pctDecChars=ee,l.parse=Ve,l.removeDotSegments=Ke,l.serialize=Qe,l.resolveComponents=Ye,l.resolve=gt,l.normalize=At,l.equal=Ot,l.escapeComponent=Qt,l.unescapeComponent=_t,Object.defineProperty(l,"__esModule",{value:!0})})})(ql,ql.exports);var wn=ql.exports,Jl=function a(e,l){if(e===l)return!0;if(e&&l&&typeof e=="object"&&typeof l=="object"){if(e.constructor!==l.constructor)return!1;var r,t,s;if(Array.isArray(e)){if(r=e.length,r!=l.length)return!1;for(t=r;t--!==0;)if(!a(e[t],l[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===l.source&&e.flags===l.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===l.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===l.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(l).length)return!1;for(t=r;t--!==0;)if(!Object.prototype.hasOwnProperty.call(l,s[t]))return!1;for(t=r;t--!==0;){var i=s[t];if(!a(e[i],l[i]))return!1}return!0}return e!==e&&l!==l},yn=function(e){for(var l=0,r=e.length,t=0,s;t<r;)l++,s=e.charCodeAt(t++),s>=55296&&s<=56319&&t<r&&(s=e.charCodeAt(t),(s&64512)==56320&&t++);return l},rl={copy:Sn,checkDataType:zl,checkDataTypes:Dn,coerceToTypes:Cn,toHash:Yl,getProperty:Xl,escapeQuotes:Zl,equal:Jl,ucs2length:yn,varOccurences:On,varReplace:In,schemaHasRules:Tn,schemaHasRulesExcept:An,schemaUnknownRules:Fn,toQuotedString:Vl,getPathExpr:jn,getPath:Ln,getData:zn,unescapeFragment:Vn,unescapeJsonPointer:xl,escapeFragment:Bn,escapeJsonPointer:Wl};function Sn(a,e){e=e||{};for(var l in a)e[l]=a[l];return e}function zl(a,e,l,r){var t=r?" !== ":" === ",s=r?" || ":" && ",i=r?"!":"",n=r?"":"!";switch(a){case"null":return e+t+"null";case"array":return i+"Array.isArray("+e+")";case"object":return"("+i+e+s+"typeof "+e+t+'"object"'+s+n+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+s+n+"("+e+" % 1)"+s+e+t+e+(l?s+i+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(l?s+i+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function Dn(a,e,l){switch(a.length){case 1:return zl(a[0],e,l,!0);default:var r="",t=Yl(a);t.array&&t.object&&(r=t.null?"(":"(!"+e+" || ",r+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var s in t)r+=(r?" && ":"")+zl(s,e,l,!0);return r}}var Dr=Yl(["string","number","integer","boolean","null"]);function Cn(a,e){if(Array.isArray(e)){for(var l=[],r=0;r<e.length;r++){var t=e[r];(Dr[t]||a==="array"&&t==="array")&&(l[l.length]=t)}if(l.length)return l}else{if(Dr[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Yl(a){for(var e={},l=0;l<a.length;l++)e[a[l]]=!0;return e}var Nn=/^[a-z$_][a-z$_0-9]*$/i,Rn=/'|\\/g;function Xl(a){return typeof a=="number"?"["+a+"]":Nn.test(a)?"."+a:"['"+Zl(a)+"']"}function Zl(a){return a.replace(Rn,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function On(a,e){e+="[^0-9]";var l=a.match(new RegExp(e,"g"));return l?l.length:0}function In(a,e,l){return e+="([^0-9])",l=l.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),l+"$1")}function Tn(a,e){if(typeof a=="boolean")return!a;for(var l in a)if(e[l])return!0}function An(a,e,l){if(typeof a=="boolean")return!a&&l!="not";for(var r in a)if(r!=l&&e[r])return!0}function Fn(a,e){if(typeof a!="boolean"){for(var l in a)if(!e[l])return l}}function Vl(a){return"'"+Zl(a)+"'"}function jn(a,e,l,r){var t=l?"'/' + "+e+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Ws(a,t)}function Ln(a,e,l){var r=Vl(l?"/"+Wl(e):Xl(e));return Ws(a,r)}var Un=/^\/(?:[^~]|~0|~1)*$/,qn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function zn(a,e,l){var r,t,s,i;if(a==="")return"rootData";if(a[0]=="/"){if(!Un.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,s="rootData"}else{if(i=a.match(qn),!i)throw new Error("Invalid JSON-pointer: "+a);if(r=+i[1],t=i[2],t=="#"){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return l[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);if(s="data"+(e-r||""),!t)return s}for(var n=s,f=t.split("/"),v=0;v<f.length;v++){var h=f[v];h&&(s+=Xl(xl(h)),n+=" && "+s)}return n}function Ws(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Vn(a){return xl(decodeURIComponent(a))}function Bn(a){return encodeURIComponent(Wl(a))}function Wl(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function xl(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}var Mn=rl,xs=Hn;function Hn(a){Mn.copy(a,this)}var ei={exports:{}},Yt=ei.exports=function(a,e,l){typeof e=="function"&&(l=e,e={}),l=e.cb||l;var r=typeof l=="function"?l:l.pre||function(){},t=l.post||function(){};pl(e,r,t,a,"",a)};Yt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Yt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yt.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function pl(a,e,l,r,t,s,i,n,f,v){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,t,s,i,n,f,v);for(var h in r){var m=r[h];if(Array.isArray(m)){if(h in Yt.arrayKeywords)for(var _=0;_<m.length;_++)pl(a,e,l,m[_],t+"/"+h+"/"+_,s,t,h,r,_)}else if(h in Yt.propsKeywords){if(m&&typeof m=="object")for(var u in m)pl(a,e,l,m[u],t+"/"+h+"/"+$n(u),s,t,h,r,u)}else(h in Yt.keywords||a.allKeys&&!(h in Yt.skipKeywords))&&pl(a,e,l,m,t+"/"+h,s,t,h,r)}l(r,t,s,i,n,f,v)}}function $n(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var Qn=ei.exports,ol=wn,Cr=Jl,Dl=rl,kl=xs,Gn=Qn,er=Zt;Zt.normalizeId=Xt;Zt.fullPath=Pl;Zt.url=wl;Zt.ids=Zn;Zt.inlineRef=Bl;Zt.schema=Cl;function Zt(a,e,l){var r=this._refs[l];if(typeof r=="string")if(this._refs[r])r=this._refs[r];else return Zt.call(this,a,e,r);if(r=r||this._schemas[l],r instanceof kl)return Bl(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var t=Cl.call(this,e,l),s,i,n;return t&&(s=t.schema,e=t.root,n=t.baseId),s instanceof kl?i=s.validate||a.call(this,s.schema,e,void 0,n):s!==void 0&&(i=Bl(s,this._opts.inlineRefs)?s:a.call(this,s,e,void 0,n)),i}function Cl(a,e){var l=ol.parse(e),r=li(l),t=Pl(this._getId(a.schema));if(Object.keys(a.schema).length===0||r!==t){var s=Xt(r),i=this._refs[s];if(typeof i=="string")return Kn.call(this,a,i,l);if(i instanceof kl)i.validate||this._compile(i),a=i;else if(i=this._schemas[s],i instanceof kl){if(i.validate||this._compile(i),s==Xt(e))return{schema:i,root:a,baseId:t};a=i}else return;if(!a.schema)return;t=Pl(this._getId(a.schema))}return ti.call(this,l,t,a.schema,a)}function Kn(a,e,l){var r=Cl.call(this,a,e);if(r){var t=r.schema,s=r.baseId;a=r.root;var i=this._getId(t);return i&&(s=wl(s,i)),ti.call(this,l,s,t,a)}}var Jn=Dl.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function ti(a,e,l,r){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),s=1;s<t.length;s++){var i=t[s];if(i){if(i=Dl.unescapeFragment(i),l=l[i],l===void 0)break;var n;if(!Jn[i]&&(n=this._getId(l),n&&(e=wl(e,n)),l.$ref)){var f=wl(e,l.$ref),v=Cl.call(this,r,f);v&&(l=v.schema,r=v.root,e=v.baseId)}}}if(l!==void 0&&l!==r.schema)return{schema:l,root:r,baseId:e}}}var Yn=Dl.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Bl(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ml(a);if(e)return Hl(a)<=e}function Ml(a){var e;if(Array.isArray(a)){for(var l=0;l<a.length;l++)if(e=a[l],typeof e=="object"&&!Ml(e))return!1}else for(var r in a)if(r=="$ref"||(e=a[r],typeof e=="object"&&!Ml(e)))return!1;return!0}function Hl(a){var e=0,l;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(l=a[r],typeof l=="object"&&(e+=Hl(l)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Yn[t])e++;else if(l=a[t],typeof l=="object"&&(e+=Hl(l)+1),e==1/0)return 1/0}return e}function Pl(a,e){e!==!1&&(a=Xt(a));var l=ol.parse(a);return li(l)}function li(a){return ol.serialize(a).split("#")[0]+"#"}var Xn=/#\/?$/;function Xt(a){return a?a.replace(Xn,""):""}function wl(a,e){return e=Xt(e),ol.resolve(a,e)}function Zn(a){var e=Xt(this._getId(a)),l={"":e},r={"":Pl(e,!1)},t={},s=this;return Gn(a,{allKeys:!0},function(i,n,f,v,h,m,_){if(n!==""){var u=s._getId(i),d=l[v],g=r[v]+"/"+h;if(_!==void 0&&(g+="/"+(typeof _=="number"?_:Dl.escapeFragment(_))),typeof u=="string"){u=d=Xt(d?ol.resolve(d,u):u);var b=s._refs[u];if(typeof b=="string"&&(b=s._refs[b]),b&&b.schema){if(!Cr(i,b.schema))throw new Error('id "'+u+'" resolves to more than one schema')}else if(u!=Xt(g))if(u[0]=="#"){if(t[u]&&!Cr(i,t[u]))throw new Error('id "'+u+'" resolves to more than one schema');t[u]=i}else s._refs[u]=g}l[n]=d,r[n]=g}}),t}var Fl=er,tr={Validation:Nr(Wn),MissingRef:Nr(lr)};function Wn(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}lr.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function lr(a,e,l){this.message=l||lr.message(a,e),this.missingRef=Fl.url(a,e),this.missingSchema=Fl.normalizeId(Fl.fullPath(this.missingRef))}function Nr(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var ri=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var l=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(s){return function(i){return function(n,f){var v={key:n,value:i[n]},h={key:f,value:i[f]};return s(v,h)}}}(e.cmp),t=[];return function s(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i!==void 0){if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);var n,f;if(Array.isArray(i)){for(f="[",n=0;n<i.length;n++)n&&(f+=","),f+=s(i[n])||"null";return f+"]"}if(i===null)return"null";if(t.indexOf(i)!==-1){if(l)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var v=t.push(i)-1,h=Object.keys(i).sort(r&&r(i));for(f="",n=0;n<h.length;n++){var m=h[n],_=s(i[m]);_&&(f&&(f+=","),f+=JSON.stringify(m)+":"+_)}return t.splice(v,1),"{"+f+"}"}}(a)},ai=function(e,l,r){var t="",s=e.schema.$async===!0,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var v="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(v);else throw new Error(v)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+n+" */")+" ")),typeof e.schema=="boolean"||!(i||e.schema.$ref)){var l="false schema",h=e.level,m=e.dataLevel,_=e.schema[l],u=e.schemaPath+e.util.getProperty(l),d=e.errSchemaPath+"/"+l,p=!e.opts.allErrors,F,g="data"+(m||""),E="valid"+h;if(e.schema===!1){e.isTop?p=!0:t+=" var "+E+" = false; ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),t+=" } "):t+=" {} ";var w=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+E+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var N=e.isTop,h=e.level=0,m=e.dataLevel=0,g="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,m=e.dataLevel,g="data"+(m||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+h+" = errors;"}var E="valid"+h,p=!e.opts.allErrors,R="",C="",F,I=e.schema.type,A=Array.isArray(I);if(I&&e.opts.nullable&&e.schema.nullable===!0&&(A?I.indexOf("null")==-1&&(I=I.concat("null")):I!="null"&&(I=[I,"null"],A=!0)),A&&I.length==1&&(I=I[0],A=!1),e.schema.$ref&&i){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),I){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,I);var T=e.RULES.types[I];if(S||A||T===!0||T&&!ze(T)){var u=e.schemaPath+".type",d=e.errSchemaPath+"/type",u=e.schemaPath+".type",d=e.errSchemaPath+"/type",D=A?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[D](I,g,e.opts.strictNumbers,!0)+") { ",S){var j="dataType"+h,$="coerced"+h;t+=" var "+j+" = typeof "+g+"; var "+$+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+j+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+j+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+$+" = "+g+"; } "),t+=" if ("+$+" !== undefined) ; ";var x=S;if(x)for(var ae,ie=-1,V=x.length-1;ie<V;)ae=x[ie+=1],ae=="string"?t+=" else if ("+j+" == 'number' || "+j+" == 'boolean') "+$+" = '' + "+g+"; else if ("+g+" === null) "+$+" = ''; ":ae=="number"||ae=="integer"?(t+=" else if ("+j+" == 'boolean' || "+g+" === null || ("+j+" == 'string' && "+g+" && "+g+" == +"+g+" ",ae=="integer"&&(t+=" && !("+g+" % 1)"),t+=")) "+$+" = +"+g+"; "):ae=="boolean"?t+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+$+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+$+" = true; ":ae=="null"?t+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+$+" = null; ":e.opts.coerceTypes=="array"&&ae=="array"&&(t+=" else if ("+j+" == 'string' || "+j+" == 'number' || "+j+" == 'boolean' || "+g+" == null) "+$+" = ["+g+"]; ");t+=" else {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",A?t+=""+I.join(","):t+=""+I,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",A?t+=""+I.join(","):t+=""+I,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),t+=" } "):t+=" {} ";var w=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+$+" !== undefined) {  ";var U=m?"data"+(m-1||""):"parentData",z=m?e.dataPathArr[m]:"parentDataProperty";t+=" "+g+" = "+$+"; ",m||(t+="if ("+U+" !== undefined)"),t+=" "+U+"["+z+"] = "+$+"; } "}else{var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",A?t+=""+I.join(","):t+=""+I,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",A?t+=""+I.join(","):t+=""+I,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),t+=" } "):t+=" {} ";var w=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!i)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(t+=" } if (errors === ",N?t+="0":t+="errs_"+h,t+=") { ",C+="}");else{var Z=e.RULES;if(Z){for(var T,O=-1,M=Z.length-1;O<M;)if(T=Z[O+=1],ze(T)){if(T.type&&(t+=" if ("+e.util.checkDataType(T.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(T.type=="object"&&e.schema.properties){var _=e.schema.properties,be=Object.keys(_),ye=be;if(ye)for(var se,Y=-1,ee=ye.length-1;Y<ee;){se=ye[Y+=1];var X=_[se];if(X.default!==void 0){var _e=g+e.util.getProperty(se);if(e.compositeRule){if(e.opts.strictDefaults){var y="default is ignored for: "+_e;if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}}else t+=" if ("+_e+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+_e+" === null || "+_e+" === '' "),t+=" ) "+_e+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(X.default)+" ":t+=" "+JSON.stringify(X.default)+" ",t+="; "}}}else if(T.type=="array"&&Array.isArray(e.schema.items)){var Te=e.schema.items;if(Te){for(var X,ie=-1,Se=Te.length-1;ie<Se;)if(X=Te[ie+=1],X.default!==void 0){var _e=g+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var y="default is ignored for: "+_e;if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}}else t+=" if ("+_e+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+_e+" === null || "+_e+" === '' "),t+=" ) "+_e+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(X.default)+" ":t+=" "+JSON.stringify(X.default)+" ",t+="; "}}}}var B=T.rules;if(B){for(var ce,Ve=-1,Me=B.length-1;Ve<Me;)if(ce=B[Ve+=1],He(ce)){var xe=ce.code(e,ce.keyword,T.type);xe&&(t+=" "+xe+" ",p&&(R+="}"))}}if(p&&(t+=" "+R+" ",R=""),T.type&&(t+=" } ",I&&I===T.type&&!S)){t+=" else { ";var u=e.schemaPath+".type",d=e.errSchemaPath+"/type",b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",A?t+=""+I.join(","):t+=""+I,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",A?t+=""+I.join(","):t+=""+I,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),t+=" } "):t+=" {} ";var w=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}p&&(t+=" if (errors === ",N?t+="0":t+="errs_"+h,t+=") { ",C+="}")}}}p&&(t+=" "+C+" "),N?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+E+" = errors === errs_"+h+";";function ze(Ke){for(var Qe=Ke.rules,Ye=0;Ye<Qe.length;Ye++)if(He(Qe[Ye]))return!0}function He(Ke){return e.schema[Ke.keyword]!==void 0||Ke.implements&&yt(Ke)}function yt(Ke){for(var Qe=Ke.implements,Ye=0;Ye<Qe.length;Ye++)if(e.schema[Qe[Ye]]!==void 0)return!0}return t},_l=er,yl=rl,si=tr,xn=ri,Rr=ai,eo=yl.ucs2length,to=Jl,lo=si.Validation,ro=$l;function $l(a,e,l,r){var t=this,s=this._opts,i=[void 0],n={},f=[],v={},h=[],m={},_=[];e=e||{schema:a,refVal:i,refs:n};var u=ao.call(this,a,e,r),d=this._compilations[u.index];if(u.compiling)return d.callValidate=y;var g=this._formats,b=this.RULES;try{var w=E(a,e,l,r);d.validate=w;var N=d.callValidate;return N&&(N.schema=w.schema,N.errors=null,N.refs=w.refs,N.refVal=w.refVal,N.root=w.root,N.$async=w.$async,s.sourceCode&&(N.source=w.source)),w}finally{so.call(this,a,e,r)}function y(){var D=d.validate,j=D.apply(this,arguments);return y.errors=D.errors,j}function E(D,j,$,x){var ae=!j||j&&j.schema==D;if(j.schema!=e.schema)return $l.call(t,D,j,$,x);var ie=D.$async===!0,V=Rr({isTop:!0,schema:D,isRoot:ae,baseId:x,root:j,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:si.MissingRef,RULES:b,validate:Rr,util:yl,resolve:_l,resolveRef:p,usePattern:A,useDefault:S,useCustomRule:T,opts:s,formats:g,logger:t.logger,self:t});V=hl(i,oo)+hl(f,io)+hl(h,no)+hl(_,fo)+V,s.processCode&&(V=s.processCode(V,D));var U;try{var z=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",V);U=z(t,b,g,e,i,h,_,to,eo,lo),i[0]=U}catch(Z){throw t.logger.error("Error compiling schema, function code:",V),Z}return U.schema=D,U.errors=null,U.refs=n,U.refVal=i,U.root=ae?U:j,ie&&(U.$async=!0),s.sourceCode===!0&&(U.source={code:V,patterns:f,defaults:h}),U}function p(D,j,$){j=_l.url(D,j);var x=n[j],ae,ie;if(x!==void 0)return ae=i[x],ie="refVal["+x+"]",I(ae,ie);if(!$&&e.refs){var V=e.refs[j];if(V!==void 0)return ae=e.refVal[V],ie=R(j,ae),I(ae,ie)}ie=R(j);var U=_l.call(t,E,e,j);if(U===void 0){var z=l&&l[j];z&&(U=_l.inlineRef(z,s.inlineRefs)?z:$l.call(t,z,e,l,D))}if(U===void 0)C(j);else return F(j,U),I(U,ie)}function R(D,j){var $=i.length;return i[$]=j,n[D]=$,"refVal"+$}function C(D){delete n[D]}function F(D,j){var $=n[D];i[$]=j}function I(D,j){return typeof D=="object"||typeof D=="boolean"?{code:j,schema:D,inline:!0}:{code:j,$async:D&&!!D.$async}}function A(D){var j=v[D];return j===void 0&&(j=v[D]=f.length,f[j]=D),"pattern"+j}function S(D){switch(typeof D){case"boolean":case"number":return""+D;case"string":return yl.toQuotedString(D);case"object":if(D===null)return"null";var j=xn(D),$=m[j];return $===void 0&&($=m[j]=h.length,h[$]=D),"default"+$}}function T(D,j,$,x){if(t._opts.validateSchema!==!1){var ae=D.definition.dependencies;if(ae&&!ae.every(function(ye){return Object.prototype.hasOwnProperty.call($,ye)}))throw new Error("parent schema must have all required keywords: "+ae.join(","));var ie=D.definition.validateSchema;if(ie){var V=ie(j);if(!V){var U="keyword schema is invalid: "+t.errorsText(ie.errors);if(t._opts.validateSchema=="log")t.logger.error(U);else throw new Error(U)}}}var z=D.definition.compile,Z=D.definition.inline,O=D.definition.macro,M;if(z)M=z.call(t,j,$,x);else if(O)M=O.call(t,j,$,x),s.validateSchema!==!1&&t.validateSchema(M,!0);else if(Z)M=Z.call(t,x,D.keyword,j,$);else if(M=D.definition.validate,!M)return;if(M===void 0)throw new Error('custom keyword "'+D.keyword+'"failed to compile');var be=_.length;return _[be]=M,{code:"customRule"+be,validate:M}}}function ao(a,e,l){var r=ii.call(this,a,e,l);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:a,root:e,baseId:l},{index:r,compiling:!1})}function so(a,e,l){var r=ii.call(this,a,e,l);r>=0&&this._compilations.splice(r,1)}function ii(a,e,l){for(var r=0;r<this._compilations.length;r++){var t=this._compilations[r];if(t.schema==a&&t.root==e&&t.baseId==l)return r}return-1}function io(a,e){return"var pattern"+a+" = new RegExp("+yl.toQuotedString(e[a])+");"}function no(a){return"var default"+a+" = defaults["+a+"];"}function oo(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function fo(a){return"var customRule"+a+" = customRules["+a+"];"}function hl(a,e){if(!a.length)return"";for(var l="",r=0;r<a.length;r++)l+=e(r,a);return l}var ni={exports:{}},Nl=ni.exports=function(){this._cache={}};Nl.prototype.put=function(e,l){this._cache[e]=l};Nl.prototype.get=function(e){return this._cache[e]};Nl.prototype.del=function(e){delete this._cache[e]};Nl.prototype.clear=function(){this._cache={}};var uo=ni.exports,co=rl,_o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ho=[0,31,28,31,30,31,30,31,31,30,31,30,31],vo=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,oi=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,mo=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,po=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,fi=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ui=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,ci=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,di=/^(?:\/(?:[^~/]|~0|~1)*)*$/,_i=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,hi=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,go=Rl;function Rl(a){return a=a=="full"?"full":"fast",co.copy(Rl[a])}Rl.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":fi,url:ui,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:oi,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:pi,uuid:ci,"json-pointer":di,"json-pointer-uri-fragment":_i,"relative-json-pointer":hi};Rl.full={date:vi,time:mi,"date-time":ko,uri:wo,"uri-reference":po,"uri-template":fi,url:ui,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:oi,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:pi,uuid:ci,"json-pointer":di,"json-pointer-uri-fragment":_i,"relative-json-pointer":hi};function bo(a){return a%4===0&&(a%100!==0||a%400===0)}function vi(a){var e=a.match(_o);if(!e)return!1;var l=+e[1],r=+e[2],t=+e[3];return r>=1&&r<=12&&t>=1&&t<=(r==2&&bo(l)?29:ho[r])}function mi(a,e){var l=a.match(vo);if(!l)return!1;var r=l[1],t=l[2],s=l[3],i=l[5];return(r<=23&&t<=59&&s<=59||r==23&&t==59&&s==60)&&(!e||i)}var Eo=/t|\s/i;function ko(a){var e=a.split(Eo);return e.length==2&&vi(e[0])&&mi(e[1],!0)}var Po=/\/|:/;function wo(a){return Po.test(a)&&mo.test(a)}var yo=/[^\\]\\Z/;function pi(a){if(yo.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}var So=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.errSchemaPath+"/"+l,v=!e.opts.allErrors,h="data"+(i||""),m="valid"+s,_,u;if(n=="#"||n=="#/")e.isRoot?(_=e.async,u="validate"):(_=e.root.schema.$async===!0,u="root.refVal[0]");else{var d=e.resolveRef(e.baseId,n,e.isRoot);if(d===void 0){var g=e.MissingRefError.message(e.baseId,n);if(e.opts.missingRefs=="fail"){e.logger.error(g);var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(n)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(n)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(n)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;t=b.pop(),!e.compositeRule&&v?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",v&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(g),v&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,n,g)}else if(d.inline){var N=e.util.copy(e);N.level++;var y="valid"+N.level;N.schema=d.schema,N.schemaPath="",N.errSchemaPath=n;var E=e.validate(N).replace(/validate\.schema/g,d.code);t+=" "+E+" ",v&&(t+=" if ("+y+") { ")}else _=d.$async===!0||e.async&&d.$async!==!1,u=d.code}if(u){var b=b||[];b.push(t),t="",e.opts.passContext?t+=" "+u+".call(this, ":t+=" "+u+"( ",t+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var p=i?"data"+(i-1||""):"parentData",R=i?e.dataPathArr[i]:"parentDataProperty";t+=" , "+p+" , "+R+", rootData)  ";var C=t;if(t=b.pop(),_){if(!e.async)throw new Error("async schema referenced by sync schema");v&&(t+=" var "+m+"; "),t+=" try { await "+C+"; ",v&&(t+=" "+m+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",v&&(t+=" "+m+" = false; "),t+=" } ",v&&(t+=" if ("+m+") { ")}else t+=" if (!"+C+") { if (vErrors === null) vErrors = "+u+".errors; else vErrors = vErrors.concat("+u+".errors); errors = vErrors.length; } ",v&&(t+=" else { ")}return t},Do=function(e,l,r){var t=" ",s=e.schema[l],i=e.schemaPath+e.util.getProperty(l),n=e.errSchemaPath+"/"+l,f=!e.opts.allErrors,v=e.util.copy(e),h="";v.level++;var m="valid"+v.level,_=v.baseId,u=!0,d=s;if(d)for(var g,b=-1,w=d.length-1;b<w;)g=d[b+=1],(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all))&&(u=!1,v.schema=g,v.schemaPath=i+"["+b+"]",v.errSchemaPath=n+"/"+b,t+="  "+e.validate(v)+" ",v.baseId=_,f&&(t+=" if ("+m+") { ",h+="}"));return f&&(u?t+=" if (true) { ":t+=" "+h.slice(0,-1)+" "),t},Co=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u="errs__"+s,d=e.util.copy(e),g="";d.level++;var b="valid"+d.level,w=n.every(function(F){return e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all)});if(w){var N=d.baseId;t+=" var "+u+" = errors; var "+_+" = false;  ";var y=e.compositeRule;e.compositeRule=d.compositeRule=!0;var E=n;if(E)for(var p,R=-1,C=E.length-1;R<C;)p=E[R+=1],d.schema=p,d.schemaPath=f+"["+R+"]",d.errSchemaPath=v+"/"+R,t+="  "+e.validate(d)+" ",d.baseId=N,t+=" "+_+" = "+_+" || "+b+"; if (!"+_+") { ",g+="}";e.compositeRule=d.compositeRule=y,t+=" "+g+" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else h&&(t+=" if (true) { ");return t},No=function(e,l,r){var t=" ",s=e.schema[l],i=e.errSchemaPath+"/"+l;e.opts.allErrors;var n=e.util.toQuotedString(s);return e.opts.$comment===!0?t+=" console.log("+n+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+n+", "+e.util.toQuotedString(i)+", validate.root.schema);"),t},Ro=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u=e.opts.$data&&n&&n.$data;u&&(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; "),u||(t+=" var schema"+s+" = validate.schema"+f+";"),t+="var "+_+" = equal("+m+", schema"+s+"); if (!"+_+") {   ";var d=d||[];d.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=d.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",h&&(t+=" else { "),t},Oo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u="errs__"+s,d=e.util.copy(e),g="";d.level++;var b="valid"+d.level,w="i"+s,N=d.dataLevel=e.dataLevel+1,y="data"+N,E=e.baseId,p=e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all);if(t+="var "+u+" = errors;var "+_+";",p){var R=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=n,d.schemaPath=f,d.errSchemaPath=v,t+=" var "+b+" = false; for (var "+w+" = 0; "+w+" < "+m+".length; "+w+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var C=m+"["+w+"]";d.dataPathArr[N]=w;var F=e.validate(d);d.baseId=E,e.util.varOccurences(F,y)<2?t+=" "+e.util.varReplace(F,y,C)+" ":t+=" var "+y+" = "+C+"; "+F+" ",t+=" if ("+b+") break; }  ",e.compositeRule=d.compositeRule=R,t+=" "+g+" if (!"+b+") {"}else t+=" if ("+m+".length == 0) {";var I=I||[];I.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var A=t;return t=I.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+A+"]); ":t+=" validate.errors = ["+A+"]; return false; ":t+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",p&&(t+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},Io=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="errs__"+s,u=e.util.copy(e),d="";u.level++;var g="valid"+u.level,b={},w={},N=e.opts.ownProperties;for(R in n)if(R!="__proto__"){var y=n[R],E=Array.isArray(y)?w:b;E[R]=y}t+="var "+_+" = errors;";var p=e.errorPath;t+="var missing"+s+";";for(var R in w)if(E=w[R],E.length){if(t+=" if ( "+m+e.util.getProperty(R)+" !== undefined ",N&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(R)+"') "),h){t+=" && ( ";var C=E;if(C)for(var F,I=-1,A=C.length-1;I<A;){F=C[I+=1],I&&(t+=" || ");var S=e.util.getProperty(F),T=m+S;t+=" ( ( "+T+" === undefined ",N&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:S)+") ) "}t+=")) {  ";var D="missing"+s,j="' + "+D+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,D,!0):p+" + "+D);var $=$||[];$.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+j+"', depsCount: "+E.length+", deps: '"+e.util.escapeQuotes(E.length==1?E[0]:E.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",E.length==1?t+="property "+e.util.escapeQuotes(E[0]):t+="properties "+e.util.escapeQuotes(E.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var x=t;t=$.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+x+"]); ":t+=" validate.errors = ["+x+"]; return false; ":t+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var ae=E;if(ae)for(var F,ie=-1,V=ae.length-1;ie<V;){F=ae[ie+=1];var S=e.util.getProperty(F),j=e.util.escapeQuotes(F),T=m+S;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,F,e.opts.jsonPointers)),t+=" if ( "+T+" === undefined ",N&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+j+"', depsCount: "+E.length+", deps: '"+e.util.escapeQuotes(E.length==1?E[0]:E.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",E.length==1?t+="property "+e.util.escapeQuotes(E[0]):t+="properties "+e.util.escapeQuotes(E.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",h&&(d+="}",t+=" else { ")}e.errorPath=p;var U=u.baseId;for(var R in b){var y=b[R];(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(t+=" "+g+" = true; if ( "+m+e.util.getProperty(R)+" !== undefined ",N&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(R)+"') "),t+=") { ",u.schema=y,u.schemaPath=f+e.util.getProperty(R),u.errSchemaPath=v+"/"+e.util.escapeFragment(R),t+="  "+e.validate(u)+" ",u.baseId=U,t+=" }  ",h&&(t+=" if ("+g+") { ",d+="}"))}return h&&(t+="   "+d+" if ("+_+" == errors) {"),t},To=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u=e.opts.$data&&n&&n.$data;u&&(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ");var d="i"+s,g="schema"+s;u||(t+=" var "+g+" = validate.schema"+f+";"),t+="var "+_+";",u&&(t+=" if (schema"+s+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+s+")) "+_+" = false; else {"),t+=""+_+" = false;for (var "+d+"=0; "+d+"<"+g+".length; "+d+"++) if (equal("+m+", "+g+"["+d+"])) { "+_+" = true; break; }",u&&(t+="  }  "),t+=" if (!"+_+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",h&&(t+=" else { "),t},Ao=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||"");if(e.opts.format===!1)return h&&(t+=" if (true) { "),t;var _=e.opts.$data&&n&&n.$data,u;_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n;var d=e.opts.unknownFormats,g=Array.isArray(d);if(_){var b="format"+s,w="isObject"+s,N="formatType"+s;t+=" var "+b+" = formats["+u+"]; var "+w+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+N+" = "+w+" && "+b+".type || 'string'; if ("+w+") { ",e.async&&(t+=" var async"+s+" = "+b+".async; "),t+=" "+b+" = "+b+".validate; } if (  ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),t+=" (",d!="ignore"&&(t+=" ("+u+" && !"+b+" ",g&&(t+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),t+=") || "),t+=" ("+b+" && "+N+" == '"+r+"' && !(typeof "+b+" == 'function' ? ",e.async?t+=" (async"+s+" ? await "+b+"("+m+") : "+b+"("+m+")) ":t+=" "+b+"("+m+") ",t+=" : "+b+".test("+m+"))))) {"}else{var b=e.formats[n];if(!b){if(d=="ignore")return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(t+=" if (true) { "),t;if(g&&d.indexOf(n)>=0)return h&&(t+=" if (true) { "),t;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var w=typeof b=="object"&&!(b instanceof RegExp)&&b.validate,N=w&&b.type||"string";if(w){var y=b.async===!0;b=b.validate}if(N!=r)return h&&(t+=" if (true) { "),t;if(y){if(!e.async)throw new Error("async format in sync schema");var E="formats"+e.util.getProperty(n)+".validate";t+=" if (!(await "+E+"("+m+"))) { "}else{t+=" if (! ";var E="formats"+e.util.getProperty(n);w&&(E+=".validate"),typeof b=="function"?t+=" "+E+"("+m+") ":t+=" "+E+".test("+m+") ",t+=") { "}}var p=p||[];p.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { format:  ",_?t+=""+u:t+=""+e.util.toQuotedString(n),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,_?t+="' + "+u+" + '":t+=""+e.util.escapeQuotes(n),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+e.util.toQuotedString(n),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var R=t;return t=p.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { "),t},Fo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u="errs__"+s,d=e.util.copy(e);d.level++;var g="valid"+d.level,b=e.schema.then,w=e.schema.else,N=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),y=w!==void 0&&(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all)),E=d.baseId;if(N||y){var p;d.createErrors=!1,d.schema=n,d.schemaPath=f,d.errSchemaPath=v,t+=" var "+u+" = errors; var "+_+" = true;  ";var R=e.compositeRule;e.compositeRule=d.compositeRule=!0,t+="  "+e.validate(d)+" ",d.baseId=E,d.createErrors=!0,t+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=R,N?(t+=" if ("+g+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(d)+" ",d.baseId=E,t+=" "+_+" = "+g+"; ",N&&y?(p="ifClause"+s,t+=" var "+p+" = 'then'; "):p="'then'",t+=" } ",y&&(t+=" else { ")):t+=" if (!"+g+") { ",y&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(d)+" ",d.baseId=E,t+=" "+_+" = "+g+"; ",N&&y?(p="ifClause"+s,t+=" var "+p+" = 'else'; "):p="'else'",t+=" } "),t+=" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { failingKeyword: "+p+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+p+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t},jo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u="errs__"+s,d=e.util.copy(e),g="";d.level++;var b="valid"+d.level,w="i"+s,N=d.dataLevel=e.dataLevel+1,y="data"+N,E=e.baseId;if(t+="var "+u+" = errors;var "+_+";",Array.isArray(n)){var p=e.schema.additionalItems;if(p===!1){t+=" "+_+" = "+m+".length <= "+n.length+"; ";var R=v;v=e.errSchemaPath+"/additionalItems",t+="  if (!"+_+") {   ";var C=C||[];C.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { limit: "+n.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var F=t;t=C.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+F+"]); ":t+=" validate.errors = ["+F+"]; return false; ":t+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",v=R,h&&(g+="}",t+=" else { ")}var I=n;if(I){for(var A,S=-1,T=I.length-1;S<T;)if(A=I[S+=1],e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all)){t+=" "+b+" = true; if ("+m+".length > "+S+") { ";var D=m+"["+S+"]";d.schema=A,d.schemaPath=f+"["+S+"]",d.errSchemaPath=v+"/"+S,d.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0),d.dataPathArr[N]=S;var j=e.validate(d);d.baseId=E,e.util.varOccurences(j,y)<2?t+=" "+e.util.varReplace(j,y,D)+" ":t+=" var "+y+" = "+D+"; "+j+" ",t+=" }  ",h&&(t+=" if ("+b+") { ",g+="}")}}if(typeof p=="object"&&(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))){d.schema=p,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+b+" = true; if ("+m+".length > "+n.length+") {  for (var "+w+" = "+n.length+"; "+w+" < "+m+".length; "+w+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var D=m+"["+w+"]";d.dataPathArr[N]=w;var j=e.validate(d);d.baseId=E,e.util.varOccurences(j,y)<2?t+=" "+e.util.varReplace(j,y,D)+" ":t+=" var "+y+" = "+D+"; "+j+" ",h&&(t+=" if (!"+b+") break; "),t+=" } }  ",h&&(t+=" if ("+b+") { ",g+="}")}}else if(e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){d.schema=n,d.schemaPath=f,d.errSchemaPath=v,t+="  for (var "+w+" = 0; "+w+" < "+m+".length; "+w+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var D=m+"["+w+"]";d.dataPathArr[N]=w;var j=e.validate(d);d.baseId=E,e.util.varOccurences(j,y)<2?t+=" "+e.util.varReplace(j,y,D)+" ":t+=" var "+y+" = "+D+"; "+j+" ",h&&(t+=" if (!"+b+") break; "),t+=" }"}return h&&(t+=" "+g+" if ("+u+" == errors) {"),t},Or=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,E,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n;var d=l=="maximum",g=d?"exclusiveMaximum":"exclusiveMinimum",b=e.schema[g],w=e.opts.$data&&b&&b.$data,N=d?"<":">",y=d?">":"<",E=void 0;if(!(_||typeof n=="number"||n===void 0))throw new Error(l+" must be number");if(!(w||b===void 0||typeof b=="number"||typeof b=="boolean"))throw new Error(g+" must be number or boolean");if(w){var p=e.util.getData(b.$data,i,e.dataPathArr),R="exclusive"+s,C="exclType"+s,F="exclIsNumber"+s,I="op"+s,A="' + "+I+" + '";t+=" var schemaExcl"+s+" = "+p+"; ",p="schemaExcl"+s,t+=" var "+R+"; var "+C+" = typeof "+p+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var E=g,S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+g+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=S.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),t+=" "+C+" == 'number' ? ( ("+R+" = "+u+" === undefined || "+p+" "+N+"= "+u+") ? "+m+" "+y+"= "+p+" : "+m+" "+y+" "+u+" ) : ( ("+R+" = "+p+" === true) ? "+m+" "+y+"= "+u+" : "+m+" "+y+" "+u+" ) || "+m+" !== "+m+") { var op"+s+" = "+R+" ? '"+N+"' : '"+N+"='; ",n===void 0&&(E=g,v=e.errSchemaPath+"/"+g,u=p,_=w)}else{var F=typeof b=="number",A=N;if(F&&_){var I="'"+A+"'";t+=" if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),t+=" ( "+u+" === undefined || "+b+" "+N+"= "+u+" ? "+m+" "+y+"= "+b+" : "+m+" "+y+" "+u+" ) || "+m+" !== "+m+") { "}else{F&&n===void 0?(R=!0,E=g,v=e.errSchemaPath+"/"+g,u=b,y+="="):(F&&(u=Math[d?"min":"max"](b,n)),b===(F?u:!0)?(R=!0,E=g,v=e.errSchemaPath+"/"+g,y+="="):(R=!1,A+="="));var I="'"+A+"'";t+=" if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),t+=" "+m+" "+y+" "+u+" || "+m+" !== "+m+") { "}}E=E||l;var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { comparison: "+I+", limit: "+u+", exclusive: "+R+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+A+" ",_?t+="' + "+u:t+=""+u+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;return t=S.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { "),t},Ir=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,g,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;if(_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n,!(_||typeof n=="number"))throw new Error(l+" must be number");var d=l=="maxItems"?">":"<";t+="if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),t+=" "+m+".length "+d+" "+u+") { ";var g=l,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(g||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",l=="maxItems"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+u+" + '":t+=""+n,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Tr=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,g,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;if(_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n,!(_||typeof n=="number"))throw new Error(l+" must be number");var d=l=="maxLength"?">":"<";t+="if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),e.opts.unicode===!1?t+=" "+m+".length ":t+=" ucs2length("+m+") ",t+=" "+d+" "+u+") { ";var g=l,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(g||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",l=="maxLength"?t+="longer":t+="shorter",t+=" than ",_?t+="' + "+u+" + '":t+=""+n,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Ar=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,g,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;if(_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n,!(_||typeof n=="number"))throw new Error(l+" must be number");var d=l=="maxProperties"?">":"<";t+="if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),t+=" Object.keys("+m+").length "+d+" "+u+") { ";var g=l,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(g||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",l=="maxProperties"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+u+" + '":t+=""+n,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Lo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;if(_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n,!(_||typeof n=="number"))throw new Error(l+" must be number");t+="var division"+s+";if (",_&&(t+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),t+=" (division"+s+" = "+m+" / "+u+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ",t+=" ) ",_&&(t+="  )  "),t+=" ) {   ";var d=d||[];d.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { multipleOf: "+u+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",_?t+="' + "+u:t+=""+u+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var g=t;return t=d.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Uo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="errs__"+s,u=e.util.copy(e);u.level++;var d="valid"+u.level;if(e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){u.schema=n,u.schemaPath=f,u.errSchemaPath=v,t+=" var "+_+" = errors;  ";var g=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.createErrors=!1;var b;u.opts.allErrors&&(b=u.opts.allErrors,u.opts.allErrors=!1),t+=" "+e.validate(u)+" ",u.createErrors=!0,b&&(u.opts.allErrors=b),e.compositeRule=u.compositeRule=g,t+=" if ("+d+") {   ";var w=w||[];w.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var N=t;t=w.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+N+"]); ":t+=" validate.errors = ["+N+"]; return false; ":t+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(t+=" if (false) { ");return t},qo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u="errs__"+s,d=e.util.copy(e),g="";d.level++;var b="valid"+d.level,w=d.baseId,N="prevValid"+s,y="passingSchemas"+s;t+="var "+u+" = errors , "+N+" = false , "+_+" = false , "+y+" = null; ";var E=e.compositeRule;e.compositeRule=d.compositeRule=!0;var p=n;if(p)for(var R,C=-1,F=p.length-1;C<F;)R=p[C+=1],(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all))?(d.schema=R,d.schemaPath=f+"["+C+"]",d.errSchemaPath=v+"/"+C,t+="  "+e.validate(d)+" ",d.baseId=w):t+=" var "+b+" = true; ",C&&(t+=" if ("+b+" && "+N+") { "+_+" = false; "+y+" = ["+y+", "+C+"]; } else { ",g+="}"),t+=" if ("+b+") { "+_+" = "+N+" = true; "+y+" = "+C+"; }";return e.compositeRule=d.compositeRule=E,t+=""+g+"if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { passingSchemas: "+y+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},zo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_=e.opts.$data&&n&&n.$data,u;_?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",u="schema"+s):u=n;var d=_?"(new RegExp("+u+"))":e.usePattern(n);t+="if ( ",_&&(t+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),t+=" !"+d+".test("+m+") ) {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { pattern:  ",_?t+=""+u:t+=""+e.util.toQuotedString(n),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,_?t+="' + "+u+" + '":t+=""+e.util.escapeQuotes(n),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+e.util.toQuotedString(n),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var b=t;return t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Vo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="errs__"+s,u=e.util.copy(e),d="";u.level++;var g="valid"+u.level,b="key"+s,w="idx"+s,N=u.dataLevel=e.dataLevel+1,y="data"+N,E="dataProperties"+s,p=Object.keys(n||{}).filter(ie),R=e.schema.patternProperties||{},C=Object.keys(R).filter(ie),F=e.schema.additionalProperties,I=p.length||C.length,A=F===!1,S=typeof F=="object"&&Object.keys(F).length,T=e.opts.removeAdditional,D=A||S||T,j=e.opts.ownProperties,$=e.baseId,x=e.schema.required;if(x&&!(e.opts.$data&&x.$data)&&x.length<e.opts.loopRequired)var ae=e.util.toHash(x);function ie(Ot){return Ot!=="__proto__"}if(t+="var "+_+" = errors;var "+g+" = true;",j&&(t+=" var "+E+" = undefined;"),D){if(j?t+=" "+E+" = "+E+" || Object.keys("+m+"); for (var "+w+"=0; "+w+"<"+E+".length; "+w+"++) { var "+b+" = "+E+"["+w+"]; ":t+=" for (var "+b+" in "+m+") { ",I){if(t+=" var isAdditional"+s+" = !(false ",p.length)if(p.length>8)t+=" || validate.schema"+f+".hasOwnProperty("+b+") ";else{var V=p;if(V)for(var U,z=-1,Z=V.length-1;z<Z;)U=V[z+=1],t+=" || "+b+" == "+e.util.toQuotedString(U)+" "}if(C.length){var O=C;if(O)for(var M,be=-1,ye=O.length-1;be<ye;)M=O[be+=1],t+=" || "+e.usePattern(M)+".test("+b+") "}t+=" ); if (isAdditional"+s+") { "}if(T=="all")t+=" delete "+m+"["+b+"]; ";else{var se=e.errorPath,Y="' + "+b+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers)),A)if(T)t+=" delete "+m+"["+b+"]; ";else{t+=" "+g+" = false; ";var ee=v;v=e.errSchemaPath+"/additionalProperties";var X=X||[];X.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { additionalProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var _e=t;t=X.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+_e+"]); ":t+=" validate.errors = ["+_e+"]; return false; ":t+=" var err = "+_e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",v=ee,h&&(t+=" break; ")}else if(S)if(T=="failing"){t+=" var "+_+" = errors;  ";var Te=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=F,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var Se=m+"["+b+"]";u.dataPathArr[N]=b;var B=e.validate(u);u.baseId=$,e.util.varOccurences(B,y)<2?t+=" "+e.util.varReplace(B,y,Se)+" ":t+=" var "+y+" = "+Se+"; "+B+" ",t+=" if (!"+g+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+b+"]; }  ",e.compositeRule=u.compositeRule=Te}else{u.schema=F,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var Se=m+"["+b+"]";u.dataPathArr[N]=b;var B=e.validate(u);u.baseId=$,e.util.varOccurences(B,y)<2?t+=" "+e.util.varReplace(B,y,Se)+" ":t+=" var "+y+" = "+Se+"; "+B+" ",h&&(t+=" if (!"+g+") break; ")}e.errorPath=se}I&&(t+=" } "),t+=" }  ",h&&(t+=" if ("+g+") { ",d+="}")}var ce=e.opts.useDefaults&&!e.compositeRule;if(p.length){var Ve=p;if(Ve)for(var U,Me=-1,xe=Ve.length-1;Me<xe;){U=Ve[Me+=1];var ze=n[U];if(e.opts.strictKeywords?typeof ze=="object"&&Object.keys(ze).length>0||ze===!1:e.util.schemaHasRules(ze,e.RULES.all)){var He=e.util.getProperty(U),Se=m+He,yt=ce&&ze.default!==void 0;u.schema=ze,u.schemaPath=f+He,u.errSchemaPath=v+"/"+e.util.escapeFragment(U),u.errorPath=e.util.getPath(e.errorPath,U,e.opts.jsonPointers),u.dataPathArr[N]=e.util.toQuotedString(U);var B=e.validate(u);if(u.baseId=$,e.util.varOccurences(B,y)<2){B=e.util.varReplace(B,y,Se);var Ke=Se}else{var Ke=y;t+=" var "+y+" = "+Se+"; "}if(yt)t+=" "+B+" ";else{if(ae&&ae[U]){t+=" if ( "+Ke+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),t+=") { "+g+" = false; ";var se=e.errorPath,ee=v,Qe=e.util.escapeQuotes(U);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(se,U,e.opts.jsonPointers)),v=e.errSchemaPath+"/required";var X=X||[];X.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+Qe+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Qe+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var _e=t;t=X.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+_e+"]); ":t+=" validate.errors = ["+_e+"]; return false; ":t+=" var err = "+_e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",v=ee,e.errorPath=se,t+=" } else { "}else h?(t+=" if ( "+Ke+" === undefined ",j&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),t+=") { "+g+" = true; } else { "):(t+=" if ("+Ke+" !== undefined ",j&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),t+=" ) { ");t+=" "+B+" } "}}h&&(t+=" if ("+g+") { ",d+="}")}}if(C.length){var Ye=C;if(Ye)for(var M,gt=-1,At=Ye.length-1;gt<At;){M=Ye[gt+=1];var ze=R[M];if(e.opts.strictKeywords?typeof ze=="object"&&Object.keys(ze).length>0||ze===!1:e.util.schemaHasRules(ze,e.RULES.all)){u.schema=ze,u.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(M),u.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(M),j?t+=" "+E+" = "+E+" || Object.keys("+m+"); for (var "+w+"=0; "+w+"<"+E+".length; "+w+"++) { var "+b+" = "+E+"["+w+"]; ":t+=" for (var "+b+" in "+m+") { ",t+=" if ("+e.usePattern(M)+".test("+b+")) { ",u.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var Se=m+"["+b+"]";u.dataPathArr[N]=b;var B=e.validate(u);u.baseId=$,e.util.varOccurences(B,y)<2?t+=" "+e.util.varReplace(B,y,Se)+" ":t+=" var "+y+" = "+Se+"; "+B+" ",h&&(t+=" if (!"+g+") break; "),t+=" } ",h&&(t+=" else "+g+" = true; "),t+=" }  ",h&&(t+=" if ("+g+") { ",d+="}")}}}return h&&(t+=" "+d+" if ("+_+" == errors) {"),t},Bo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="errs__"+s,u=e.util.copy(e),d="";u.level++;var g="valid"+u.level;if(t+="var "+_+" = errors;",e.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:e.util.schemaHasRules(n,e.RULES.all)){u.schema=n,u.schemaPath=f,u.errSchemaPath=v;var b="key"+s,w="idx"+s,N="i"+s,y="' + "+b+" + '",E=u.dataLevel=e.dataLevel+1,p="data"+E,R="dataProperties"+s,C=e.opts.ownProperties,F=e.baseId;C&&(t+=" var "+R+" = undefined; "),C?t+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+w+"=0; "+w+"<"+R+".length; "+w+"++) { var "+b+" = "+R+"["+w+"]; ":t+=" for (var "+b+" in "+m+") { ",t+=" var startErrs"+s+" = errors; ";var I=b,A=e.compositeRule;e.compositeRule=u.compositeRule=!0;var S=e.validate(u);u.baseId=F,e.util.varOccurences(S,p)<2?t+=" "+e.util.varReplace(S,p,I)+" ":t+=" var "+p+" = "+I+"; "+S+" ",e.compositeRule=u.compositeRule=A,t+=" if (!"+g+") { for (var "+N+"=startErrs"+s+"; "+N+"<errors; "+N+"++) { vErrors["+N+"].propertyName = "+b+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { propertyName: '"+y+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),h&&(t+=" break; "),t+=" } }"}return h&&(t+=" "+d+" if ("+_+" == errors) {"),t},Mo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u=e.opts.$data&&n&&n.$data;u&&(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ");var d="schema"+s;if(!u)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var g=[],b=n;if(b)for(var w,N=-1,y=b.length-1;N<y;){w=b[N+=1];var E=e.schema.properties[w];E&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))||(g[g.length]=w)}}else var g=n;if(u||g.length){var p=e.errorPath,R=u||g.length>=e.opts.loopRequired,C=e.opts.ownProperties;if(h)if(t+=" var missing"+s+"; ",R){u||(t+=" var "+d+" = validate.schema"+f+"; ");var F="i"+s,I="schema"+s+"["+F+"]",A="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,I,e.opts.jsonPointers)),t+=" var "+_+" = true; ",u&&(t+=" if (schema"+s+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+s+")) "+_+" = false; else {"),t+=" for (var "+F+" = 0; "+F+" < "+d+".length; "+F+"++) { "+_+" = "+m+"["+d+"["+F+"]] !== undefined ",C&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+d+"["+F+"]) "),t+="; if (!"+_+") break; } ",u&&(t+="  }  "),t+="  if (!"+_+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+A+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+A+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=S.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var D=g;if(D)for(var j,F=-1,$=D.length-1;F<$;){j=D[F+=1],F&&(t+=" || ");var x=e.util.getProperty(j),ae=m+x;t+=" ( ( "+ae+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(j)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:x)+") ) "}t+=") {  ";var I="missing"+s,A="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,I,!0):p+" + "+I);var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+A+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+A+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=S.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(R){u||(t+=" var "+d+" = validate.schema"+f+"; ");var F="i"+s,I="schema"+s+"["+F+"]",A="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,I,e.opts.jsonPointers)),u&&(t+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+A+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+A+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),t+=" for (var "+F+" = 0; "+F+" < "+d+".length; "+F+"++) { if ("+m+"["+d+"["+F+"]] === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+d+"["+F+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+A+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+A+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(t+="  }  ")}else{var ie=g;if(ie)for(var j,V=-1,U=ie.length-1;V<U;){j=ie[V+=1];var x=e.util.getProperty(j),A=e.util.escapeQuotes(j),ae=m+x;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,j,e.opts.jsonPointers)),t+=" if ( "+ae+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(j)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { missingProperty: '"+A+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+A+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=p}else h&&(t+=" if (true) {");return t},Ho=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m="data"+(i||""),_="valid"+s,u=e.opts.$data&&n&&n.$data,d;if(u?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",d="schema"+s):d=n,(n||u)&&e.opts.uniqueItems!==!1){u&&(t+=" var "+_+"; if ("+d+" === false || "+d+" === undefined) "+_+" = true; else if (typeof "+d+" != 'boolean') "+_+" = false; else { "),t+=" var i = "+m+".length , "+_+" = true , j; if (i > 1) { ";var g=e.schema.items&&e.schema.items.type,b=Array.isArray(g);if(!g||g=="object"||g=="array"||b&&(g.indexOf("object")>=0||g.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+_+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var w="checkDataType"+(b?"s":"");t+=" if ("+e.util[w](g,"item",e.opts.strictNumbers,!0)+") continue; ",b&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",u&&(t+="  }  "),t+=" if (!"+_+") {   ";var N=N||[];N.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",u?t+="validate.schema"+f:t+=""+n,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var y=t;t=N.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t},$o={$ref:So,allOf:Do,anyOf:Co,$comment:No,const:Ro,contains:Oo,dependencies:Io,enum:To,format:Ao,if:Fo,items:jo,maximum:Or,minimum:Or,maxItems:Ir,minItems:Ir,maxLength:Tr,minLength:Tr,maxProperties:Ar,minProperties:Ar,multipleOf:Lo,not:Uo,oneOf:qo,pattern:zo,properties:Vo,propertyNames:Bo,required:Mo,uniqueItems:Ho,validate:ai},Fr=$o,jl=rl.toHash,Qo=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],l=["type","$comment"],r=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=jl(l),e.types=jl(t),e.forEach(function(s){s.rules=s.rules.map(function(i){var n;if(typeof i=="object"){var f=Object.keys(i)[0];n=i[f],i=f,n.forEach(function(h){l.push(h),e.all[h]=!0})}l.push(i);var v=e.all[i]={keyword:i,code:Fr[i],implements:n};return v}),e.all.$comment={keyword:"$comment",code:Fr.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=jl(l.concat(r)),e.custom={},e},jr=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Go=function(a,e){for(var l=0;l<e.length;l++){a=JSON.parse(JSON.stringify(a));var r=e[l].split("/"),t=a,s;for(s=1;s<r.length;s++)t=t[r[s]];for(s=0;s<jr.length;s++){var i=jr[s],n=t[i];n&&(t[i]={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a},Ko=tr.MissingRef,Jo=gi;function gi(a,e,l){var r=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(l=e,e=void 0);var t=s(a).then(function(){var n=r._addSchema(a,void 0,e);return n.validate||i(n)});return l&&t.then(function(n){l(null,n)},l),t;function s(n){var f=n.$schema;return f&&!r.getSchema(f)?gi.call(r,{$ref:f},!0):Promise.resolve()}function i(n){try{return r._compile(n)}catch(v){if(v instanceof Ko)return f(v);throw v}function f(v){var h=v.missingSchema;if(u(h))throw new Error("Schema "+h+" is loaded but "+v.missingRef+" cannot be resolved");var m=r._loadingSchemas[h];return m||(m=r._loadingSchemas[h]=r._opts.loadSchema(h),m.then(_,_)),m.then(function(d){if(!u(h))return s(d).then(function(){u(h)||r.addSchema(d,h,void 0,e)})}).then(function(){return i(n)});function _(){delete r._loadingSchemas[h]}function u(d){return r._refs[d]||r._schemas[d]}}}}var Yo=function(e,l,r){var t=" ",s=e.level,i=e.dataLevel,n=e.schema[l],f=e.schemaPath+e.util.getProperty(l),v=e.errSchemaPath+"/"+l,h=!e.opts.allErrors,m,_="data"+(i||""),u="valid"+s,d="errs__"+s,g=e.opts.$data&&n&&n.$data,b;g?(t+=" var schema"+s+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",b="schema"+s):b=n;var w=this,N="definition"+s,y=w.definition,E="",p,R,C,F,I;if(g&&y.$data){I="keywordValidate"+s;var A=y.validateSchema;t+=" var "+N+" = RULES.custom['"+l+"'].definition; var "+I+" = "+N+".validate;"}else{if(F=e.useCustomRule(w,n,e.schema,e),!F)return;b="validate.schema"+f,I=F.code,p=y.compile,R=y.inline,C=y.macro}var S=I+".errors",T="i"+s,D="ruleErr"+s,j=y.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(R||C||(t+=""+S+" = null;"),t+="var "+d+" = errors;var "+u+";",g&&y.$data&&(E+="}",t+=" if ("+b+" === undefined) { "+u+" = true; } else { ",A&&(E+="}",t+=" "+u+" = "+N+".validateSchema("+b+"); if ("+u+") { ")),R)y.statements?t+=" "+F.validate+" ":t+=" "+u+" = "+F.validate+"; ";else if(C){var $=e.util.copy(e),E="";$.level++;var x="valid"+$.level;$.schema=F.validate,$.schemaPath="";var ae=e.compositeRule;e.compositeRule=$.compositeRule=!0;var ie=e.validate($).replace(/validate\.schema/g,I);e.compositeRule=$.compositeRule=ae,t+=" "+ie}else{var V=V||[];V.push(t),t="",t+="  "+I+".call( ",e.opts.passContext?t+="this":t+="self",p||y.schema===!1?t+=" , "+_+" ":t+=" , "+b+" , "+_+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var U=i?"data"+(i-1||""):"parentData",z=i?e.dataPathArr[i]:"parentDataProperty";t+=" , "+U+" , "+z+" , rootData )  ";var Z=t;t=V.pop(),y.errors===!1?(t+=" "+u+" = ",j&&(t+="await "),t+=""+Z+"; "):j?(S="customErrors"+s,t+=" var "+S+" = null; try { "+u+" = await "+Z+"; } catch (e) { "+u+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } "):t+=" "+S+" = null; "+u+" = "+Z+"; "}if(y.modifying&&(t+=" if ("+U+") "+_+" = "+U+"["+z+"];"),t+=""+E,y.valid)h&&(t+=" if (true) { ");else{t+=" if ( ",y.valid===void 0?(t+=" !",C?t+=""+x:t+=""+u):t+=" "+!y.valid+" ",t+=") { ",m=w.keyword;var V=V||[];V.push(t),t="";var V=V||[];V.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;t=V.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var M=t;t=V.pop(),R?y.errors?y.errors!="full"&&(t+="  for (var "+T+"="+d+"; "+T+"<errors; "+T+"++) { var "+D+" = vErrors["+T+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+D+".schemaPath === undefined) { "+D+'.schemaPath = "'+v+'"; } ',e.opts.verbose&&(t+=" "+D+".schema = "+b+"; "+D+".data = "+_+"; "),t+=" } "):y.errors===!1?t+=" "+M+" ":(t+=" if ("+d+" == errors) { "+M+" } else {  for (var "+T+"="+d+"; "+T+"<errors; "+T+"++) { var "+D+" = vErrors["+T+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+D+".schemaPath === undefined) { "+D+'.schemaPath = "'+v+'"; } ',e.opts.verbose&&(t+=" "+D+".schema = "+b+"; "+D+".data = "+_+"; "),t+=" } } "):C?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):y.errors===!1?t+=" "+M+" ":(t+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+T+"="+d+"; "+T+"<errors; "+T+"++) { var "+D+" = vErrors["+T+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+";  "+D+'.schemaPath = "'+v+'";  ',e.opts.verbose&&(t+=" "+D+".schema = "+b+"; "+D+".data = "+_+"; "),t+=" } } else { "+M+" } "),t+=" } ",h&&(t+=" else { ")}return t};const Xo="http://json-schema.org/draft-07/schema#",Zo="http://json-schema.org/draft-07/schema#",Wo="Core schema meta-schema",xo={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ef=["object","boolean"],tf={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},bi={$schema:Xo,$id:Zo,title:Wo,definitions:xo,type:ef,properties:tf,default:!0};var Lr=bi,lf={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Lr.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Lr.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},rf=/^[a-z_$][a-z0-9_$-]*$/i,af=Yo,sf=lf,nf={add:of,get:ff,remove:uf,validate:Ql};function of(a,e){var l=this.RULES;if(l.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!rf.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var r=e.type;if(Array.isArray(r))for(var t=0;t<r.length;t++)i(a,r[t],e);else i(a,r,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}l.keywords[a]=l.all[a]=!0;function i(n,f,v){for(var h,m=0;m<l.length;m++){var _=l[m];if(_.type==f){h=_;break}}h||(h={type:f,rules:[]},l.push(h));var u={keyword:n,definition:v,custom:!0,code:af,implements:v.implements};h.rules.push(u),l.custom[n]=u}return this}function ff(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function uf(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var l=0;l<e.length;l++)for(var r=e[l].rules,t=0;t<r.length;t++)if(r[t].keyword==a){r.splice(t,1);break}return this}function Ql(a,e){Ql.errors=null;var l=this._validateKeyword=this._validateKeyword||this.compile(sf,!0);if(l(a))return!0;if(Ql.errors=l.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(l.errors));return!1}const cf="http://json-schema.org/draft-07/schema#",df="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",_f="Meta-schema for $data reference (JSON Schema extension proposal)",hf="object",vf=["$data"],mf={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},pf=!1,gf={$schema:cf,$id:df,description:_f,type:hf,required:vf,properties:mf,additionalProperties:pf};var Ei=ro,el=er,bf=uo,ki=xs,Ef=ri,kf=go,Pf=Qo,Pi=Go,wi=rl,wf=dt;dt.prototype.validate=Sf;dt.prototype.compile=Df;dt.prototype.addSchema=Cf;dt.prototype.addMetaSchema=Nf;dt.prototype.validateSchema=Rf;dt.prototype.getSchema=If;dt.prototype.removeSchema=Af;dt.prototype.addFormat=Bf;dt.prototype.errorsText=Vf;dt.prototype._addSchema=Ff;dt.prototype._compile=jf;dt.prototype.compileAsync=Jo;var Ol=nf;dt.prototype.addKeyword=Ol.add;dt.prototype.getKeyword=Ol.get;dt.prototype.removeKeyword=Ol.remove;dt.prototype.validateKeyword=Ol.validate;var yi=tr;dt.ValidationError=yi.Validation;dt.MissingRefError=yi.MissingRef;dt.$dataMetaSchema=Pi;var Sl="http://json-schema.org/draft-07/schema",Ur=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],yf=["/properties"];function dt(a){if(!(this instanceof dt))return new dt(a);a=this._opts=wi.copy(a)||{},Kf(this),this._schemas={},this._refs={},this._fragments={},this._formats=kf(a.format),this._cache=a.cache||new bf,this._loadingSchemas={},this._compilations=[],this.RULES=Pf(),this._getId=Lf(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Ef),this._metaOpts=Gf(this),a.formats&&$f(this),a.keywords&&Qf(this),Mf(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Hf(this)}function Sf(a,e){var l;if(typeof a=="string"){if(l=this.getSchema(a),!l)throw new Error('no schema with key or ref "'+a+'"')}else{var r=this._addSchema(a);l=r.validate||this._compile(r)}var t=l(e);return l.$async!==!0&&(this.errors=l.errors),t}function Df(a,e){var l=this._addSchema(a,void 0,e);return l.validate||this._compile(l)}function Cf(a,e,l,r){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,l,r);return this}var s=this._getId(a);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=el.normalizeId(e||s),Di(this,e),this._schemas[e]=this._addSchema(a,l,r,!0),this}function Nf(a,e,l){return this.addSchema(a,e,l,!0),this}function Rf(a,e){var l=a.$schema;if(l!==void 0&&typeof l!="string")throw new Error("$schema must be a string");if(l=l||this._opts.defaultMeta||Of(this),!l)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(l,a);if(!r&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return r}function Of(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Sl)?Sl:void 0,a._opts.defaultMeta}function If(a){var e=Si(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return Tf(this,a)}}function Tf(a,e){var l=el.schema.call(a,{schema:{}},e);if(l){var r=l.schema,t=l.root,s=l.baseId,i=Ei.call(a,r,t,void 0,s);return a._fragments[e]=new ki({ref:e,fragment:!0,schema:r,root:t,baseId:s,validate:i}),i}}function Si(a,e){return e=el.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function Af(a){if(a instanceof RegExp)return vl(this,this._schemas,a),vl(this,this._refs,a),this;switch(typeof a){case"undefined":return vl(this,this._schemas),vl(this,this._refs),this._cache.clear(),this;case"string":var e=Si(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var l=this._opts.serialize,r=l?l(a):a;this._cache.del(r);var t=this._getId(a);t&&(t=el.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function vl(a,e,l){for(var r in e){var t=e[r];!t.meta&&(!l||l.test(r))&&(a._cache.del(t.cacheKey),delete e[r])}}function Ff(a,e,l,r){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,s=t?t(a):a,i=this._cache.get(s);if(i)return i;r=r||this._opts.addUsedSchema!==!1;var n=el.normalizeId(this._getId(a));n&&r&&Di(this,n);var f=this._opts.validateSchema!==!1&&!e,v;f&&!(v=n&&n==el.normalizeId(a.$schema))&&this.validateSchema(a,!0);var h=el.ids.call(this,a),m=new ki({id:n,schema:a,localRefs:h,cacheKey:s,meta:l});return n[0]!="#"&&r&&(this._refs[n]=m),this._cache.put(s,m),f&&v&&this.validateSchema(a,!0),m}function jf(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var l;a.meta&&(l=this._opts,this._opts=this._metaOpts);var r;try{r=Ei.call(this,a.schema,e,a.localRefs)}catch(s){throw delete a.validate,s}finally{a.compiling=!1,a.meta&&(this._opts=l)}return a.validate=r,a.refs=r.refs,a.refVal=r.refVal,a.root=r.root,r;function t(){var s=a.validate,i=s.apply(this,arguments);return t.errors=s.errors,i}}function Lf(a){switch(a.schemaId){case"auto":return zf;case"id":return Uf;default:return qf}}function Uf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function qf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function zf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Vf(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var l=e.separator===void 0?", ":e.separator,r=e.dataVar===void 0?"data":e.dataVar,t="",s=0;s<a.length;s++){var i=a[s];i&&(t+=r+i.dataPath+" "+i.message+l)}return t.slice(0,-l.length)}function Bf(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Mf(a){var e;if(a._opts.$data&&(e=gf,a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var l=bi;a._opts.$data&&(l=Pi(l,yf)),a.addMetaSchema(l,Sl,!0),a._refs["http://json-schema.org/schema"]=Sl}}function Hf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var l in e)a.addSchema(e[l],l)}function $f(a){for(var e in a._opts.formats){var l=a._opts.formats[e];a.addFormat(e,l)}}function Qf(a){for(var e in a._opts.keywords){var l=a._opts.keywords[e];a.addKeyword(e,l)}}function Di(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Gf(a){for(var e=wi.copy(a._opts),l=0;l<Ur.length;l++)delete e[Ur[l]];return e}function Kf(a){var e=a._opts.logger;if(e===!1)a.logger={log:Ll,warn:Ll,error:Ll};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function Ll(){}const Jf=Yi(wf);function $t(a,e,l,r,t,s,i,n,f,v,h,m,_){const u={id:`${Math.random()}`,type:r,position:{x:n,y:f},data:{label:t,sequence:i,d3f_class:s,user_properties:[]},measured:{width:v,height:h},origin:[.5,0],selected:!1,dragging:!1};let d,g;_?(d=u.id,g=l.id):(d=l.id,g=u.id);const b={type:"editableEdge",data:{label:m},source:g,sourceHandle:"source",target:d,targetHandle:"target",id:`xy-edge__${g}source-${d}target`,selected:!1};e.update(w=>[...w,b]),a.update(w=>[...w,u])}function qr(a,e,l){const r=a.slice();return r[18]=e[l],r}const Yf=a=>({}),zr=a=>({});function Xf(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(l){e=P(l,"No related offensive techniques in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function Zf(a){let e,l;return e=new Ht({props:{$$slots:{default:[tu]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Wf(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function Vr(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,r,t=a[18].off_tech_label.value+"",s,i,n="-->",f,v,h=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,u=de(a[18].off_artifact.value)+"",d,g,b=a[18].off_artifact_label.value+"",w,N,y,E,p=de(a[18].off_artifact.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,A,S=a[18].off_tech_id.value.replace(/ |\./g,"")+"",T,D,j=de(a[18].off_artifact.value)+"",$,x,ae=de(a[18].off_artifact.value)+"",ie,V;function U(O,M){return M&10&&(y=null),y==null&&(y=!!O[3].includes(O[18].off_tech_id.value.replace(/ |\./g,""))),y?eu:xf}let z=U(a,-1),Z=z(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" |"),m=k(h),_=k("| "),d=k(u),g=k('["'),w=k(b),N=k(`"];
            `),Z.c(),E=k(`
            class `),R=k(p),C=k(" ArtifactNode; click "),I=k(F),A=k(` href "javascript:da_to_off_callback('`),T=k(S),D=k(`')"; click `),$=k(j),x=k(' href "/dao/artifact/d3f:'),ie=k(ae),V=k('";')},l(O){l=P(O,e),r=P(O,'["'),s=P(O,t),i=P(O,'"] '),f=P(O,n),v=P(O," |"),m=P(O,h),_=P(O,"| "),d=P(O,u),g=P(O,'["'),w=P(O,b),N=P(O,`"];
            `),Z.l(O),E=P(O,`
            class `),R=P(O,p),C=P(O," ArtifactNode; click "),I=P(O,F),A=P(O,` href "javascript:da_to_off_callback('`),T=P(O,S),D=P(O,`')"; click `),$=P(O,j),x=P(O,' href "/dao/artifact/d3f:'),ie=P(O,ae),V=P(O,'";')},m(O,M){c(O,l,M),c(O,r,M),c(O,s,M),c(O,i,M),c(O,f,M),c(O,v,M),c(O,m,M),c(O,_,M),c(O,d,M),c(O,g,M),c(O,w,M),c(O,N,M),Z.m(O,M),c(O,E,M),c(O,R,M),c(O,C,M),c(O,I,M),c(O,A,M),c(O,T,M),c(O,D,M),c(O,$,M),c(O,x,M),c(O,ie,M),c(O,V,M)},p(O,M){M&2&&e!==(e=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(l,e),M&2&&t!==(t=O[18].off_tech_label.value+"")&&H(s,t),M&2&&h!==(h=O[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&H(m,h),M&2&&u!==(u=de(O[18].off_artifact.value)+"")&&H(d,u),M&2&&b!==(b=O[18].off_artifact_label.value+"")&&H(w,b),z===(z=U(O,M))&&Z?Z.p(O,M):(Z.d(1),Z=z(O),Z&&(Z.c(),Z.m(E.parentNode,E))),M&2&&p!==(p=de(O[18].off_artifact.value)+"")&&H(R,p),M&2&&F!==(F=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(I,F),M&2&&S!==(S=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(T,S),M&2&&j!==(j=de(O[18].off_artifact.value)+"")&&H($,j),M&2&&ae!==(ae=de(O[18].off_artifact.value)+"")&&H(ie,ae)},d(O){O&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(R),o(C),o(I),o(A),o(T),o(D),o($),o(x),o(ie),o(V)),Z.d(O)}}}function xf(a){let e,l=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" OffensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," OffensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function eu(a){let e,l=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedOffensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Br(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),l,r=e&&Vr(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?r?r.p(t,s):(r=Vr(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function tu(a){let e,l,r=Re(a[1].da_to_off.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=Br(qr(a,r,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR;
        `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&74){r=Re(s[1].da_to_off.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=qr(s,r,n);t[n]?t[n].p(f,i):(t[n]=Br(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function lu(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[3].length+"",g,b,w,N,y;const E=a[9].header,p=ot(E,a,a[14],zr),R=a[9].default,C=ot(R,a,a[14],null),F=[Wf,Zf,Xf],I=[];function A(S,T){return S[1]?S[1].da_to_off.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Attack Techniques
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Attack Techniques
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-1ai9hff"),W(l,"class","svelte-1ai9hff"),W(e,"class","svelte-1ai9hff")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[11](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[7]),ve(l,"click",Nt(a[10])),ve(e,"close",a[12]),ve(e,"click",Mt(a[13]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&16384)&&ft(p,E,S,S[14],w?ct(E,S[14],T,Yf):ut(S[14]),zr),C&&C.p&&(!w||T&16384)&&ft(C,R,S,S[14],w?ct(R,S[14],T,null):ut(S[14]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&8)&&d!==(d=S[3].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[11](null),N=!1,mt(y)}}}function ru(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_attack_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,p=>l(16,s=p));const u=qt();Ze(a,u,p=>l(15,t=p));let d=new Bt;function g(p){r.includes(p)?l(3,r=r.filter(R=>R!==p)):r.push(p),l(3,r)}window.da_to_off_callback=function(p){g(p)};function b(){let p=0,R=200,C=100;for(const F of r){let I=h.da_to_off.results.bindings.find(A=>A.off_tech_id.value.replace(/ |\./g,"")==F);I&&($t(_,u,v,"attackSelectorNode",I.off_tech_label.value,"d3f:"+I.off_tech_id.value,v.data.sequence,v.position.x+p*R,v.position.y+C,182,63,I.off_artifact_rel_label.value,!1),p+=1)}_.set(s),u.set(t),m&&m.close(),l(3,r=[])}function w(p){Rt.call(this,a,p)}function N(p){Je[p?"unshift":"push"](()=>{m=p,l(2,m)})}const y=()=>l(0,f=!1),E=()=>{m.close(),l(3,r=[])};return a.$$set=p=>{"show_attack_modal"in p&&l(0,f=p.show_attack_modal),"parent_node"in p&&l(8,v=p.parent_node),"data"in p&&l(1,h=p.data),"$$scope"in p&&l(14,n=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),d.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),d.reset())},l(3,r=[]),[f,h,m,r,_,u,d,b,v,i,w,N,y,E,n]}class au extends st{constructor(e){super(),it(this,e,ru,lu,at,{show_attack_modal:0,parent_node:8,data:1})}}function Mr(a,e,l){const r=a.slice();return r[23]=e[l],r}const su=a=>({}),Hr=a=>({});function iu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(l){e=P(l,"No related defensive techniques in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function nu(a){let e,l,r,t,s,i=a[4],n,f;function v(_){a[14](_)}let h={toggles:a[5]};a[4]!==void 0&&(h.selected=a[4]),r=new Zs({props:h}),Je.push(()=>Et(r,"selected",v));let m=Kr(a);return{c(){e=G("br"),l=le(),Ae(r.$$.fragment),s=le(),m.c(),n=ge()},l(_){e=K(_,"BR",{}),l=re(_),Fe(r.$$.fragment,_),s=re(_),m.l(_),n=ge()},m(_,u){c(_,e,u),c(_,l,u),je(r,_,u),c(_,s,u),m.m(_,u),c(_,n,u),f=!0},p(_,u){const d={};u&32&&(d.toggles=_[5]),!t&&u&16&&(t=!0,d.selected=_[4],bt(()=>t=!1)),r.$set(d),u&16&&at(i,i=_[4])?(kt(),me(m,1,1,Ce),Pt(),m=Kr(_),m.c(),he(m,1),m.m(n.parentNode,n)):m.p(_,u)},i(_){f||(he(r.$$.fragment,_),he(m),f=!0)},o(_){me(r.$$.fragment,_),me(m),f=!1},d(_){_&&(o(e),o(l),o(s),o(n)),Le(r,_),m.d(_)}}}function ou(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function $r(a){let e=!a[4].includes(a[23].def_tactic_label.value),l,r=e&&Qr(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&18&&(e=!t[4].includes(t[23].def_tactic_label.value)),e?r?r.p(t,s):(r=Qr(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function Qr(a){let e=de(a[23].def_tech.value)+"",l,r,t=a[23].def_tech_label.value+"",s,i,n="-->",f,v,h=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",m,_,u=de(a[23].def_artifact.value)+"",d,g,b=a[23].def_artifact_label.value+"",w,N,y,E,p=de(a[23].def_artifact.value)+"",R,C,F=de(a[23].def_tech.value)+"",I,A,S=de(a[23].def_tech.value)+"",T,D,j=de(a[23].def_artifact.value)+"",$,x,ae=de(a[23].def_artifact.value)+"",ie,V;function U(O,M){return M&66&&(y=null),y==null&&(y=!!O[6].includes(de(O[23].def_tech.value))),y?uu:fu}let z=U(a,-1),Z=z(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(`
                | `),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
                `),Z.c(),E=k(` 
                class `),R=k(p),C=k(` ArtifactNode;
                click `),I=k(F),A=k(` href "javascript:da_to_def_callback('`),T=k(S),D=k(`')";
                click `),$=k(j),x=k(' href "/dao/artifact/d3f:'),ie=k(ae),V=k('";')},l(O){l=P(O,e),r=P(O,'["'),s=P(O,t),i=P(O,'"] '),f=P(O,n),v=P(O,`
                | `),m=P(O,h),_=P(O," | "),d=P(O,u),g=P(O,'["'),w=P(O,b),N=P(O,`"];
                `),Z.l(O),E=P(O,` 
                class `),R=P(O,p),C=P(O,` ArtifactNode;
                click `),I=P(O,F),A=P(O,` href "javascript:da_to_def_callback('`),T=P(O,S),D=P(O,`')";
                click `),$=P(O,j),x=P(O,' href "/dao/artifact/d3f:'),ie=P(O,ae),V=P(O,'";')},m(O,M){c(O,l,M),c(O,r,M),c(O,s,M),c(O,i,M),c(O,f,M),c(O,v,M),c(O,m,M),c(O,_,M),c(O,d,M),c(O,g,M),c(O,w,M),c(O,N,M),Z.m(O,M),c(O,E,M),c(O,R,M),c(O,C,M),c(O,I,M),c(O,A,M),c(O,T,M),c(O,D,M),c(O,$,M),c(O,x,M),c(O,ie,M),c(O,V,M)},p(O,M){M&2&&e!==(e=de(O[23].def_tech.value)+"")&&H(l,e),M&2&&t!==(t=O[23].def_tech_label.value+"")&&H(s,t),M&2&&h!==(h=O[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&H(m,h),M&2&&u!==(u=de(O[23].def_artifact.value)+"")&&H(d,u),M&2&&b!==(b=O[23].def_artifact_label.value+"")&&H(w,b),z===(z=U(O,M))&&Z?Z.p(O,M):(Z.d(1),Z=z(O),Z&&(Z.c(),Z.m(E.parentNode,E))),M&2&&p!==(p=de(O[23].def_artifact.value)+"")&&H(R,p),M&2&&F!==(F=de(O[23].def_tech.value)+"")&&H(I,F),M&2&&S!==(S=de(O[23].def_tech.value)+"")&&H(T,S),M&2&&j!==(j=de(O[23].def_artifact.value)+"")&&H($,j),M&2&&ae!==(ae=de(O[23].def_artifact.value)+"")&&H(ie,ae)},d(O){O&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(R),o(C),o(I),o(A),o(T),o(D),o($),o(x),o(ie),o(V)),Z.d(O)}}}function fu(a){let e,l=de(a[23].def_tech.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" DefensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," DefensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[23].def_tech.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function uu(a){let e,l=de(a[23].def_tech.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedDefensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[23].def_tech.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Gr(a){let e=a[3].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].def_artifact_label.value),l,r=e&&$r(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&10&&(e=t[3].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].def_artifact_label.value)),e?r?r.p(t,s):(r=$r(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function cu(a){let e,l,r=Re(a[1].da_to_def.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=Gr(Mr(a,r,s));return{c(){e=k(`graph LR;
          `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR;
          `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&90){r=Re(s[1].da_to_def.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=Mr(s,r,n);t[n]?t[n].p(f,i):(t[n]=Gr(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function Kr(a){let e,l;return e=new Ht({props:{$$slots:{default:[cu]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&262234&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function du(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[6].length+"",g,b,w,N,y;const E=a[12].header,p=ot(E,a,a[18],Hr),R=a[12].default,C=ot(R,a,a[18],null),F=[ou,nu,iu],I=[];function A(S,T){return S[1]?S[1].da_to_def.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Countermeasure Techniques
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Countermeasure Techniques
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-1yq7x1p"),W(l,"class","svelte-1yq7x1p"),W(e,"class","svelte-1yq7x1p")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[15](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[9]),ve(l,"click",Nt(a[13])),ve(e,"close",a[16]),ve(e,"click",Mt(a[17]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&262144)&&ft(p,E,S,S[18],w?ct(E,S[18],T,su):ut(S[18]),Hr),C&&C.p&&(!w||T&262144)&&ft(C,R,S,S[18],w?ct(R,S[18],T,null):ut(S[18]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&64)&&d!==(d=S[6].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[15](null),N=!1,mt(y)}}}function _u(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_defend_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,A=>l(20,s=A));const u=qt();Ze(a,u,A=>l(19,t=A));let d=new Bt;function g(A){r.includes(A)?l(6,r=r.filter(S=>S!==A)):r.push(A),l(6,r)}window.da_to_def_callback=function(A){g(A)};function b(){let A=0,S=200,T=100;for(const D of r){let j=h.da_to_def.results.bindings.find($=>de($.def_tech.value)==D);j&&($t(_,u,v,"countermeasureSelectorNode",j.def_tech_label.value,"d3f:"+de(j.def_tech.value),v.data.sequence,v.position.x+A*S,v.position.y-T,182,63,j.def_artifact_rel_label.value,!1),A+=1)}_.set(s),u.set(t),m&&m.close(),l(6,r=[])}let w=new Set,N=[],y=[];Ys(N,y)&&(y=[]);function E(A){for(const S of r){let T=h.da_to_def.results.bindings.find(D=>de(D.def_tech.value)==S);A.includes(T.def_tactic_label.value)&&l(6,r=r.filter(D=>D!==S))}l(6,r)}function p(A){Rt.call(this,a,A)}function R(A){y=A,l(4,y)}function C(A){Je[A?"unshift":"push"](()=>{m=A,l(2,m)})}const F=()=>l(0,f=!1),I=()=>{m.close(),l(6,r=[])};return a.$$set=A=>{"show_defend_modal"in A&&l(0,f=A.show_defend_modal),"parent_node"in A&&l(10,v=A.parent_node),"data"in A&&l(1,h=A.data),"$$scope"in A&&l(18,n=A.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),l(3,d=new Bt)),a.$$.dirty&5&&!f&&m&&m.close(),a.$$.dirty&2050&&h&&(h.da_to_def.results.bindings.forEach(A=>{w.add(A.def_tactic_label.value)}),l(11,w),l(1,h)),a.$$.dirty&2048&&l(5,N=Array.from(w).sort(function(A,S){return El[A]-El[S]})),a.$$.dirty&16&&E(y),a.$$.dirty&24&&d.reset(y)},l(6,r=[]),[f,h,m,d,y,N,r,_,u,b,v,w,i,p,R,C,F,I,n]}class hu extends st{constructor(e){super(),it(this,e,_u,du,at,{show_defend_modal:0,parent_node:10,data:1})}}function Jr(a,e,l){const r=a.slice();return r[26]=e[l],r}function Yr(a,e,l){const r=a.slice();return r[29]=e[l],r}function Xr(a,e,l){const r=a.slice();return r[32]=e[l],r}function Zr(a,e,l){const r=a.slice();return r[26]=e[l],r}function Wr(a,e,l){const r=a.slice();return r[29]=e[l],r}const vu=a=>({}),xr=a=>({});function mu(a){let e;return{c(){e=k("No related weaknesses in this release.")},l(l){e=P(l,"No related weaknesses in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function pu(a){let e,l;return e=new Ht({props:{$$slots:{default:[bu]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function gu(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function ea(a){let e,l=Re(a[32]["d3f:outbound"]),r=[];for(let t=0;t<l.length;t+=1)r[t]=ra(Zr(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&430){l=Re(t[32]["d3f:outbound"]);let i;for(i=0;i<l.length;i+=1){const n=Zr(t,l,i);r[i]?r[i].p(n,s):(r[i]=ra(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function ta(a){let e,l=a[32]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_inbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_inbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&160&&l!==(l=s[32]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function la(a){let e=a[32]["@id"]+"",l,r,t=a[32]["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[26]["@id"])+"",m,_,u=a[29]["@id"]+"",d,g,b=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",w,N,y=a[32]["@id"]+"",E,p,R=a[32]["@id"]+"",C,F,I,A,S=a[8].includes(a[32]["@id"]),T,D=a[29]["@id"]+"",j,$,x=a[29]["@id"]+"",ae,ie,V,U,z=a[32]["@id"]+"",Z,O,M=a[32]["@id"]+"",be,ye,se=a[29]["@id"]+"",Y,ee,X=a[3](a[29])+"",_e,Te,Se=S&&ta(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
                class `),E=k(y),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),I=k(a[1]),A=k(`;
                `),Se&&Se.c(),T=k(`
                class `),j=k(D),$=k(" RootArtifactNode; style "),ae=k(x),ie=k(" fill:"),V=k(a[2]),U=k(`;
                click `),Z=k(z),O=k(` href "javascript:da_to_weak_callback('`),be=k(M),ye=k(`')"; click `),Y=k(se),ee=k(' href "'),_e=k(X),Te=k('";')},l(B){l=P(B,e),r=P(B,'["'),s=P(B,t),i=P(B,'"] '),f=P(B,n),v=P(B," | "),m=P(B,h),_=P(B," | "),d=P(B,u),g=P(B,'["'),w=P(B,b),N=P(B,`"];
                class `),E=P(B,y),p=P(B," inbound_node; style "),C=P(B,R),F=P(B," fill:"),I=P(B,a[1]),A=P(B,`;
                `),Se&&Se.l(B),T=P(B,`
                class `),j=P(B,D),$=P(B," RootArtifactNode; style "),ae=P(B,x),ie=P(B," fill:"),V=P(B,a[2]),U=P(B,`;
                click `),Z=P(B,z),O=P(B,` href "javascript:da_to_weak_callback('`),be=P(B,M),ye=P(B,`')"; click `),Y=P(B,se),ee=P(B,' href "'),_e=P(B,X),Te=P(B,'";')},m(B,ce){c(B,l,ce),c(B,r,ce),c(B,s,ce),c(B,i,ce),c(B,f,ce),c(B,v,ce),c(B,m,ce),c(B,_,ce),c(B,d,ce),c(B,g,ce),c(B,w,ce),c(B,N,ce),c(B,E,ce),c(B,p,ce),c(B,C,ce),c(B,F,ce),c(B,I,ce),c(B,A,ce),Se&&Se.m(B,ce),c(B,T,ce),c(B,j,ce),c(B,$,ce),c(B,ae,ce),c(B,ie,ce),c(B,V,ce),c(B,U,ce),c(B,Z,ce),c(B,O,ce),c(B,be,ce),c(B,ye,ce),c(B,Y,ce),c(B,ee,ce),c(B,_e,ce),c(B,Te,ce)},p(B,ce){ce[0]&160&&e!==(e=B[32]["@id"]+"")&&H(l,e),ce[0]&160&&t!==(t=B[32]["rdfs:label"][0]+"")&&H(s,t),ce[0]&160&&h!==(h=de(B[26]["@id"])+"")&&H(m,h),ce[0]&160&&u!==(u=B[29]["@id"]+"")&&H(d,u),ce[0]&160&&b!==(b=B[7].i(B[29]["@id"])["rdfs:label"][0]+"")&&H(w,b),ce[0]&160&&y!==(y=B[32]["@id"]+"")&&H(E,y),ce[0]&160&&R!==(R=B[32]["@id"]+"")&&H(C,R),ce[0]&2&&H(I,B[1]),ce[0]&416&&(S=B[8].includes(B[32]["@id"])),S?Se?Se.p(B,ce):(Se=ta(B),Se.c(),Se.m(T.parentNode,T)):Se&&(Se.d(1),Se=null),ce[0]&160&&D!==(D=B[29]["@id"]+"")&&H(j,D),ce[0]&160&&x!==(x=B[29]["@id"]+"")&&H(ae,x),ce[0]&4&&H(V,B[2]),ce[0]&160&&z!==(z=B[32]["@id"]+"")&&H(Z,z),ce[0]&160&&M!==(M=B[32]["@id"]+"")&&H(be,M),ce[0]&160&&se!==(se=B[29]["@id"]+"")&&H(Y,se),ce[0]&168&&X!==(X=B[3](B[29])+"")&&H(_e,X)},d(B){B&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(I),o(A),o(T),o(j),o($),o(ae),o(ie),o(V),o(U),o(Z),o(O),o(be),o(ye),o(Y),o(ee),o(_e),o(Te)),Se&&Se.d(B)}}}function ra(a){let e,l=Re(a[32][a[26]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=la(Wr(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&430){l=Re(t[32][t[26]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=Wr(t,l,i);r[i]?r[i].p(n,s):(r[i]=la(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function aa(a){let e,l=a[32]["d3f:outbound"]&&ea(a);return{c(){l&&l.c(),e=ge()},l(r){l&&l.l(r),e=ge()},m(r,t){l&&l.m(r,t),c(r,e,t)},p(r,t){r[32]["d3f:outbound"]?l?l.p(r,t):(l=ea(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(r){r&&o(e),l&&l.d(r)}}}function sa(a){let e,l=Re(a[7].i(a[5].description["@id"])["d3f:outbound"]),r=[];for(let t=0;t<l.length;t+=1)r[t]=na(Jr(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&184){l=Re(t[7].i(t[5].description["@id"])["d3f:outbound"]);let i;for(i=0;i<l.length;i+=1){const n=Jr(t,l,i);r[i]?r[i].p(n,s):(r[i]=na(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function ia(a){let e=a[5].description["@id"]+"",l,r,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[26]["@id"])+"",m,_,u=a[29]["@id"]+"",d,g,b=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",w,N,y=a[5].description["@id"]+"",E,p,R=a[29]["@id"]+"",C,F,I=a[5].description["@id"]+"",A,S,T=a[3](a[5].description["@id"])+"",D,j,$=a[29]["@id"]+"",x,ae,ie=a[4](a[29])+"",V,U;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k('"]; class '),E=k(y),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
              click `),A=k(I),S=k(' href "'),D=k(T),j=k('"; click '),x=k($),ae=k(' href "'),V=k(ie),U=k('";')},l(z){l=P(z,e),r=P(z,'["'),s=P(z,t),i=P(z,'"] '),f=P(z,n),v=P(z," | "),m=P(z,h),_=P(z," | "),d=P(z,u),g=P(z,'["'),w=P(z,b),N=P(z,'"]; class '),E=P(z,y),p=P(z," RootArtifactNode; class "),C=P(z,R),F=P(z,` ArtifactNode;
              click `),A=P(z,I),S=P(z,' href "'),D=P(z,T),j=P(z,'"; click '),x=P(z,$),ae=P(z,' href "'),V=P(z,ie),U=P(z,'";')},m(z,Z){c(z,l,Z),c(z,r,Z),c(z,s,Z),c(z,i,Z),c(z,f,Z),c(z,v,Z),c(z,m,Z),c(z,_,Z),c(z,d,Z),c(z,g,Z),c(z,w,Z),c(z,N,Z),c(z,E,Z),c(z,p,Z),c(z,C,Z),c(z,F,Z),c(z,A,Z),c(z,S,Z),c(z,D,Z),c(z,j,Z),c(z,x,Z),c(z,ae,Z),c(z,V,Z),c(z,U,Z)},p(z,Z){Z[0]&32&&e!==(e=z[5].description["@id"]+"")&&H(l,e),Z[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&H(s,t),Z[0]&160&&h!==(h=de(z[26]["@id"])+"")&&H(m,h),Z[0]&160&&u!==(u=z[29]["@id"]+"")&&H(d,u),Z[0]&160&&b!==(b=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&H(w,b),Z[0]&32&&y!==(y=z[5].description["@id"]+"")&&H(E,y),Z[0]&160&&R!==(R=z[29]["@id"]+"")&&H(C,R),Z[0]&32&&I!==(I=z[5].description["@id"]+"")&&H(A,I),Z[0]&40&&T!==(T=z[3](z[5].description["@id"])+"")&&H(D,T),Z[0]&160&&$!==($=z[29]["@id"]+"")&&H(x,$),Z[0]&176&&ie!==(ie=z[4](z[29])+"")&&H(V,ie)},d(z){z&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(D),o(j),o(x),o(ae),o(V),o(U))}}}function na(a){let e,l=Re(a[7].i(a[5].description["@id"])[a[26]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=ia(Yr(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&184){l=Re(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=Yr(t,l,i);r[i]?r[i].p(n,s):(r[i]=ia(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function bu(a){let e,l,r=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Re(a[7].graph.filter(a[18])),i=[];for(let f=0;f<s.length;f+=1)i[f]=aa(Xr(a,s,f));let n=r&&sa(a);return{c(){e=k(`graph LR;
        `);for(let f=0;f<i.length;f+=1)i[f].c();l=le(),n&&n.c(),t=ge()},l(f){e=P(f,`graph LR;
        `);for(let v=0;v<i.length;v+=1)i[v].l(f);l=re(f),n&&n.l(f),t=ge()},m(f,v){c(f,e,v);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(f,v);c(f,l,v),n&&n.m(f,v),c(f,t,v)},p(f,v){if(v[0]&430){s=Re(f[7].graph.filter(f[18]));let h;for(h=0;h<s.length;h+=1){const m=Xr(f,s,h);i[h]?i[h].p(m,v):(i[h]=aa(m),i[h].c(),i[h].m(l.parentNode,l))}for(;h<i.length;h+=1)i[h].d(1);i.length=s.length}v[0]&160&&(r=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),r?n?n.p(f,v):(n=sa(f),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(f){f&&(o(e),o(l),o(t)),Ge(i,f),n&&n.d(f)}}}function Eu(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[8].length+"",g,b,w,N,y;const E=a[16].header,p=ot(E,a,a[22],xr),R=a[16].default,C=ot(R,a,a[22],null),F=[gu,pu,mu],I=[];function A(S,T){return S[5]?S[7].graph.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Weaknesses
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Weaknesses
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-1resfch"),W(l,"class","svelte-1resfch"),W(e,"class","svelte-1resfch")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[19](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[11]),ve(l,"click",Nt(a[17])),ve(e,"close",a[20]),ve(e,"click",Mt(a[21]))],N=!0)},p(S,T){p&&p.p&&(!w||T[0]&4194304)&&ft(p,E,S,S[22],w?ct(E,S[22],T,vu):ut(S[22]),xr),C&&C.p&&(!w||T[0]&4194304)&&ft(C,R,S,S[22],w?ct(R,S[22],T,null):ut(S[22]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T[0]&256)&&d!==(d=S[8].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[19](null),N=!1,mt(y)}}}function ku(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:v="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:m=D=>`/dao/artifact/${D["@id"]}`}=e,{inbound_link_function:_=m}=e,{root_link_function:u=D=>`/dao/artifact/${D["@id"]}`}=e,{outbound_link_function:d=m}=e,{show_weakness_modal:g}=e,{parent_node:b}=e,{data:w}=e,N;const y=Ut();Ze(a,y,D=>l(24,s=D));const E=qt();Ze(a,E,D=>l(23,t=D));let p;function R(D){r.includes(D)?l(8,r=r.filter(j=>j!==D)):r.push(D),l(8,r),l(8,r)}window.da_to_weak_callback=function(D){R(D)};function C(){let D=0,j=200,$=100;for(const x of r){let ae=w.da_to_weak["@graph"].find(ie=>ie["@id"]==x);ae&&($t(y,E,b,"vulnerabilitySelectorNode",ae["rdfs:label"],ae["d3f:cwe-id"],b.data.sequence,b.position.x+D*j,b.position.y+$,182,63,ae["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),D+=1)}y.set(s),E.set(t),N&&N.close(),l(8,r=[])}function F(D){Rt.call(this,a,D)}const I=D=>D["@id"]!=w.description["@id"];function A(D){Je[D?"unshift":"push"](()=>{N=D,l(6,N)})}const S=()=>l(0,g=!1),T=()=>{N.close(),l(8,r=[])};return a.$$set=D=>{"outbound_color"in D&&l(12,f=D.outbound_color),"inbound_color"in D&&l(1,v=D.inbound_color),"root_color"in D&&l(2,h=D.root_color),"link_function"in D&&l(13,m=D.link_function),"inbound_link_function"in D&&l(14,_=D.inbound_link_function),"root_link_function"in D&&l(3,u=D.root_link_function),"outbound_link_function"in D&&l(4,d=D.outbound_link_function),"show_weakness_modal"in D&&l(0,g=D.show_weakness_modal),"parent_node"in D&&l(15,b=D.parent_node),"data"in D&&l(5,w=D.data),"$$scope"in D&&l(22,n=D.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&g&&N&&N.showModal(),a.$$.dirty[0]&65&&!g&&N&&N.close(),a.$$.dirty[0]&32&&w&&l(7,p=new gl(w.da_to_weak,{index:!0}))},l(8,r=[]),[g,v,h,u,d,w,N,p,r,y,E,C,f,m,_,b,i,F,I,A,S,T,n]}class Pu extends st{constructor(e){super(),it(this,e,ku,Eu,at,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function oa(a,e,l){const r=a.slice();return r[36]=e[l],r}function fa(a,e,l){const r=a.slice();return r[39]=e[l],r}function ua(a,e,l){const r=a.slice();return r[42]=e[l],r}function ca(a,e,l){const r=a.slice();return r[45]=e[l],r}function da(a,e,l){const r=a.slice();return r[48]=e[l],r}function _a(a,e,l){const r=a.slice();return r[42]=e[l],r}function ha(a,e,l){const r=a.slice();return r[45]=e[l],r}const wu=a=>({}),va=a=>({});function yu(a){let e;return{c(){e=k(a[1])},l(l){e=P(l,a[1])},m(l,r){c(l,e,r)},p(l,r){r[0]&2&&H(e,l[1])},i:Ce,o:Ce,d(l){l&&o(e)}}}function Su(a){let e,l;return e=new Ht({props:{$$slots:{default:[Cu]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t[0]&1660|t[1]&2&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Du(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function ma(a){let e,l=Re(a[48]["d3f:outbound"].filter(a[26])),r=[];for(let t=0;t<l.length;t+=1)r[t]=Da(_a(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&9840){l=Re(t[48]["d3f:outbound"].filter(t[26]));let i;for(i=0;i<l.length;i+=1){const n=_a(t,l,i);r[i]?r[i].p(n,s):(r[i]=Da(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function pa(a){let e=a[48]["@id"]+"",l,r,t=a[48]["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[42]["@id"])+"",m,_,u=a[45]["@id"]+"",d,g,b=a[9].i(a[45]["@id"])["rdfs:label"][0]+"",w,N;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k('"];')},l(y){l=P(y,e),r=P(y,'["'),s=P(y,t),i=P(y,'"] '),f=P(y,n),v=P(y," | "),m=P(y,h),_=P(y," | "),d=P(y,u),g=P(y,'["'),w=P(y,b),N=P(y,'"];')},m(y,E){c(y,l,E),c(y,r,E),c(y,s,E),c(y,i,E),c(y,f,E),c(y,v,E),c(y,m,E),c(y,_,E),c(y,d,E),c(y,g,E),c(y,w,E),c(y,N,E)},p(y,E){E[0]&576&&e!==(e=y[48]["@id"]+"")&&H(l,e),E[0]&576&&t!==(t=y[48]["rdfs:label"][0]+"")&&H(s,t),E[0]&592&&h!==(h=de(y[42]["@id"])+"")&&H(m,h),E[0]&592&&u!==(u=y[45]["@id"]+"")&&H(d,u),E[0]&592&&b!==(b=y[9].i(y[45]["@id"])["rdfs:label"][0]+"")&&H(w,b)},d(y){y&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N))}}}function ga(a){let e=a[5].data.d3f_class+"",l,r,t=a[9].i(a[5].data.d3f_class)["rdfs:label"][0]+"",s,i,n="-.->",f,v,h=de(a[42]["@id"])+"",m,_,u=a[45]["@id"]+"",d,g,b=a[9].i(a[45]["@id"])["rdfs:label"][0]+"",w,N,y=a[45]["@id"]+"",E,p,R=a[5].data.d3f_class+"",C,F,I=de(a[42]["@id"])+"",A,S,T=a[45]["@id"]+"",D,j,$=a[10].some(ae),x;function ae(...V){return a[24](a[42],a[45],...V)}let ie=$&&ba(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
                  click `),E=k(y),p=k(` href "javascript:da_to_neighbors_callback('`),C=k(R),F=k("', '"),A=k(I),S=k("','"),D=k(T),j=k(`')";
                  `),ie&&ie.c(),x=ge()},l(V){l=P(V,e),r=P(V,'["'),s=P(V,t),i=P(V,'"] '),f=P(V,n),v=P(V," | "),m=P(V,h),_=P(V," | "),d=P(V,u),g=P(V,'["'),w=P(V,b),N=P(V,`"];
                  click `),E=P(V,y),p=P(V,` href "javascript:da_to_neighbors_callback('`),C=P(V,R),F=P(V,"', '"),A=P(V,I),S=P(V,"','"),D=P(V,T),j=P(V,`')";
                  `),ie&&ie.l(V),x=ge()},m(V,U){c(V,l,U),c(V,r,U),c(V,s,U),c(V,i,U),c(V,f,U),c(V,v,U),c(V,m,U),c(V,_,U),c(V,d,U),c(V,g,U),c(V,w,U),c(V,N,U),c(V,E,U),c(V,p,U),c(V,C,U),c(V,F,U),c(V,A,U),c(V,S,U),c(V,D,U),c(V,j,U),ie&&ie.m(V,U),c(V,x,U)},p(V,U){a=V,U[0]&32&&e!==(e=a[5].data.d3f_class+"")&&H(l,e),U[0]&544&&t!==(t=a[9].i(a[5].data.d3f_class)["rdfs:label"][0]+"")&&H(s,t),U[0]&592&&h!==(h=de(a[42]["@id"])+"")&&H(m,h),U[0]&592&&u!==(u=a[45]["@id"]+"")&&H(d,u),U[0]&592&&b!==(b=a[9].i(a[45]["@id"])["rdfs:label"][0]+"")&&H(w,b),U[0]&592&&y!==(y=a[45]["@id"]+"")&&H(E,y),U[0]&32&&R!==(R=a[5].data.d3f_class+"")&&H(C,R),U[0]&592&&I!==(I=de(a[42]["@id"])+"")&&H(A,I),U[0]&592&&T!==(T=a[45]["@id"]+"")&&H(D,T),U[0]&1648&&($=a[10].some(ae)),$?ie?ie.p(a,U):(ie=ba(a),ie.c(),ie.m(x.parentNode,x)):ie&&(ie.d(1),ie=null)},d(V){V&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(D),o(j),o(x)),ie&&ie.d(V)}}}function ba(a){let e,l=a[45]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_outbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_outbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&592&&l!==(l=s[45]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Ea(a){let e,l,r=a[48]["@id"]==a[5].data.d3f_class&&ka(a),t=a[45]["@id"]==a[5].data.d3f_class&&Pa(a);return{c(){r&&r.c(),e=le(),t&&t.c(),l=ge()},l(s){r&&r.l(s),e=re(s),t&&t.l(s),l=ge()},m(s,i){r&&r.m(s,i),c(s,e,i),t&&t.m(s,i),c(s,l,i)},p(s,i){s[48]["@id"]==s[5].data.d3f_class?r?r.p(s,i):(r=ka(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),s[45]["@id"]==s[5].data.d3f_class?t?t.p(s,i):(t=Pa(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(s){s&&(o(e),o(l)),r&&r.d(s),t&&t.d(s)}}}function ka(a){let e,l=a[45]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_outbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_outbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&592&&l!==(l=s[45]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Pa(a){let e,l=a[48]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_outbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_outbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&576&&l!==(l=s[48]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function wa(a){let e,l=a[48]["@id"]+"",r,t,s=a[48]["@id"]+"",i,n,f=de(a[42]["@id"])+"",v,h,m=a[45]["@id"]+"",_,u;return{c(){e=k("click "),r=k(l),t=k(` href "javascript:da_to_neighbors_callback('`),i=k(s),n=k("', '"),v=k(f),h=k("','"),_=k(m),u=k(`')";`)},l(d){e=P(d,"click "),r=P(d,l),t=P(d,` href "javascript:da_to_neighbors_callback('`),i=P(d,s),n=P(d,"', '"),v=P(d,f),h=P(d,"','"),_=P(d,m),u=P(d,`')";`)},m(d,g){c(d,e,g),c(d,r,g),c(d,t,g),c(d,i,g),c(d,n,g),c(d,v,g),c(d,h,g),c(d,_,g),c(d,u,g)},p(d,g){g[0]&576&&l!==(l=d[48]["@id"]+"")&&H(r,l),g[0]&576&&s!==(s=d[48]["@id"]+"")&&H(i,s),g[0]&592&&f!==(f=de(d[42]["@id"])+"")&&H(v,f),g[0]&592&&m!==(m=d[45]["@id"]+"")&&H(_,m)},d(d){d&&(o(e),o(r),o(t),o(i),o(n),o(v),o(h),o(_),o(u))}}}function ya(a){let e,l=a[45]["@id"]+"",r,t,s=a[48]["@id"]+"",i,n,f=de(a[42]["@id"])+"",v,h,m=a[45]["@id"]+"",_,u;return{c(){e=k("click "),r=k(l),t=k(` href "javascript:da_to_neighbors_callback('`),i=k(s),n=k("', '"),v=k(f),h=k("','"),_=k(m),u=k(`')";`)},l(d){e=P(d,"click "),r=P(d,l),t=P(d,` href "javascript:da_to_neighbors_callback('`),i=P(d,s),n=P(d,"', '"),v=P(d,f),h=P(d,"','"),_=P(d,m),u=P(d,`')";`)},m(d,g){c(d,e,g),c(d,r,g),c(d,t,g),c(d,i,g),c(d,n,g),c(d,v,g),c(d,h,g),c(d,_,g),c(d,u,g)},p(d,g){g[0]&592&&l!==(l=d[45]["@id"]+"")&&H(r,l),g[0]&576&&s!==(s=d[48]["@id"]+"")&&H(i,s),g[0]&592&&f!==(f=de(d[42]["@id"])+"")&&H(v,f),g[0]&592&&m!==(m=d[45]["@id"]+"")&&H(_,m)},d(d){d&&(o(e),o(r),o(t),o(i),o(n),o(v),o(h),o(_),o(u))}}}function Sa(a){let e=a[13].edge_is_unique(a[48]["@id"],a[42]["@id"],a[45]["@id"]),l,r=a[45]["@id"]+"",t,s,i=a[9].i(a[5].data.d3f_class)&&a[48]["@id"]!=a[5].data.d3f_class&&a[45]["@id"]!=a[5].data.d3f_class&&a[13].edge_is_unique(a[5].data.d3f_class,a[42]["@id"],a[45]["@id"]),n,f=a[10].some(_),v,h,m;function _(...N){return a[23](a[48],a[42],a[45],...N)}let u=e&&pa(a),d=i&&ga(a),g=f&&Ea(a),b=a[45]["@id"]==a[5].data.d3f_class&&wa(a),w=a[48]["@id"]==a[5].data.d3f_class&&ya(a);return{c(){u&&u.c(),l=k(`
                class `),t=k(r),s=k(` outbound;
                
                `),d&&d.c(),n=le(),g&&g.c(),v=le(),b&&b.c(),h=le(),w&&w.c(),m=ge()},l(N){u&&u.l(N),l=P(N,`
                class `),t=P(N,r),s=P(N,` outbound;
                
                `),d&&d.l(N),n=re(N),g&&g.l(N),v=re(N),b&&b.l(N),h=re(N),w&&w.l(N),m=ge()},m(N,y){u&&u.m(N,y),c(N,l,y),c(N,t,y),c(N,s,y),d&&d.m(N,y),c(N,n,y),g&&g.m(N,y),c(N,v,y),b&&b.m(N,y),c(N,h,y),w&&w.m(N,y),c(N,m,y)},p(N,y){a=N,y[0]&592&&(e=a[13].edge_is_unique(a[48]["@id"],a[42]["@id"],a[45]["@id"])),e?u?u.p(a,y):(u=pa(a),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),y[0]&592&&r!==(r=a[45]["@id"]+"")&&H(t,r),y[0]&624&&(i=a[9].i(a[5].data.d3f_class)&&a[48]["@id"]!=a[5].data.d3f_class&&a[45]["@id"]!=a[5].data.d3f_class&&a[13].edge_is_unique(a[5].data.d3f_class,a[42]["@id"],a[45]["@id"])),i?d?d.p(a,y):(d=ga(a),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),y[0]&1616&&(f=a[10].some(_)),f?g?g.p(a,y):(g=Ea(a),g.c(),g.m(v.parentNode,v)):g&&(g.d(1),g=null),a[45]["@id"]==a[5].data.d3f_class?b?b.p(a,y):(b=wa(a),b.c(),b.m(h.parentNode,h)):b&&(b.d(1),b=null),a[48]["@id"]==a[5].data.d3f_class?w?w.p(a,y):(w=ya(a),w.c(),w.m(m.parentNode,m)):w&&(w.d(1),w=null)},d(N){N&&(o(l),o(t),o(s),o(n),o(v),o(h),o(m)),u&&u.d(N),d&&d.d(N),g&&g.d(N),b&&b.d(N),w&&w.d(N)}}}function Da(a){let e,l=Re(a[48][a[42]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Sa(ha(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&9840){l=Re(t[48][t[42]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=ha(t,l,i);r[i]?r[i].p(n,s):(r[i]=Sa(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ca(a){let e,l=a[48]["d3f:outbound"]&&ma(a);return{c(){l&&l.c(),e=ge()},l(r){l&&l.l(r),e=ge()},m(r,t){l&&l.m(r,t),c(r,e,t)},p(r,t){r[48]["d3f:outbound"]?l?l.p(r,t):(l=ma(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(r){r&&o(e),l&&l.d(r)}}}function Na(a){let e,l=Re(a[9].i(a[5].data.d3f_class)["d3f:outbound"].filter(a[27])),r=[];for(let t=0;t<l.length;t+=1)r[t]=Ia(ua(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&8760){l=Re(t[9].i(t[5].data.d3f_class)["d3f:outbound"].filter(t[27]));let i;for(i=0;i<l.length;i+=1){const n=ua(t,l,i);r[i]?r[i].p(n,s):(r[i]=Ia(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ra(a){let e=a[5].data.d3f_class+"",l,r,t=a[9].i(a[5].data.d3f_class)["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[42]["@id"])+"",m,_,u=a[45]["@id"]+"",d,g,b=a[9].graph[a[9].index[a[45]["@id"]]]["rdfs:label"][0]+"",w,N,y=a[45]["@id"]+"",E,p,R=a[5].data.d3f_class+"",C,F,I=de(a[42]["@id"])+"",A,S,T=a[45]["@id"]+"",D,j;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
              click `),E=k(y),p=k(` href "javascript:da_to_neighbors_callback('`),C=k(R),F=k("', '"),A=k(I),S=k("','"),D=k(T),j=k(`')";`)},l($){l=P($,e),r=P($,'["'),s=P($,t),i=P($,'"] '),f=P($,n),v=P($," | "),m=P($,h),_=P($," | "),d=P($,u),g=P($,'["'),w=P($,b),N=P($,`"];
              click `),E=P($,y),p=P($,` href "javascript:da_to_neighbors_callback('`),C=P($,R),F=P($,"', '"),A=P($,I),S=P($,"','"),D=P($,T),j=P($,`')";`)},m($,x){c($,l,x),c($,r,x),c($,s,x),c($,i,x),c($,f,x),c($,v,x),c($,m,x),c($,_,x),c($,d,x),c($,g,x),c($,w,x),c($,N,x),c($,E,x),c($,p,x),c($,C,x),c($,F,x),c($,A,x),c($,S,x),c($,D,x),c($,j,x)},p($,x){x[0]&32&&e!==(e=$[5].data.d3f_class+"")&&H(l,e),x[0]&544&&t!==(t=$[9].i($[5].data.d3f_class)["rdfs:label"][0]+"")&&H(s,t),x[0]&560&&h!==(h=de($[42]["@id"])+"")&&H(m,h),x[0]&560&&u!==(u=$[45]["@id"]+"")&&H(d,u),x[0]&560&&b!==(b=$[9].graph[$[9].index[$[45]["@id"]]]["rdfs:label"][0]+"")&&H(w,b),x[0]&560&&y!==(y=$[45]["@id"]+"")&&H(E,y),x[0]&32&&R!==(R=$[5].data.d3f_class+"")&&H(C,R),x[0]&560&&I!==(I=de($[42]["@id"])+"")&&H(A,I),x[0]&560&&T!==(T=$[45]["@id"]+"")&&H(D,T)},d($){$&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(D),o(j))}}}function Oa(a){let e=a[13].edge_is_unique(a[5].data.d3f_class,a[42]["@id"],a[45]["@id"]),l,r=a[5].data.d3f_class+"",t,s,i=a[45]["@id"]+"",n,f,v=a[5].data.d3f_class+"",h,m,_=a[3]({"@id":a[5].data.d3f_class})+"",u,d,g=e&&Ra(a);return{c(){g&&g.c(),l=k(`
            class `),t=k(r),s=k(` RootArtifactNode;
            class `),n=k(i),f=k(` ArtifactNode;
            click `),h=k(v),m=k(' href "'),u=k(_),d=k('";')},l(b){g&&g.l(b),l=P(b,`
            class `),t=P(b,r),s=P(b,` RootArtifactNode;
            class `),n=P(b,i),f=P(b,` ArtifactNode;
            click `),h=P(b,v),m=P(b,' href "'),u=P(b,_),d=P(b,'";')},m(b,w){g&&g.m(b,w),c(b,l,w),c(b,t,w),c(b,s,w),c(b,n,w),c(b,f,w),c(b,h,w),c(b,m,w),c(b,u,w),c(b,d,w)},p(b,w){w[0]&560&&(e=b[13].edge_is_unique(b[5].data.d3f_class,b[42]["@id"],b[45]["@id"])),e?g?g.p(b,w):(g=Ra(b),g.c(),g.m(l.parentNode,l)):g&&(g.d(1),g=null),w[0]&32&&r!==(r=b[5].data.d3f_class+"")&&H(t,r),w[0]&560&&i!==(i=b[45]["@id"]+"")&&H(n,i),w[0]&32&&v!==(v=b[5].data.d3f_class+"")&&H(h,v),w[0]&40&&_!==(_=b[3]({"@id":b[5].data.d3f_class})+"")&&H(u,_)},d(b){b&&(o(l),o(t),o(s),o(n),o(f),o(h),o(m),o(u),o(d)),g&&g.d(b)}}}function Ia(a){let e,l=Re(a[9].i(a[5].data.d3f_class)[a[42]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Oa(ca(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&8760){l=Re(t[9].i(t[5].data.d3f_class)[t[42]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=ca(t,l,i);r[i]?r[i].p(n,s):(r[i]=Oa(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ta(a){let e,l=Re(a[9].i(a[5].data.d3f_class)["rdfs:subClassOf"]),r=[];for(let t=0;t<l.length;t+=1)r[t]=ja(oa(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&1572){l=Re(t[9].i(t[5].data.d3f_class)["rdfs:subClassOf"]);let i;for(i=0;i<l.length;i+=1){const n=oa(t,l,i);r[i]?r[i].p(n,s):(r[i]=ja(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Aa(a){let e,l=a[39]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_outbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_outbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&544&&l!==(l=s[39]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Fa(a){let e=a[5].data.d3f_class+"",l,r,t=a[9].i(a[5].data.d3f_class)["rdfs:label"][0]+"",s,i,n="-->",f,v,h="subClassOf",m,_,u=a[39]["@id"]+"",d,g,b=a[39]["rdfs:label"][0]+"",w,N,y=a[39]["@id"]+"",E,p,R=a[5].data.d3f_class+"",C,F,I=a[5].data.d3f_class+"",A,S,T,D,j=a[10].some(Y),$,x=a[39]["@id"]+"",ae,ie,V=a[5].data.d3f_class+"",U,z,Z="rdfs:subClassOf",O,M,be=a[39]["@id"]+"",ye,se;function Y(...X){return a[22](a[39],...X)}let ee=j&&Aa(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
  
            class `),E=k(y),p=k(` inbound_node;
  
            class `),C=k(R),F=k(` RootArtifactNode;
            style `),A=k(I),S=k(" fill:"),T=k(a[2]),D=k(`;
            `),ee&&ee.c(),$=k(`

            click `),ae=k(x),ie=k(` href "javascript:da_to_neighbors_callback('`),U=k(V),z=k("', '"),O=k(Z),M=k("','"),ye=k(be),se=k(`')";`)},l(X){l=P(X,e),r=P(X,'["'),s=P(X,t),i=P(X,'"] '),f=P(X,n),v=P(X," | "),m=P(X,h),_=P(X," | "),d=P(X,u),g=P(X,'["'),w=P(X,b),N=P(X,`"];
  
            class `),E=P(X,y),p=P(X,` inbound_node;
  
            class `),C=P(X,R),F=P(X,` RootArtifactNode;
            style `),A=P(X,I),S=P(X," fill:"),T=P(X,a[2]),D=P(X,`;
            `),ee&&ee.l(X),$=P(X,`

            click `),ae=P(X,x),ie=P(X,` href "javascript:da_to_neighbors_callback('`),U=P(X,V),z=P(X,"', '"),O=P(X,Z),M=P(X,"','"),ye=P(X,be),se=P(X,`')";`)},m(X,_e){c(X,l,_e),c(X,r,_e),c(X,s,_e),c(X,i,_e),c(X,f,_e),c(X,v,_e),c(X,m,_e),c(X,_,_e),c(X,d,_e),c(X,g,_e),c(X,w,_e),c(X,N,_e),c(X,E,_e),c(X,p,_e),c(X,C,_e),c(X,F,_e),c(X,A,_e),c(X,S,_e),c(X,T,_e),c(X,D,_e),ee&&ee.m(X,_e),c(X,$,_e),c(X,ae,_e),c(X,ie,_e),c(X,U,_e),c(X,z,_e),c(X,O,_e),c(X,M,_e),c(X,ye,_e),c(X,se,_e)},p(X,_e){a=X,_e[0]&32&&e!==(e=a[5].data.d3f_class+"")&&H(l,e),_e[0]&544&&t!==(t=a[9].i(a[5].data.d3f_class)["rdfs:label"][0]+"")&&H(s,t),_e[0]&544&&u!==(u=a[39]["@id"]+"")&&H(d,u),_e[0]&544&&b!==(b=a[39]["rdfs:label"][0]+"")&&H(w,b),_e[0]&544&&y!==(y=a[39]["@id"]+"")&&H(E,y),_e[0]&32&&R!==(R=a[5].data.d3f_class+"")&&H(C,R),_e[0]&32&&I!==(I=a[5].data.d3f_class+"")&&H(A,I),_e[0]&4&&H(T,a[2]),_e[0]&1568&&(j=a[10].some(Y)),j?ee?ee.p(a,_e):(ee=Aa(a),ee.c(),ee.m($.parentNode,$)):ee&&(ee.d(1),ee=null),_e[0]&544&&x!==(x=a[39]["@id"]+"")&&H(ae,x),_e[0]&32&&V!==(V=a[5].data.d3f_class+"")&&H(U,V),_e[0]&544&&be!==(be=a[39]["@id"]+"")&&H(ye,be)},d(X){X&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(T),o(D),o($),o(ae),o(ie),o(U),o(z),o(O),o(M),o(ye),o(se)),ee&&ee.d(X)}}}function ja(a){let e;function l(...s){return a[28](a[36],...s)}let r=Re(a[9].graph.filter(l)),t=[];for(let s=0;s<r.length;s+=1)t[s]=Fa(fa(a,r,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=ge()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=ge()},m(s,i){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,e,i)},p(s,i){if(a=s,i[0]&1572){r=Re(a[9].graph.filter(l));let n;for(n=0;n<r.length;n+=1){const f=fa(a,r,n);t[n]?t[n].p(f,i):(t[n]=Fa(f),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&o(e),Ge(t,s)}}}function Cu(a){let e,l,r=a[9].i(a[5].data.d3f_class)&&a[9].i(a[5].data.d3f_class)["d3f:outbound"],t,s=a[9].i(a[5].data.d3f_class)&&a[9].i(a[5].data.d3f_class)["rdfs:subClassOf"],i,n=Re(a[9].graph.filter(a[25])),f=[];for(let m=0;m<n.length;m+=1)f[m]=Ca(da(a,n,m));let v=r&&Na(a),h=s&&Ta(a);return{c(){e=k(`graph LR;
        `);for(let m=0;m<f.length;m+=1)f[m].c();l=le(),v&&v.c(),t=le(),h&&h.c(),i=ge()},l(m){e=P(m,`graph LR;
        `);for(let _=0;_<f.length;_+=1)f[_].l(m);l=re(m),v&&v.l(m),t=re(m),h&&h.l(m),i=ge()},m(m,_){c(m,e,_);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(m,_);c(m,l,_),v&&v.m(m,_),c(m,t,_),h&&h.m(m,_),c(m,i,_)},p(m,_){if(_[0]&9840){n=Re(m[9].graph.filter(m[25]));let u;for(u=0;u<n.length;u+=1){const d=da(m,n,u);f[u]?f[u].p(d,_):(f[u]=Ca(d),f[u].c(),f[u].m(l.parentNode,l))}for(;u<f.length;u+=1)f[u].d(1);f.length=n.length}_[0]&544&&(r=m[9].i(m[5].data.d3f_class)&&m[9].i(m[5].data.d3f_class)["d3f:outbound"]),r?v?v.p(m,_):(v=Na(m),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null),_[0]&544&&(s=m[9].i(m[5].data.d3f_class)&&m[9].i(m[5].data.d3f_class)["rdfs:subClassOf"]),s?h?h.p(m,_):(h=Ta(m),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},d(m){m&&(o(e),o(l),o(t),o(i)),Ge(f,m),v&&v.d(m),h&&h.d(m)}}}function Nu(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[10].length+"",g,b,w,N,y;const E=a[20].header,p=ot(E,a,a[32],va),R=a[20].default,C=ot(R,a,a[32],null),F=[Du,Su,yu],I=[];function A(S,T){return S[6]?S[8]&&S[9].graph.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Parts/Control Neighbors
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Parts/Control Neighbors
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-h8c6ja"),W(l,"class","svelte-h8c6ja"),W(e,"class","svelte-h8c6ja")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[29](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[14]),ve(l,"click",Nt(a[21])),ve(e,"close",a[30]),ve(e,"click",Mt(a[31]))],N=!0)},p(S,T){p&&p.p&&(!w||T[1]&2)&&ft(p,E,S,S[32],w?ct(E,S[32],T,wu):ut(S[32]),va),C&&C.p&&(!w||T[1]&2)&&ft(C,R,S,S[32],w?ct(R,S[32],T,null):ut(S[32]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T[0]&1024)&&d!==(d=S[10].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[29](null),N=!1,mt(y)}}}function Ru(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{empty_message:f="has no direct neighbors in this release."}=e,{outbound_color:v="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:m="#fff4dd"}=e,{link_function:_=O=>`/dao/artifact/${O["@id"]}`}=e,{inbound_link_function:u=_}=e,{root_link_function:d=O=>`/dao/artifact/${O["@id"]}`}=e,{outbound_link_function:g=_}=e,{show_neighbors_modal:b}=e,{neighbor_filter_labels:w}=e,{parent_node:N}=e,{data:y}=e,E,p=!1;const R=Ut();Ze(a,R,O=>l(34,s=O));const C=qt();Ze(a,C,O=>l(33,t=O));let F=new Bt,I;function A(O){r.some(M=>M.source==O.source&&M.relation==O.relation&&M.target==O.target)?l(10,r=r.filter(M=>M.source!=O.source||M.relation!=O.relation||M.target!=O.target)):r.push(O),l(10,r),l(10,r)}window.da_to_neighbors_callback=function(O,M,be){A({source:O,relation:M,target:be})};function S(){let O=0,M=0,be=200,ye=125;for(const se of r){let Y=y.neighbors["@graph"].find(X=>X["@id"]==se.source),ee=y.neighbors["@graph"].find(X=>X["@id"]==se.target);if(Y&&ee){let X=N.data.d3f_class==Y["@id"],_e=X?ee:Y;$t(R,C,N,"artifactSelectorNode",_e["rdfs:label"][0],_e["@id"],N.data.sequence,N.position.x+(X?O:M)*be,X?N.position.y+ye:N.position.y-ye,182,63,se.relation,X),X?O+=1:M+=1}}R.set(s),C.set(t),E&&(E.close(),l(8,p=!1)),l(10,r=[])}function T(O){Rt.call(this,a,O)}const D=(O,M)=>M.source==N.data.d3f_class&&M.relation=="rdfs:subClassOf"&&M.target==O["@id"],j=(O,M,be,ye)=>ye.source==O["@id"]&&ye.relation==de(M["@id"])&&ye.target==be["@id"],$=(O,M,be)=>be.source==N.data.d3f_class&&be.relation==de(O["@id"])&&be.target==M["@id"],x=O=>O["@id"]!=y.description["@id"],ae=O=>w.length==0||w.includes(O["@id"]),ie=O=>w.length==0||w.includes(O["@id"]),V=(O,M)=>M["@id"]==O["@id"];function U(O){Je[O?"unshift":"push"](()=>{E=O,l(7,E)})}const z=()=>l(0,b=!1),Z=()=>{E.close(),l(10,r=[])};return a.$$set=O=>{"empty_message"in O&&l(1,f=O.empty_message),"outbound_color"in O&&l(15,v=O.outbound_color),"inbound_color"in O&&l(2,h=O.inbound_color),"root_color"in O&&l(16,m=O.root_color),"link_function"in O&&l(17,_=O.link_function),"inbound_link_function"in O&&l(18,u=O.inbound_link_function),"root_link_function"in O&&l(3,d=O.root_link_function),"outbound_link_function"in O&&l(19,g=O.outbound_link_function),"show_neighbors_modal"in O&&l(0,b=O.show_neighbors_modal),"neighbor_filter_labels"in O&&l(4,w=O.neighbor_filter_labels),"parent_node"in O&&l(5,N=O.parent_node),"data"in O&&l(6,y=O.data),"$$scope"in O&&l(32,n=O.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&129&&b&&E&&(E.showModal(),F.reset()),a.$$.dirty[0]&129&&!b&&E&&(E.close(),F.reset()),a.$$.dirty[0]&112&&y&&(l(8,p=!1),y.neighbors["@graph"].find(O=>O["@id"]==N.data.d3f_class),w.length==0?(l(8,p=!0),l(9,I=new gl(y.neighbors,{index:!0}))):y.neighbors["@graph"].some(O=>O["d3f:outbound"]&&w.some(M=>O["d3f:outbound"].some(be=>be["@id"]==M)))&&(l(8,p=!0),l(9,I=new gl(y.neighbors,{index:!0}))))},l(10,r=[]),[b,f,h,d,w,N,y,E,p,I,r,R,C,F,S,v,m,_,u,g,i,T,D,j,$,x,ae,ie,V,U,z,Z,n]}class Ou extends st{constructor(e){super(),it(this,e,Ru,Nu,at,{empty_message:1,outbound_color:15,inbound_color:2,root_color:16,link_function:17,inbound_link_function:18,root_link_function:3,outbound_link_function:19,show_neighbors_modal:0,neighbor_filter_labels:4,parent_node:5,data:6},null,[-1,-1])}}function La(a,e,l){const r=a.slice();return r[26]=e[l],r}function Ua(a,e,l){const r=a.slice();return r[29]=e[l],r}function qa(a,e,l){const r=a.slice();return r[32]=e[l],r}function za(a,e,l){const r=a.slice();return r[26]=e[l],r}function Va(a,e,l){const r=a.slice();return r[29]=e[l],r}const Iu=a=>({}),Ba=a=>({});function Tu(a){let e;return{c(){e=k("No related sensors in this release.")},l(l){e=P(l,"No related sensors in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function Au(a){let e,l;return e=new Ht({props:{$$slots:{default:[ju]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Fu(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function Ma(a){let e,l=Re(a[32]["d3f:outbound"]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Qa(za(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&430){l=Re(t[32]["d3f:outbound"]);let i;for(i=0;i<l.length;i+=1){const n=za(t,l,i);r[i]?r[i].p(n,s):(r[i]=Qa(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ha(a){let e,l=a[32]["@id"]+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" selected_inbound_node;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," selected_inbound_node;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i[0]&160&&l!==(l=s[32]["@id"]+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function $a(a){let e=a[32]["@id"]+"",l,r,t=a[32]["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[26]["@id"])+"",m,_,u=a[29]["@id"]+"",d,g,b=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",w,N,y=a[32]["@id"]+"",E,p,R=a[32]["@id"]+"",C,F,I,A,S=a[8].includes(a[32]["@id"]),T,D=a[29]["@id"]+"",j,$,x=a[29]["@id"]+"",ae,ie,V,U,z=a[32]["@id"]+"",Z,O,M=a[32]["@id"]+"",be,ye,se=a[29]["@id"]+"",Y,ee,X=a[3](a[29])+"",_e,Te,Se=S&&Ha(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];
                  class `),E=k(y),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),I=k(a[1]),A=k(`;
                  `),Se&&Se.c(),T=k(`
                  class `),j=k(D),$=k(" RootArtifactNode; style "),ae=k(x),ie=k(" fill:"),V=k(a[2]),U=k(`;
                  click `),Z=k(z),O=k(` href "javascript:da_to_sensor_callback('`),be=k(M),ye=k(`')"; click `),Y=k(se),ee=k(' href "'),_e=k(X),Te=k('";')},l(B){l=P(B,e),r=P(B,'["'),s=P(B,t),i=P(B,'"] '),f=P(B,n),v=P(B," | "),m=P(B,h),_=P(B," | "),d=P(B,u),g=P(B,'["'),w=P(B,b),N=P(B,`"];
                  class `),E=P(B,y),p=P(B," inbound_node; style "),C=P(B,R),F=P(B," fill:"),I=P(B,a[1]),A=P(B,`;
                  `),Se&&Se.l(B),T=P(B,`
                  class `),j=P(B,D),$=P(B," RootArtifactNode; style "),ae=P(B,x),ie=P(B," fill:"),V=P(B,a[2]),U=P(B,`;
                  click `),Z=P(B,z),O=P(B,` href "javascript:da_to_sensor_callback('`),be=P(B,M),ye=P(B,`')"; click `),Y=P(B,se),ee=P(B,' href "'),_e=P(B,X),Te=P(B,'";')},m(B,ce){c(B,l,ce),c(B,r,ce),c(B,s,ce),c(B,i,ce),c(B,f,ce),c(B,v,ce),c(B,m,ce),c(B,_,ce),c(B,d,ce),c(B,g,ce),c(B,w,ce),c(B,N,ce),c(B,E,ce),c(B,p,ce),c(B,C,ce),c(B,F,ce),c(B,I,ce),c(B,A,ce),Se&&Se.m(B,ce),c(B,T,ce),c(B,j,ce),c(B,$,ce),c(B,ae,ce),c(B,ie,ce),c(B,V,ce),c(B,U,ce),c(B,Z,ce),c(B,O,ce),c(B,be,ce),c(B,ye,ce),c(B,Y,ce),c(B,ee,ce),c(B,_e,ce),c(B,Te,ce)},p(B,ce){ce[0]&160&&e!==(e=B[32]["@id"]+"")&&H(l,e),ce[0]&160&&t!==(t=B[32]["rdfs:label"][0]+"")&&H(s,t),ce[0]&160&&h!==(h=de(B[26]["@id"])+"")&&H(m,h),ce[0]&160&&u!==(u=B[29]["@id"]+"")&&H(d,u),ce[0]&160&&b!==(b=B[7].i(B[29]["@id"])["rdfs:label"][0]+"")&&H(w,b),ce[0]&160&&y!==(y=B[32]["@id"]+"")&&H(E,y),ce[0]&160&&R!==(R=B[32]["@id"]+"")&&H(C,R),ce[0]&2&&H(I,B[1]),ce[0]&416&&(S=B[8].includes(B[32]["@id"])),S?Se?Se.p(B,ce):(Se=Ha(B),Se.c(),Se.m(T.parentNode,T)):Se&&(Se.d(1),Se=null),ce[0]&160&&D!==(D=B[29]["@id"]+"")&&H(j,D),ce[0]&160&&x!==(x=B[29]["@id"]+"")&&H(ae,x),ce[0]&4&&H(V,B[2]),ce[0]&160&&z!==(z=B[32]["@id"]+"")&&H(Z,z),ce[0]&160&&M!==(M=B[32]["@id"]+"")&&H(be,M),ce[0]&160&&se!==(se=B[29]["@id"]+"")&&H(Y,se),ce[0]&168&&X!==(X=B[3](B[29])+"")&&H(_e,X)},d(B){B&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(I),o(A),o(T),o(j),o($),o(ae),o(ie),o(V),o(U),o(Z),o(O),o(be),o(ye),o(Y),o(ee),o(_e),o(Te)),Se&&Se.d(B)}}}function Qa(a){let e,l=Re(a[32][a[26]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=$a(Va(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&430){l=Re(t[32][t[26]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=Va(t,l,i);r[i]?r[i].p(n,s):(r[i]=$a(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ga(a){let e,l=a[32]["d3f:outbound"]&&Ma(a);return{c(){l&&l.c(),e=ge()},l(r){l&&l.l(r),e=ge()},m(r,t){l&&l.m(r,t),c(r,e,t)},p(r,t){r[32]["d3f:outbound"]?l?l.p(r,t):(l=Ma(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(r){r&&o(e),l&&l.d(r)}}}function Ka(a){let e,l=Re(a[7].i(a[5].description["@id"])["d3f:outbound"]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Ya(La(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&184){l=Re(t[7].i(t[5].description["@id"])["d3f:outbound"]);let i;for(i=0;i<l.length;i+=1){const n=La(t,l,i);r[i]?r[i].p(n,s):(r[i]=Ya(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ja(a){let e=a[5].description["@id"]+"",l,r,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,i,n="-->",f,v,h=de(a[26]["@id"])+"",m,_,u=a[29]["@id"]+"",d,g,b=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",w,N,y=a[5].description["@id"]+"",E,p,R=a[29]["@id"]+"",C,F,I=a[5].description["@id"]+"",A,S,T=a[3](a[5].description["@id"])+"",D,j,$=a[29]["@id"]+"",x,ae,ie=a[4](a[29])+"",V,U;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k('"]; class '),E=k(y),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
                click `),A=k(I),S=k(' href "'),D=k(T),j=k('"; click '),x=k($),ae=k(' href "'),V=k(ie),U=k('";')},l(z){l=P(z,e),r=P(z,'["'),s=P(z,t),i=P(z,'"] '),f=P(z,n),v=P(z," | "),m=P(z,h),_=P(z," | "),d=P(z,u),g=P(z,'["'),w=P(z,b),N=P(z,'"]; class '),E=P(z,y),p=P(z," RootArtifactNode; class "),C=P(z,R),F=P(z,` ArtifactNode;
                click `),A=P(z,I),S=P(z,' href "'),D=P(z,T),j=P(z,'"; click '),x=P(z,$),ae=P(z,' href "'),V=P(z,ie),U=P(z,'";')},m(z,Z){c(z,l,Z),c(z,r,Z),c(z,s,Z),c(z,i,Z),c(z,f,Z),c(z,v,Z),c(z,m,Z),c(z,_,Z),c(z,d,Z),c(z,g,Z),c(z,w,Z),c(z,N,Z),c(z,E,Z),c(z,p,Z),c(z,C,Z),c(z,F,Z),c(z,A,Z),c(z,S,Z),c(z,D,Z),c(z,j,Z),c(z,x,Z),c(z,ae,Z),c(z,V,Z),c(z,U,Z)},p(z,Z){Z[0]&32&&e!==(e=z[5].description["@id"]+"")&&H(l,e),Z[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&H(s,t),Z[0]&160&&h!==(h=de(z[26]["@id"])+"")&&H(m,h),Z[0]&160&&u!==(u=z[29]["@id"]+"")&&H(d,u),Z[0]&160&&b!==(b=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&H(w,b),Z[0]&32&&y!==(y=z[5].description["@id"]+"")&&H(E,y),Z[0]&160&&R!==(R=z[29]["@id"]+"")&&H(C,R),Z[0]&32&&I!==(I=z[5].description["@id"]+"")&&H(A,I),Z[0]&40&&T!==(T=z[3](z[5].description["@id"])+"")&&H(D,T),Z[0]&160&&$!==($=z[29]["@id"]+"")&&H(x,$),Z[0]&176&&ie!==(ie=z[4](z[29])+"")&&H(V,ie)},d(z){z&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(D),o(j),o(x),o(ae),o(V),o(U))}}}function Ya(a){let e,l=Re(a[7].i(a[5].description["@id"])[a[26]["@id"]]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Ja(Ua(a,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=ge()},l(t){for(let s=0;s<r.length;s+=1)r[s].l(t);e=ge()},m(t,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,s);c(t,e,s)},p(t,s){if(s[0]&184){l=Re(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let i;for(i=0;i<l.length;i+=1){const n=Ua(t,l,i);r[i]?r[i].p(n,s):(r[i]=Ja(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function ju(a){let e,l,r=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Re(a[7].graph.filter(a[18])),i=[];for(let f=0;f<s.length;f+=1)i[f]=Ga(qa(a,s,f));let n=r&&Ka(a);return{c(){e=k(`graph LR;
          `);for(let f=0;f<i.length;f+=1)i[f].c();l=le(),n&&n.c(),t=ge()},l(f){e=P(f,`graph LR;
          `);for(let v=0;v<i.length;v+=1)i[v].l(f);l=re(f),n&&n.l(f),t=ge()},m(f,v){c(f,e,v);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(f,v);c(f,l,v),n&&n.m(f,v),c(f,t,v)},p(f,v){if(v[0]&430){s=Re(f[7].graph.filter(f[18]));let h;for(h=0;h<s.length;h+=1){const m=qa(f,s,h);i[h]?i[h].p(m,v):(i[h]=Ga(m),i[h].c(),i[h].m(l.parentNode,l))}for(;h<i.length;h+=1)i[h].d(1);i.length=s.length}v[0]&160&&(r=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),r?n?n.p(f,v):(n=Ka(f),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(f){f&&(o(e),o(l),o(t)),Ge(i,f),n&&n.d(f)}}}function Lu(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[8].length+"",g,b,w,N,y;const E=a[16].header,p=ot(E,a,a[22],Ba),R=a[16].default,C=ot(R,a,a[22],null),F=[Fu,Au,Tu],I=[];function A(S,T){return S[5]?S[7].graph.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
      Select Sensors
      `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
      Select Sensors
      `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-akhii9"),W(l,"class","svelte-akhii9"),W(e,"class","svelte-akhii9")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[19](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[11]),ve(l,"click",Nt(a[17])),ve(e,"close",a[20]),ve(e,"click",Mt(a[21]))],N=!0)},p(S,T){p&&p.p&&(!w||T[0]&4194304)&&ft(p,E,S,S[22],w?ct(E,S[22],T,Iu):ut(S[22]),Ba),C&&C.p&&(!w||T[0]&4194304)&&ft(C,R,S,S[22],w?ct(R,S[22],T,null):ut(S[22]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T[0]&256)&&d!==(d=S[8].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[19](null),N=!1,mt(y)}}}function Uu(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:v="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:m=D=>`/dao/artifact/${D["@id"]}`}=e,{inbound_link_function:_=m}=e,{root_link_function:u=D=>`/dao/artifact/${D["@id"]}`}=e,{outbound_link_function:d=m}=e,{show_sensor_modal:g}=e,{parent_node:b}=e,{data:w}=e,N;const y=Ut();Ze(a,y,D=>l(24,s=D));const E=qt();Ze(a,E,D=>l(23,t=D));let p;function R(D){r.includes(D)?l(8,r=r.filter(j=>j!==D)):r.push(D),l(8,r),l(8,r)}window.da_to_sensor_callback=function(D){R(D)};function C(){let D=0,j=200,$=100;for(const x of r){let ae=w.sensors["@graph"].find(ie=>ie["@id"]==x);ae&&($t(y,E,b,"artifactSelectorNode",ae["rdfs:label"],ae["@id"],b.data.sequence,b.position.x+D*j,b.position.y+$,182,63,ae["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),D+=1)}y.set(s),E.set(t),N&&N.close(),l(8,r=[])}function F(D){Rt.call(this,a,D)}const I=D=>D["@id"]!=w.description["@id"];function A(D){Je[D?"unshift":"push"](()=>{N=D,l(6,N)})}const S=()=>l(0,g=!1),T=()=>{N.close(),l(8,r=[])};return a.$$set=D=>{"outbound_color"in D&&l(12,f=D.outbound_color),"inbound_color"in D&&l(1,v=D.inbound_color),"root_color"in D&&l(2,h=D.root_color),"link_function"in D&&l(13,m=D.link_function),"inbound_link_function"in D&&l(14,_=D.inbound_link_function),"root_link_function"in D&&l(3,u=D.root_link_function),"outbound_link_function"in D&&l(4,d=D.outbound_link_function),"show_sensor_modal"in D&&l(0,g=D.show_sensor_modal),"parent_node"in D&&l(15,b=D.parent_node),"data"in D&&l(5,w=D.data),"$$scope"in D&&l(22,n=D.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&g&&N&&N.showModal(),a.$$.dirty[0]&65&&!g&&N&&N.close(),a.$$.dirty[0]&32&&w&&w.sensors&&l(7,p=new gl(w.sensors,{index:!0}))},l(8,r=[]),[g,v,h,u,d,w,N,p,r,y,E,C,f,m,_,b,i,F,I,A,S,T,n]}class qu extends st{constructor(e){super(),it(this,e,Uu,Lu,at,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function Xa(a){let e,l="explode all",r,t,s="explode parts",i,n,f="explode control",v,h;return{c(){e=G("button"),e.textContent=l,r=le(),t=G("button"),t.textContent=s,i=le(),n=G("button"),n.textContent=f,this.h()},l(m){e=K(m,"BUTTON",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1vlr93a"&&(e.textContent=l),r=re(m),t=K(m,"BUTTON",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1phxucg"&&(t.textContent=s),i=re(m),n=K(m,"BUTTON",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-hxwtgy"&&(n.textContent=f),this.h()},h(){W(e,"class","explode_option svelte-kdha2j"),W(t,"class","explode_option svelte-kdha2j"),W(n,"class","explode_option svelte-kdha2j")},m(m,_){c(m,e,_),c(m,r,_),c(m,t,_),c(m,i,_),c(m,n,_),v||(h=[ve(e,"click",a[19]),ve(t,"click",a[20]),ve(n,"click",a[21])],v=!0)},p:Ce,d(m){m&&(o(e),o(r),o(t),o(i),o(n)),v=!1,mt(h)}}}function zu(a){let e,l="attack the node",r,t,s,i,n,f="defend the node",v,h,m,_,u,d="add weaknesses",g,b,w,N,y,E="add sensors",p,R,C,F,I,A,S,T,D,j,$,x;function ae(Y){a[12](Y)}let ie={parent_node:a[0],data:a[1]};a[8]!==void 0&&(ie.show_attack_modal=a[8]),t=new au({props:ie}),Je.push(()=>Et(t,"show_attack_modal",ae));function V(Y){a[14](Y)}let U={parent_node:a[0],data:a[1]};a[7]!==void 0&&(U.show_defend_modal=a[7]),h=new hu({props:U}),Je.push(()=>Et(h,"show_defend_modal",V));function z(Y){a[16](Y)}let Z={parent_node:a[0],inbound_color:"#f9d999",inbound_link_function:a[10],data:a[1]};a[6]!==void 0&&(Z.show_weakness_modal=a[6]),b=new Pu({props:Z}),Je.push(()=>Et(b,"show_weakness_modal",z));function O(Y){a[18](Y)}let M={parent_node:a[0],inbound_color:"#f9d999",data:a[1]};a[4]!==void 0&&(M.show_sensor_modal=a[4]),R=new qu({props:M}),Je.push(()=>Et(R,"show_sensor_modal",O));let be=a[3]&&Xa(a);function ye(Y){a[24](Y)}let se={neighbor_filter_labels:a[2],parent_node:a[0],empty_message:"has no related direct neighbors in this release.",inbound_color:"#f9d999",inbound_link_function:a[10],data:a[1]};return a[5]!==void 0&&(se.show_neighbors_modal=a[5]),T=new Ou({props:se}),Je.push(()=>Et(T,"show_neighbors_modal",ye)),{c(){e=G("button"),e.textContent=l,r=le(),Ae(t.$$.fragment),i=le(),n=G("button"),n.textContent=f,v=le(),Ae(h.$$.fragment),_=le(),u=G("button"),u.textContent=d,g=le(),Ae(b.$$.fragment),N=le(),y=G("button"),y.textContent=E,p=le(),Ae(R.$$.fragment),F=le(),I=G("button"),A=k(`explode
  `),be&&be.c(),S=le(),Ae(T.$$.fragment),this.h()},l(Y){e=K(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1dkmztx"&&(e.textContent=l),r=re(Y),Fe(t.$$.fragment,Y),i=re(Y),n=K(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-22hxkb"&&(n.textContent=f),v=re(Y),Fe(h.$$.fragment,Y),_=re(Y),u=K(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(u)!=="svelte-urtcr7"&&(u.textContent=d),g=re(Y),Fe(b.$$.fragment,Y),N=re(Y),y=K(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(y)!=="svelte-1xhii68"&&(y.textContent=E),p=re(Y),Fe(R.$$.fragment,Y),F=re(Y),I=K(Y,"BUTTON",{class:!0});var ee=pe(I);A=P(ee,`explode
  `),be&&be.l(ee),ee.forEach(o),S=re(Y),Fe(T.$$.fragment,Y),this.h()},h(){W(e,"class","svelte-kdha2j"),W(n,"class","svelte-kdha2j"),W(u,"class","svelte-kdha2j"),W(y,"class","svelte-kdha2j"),W(I,"class","explode_container svelte-kdha2j")},m(Y,ee){c(Y,e,ee),c(Y,r,ee),je(t,Y,ee),c(Y,i,ee),c(Y,n,ee),c(Y,v,ee),je(h,Y,ee),c(Y,_,ee),c(Y,u,ee),c(Y,g,ee),je(b,Y,ee),c(Y,N,ee),c(Y,y,ee),c(Y,p,ee),je(R,Y,ee),c(Y,F,ee),c(Y,I,ee),L(I,A),be&&be.m(I,null),c(Y,S,ee),je(T,Y,ee),j=!0,$||(x=[ve(e,"click",a[11]),ve(n,"click",a[13]),ve(u,"click",a[15]),ve(y,"click",a[17]),ve(I,"mouseenter",a[22]),ve(I,"mouseleave",a[23])],$=!0)},p(Y,[ee]){const X={};ee&1&&(X.parent_node=Y[0]),ee&2&&(X.data=Y[1]),!s&&ee&256&&(s=!0,X.show_attack_modal=Y[8],bt(()=>s=!1)),t.$set(X);const _e={};ee&1&&(_e.parent_node=Y[0]),ee&2&&(_e.data=Y[1]),!m&&ee&128&&(m=!0,_e.show_defend_modal=Y[7],bt(()=>m=!1)),h.$set(_e);const Te={};ee&1&&(Te.parent_node=Y[0]),ee&2&&(Te.data=Y[1]),!w&&ee&64&&(w=!0,Te.show_weakness_modal=Y[6],bt(()=>w=!1)),b.$set(Te);const Se={};ee&1&&(Se.parent_node=Y[0]),ee&2&&(Se.data=Y[1]),!C&&ee&16&&(C=!0,Se.show_sensor_modal=Y[4],bt(()=>C=!1)),R.$set(Se),Y[3]?be?be.p(Y,ee):(be=Xa(Y),be.c(),be.m(I,null)):be&&(be.d(1),be=null);const B={};ee&4&&(B.neighbor_filter_labels=Y[2]),ee&1&&(B.parent_node=Y[0]),ee&2&&(B.data=Y[1]),!D&&ee&32&&(D=!0,B.show_neighbors_modal=Y[5],bt(()=>D=!1)),T.$set(B)},i(Y){j||(he(t.$$.fragment,Y),he(h.$$.fragment,Y),he(b.$$.fragment,Y),he(R.$$.fragment,Y),he(T.$$.fragment,Y),j=!0)},o(Y){me(t.$$.fragment,Y),me(h.$$.fragment,Y),me(b.$$.fragment,Y),me(R.$$.fragment,Y),me(T.$$.fragment,Y),j=!1},d(Y){Y&&(o(e),o(r),o(i),o(n),o(v),o(_),o(u),o(g),o(N),o(y),o(p),o(F),o(I),o(S)),Le(t,Y),Le(h,Y),Le(b,Y),Le(R,Y),be&&be.d(),Le(T,Y),$=!1,mt(x)}}}function Vu(a,e,l){let r,t,s,i,n;var f=this&&this.__awaiter||function(j,$,x,ae){function ie(V){return V instanceof x?V:new x(function(U){U(V)})}return new(x||(x=Promise))(function(V,U){function z(M){try{O(ae.next(M))}catch(be){U(be)}}function Z(M){try{O(ae.throw(M))}catch(be){U(be)}}function O(M){M.done?V(M.value):ie(M.value).then(z,Z)}O((ae=ae.apply(j,$||[])).next())})};let{node:v}=e,h,m=[],_=!1;function u(j){alert(j),l(8,r=!1),l(7,t=!1),l(6,s=!1),l(5,i=!1),l(4,n=!1)}function d(j){return f(this,void 0,void 0,function*(){if(j.data.d3f_class&&j.data.d3f_class.includes("d3f:")){const $=j.data.d3f_class,x=yield fetch(`/api/dao/artifact/${$}.json`),ae=yield x.json();if(x.status!=200||ae.description["@graph"].length==0)u(`D3FEND Artifact: "${$.replace("d3f:","")}" not found in ontology`);else return ae}else u("Please specify a D3FEND Class for this node to enable inferential mapping")})}function g(j){return xi(j["d3f:cwe-id"][0])}const b=async()=>{l(1,h=null),l(8,r=!0),l(1,h=await d(v))};function w(j){r=j,l(8,r)}const N=async()=>{l(1,h=null),l(7,t=!0),l(1,h=await d(v))};function y(j){t=j,l(7,t)}const E=async()=>{l(1,h=null),l(6,s=!0),l(1,h=await d(v))};function p(j){s=j,l(6,s)}const R=async()=>{l(1,h=null),l(4,n=!0),l(1,h=await d(v))};function C(j){n=j,l(4,n)}const F=async()=>{l(1,h=null),l(5,i=!0),l(2,m=[]),l(1,h=await d(v))},I=async()=>{l(1,h=null),l(5,i=!0),l(2,m=["d3f:contains","d3f:may-contain"]),l(1,h=await d(v))},A=async()=>{l(1,h=null),l(5,i=!0),l(2,m=["d3f:runs","d3f:loads","d3f:manages"]),l(1,h=await d(v))},S=()=>{l(3,_=!0)},T=()=>{l(3,_=!1)};function D(j){i=j,l(5,i)}return a.$$set=j=>{"node"in j&&l(0,v=j.node)},l(8,r=!1),l(7,t=!1),l(6,s=!1),l(5,i=!1),l(4,n=!1),[v,h,m,_,n,i,s,t,r,d,g,b,w,N,y,E,p,R,C,F,I,A,S,T,D]}class Bu extends st{constructor(e){super(),it(this,e,Vu,zu,at,{node:0})}}function Za(a,e,l){const r=a.slice();return r[18]=e[l],r[20]=l,r}const Mu=a=>({}),Wa=a=>({});function Hu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(l){e=P(l,"No related defensive techniques in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function $u(a){let e,l;return e=new Ht({props:{$$slots:{default:[Ju]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&16406&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Qu(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function Gu(a){let e,l=de(a[18].def_artifact.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" ArtifactNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," ArtifactNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&4&&l!==(l=de(s[18].def_artifact.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Ku(a){let e,l=de(a[18].def_artifact.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedArtifactNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedArtifactNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&4&&l!==(l=de(s[18].def_artifact.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function xa(a){let e=a[1].data.d3f_class+"",l,r,t=a[2].description["@graph"][0]["rdfs:label"]+"",s,i,n="-->",f,v,h=a[18].def_artifact_rel_label.value+"",m,_,u=de(a[18].def_artifact.value)+"",d,g,b=a[18].def_artifact_label.value+"",w,N,y=a[1].data.d3f_class+"",E,p,R,C,F=de(a[18].def_artifact.value)+"",I,A,S=de(a[18].def_artifact.value)+"",T,D,j=`
`,$;function x(V,U){return U&20&&(R=null),R==null&&(R=!!V[4].includes(de(V[18].def_artifact.value))),R?Ku:Gu}let ae=x(a,-1),ie=ae(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(' |"'),m=k(h),_=k('" | '),d=k(u),g=k('["'),w=k(b),N=k(`"];
          class `),E=k(y),p=k(` DefensiveTechniqueNode;
          `),ie.c(),C=k(`
          click `),I=k(F),A=k(` href "javascript:def_to_art_callback('`),T=k(S),D=k(`')";`),$=k(j)},l(V){l=P(V,e),r=P(V,'["'),s=P(V,t),i=P(V,'"] '),f=P(V,n),v=P(V,' |"'),m=P(V,h),_=P(V,'" | '),d=P(V,u),g=P(V,'["'),w=P(V,b),N=P(V,`"];
          class `),E=P(V,y),p=P(V,` DefensiveTechniqueNode;
          `),ie.l(V),C=P(V,`
          click `),I=P(V,F),A=P(V,` href "javascript:def_to_art_callback('`),T=P(V,S),D=P(V,`')";`),$=P(V,j)},m(V,U){c(V,l,U),c(V,r,U),c(V,s,U),c(V,i,U),c(V,f,U),c(V,v,U),c(V,m,U),c(V,_,U),c(V,d,U),c(V,g,U),c(V,w,U),c(V,N,U),c(V,E,U),c(V,p,U),ie.m(V,U),c(V,C,U),c(V,I,U),c(V,A,U),c(V,T,U),c(V,D,U),c(V,$,U)},p(V,U){U&2&&e!==(e=V[1].data.d3f_class+"")&&H(l,e),U&4&&t!==(t=V[2].description["@graph"][0]["rdfs:label"]+"")&&H(s,t),U&4&&h!==(h=V[18].def_artifact_rel_label.value+"")&&H(m,h),U&4&&u!==(u=de(V[18].def_artifact.value)+"")&&H(d,u),U&4&&b!==(b=V[18].def_artifact_label.value+"")&&H(w,b),U&2&&y!==(y=V[1].data.d3f_class+"")&&H(E,y),ae===(ae=x(V,U))&&ie?ie.p(V,U):(ie.d(1),ie=ae(V),ie&&(ie.c(),ie.m(C.parentNode,C))),U&4&&F!==(F=de(V[18].def_artifact.value)+"")&&H(I,F),U&4&&S!==(S=de(V[18].def_artifact.value)+"")&&H(T,S)},d(V){V&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(I),o(A),o(T),o(D),o($)),ie.d(V)}}}function Ju(a){let e,l,r=Re(a[2].digital_artifacts.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=xa(Za(a,r,s));return{c(){e=k(`graph LR
        `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR
        `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&22){r=Re(s[2].digital_artifacts.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=Za(s,r,n);t[n]?t[n].p(f,i):(t[n]=xa(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function Yu(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[4].length+"",g,b,w,N,y;const E=a[9].header,p=ot(E,a,a[14],Wa),R=a[9].default,C=ot(R,a,a[14],null),F=[Qu,$u,Hu],I=[];function A(S,T){return S[2]?S[2].digital_artifacts.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Related Artifacts To Insert
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-x0618k"),W(l,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[11](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[7]),ve(l,"click",Nt(a[10])),ve(e,"close",a[12]),ve(e,"click",Mt(a[13]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&16384)&&ft(p,E,S,S[14],w?ct(E,S[14],T,Mu):ut(S[14]),Wa),C&&C.p&&(!w||T&16384)&&ft(C,R,S,S[14],w?ct(R,S[14],T,null):ut(S[14]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&16)&&d!==(d=S[4].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[11](null),N=!1,mt(y)}}}function Xu(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_artifacts_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,p=>l(16,s=p));const u=qt();Ze(a,u,p=>l(15,t=p));let d=new Bt;function g(p){r.includes(p)?l(4,r=r.filter(R=>R!==p)):r.push(p),l(4,r)}window.def_to_art_callback=function(p){g(p)};function b(){let p=0,R=200,C=100;for(const F of r){let I=h.digital_artifacts.results.bindings.find(A=>de(A.def_artifact.value)==F);I&&($t(_,u,v,"artifactSelectorNode",I.def_artifact_label.value,"d3f:"+de(I.def_artifact.value),v.data.sequence,v.position.x+p*R,v.position.y+C,182,82,I.def_artifact_rel_label.value,!0),p+=1)}_.set(s),u.set(t),m&&m.close(),l(4,r=[])}function w(p){Rt.call(this,a,p)}function N(p){Je[p?"unshift":"push"](()=>{m=p,l(3,m)})}const y=()=>l(0,f=!1),E=()=>{m.close(),l(4,r=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&l(0,f=p.show_artifacts_modal),"parent_node"in p&&l(1,v=p.parent_node),"data"in p&&l(2,h=p.data),"$$scope"in p&&l(14,n=p.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&f&&m&&(m.showModal(),l(8,d=new Bt)),a.$$.dirty&265&&!f&&m&&(m.close(),d.reset())},l(4,r=[]),[f,v,h,m,r,_,u,b,d,i,w,N,y,E,n]}class Zu extends st{constructor(e){super(),it(this,e,Xu,Yu,at,{show_artifacts_modal:0,parent_node:1,data:2})}}function es(a,e,l){const r=a.slice();return r[18]=e[l],r}const Wu=a=>({}),ts=a=>({});function xu(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(l){e=P(l,"No related offensive techniques in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function ec(a){let e,l;return e=new Ht({props:{$$slots:{default:[ac]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function tc(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function ls(a){let e=de(a[18].def_tech.value).replace(/ |\./g,"")+"",l,r,t=a[18].def_tech_label.value+"",s,i,n="-->",f,v,h="May "+a[18].def_tactic_label.value.replace(/ /g,""),m,_,u=a[18].off_tech_id.value.replace(/ |\./g,"")+"",d,g,b=a[18].off_tech_label.value+"",w,N,y,E,p=de(a[18].def_tech.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,A,S=a[18].off_tech_id.value.replace(/ |\./g,"")+"",T,D,j=de(a[18].def_tech.value)+"",$,x,ae=de(a[18].def_tech.value)+"",ie,V;function U(O,M){return M&10&&(y=null),y==null&&(y=!!O[3].includes(O[18].off_tech_id.value.replace(/ |\./g,""))),y?rc:lc}let z=U(a,-1),Z=z(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" | "),m=k(h),_=k("| "),d=k(u),g=k('["'),w=k(b),N=k(`"];
            `),Z.c(),E=k(`
            class `),R=k(p),C=k(" CountermeasureNode; click "),I=k(F),A=k(` href "javascript:def_to_off_callback('`),T=k(S),D=k(`')"; click `),$=k(j),x=k(' href "/technique/d3f:'),ie=k(ae),V=k('";')},l(O){l=P(O,e),r=P(O,'["'),s=P(O,t),i=P(O,'"] '),f=P(O,n),v=P(O," | "),m=P(O,h),_=P(O,"| "),d=P(O,u),g=P(O,'["'),w=P(O,b),N=P(O,`"];
            `),Z.l(O),E=P(O,`
            class `),R=P(O,p),C=P(O," CountermeasureNode; click "),I=P(O,F),A=P(O,` href "javascript:def_to_off_callback('`),T=P(O,S),D=P(O,`')"; click `),$=P(O,j),x=P(O,' href "/technique/d3f:'),ie=P(O,ae),V=P(O,'";')},m(O,M){c(O,l,M),c(O,r,M),c(O,s,M),c(O,i,M),c(O,f,M),c(O,v,M),c(O,m,M),c(O,_,M),c(O,d,M),c(O,g,M),c(O,w,M),c(O,N,M),Z.m(O,M),c(O,E,M),c(O,R,M),c(O,C,M),c(O,I,M),c(O,A,M),c(O,T,M),c(O,D,M),c(O,$,M),c(O,x,M),c(O,ie,M),c(O,V,M)},p(O,M){M&2&&e!==(e=de(O[18].def_tech.value).replace(/ |\./g,"")+"")&&H(l,e),M&2&&t!==(t=O[18].def_tech_label.value+"")&&H(s,t),M&2&&h!==(h="May "+O[18].def_tactic_label.value.replace(/ /g,""))&&H(m,h),M&2&&u!==(u=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(d,u),M&2&&b!==(b=O[18].off_tech_label.value+"")&&H(w,b),z===(z=U(O,M))&&Z?Z.p(O,M):(Z.d(1),Z=z(O),Z&&(Z.c(),Z.m(E.parentNode,E))),M&2&&p!==(p=de(O[18].def_tech.value)+"")&&H(R,p),M&2&&F!==(F=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(I,F),M&2&&S!==(S=O[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(T,S),M&2&&j!==(j=de(O[18].def_tech.value)+"")&&H($,j),M&2&&ae!==(ae=de(O[18].def_tech.value)+"")&&H(ie,ae)},d(O){O&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(R),o(C),o(I),o(A),o(T),o(D),o($),o(x),o(ie),o(V)),Z.d(O)}}}function lc(a){let e,l=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" OffensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," OffensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function rc(a){let e,l=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedOffensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function rs(a){let e=a[6].edge_is_unique(a[18].def_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),l,r=e&&ls(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].def_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?r?r.p(t,s):(r=ls(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function ac(a){let e,l,r=Re(a[1].def_to_off.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=rs(es(a,r,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR;
        `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&74){r=Re(s[1].def_to_off.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=es(s,r,n);t[n]?t[n].p(f,i):(t[n]=rs(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function sc(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[3].length+"",g,b,w,N,y;const E=a[9].header,p=ot(E,a,a[14],ts),R=a[9].default,C=ot(R,a,a[14],null),F=[tc,ec,xu],I=[];function A(S,T){return S[1]?S[1].def_to_off.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Attack Techniques
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Attack Techniques
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-1ai9hff"),W(l,"class","svelte-1ai9hff"),W(e,"class","svelte-1ai9hff")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[11](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[7]),ve(l,"click",Nt(a[10])),ve(e,"close",a[12]),ve(e,"click",Mt(a[13]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&16384)&&ft(p,E,S,S[14],w?ct(E,S[14],T,Wu):ut(S[14]),ts),C&&C.p&&(!w||T&16384)&&ft(C,R,S,S[14],w?ct(R,S[14],T,null):ut(S[14]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&8)&&d!==(d=S[3].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[11](null),N=!1,mt(y)}}}function ic(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_attack_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,p=>l(16,s=p));const u=qt();Ze(a,u,p=>l(15,t=p));let d=new Bt;function g(p){r.includes(p)?l(3,r=r.filter(R=>R!==p)):r.push(p),l(3,r)}window.def_to_off_callback=function(p){g(p)};function b(){let p=0,R=200,C=100;for(const F of r){let I=h.def_to_off.results.bindings.find(A=>A.off_tech_id.value.replace(/ |\./g,"")==F);I&&($t(_,u,v,"attackSelectorNode",I.off_tech_label.value,"d3f:"+I.off_tech_id.value,v.data.sequence,v.position.x+p*R,v.position.y+C,182,63,"May "+I.def_tactic_label.value,!0),p+=1)}_.set(s),u.set(t),m&&m.close(),l(3,r=[])}function w(p){Rt.call(this,a,p)}function N(p){Je[p?"unshift":"push"](()=>{m=p,l(2,m)})}const y=()=>l(0,f=!1),E=()=>{m.close(),l(3,r=[])};return a.$$set=p=>{"show_attack_modal"in p&&l(0,f=p.show_attack_modal),"parent_node"in p&&l(8,v=p.parent_node),"data"in p&&l(1,h=p.data),"$$scope"in p&&l(14,n=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),d.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),d.reset())},l(3,r=[]),[f,h,m,r,_,u,d,b,v,i,w,N,y,E,n]}class nc extends st{constructor(e){super(),it(this,e,ic,sc,at,{show_attack_modal:0,parent_node:8,data:1})}}function oc(a){let e,l="artifacts",r,t,s,i,n,f="offensive techniques",v,h,m,_,u,d="weaknesses (coming soon)",g,b,w;function N(R){a[6](R)}let y={parent_node:a[0],data:a[1]};a[3]!==void 0&&(y.show_artifacts_modal=a[3]),t=new Zu({props:y}),Je.push(()=>Et(t,"show_artifacts_modal",N));function E(R){a[8](R)}let p={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(p.show_attack_modal=a[2]),h=new nc({props:p}),Je.push(()=>Et(h,"show_attack_modal",E)),{c(){e=G("button"),e.textContent=l,r=le(),Ae(t.$$.fragment),i=le(),n=G("button"),n.textContent=f,v=le(),Ae(h.$$.fragment),_=le(),u=G("button"),u.textContent=d,this.h()},l(R){e=K(R,"BUTTON",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-isgkpy"&&(e.textContent=l),r=re(R),Fe(t.$$.fragment,R),i=re(R),n=K(R,"BUTTON",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-17h5zge"&&(n.textContent=f),v=re(R),Fe(h.$$.fragment,R),_=re(R),u=K(R,"BUTTON",{class:!0,"data-svelte-h":!0}),De(u)!=="svelte-ivhbdc"&&(u.textContent=d),this.h()},h(){W(e,"class","svelte-1x5dcdh"),W(n,"class","svelte-1x5dcdh"),u.disabled=!0,W(u,"class","svelte-1x5dcdh")},m(R,C){c(R,e,C),c(R,r,C),je(t,R,C),c(R,i,C),c(R,n,C),c(R,v,C),je(h,R,C),c(R,_,C),c(R,u,C),g=!0,b||(w=[ve(e,"click",a[5]),ve(n,"click",a[7])],b=!0)},p(R,[C]){const F={};C&1&&(F.parent_node=R[0]),C&2&&(F.data=R[1]),!s&&C&8&&(s=!0,F.show_artifacts_modal=R[3],bt(()=>s=!1)),t.$set(F);const I={};C&1&&(I.parent_node=R[0]),C&2&&(I.data=R[1]),!m&&C&4&&(m=!0,I.show_attack_modal=R[2],bt(()=>m=!1)),h.$set(I)},i(R){g||(he(t.$$.fragment,R),he(h.$$.fragment,R),g=!0)},o(R){me(t.$$.fragment,R),me(h.$$.fragment,R),g=!1},d(R){R&&(o(e),o(r),o(i),o(n),o(v),o(_),o(u)),Le(t,R),Le(h,R),b=!1,mt(w)}}}function fc(a,e,l){let r,t;var s=this&&this.__awaiter||function(d,g,b,w){function N(y){return y instanceof b?y:new b(function(E){E(y)})}return new(b||(b=Promise))(function(y,E){function p(F){try{C(w.next(F))}catch(I){E(I)}}function R(F){try{C(w.throw(F))}catch(I){E(I)}}function C(F){F.done?y(F.value):N(F.value).then(p,R)}C((w=w.apply(d,g||[])).next())})};let{node:i}=e,n;function f(d){alert(d),l(3,r=!1),l(2,t=!1)}function v(d){return s(this,void 0,void 0,function*(){if(d.data.d3f_class&&d.data.d3f_class.includes("d3f:")){const g=d.data.d3f_class,b=yield fetch(`/api/technique/${g}.json`),w=yield b.json();if(b.status!=200||w.description["@graph"].length==0)f(`D3FEND Technique: "${g.replace("d3f:","")}" not found in ontology`);else return w}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const h=async()=>{l(1,n=null),l(3,r=!0),l(1,n=await v(i))};function m(d){r=d,l(3,r)}const _=async()=>{l(1,n=null),l(2,t=!0),l(1,n=await v(i))};function u(d){t=d,l(2,t)}return a.$$set=d=>{"node"in d&&l(0,i=d.node)},l(3,r=!1),l(2,t=!1),[i,n,t,r,v,h,m,_,u]}class uc extends st{constructor(e){super(),it(this,e,fc,oc,at,{node:0})}}function as(a,e,l){const r=a.slice();return r[18]=e[l],r}const cc=a=>({}),ss=a=>({});function dc(a){let e;return{c(){e=k("No related artifacts in this release.")},l(l){e=P(l,"No related artifacts in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function _c(a){let e,l;return e=new Ht({props:{$$slots:{default:[pc]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function hc(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function is(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,r,t=a[18].off_tech_label.value+"",s,i,n="-->",f,v,h=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,u=de(a[18].off_artifact.value)+"",d,g,b=a[18].off_artifact_label.value+"",w,N,y=a[18].off_tech_id.value.replace(/ |\./g,"")+"",E,p,R,C,F=de(a[18].off_artifact.value)+"",I,A,S=de(a[18].off_artifact.value)+"",T,D,j=a[18].off_tech_id.value.replace(/ |\./g,"")+"",$,x,ae=bl(a[18].off_tech_id.value)+"",ie,V,U=de(a[18].off_artifact.value)+"",z,Z,O=de(a[18].off_artifact.value)+"",M,be;function ye(ee,X){return X&10&&(R=null),R==null&&(R=!!ee[3].includes(de(ee[18].off_artifact.value))),R?mc:vc}let se=ye(a,-1),Y=se(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" |"),m=k(h),_=k("| "),d=k(u),g=k('["'),w=k(b),N=k('"]; class '),E=k(y),p=k(` OffensiveTechniqueNode;
            `),Y.c(),C=k(" ; click "),I=k(F),A=k(' href "/dao/artifact/d3f:'),T=k(S),D=k('"; click '),$=k(j),x=k(' href "'),ie=k(ae),V=k('"; click '),z=k(U),Z=k(` href "javascript:off_to_art_callback('`),M=k(O),be=k(`')";`)},l(ee){l=P(ee,e),r=P(ee,'["'),s=P(ee,t),i=P(ee,'"] '),f=P(ee,n),v=P(ee," |"),m=P(ee,h),_=P(ee,"| "),d=P(ee,u),g=P(ee,'["'),w=P(ee,b),N=P(ee,'"]; class '),E=P(ee,y),p=P(ee,` OffensiveTechniqueNode;
            `),Y.l(ee),C=P(ee," ; click "),I=P(ee,F),A=P(ee,' href "/dao/artifact/d3f:'),T=P(ee,S),D=P(ee,'"; click '),$=P(ee,j),x=P(ee,' href "'),ie=P(ee,ae),V=P(ee,'"; click '),z=P(ee,U),Z=P(ee,` href "javascript:off_to_art_callback('`),M=P(ee,O),be=P(ee,`')";`)},m(ee,X){c(ee,l,X),c(ee,r,X),c(ee,s,X),c(ee,i,X),c(ee,f,X),c(ee,v,X),c(ee,m,X),c(ee,_,X),c(ee,d,X),c(ee,g,X),c(ee,w,X),c(ee,N,X),c(ee,E,X),c(ee,p,X),Y.m(ee,X),c(ee,C,X),c(ee,I,X),c(ee,A,X),c(ee,T,X),c(ee,D,X),c(ee,$,X),c(ee,x,X),c(ee,ie,X),c(ee,V,X),c(ee,z,X),c(ee,Z,X),c(ee,M,X),c(ee,be,X)},p(ee,X){X&2&&e!==(e=ee[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(l,e),X&2&&t!==(t=ee[18].off_tech_label.value+"")&&H(s,t),X&2&&h!==(h=ee[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&H(m,h),X&2&&u!==(u=de(ee[18].off_artifact.value)+"")&&H(d,u),X&2&&b!==(b=ee[18].off_artifact_label.value+"")&&H(w,b),X&2&&y!==(y=ee[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H(E,y),se===(se=ye(ee,X))&&Y?Y.p(ee,X):(Y.d(1),Y=se(ee),Y&&(Y.c(),Y.m(C.parentNode,C))),X&2&&F!==(F=de(ee[18].off_artifact.value)+"")&&H(I,F),X&2&&S!==(S=de(ee[18].off_artifact.value)+"")&&H(T,S),X&2&&j!==(j=ee[18].off_tech_id.value.replace(/ |\./g,"")+"")&&H($,j),X&2&&ae!==(ae=bl(ee[18].off_tech_id.value)+"")&&H(ie,ae),X&2&&U!==(U=de(ee[18].off_artifact.value)+"")&&H(z,U),X&2&&O!==(O=de(ee[18].off_artifact.value)+"")&&H(M,O)},d(ee){ee&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(I),o(A),o(T),o(D),o($),o(x),o(ie),o(V),o(z),o(Z),o(M),o(be)),Y.d(ee)}}}function vc(a){let e,l=de(a[18].off_artifact.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" ArtifactNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," ArtifactNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[18].off_artifact.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function mc(a){let e,l=de(a[18].off_artifact.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedArtifactNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedArtifactNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[18].off_artifact.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function ns(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),l,r=e&&is(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?r?r.p(t,s):(r=is(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function pc(a){let e,l,r=Re(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=ns(as(a,r,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR;
        `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&74){r=Re(s[1].off_to_def.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=as(s,r,n);t[n]?t[n].p(f,i):(t[n]=ns(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function gc(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[3].length+"",g,b,w,N,y;const E=a[9].header,p=ot(E,a,a[14],ss),R=a[9].default,C=ot(R,a,a[14],null),F=[hc,_c,dc],I=[];function A(S,T){return S[1]?S[1].off_to_def.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Related Artifacts To Insert
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-x0618k"),W(l,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[11](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[7]),ve(l,"click",Nt(a[10])),ve(e,"close",a[12]),ve(e,"click",Mt(a[13]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&16384)&&ft(p,E,S,S[14],w?ct(E,S[14],T,cc):ut(S[14]),ss),C&&C.p&&(!w||T&16384)&&ft(C,R,S,S[14],w?ct(R,S[14],T,null):ut(S[14]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&8)&&d!==(d=S[3].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[11](null),N=!1,mt(y)}}}function bc(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_artifacts_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,p=>l(16,s=p));const u=qt();Ze(a,u,p=>l(15,t=p));let d=new Bt;function g(p){r.includes(p)?l(3,r=r.filter(R=>R!==p)):r.push(p),l(3,r)}window.off_to_art_callback=function(p){g(p)};function b(){let p=0,R=200,C=100;for(const F of r){let I=h.off_to_def.results.bindings.find(A=>de(A.off_artifact.value)==F);I&&($t(_,u,v,"artifactSelectorNode",I.off_artifact_label.value,"d3f:"+de(I.off_artifact.value),v.data.sequence,v.position.x+p*R,v.position.y+C,182,63,I.off_artifact_rel_label.value,!0),p+=1)}_.set(s),u.set(t),m&&m.close(),l(3,r=[])}function w(p){Rt.call(this,a,p)}function N(p){Je[p?"unshift":"push"](()=>{m=p,l(2,m)})}const y=()=>l(0,f=!1),E=()=>{m.close(),l(3,r=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&l(0,f=p.show_artifacts_modal),"parent_node"in p&&l(8,v=p.parent_node),"data"in p&&l(1,h=p.data),"$$scope"in p&&l(14,n=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),d.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),d.reset())},l(3,r=[]),[f,h,m,r,_,u,d,b,v,i,w,N,y,E,n]}class Ec extends st{constructor(e){super(),it(this,e,bc,gc,at,{show_artifacts_modal:0,parent_node:8,data:1})}}function os(a,e,l){const r=a.slice();return r[23]=e[l],r}const kc=a=>({}),fs=a=>({});function Pc(a){let e;return{c(){e=k("No related artifacts in this release.")},l(l){e=P(l,"No related artifacts in this release.")},m(l,r){c(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&o(e)}}}function wc(a){let e,l,r,t,s,i,n,f,v,h;function m(u){a[14](u)}let _={toggles:a[4]};return a[3]!==void 0&&(_.selected=a[3]),l=new Zs({props:_}),Je.push(()=>Et(l,"selected",m)),v=new Ht({props:{$$slots:{default:[Cc]},$$scope:{ctx:a}}}),{c(){e=G("div"),Ae(l.$$.fragment),t=le(),s=G("br"),i=le(),n=G("br"),f=le(),Ae(v.$$.fragment),this.h()},l(u){e=K(u,"DIV",{class:!0});var d=pe(e);Fe(l.$$.fragment,d),d.forEach(o),t=re(u),s=K(u,"BR",{}),i=re(u),n=K(u,"BR",{}),f=re(u),Fe(v.$$.fragment,u),this.h()},h(){W(e,"class","center shrink")},m(u,d){c(u,e,d),je(l,e,null),c(u,t,d),c(u,s,d),c(u,i,d),c(u,n,d),c(u,f,d),je(v,u,d),h=!0},p(u,d){const g={};d&16&&(g.toggles=u[4]),!r&&d&8&&(r=!0,g.selected=u[3],bt(()=>r=!1)),l.$set(g);const b={};d&262186&&(b.$$scope={dirty:d,ctx:u}),v.$set(b)},i(u){h||(he(l.$$.fragment,u),he(v.$$.fragment,u),h=!0)},o(u){me(l.$$.fragment,u),me(v.$$.fragment,u),h=!1},d(u){u&&(o(e),o(t),o(s),o(i),o(n),o(f)),Le(l),Le(v,u)}}}function yc(a){let e,l="Loading...";return{c(){e=G("div"),e.textContent=l},l(r){e=K(r,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-194gxkm"&&(e.textContent=l)},m(r,t){c(r,e,t)},p:Ce,i:Ce,o:Ce,d(r){r&&o(e)}}}function us(a){let e=a[8].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].off_artifact_label.value),l,r=e&&cs(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&2&&(e=t[8].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].off_artifact_label.value)),e?r?r.p(t,s):(r=cs(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function cs(a){let e=!a[3].includes(a[23].def_tactic_label.value),l,r=e&&ds(a);return{c(){r&&r.c(),l=ge()},l(t){r&&r.l(t),l=ge()},m(t,s){r&&r.m(t,s),c(t,l,s)},p(t,s){s&10&&(e=!t[3].includes(t[23].def_tactic_label.value)),e?r?r.p(t,s):(r=ds(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(t){t&&o(l),r&&r.d(t)}}}function ds(a){let e=de(a[23].def_tech.value)+"",l,r,t=a[23].def_tech_label.value+"",s,i,n="-->",f,v,h=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",m,_,u=de(a[23].off_artifact.value)+"",d,g,b=a[23].off_artifact_label.value+"",w,N,y=a[8].edge_is_unique(a[23].def_tech.value,a[23].def_tactic_label.value,a[23].off_tech_id.value),E,p,R,C=a[23].off_artifact_label.value.replace(/ /g,"")+"",F,I,A=de(a[23].def_tech.value)+"",S,T,D=a[23].def_tech_label.value.replace(/ |\./g,"")+"",j,$,x=y&&_s(a);function ae(U,z){return z&34&&(p=null),p==null&&(p=!!U[5].includes(de(U[23].def_tech.value))),p?Dc:Sc}let ie=ae(a,-1),V=ie(a);return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(`
                | `),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k(`"];

                `),x&&x.c(),E=le(),V.c(),R=k(` 
                class `),F=k(C),I=k(` ArtifactNode;
                click `),S=k(A),T=k(` href "javascript:off_to_def_callback('`),j=k(D),$=k(`')";`)},l(U){l=P(U,e),r=P(U,'["'),s=P(U,t),i=P(U,'"] '),f=P(U,n),v=P(U,`
                | `),m=P(U,h),_=P(U," | "),d=P(U,u),g=P(U,'["'),w=P(U,b),N=P(U,`"];

                `),x&&x.l(U),E=re(U),V.l(U),R=P(U,` 
                class `),F=P(U,C),I=P(U,` ArtifactNode;
                click `),S=P(U,A),T=P(U,` href "javascript:off_to_def_callback('`),j=P(U,D),$=P(U,`')";`)},m(U,z){c(U,l,z),c(U,r,z),c(U,s,z),c(U,i,z),c(U,f,z),c(U,v,z),c(U,m,z),c(U,_,z),c(U,d,z),c(U,g,z),c(U,w,z),c(U,N,z),x&&x.m(U,z),c(U,E,z),V.m(U,z),c(U,R,z),c(U,F,z),c(U,I,z),c(U,S,z),c(U,T,z),c(U,j,z),c(U,$,z)},p(U,z){z&2&&e!==(e=de(U[23].def_tech.value)+"")&&H(l,e),z&2&&t!==(t=U[23].def_tech_label.value+"")&&H(s,t),z&2&&h!==(h=U[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&H(m,h),z&2&&u!==(u=de(U[23].off_artifact.value)+"")&&H(d,u),z&2&&b!==(b=U[23].off_artifact_label.value+"")&&H(w,b),z&2&&(y=U[8].edge_is_unique(U[23].def_tech.value,U[23].def_tactic_label.value,U[23].off_tech_id.value)),y?x?x.p(U,z):(x=_s(U),x.c(),x.m(E.parentNode,E)):x&&(x.d(1),x=null),ie===(ie=ae(U,z))&&V?V.p(U,z):(V.d(1),V=ie(U),V&&(V.c(),V.m(R.parentNode,R))),z&2&&C!==(C=U[23].off_artifact_label.value.replace(/ /g,"")+"")&&H(F,C),z&2&&A!==(A=de(U[23].def_tech.value)+"")&&H(S,A),z&2&&D!==(D=U[23].def_tech_label.value.replace(/ |\./g,"")+"")&&H(j,D)},d(U){U&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(R),o(F),o(I),o(S),o(T),o(j),o($)),x&&x.d(U),V.d(U)}}}function _s(a){let e=de(a[23].def_tech.value)+"",l,r,t=a[23].def_tech_label.value+"",s,i,n="-.->",f,v,h="May "+a[23].def_tactic_label.value,m,_,u=a[23].off_tech_id.value.replace(/ |\./g,"")+"",d,g,b=a[23].off_tech_label.value+"",w,N;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(`
                  | `),m=k(h),_=k(" | "),d=k(u),g=k('["'),w=k(b),N=k('"] ;')},l(y){l=P(y,e),r=P(y,'["'),s=P(y,t),i=P(y,'"] '),f=P(y,n),v=P(y,`
                  | `),m=P(y,h),_=P(y," | "),d=P(y,u),g=P(y,'["'),w=P(y,b),N=P(y,'"] ;')},m(y,E){c(y,l,E),c(y,r,E),c(y,s,E),c(y,i,E),c(y,f,E),c(y,v,E),c(y,m,E),c(y,_,E),c(y,d,E),c(y,g,E),c(y,w,E),c(y,N,E)},p(y,E){E&2&&e!==(e=de(y[23].def_tech.value)+"")&&H(l,e),E&2&&t!==(t=y[23].def_tech_label.value+"")&&H(s,t),E&2&&h!==(h="May "+y[23].def_tactic_label.value)&&H(m,h),E&2&&u!==(u=y[23].off_tech_id.value.replace(/ |\./g,"")+"")&&H(d,u),E&2&&b!==(b=y[23].off_tech_label.value+"")&&H(w,b)},d(y){y&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N))}}}function Sc(a){let e,l=de(a[23].def_tech.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" DefensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," DefensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[23].def_tech.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function Dc(a){let e,l=de(a[23].def_tech.value)+"",r,t;return{c(){e=k("class "),r=k(l),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=P(s,"class "),r=P(s,l),t=P(s," SelectedDefensiveTechniqueNode;")},m(s,i){c(s,e,i),c(s,r,i),c(s,t,i)},p(s,i){i&2&&l!==(l=de(s[23].def_tech.value)+"")&&H(r,l)},d(s){s&&(o(e),o(r),o(t))}}}function hs(a){let e=a[23].off_tech_id.value.replace(/ |\./g,"")+"",l,r,t=a[23].off_tech_label.value+"",s,i,n="-->",f,v,h=a[23].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,u=de(a[23].off_artifact.value)+"",d,g,b=a[23].off_artifact_label.value+"",w,N,y=a[23].off_tech_id.value.replace(/ |\./g,"")+"",E,p,R=de(a[23].off_artifact.value)+"",C,F,I=de(a[23].off_artifact.value)+"",A,S,T=de(a[23].off_artifact.value)+"",D,j,$=a[23].off_tech_id.value.replace(/ |\./g,"")+"",x,ae,ie=bl(a[23].off_tech_id.value)+"",V,U,z=de(a[23].off_artifact.value)+"",Z,O,M=de(a[23].off_artifact.value)+"",be,ye;return{c(){l=k(e),r=k('["'),s=k(t),i=k('"] '),f=k(n),v=k(" |"),m=k(h),_=k("| "),d=k(u),g=k('["'),w=k(b),N=k('"]; class '),E=k(y),p=k(` OffensiveTechniqueNode;
            class `),C=k(R),F=k(" ArtifactNode; click "),A=k(I),S=k(' href "/dao/artifact/d3f:'),D=k(T),j=k(`";
            click `),x=k($),ae=k(' href "'),V=k(ie),U=k('"; click '),Z=k(z),O=k(' href "/dao/artifact/d3f:'),be=k(M),ye=k('";')},l(se){l=P(se,e),r=P(se,'["'),s=P(se,t),i=P(se,'"] '),f=P(se,n),v=P(se," |"),m=P(se,h),_=P(se,"| "),d=P(se,u),g=P(se,'["'),w=P(se,b),N=P(se,'"]; class '),E=P(se,y),p=P(se,` OffensiveTechniqueNode;
            class `),C=P(se,R),F=P(se," ArtifactNode; click "),A=P(se,I),S=P(se,' href "/dao/artifact/d3f:'),D=P(se,T),j=P(se,`";
            click `),x=P(se,$),ae=P(se,' href "'),V=P(se,ie),U=P(se,'"; click '),Z=P(se,z),O=P(se,' href "/dao/artifact/d3f:'),be=P(se,M),ye=P(se,'";')},m(se,Y){c(se,l,Y),c(se,r,Y),c(se,s,Y),c(se,i,Y),c(se,f,Y),c(se,v,Y),c(se,m,Y),c(se,_,Y),c(se,d,Y),c(se,g,Y),c(se,w,Y),c(se,N,Y),c(se,E,Y),c(se,p,Y),c(se,C,Y),c(se,F,Y),c(se,A,Y),c(se,S,Y),c(se,D,Y),c(se,j,Y),c(se,x,Y),c(se,ae,Y),c(se,V,Y),c(se,U,Y),c(se,Z,Y),c(se,O,Y),c(se,be,Y),c(se,ye,Y)},p(se,Y){Y&2&&e!==(e=se[23].off_tech_id.value.replace(/ |\./g,"")+"")&&H(l,e),Y&2&&t!==(t=se[23].off_tech_label.value+"")&&H(s,t),Y&2&&h!==(h=se[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&H(m,h),Y&2&&u!==(u=de(se[23].off_artifact.value)+"")&&H(d,u),Y&2&&b!==(b=se[23].off_artifact_label.value+"")&&H(w,b),Y&2&&y!==(y=se[23].off_tech_id.value.replace(/ |\./g,"")+"")&&H(E,y),Y&2&&R!==(R=de(se[23].off_artifact.value)+"")&&H(C,R),Y&2&&I!==(I=de(se[23].off_artifact.value)+"")&&H(A,I),Y&2&&T!==(T=de(se[23].off_artifact.value)+"")&&H(D,T),Y&2&&$!==($=se[23].off_tech_id.value.replace(/ |\./g,"")+"")&&H(x,$),Y&2&&ie!==(ie=bl(se[23].off_tech_id.value)+"")&&H(V,ie),Y&2&&z!==(z=de(se[23].off_artifact.value)+"")&&H(Z,z),Y&2&&M!==(M=de(se[23].off_artifact.value)+"")&&H(be,M)},d(se){se&&(o(l),o(r),o(s),o(i),o(f),o(v),o(m),o(_),o(d),o(g),o(w),o(N),o(E),o(p),o(C),o(F),o(A),o(S),o(D),o(j),o(x),o(ae),o(V),o(U),o(Z),o(O),o(be),o(ye))}}}function vs(a){let e,l=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value),r,t="def_tech"in a[23]&&us(a),s=l&&hs(a);return{c(){t&&t.c(),e=le(),s&&s.c(),r=ge()},l(i){t&&t.l(i),e=re(i),s&&s.l(i),r=ge()},m(i,n){t&&t.m(i,n),c(i,e,n),s&&s.m(i,n),c(i,r,n)},p(i,n){"def_tech"in i[23]?t?t.p(i,n):(t=us(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),n&2&&(l=i[8].edge_is_unique(i[23].off_tech_label.value,i[23].off_artifact_rel_label.value,i[23].off_artifact_label.value)),l?s?s.p(i,n):(s=hs(i),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(i){i&&(o(e),o(r)),t&&t.d(i),s&&s.d(i)}}}function Cc(a){let e,l,r=Re(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<r.length;s+=1)t[s]=vs(os(a,r,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();l=ge()},l(s){e=P(s,`graph LR;
        `);for(let i=0;i<t.length;i+=1)t[i].l(s);l=ge()},m(s,i){c(s,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,i);c(s,l,i)},p(s,i){if(i&298){r=Re(s[1].off_to_def.results.bindings);let n;for(n=0;n<r.length;n+=1){const f=os(s,r,n);t[n]?t[n].p(f,i):(t[n]=vs(f),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(s){s&&(o(e),o(l)),Ge(t,s)}}}function Nc(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d=a[5].length+"",g,b,w,N,y;const E=a[12].header,p=ot(E,a,a[18],fs),R=a[12].default,C=ot(R,a,a[18],null),F=[yc,wc,Pc],I=[];function A(S,T){return S[1]?S[1].off_to_def.results.bindings.length>0?1:2:0}return n=A(a),f=I[n]=F[n](a),{c(){e=G("dialog"),l=G("div"),p&&p.c(),r=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=le(),s=G("hr"),i=le(),f.c(),v=le(),h=G("hr"),m=le(),_=G("button"),u=k("Insert ("),g=k(d),b=k(")"),this.h()},l(S){e=K(S,"DIALOG",{class:!0});var T=pe(e);l=K(T,"DIV",{class:!0});var D=pe(l);p&&p.l(D),r=P(D,`
    Select Related Artifacts To Insert
    `),C&&C.l(D),t=re(D),s=K(D,"HR",{}),i=re(D),f.l(D),v=re(D),h=K(D,"HR",{}),m=re(D),_=K(D,"BUTTON",{class:!0});var j=pe(_);u=P(j,"Insert ("),g=P(j,d),b=P(j,")"),j.forEach(o),D.forEach(o),T.forEach(o),this.h()},h(){_.autofocus=!0,W(_,"class","svelte-x0618k"),W(l,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(S,T){c(S,e,T),L(e,l),p&&p.m(l,null),L(l,r),C&&C.m(l,null),L(l,t),L(l,s),L(l,i),I[n].m(l,null),L(l,v),L(l,h),L(l,m),L(l,_),L(_,u),L(_,g),L(_,b),a[15](e),w=!0,_.focus(),N||(y=[ve(_,"click",a[9]),ve(l,"click",Nt(a[13])),ve(e,"close",a[16]),ve(e,"click",Mt(a[17]))],N=!0)},p(S,[T]){p&&p.p&&(!w||T&262144)&&ft(p,E,S,S[18],w?ct(E,S[18],T,kc):ut(S[18]),fs),C&&C.p&&(!w||T&262144)&&ft(C,R,S,S[18],w?ct(R,S[18],T,null):ut(S[18]),null);let D=n;n=A(S),n===D?I[n].p(S,T):(kt(),me(I[D],1,1,()=>{I[D]=null}),Pt(),f=I[n],f?f.p(S,T):(f=I[n]=F[n](S),f.c()),he(f,1),f.m(l,v)),(!w||T&32)&&d!==(d=S[5].length+"")&&H(g,d)},i(S){w||(he(p,S),he(C,S),he(f),w=!0)},o(S){me(p,S),me(C,S),me(f),w=!1},d(S){S&&o(e),p&&p.d(S),C&&C.d(S),I[n].d(),a[15](null),N=!1,mt(y)}}}function Rc(a,e,l){let r,t,s,{$$slots:i={},$$scope:n}=e,{show_defend_modal:f}=e,{parent_node:v}=e,{data:h}=e,m;const _=Ut();Ze(a,_,A=>l(20,s=A));const u=qt();Ze(a,u,A=>l(19,t=A));let d=new Bt;function g(A){r.includes(A)?l(5,r=r.filter(S=>S!==A)):r.push(A),l(5,r)}window.off_to_def_callback=function(A){g(A)};function b(){let A=0,S=200,T=100;for(const D of r){let j=h.off_to_def.results.bindings.find($=>"def_tech"in $&&de($.def_tech.value)==D);j&&($t(_,u,v,"countermeasureSelectorNode",j.def_tech_label.value,"d3f:"+de(j.def_tech.value),v.data.sequence,v.position.x+A*S,v.position.y+T,182,63,"May "+j.def_tactic_label.value,!1),A+=1)}_.set(s),u.set(t),m&&m.close(),l(5,r=[])}let w=new Set,N=[],y=[];Ys(N,y)&&(y=[]);function E(A){for(const S of r){let T=h.off_to_def.results.bindings.find(D=>"def_tech"in D&&de(D.def_tech.value)==S);A.includes(T.def_tactic_label.value)&&l(5,r=r.filter(D=>D!==S))}l(5,r)}function p(A){Rt.call(this,a,A)}function R(A){y=A,l(3,y)}function C(A){Je[A?"unshift":"push"](()=>{m=A,l(2,m)})}const F=()=>l(0,f=!1),I=()=>{m.close(),l(5,r=[])};return a.$$set=A=>{"show_defend_modal"in A&&l(0,f=A.show_defend_modal),"parent_node"in A&&l(10,v=A.parent_node),"data"in A&&l(1,h=A.data),"$$scope"in A&&l(18,n=A.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),d.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),d.reset()),a.$$.dirty&2050&&h&&(h.off_to_def.results.bindings.forEach(A=>{"def_tactic_label"in A&&w.add(A.def_tactic_label.value)}),l(11,w),l(1,h)),a.$$.dirty&2048&&l(4,N=Array.from(w).sort(function(A,S){return El[A]-El[S]})),a.$$.dirty&8&&E(y),a.$$.dirty&8&&d.reset(y)},l(5,r=[]),[f,h,m,y,N,r,_,u,d,b,v,w,i,p,R,C,F,I,n]}class Oc extends st{constructor(e){super(),it(this,e,Rc,Nc,at,{show_defend_modal:0,parent_node:10,data:1})}}function Ic(a){let e,l="artifacts",r,t,s,i,n,f="defensive techniques",v,h,m,_,u,d;function g(y){a[6](y)}let b={parent_node:a[0],data:a[1]};a[3]!==void 0&&(b.show_artifacts_modal=a[3]),t=new Ec({props:b}),Je.push(()=>Et(t,"show_artifacts_modal",g));function w(y){a[8](y)}let N={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(N.show_defend_modal=a[2]),h=new Oc({props:N}),Je.push(()=>Et(h,"show_defend_modal",w)),{c(){e=G("button"),e.textContent=l,r=le(),Ae(t.$$.fragment),i=le(),n=G("button"),n.textContent=f,v=le(),Ae(h.$$.fragment),this.h()},l(y){e=K(y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1t14z6m"&&(e.textContent=l),r=re(y),Fe(t.$$.fragment,y),i=re(y),n=K(y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-o3we0s"&&(n.textContent=f),v=re(y),Fe(h.$$.fragment,y),this.h()},h(){W(e,"class","svelte-1x5dcdh"),W(n,"class","svelte-1x5dcdh")},m(y,E){c(y,e,E),c(y,r,E),je(t,y,E),c(y,i,E),c(y,n,E),c(y,v,E),je(h,y,E),_=!0,u||(d=[ve(e,"click",a[5]),ve(n,"click",a[7])],u=!0)},p(y,[E]){const p={};E&1&&(p.parent_node=y[0]),E&2&&(p.data=y[1]),!s&&E&8&&(s=!0,p.show_artifacts_modal=y[3],bt(()=>s=!1)),t.$set(p);const R={};E&1&&(R.parent_node=y[0]),E&2&&(R.data=y[1]),!m&&E&4&&(m=!0,R.show_defend_modal=y[2],bt(()=>m=!1)),h.$set(R)},i(y){_||(he(t.$$.fragment,y),he(h.$$.fragment,y),_=!0)},o(y){me(t.$$.fragment,y),me(h.$$.fragment,y),_=!1},d(y){y&&(o(e),o(r),o(i),o(n),o(v)),Le(t,y),Le(h,y),u=!1,mt(d)}}}function Tc(a,e,l){let r,t;var s=this&&this.__awaiter||function(d,g,b,w){function N(y){return y instanceof b?y:new b(function(E){E(y)})}return new(b||(b=Promise))(function(y,E){function p(F){try{C(w.next(F))}catch(I){E(I)}}function R(F){try{C(w.throw(F))}catch(I){E(I)}}function C(F){F.done?y(F.value):N(F.value).then(p,R)}C((w=w.apply(d,g||[])).next())})};let{node:i}=e,n;function f(d){alert(d),l(3,r=!1),l(2,t=!1)}function v(d){return s(this,void 0,void 0,function*(){if(d.data.d3f_class&&d.data.d3f_class.includes("d3f:")){const g=d.data.d3f_class,b=yield fetch(`/api/offensive-technique/attack/${g.replace("d3f:","")}.json`),w=yield b.json();if(b.status!=200||w.description["@graph"].length==0)f(`Offensive Technique: "${g.replace("d3f:","")}" not found in ontology`);else return w}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const h=async()=>{l(1,n=null),l(3,r=!0),l(1,n=await v(i))};function m(d){r=d,l(3,r)}const _=async()=>{l(1,n=null),l(2,t=!0),l(1,n=await v(i))};function u(d){t=d,l(2,t)}return a.$$set=d=>{"node"in d&&l(0,i=d.node)},l(3,r=!1),l(2,t=!1),[i,n,t,r,v,h,m,_,u]}class Ac extends st{constructor(e){super(),it(this,e,Tc,Ic,at,{node:0})}}function ms(a){let e,l;return e=new Ac({props:{node:a[1]}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&2&&(s.node=r[1]),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function ps(a){let e,l;return e=new uc({props:{node:a[1]}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&2&&(s.node=r[1]),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function gs(a){let e,l;return e=new Bu({props:{node:a[1]}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t&2&&(s.node=r[1]),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Fc(a){let e,l,r,t,s,i,n,f,v,h,m="duplicate",_,u,d="delete",g,b,w,N,y=a[1]&&a[1].type=="attackSelectorNode"&&ms(a),E=a[1]&&a[1].type=="countermeasureSelectorNode"&&ps(a),p=a[1]&&a[1].type=="artifactSelectorNode"&&gs(a);return{c(){e=G("div"),l=G("p"),r=G("small"),t=k("node: "),s=k(a[0]),i=le(),y&&y.c(),n=le(),E&&E.c(),f=le(),p&&p.c(),v=le(),h=G("button"),h.textContent=m,_=le(),u=G("button"),u.textContent=d,this.h()},l(R){e=K(R,"DIV",{style:!0,class:!0});var C=pe(e);l=K(C,"P",{style:!0});var F=pe(l);r=K(F,"SMALL",{});var I=pe(r);t=P(I,"node: "),s=P(I,a[0]),I.forEach(o),F.forEach(o),i=re(C),y&&y.l(C),n=re(C),E&&E.l(C),f=re(C),p&&p.l(C),v=re(C),h=K(C,"BUTTON",{class:!0,"data-svelte-h":!0}),De(h)!=="svelte-1spbqw1"&&(h.textContent=m),_=re(C),u=K(C,"BUTTON",{class:!0,"data-svelte-h":!0}),De(u)!=="svelte-1pyou7z"&&(u.textContent=d),C.forEach(o),this.h()},h(){nt(l,"margin","0.5em"),W(h,"class","svelte-1o17oqa"),W(u,"class","svelte-1o17oqa"),W(e,"style",g=a[2]()),W(e,"class","context-menu svelte-1o17oqa")},m(R,C){c(R,e,C),L(e,l),L(l,r),L(r,t),L(r,s),L(e,i),y&&y.m(e,null),L(e,n),E&&E.m(e,null),L(e,f),p&&p.m(e,null),L(e,v),L(e,h),L(e,_),L(e,u),b=!0,w||(N=[ve(h,"click",a[5]),ve(u,"click",a[6])],w=!0)},p(R,[C]){(!b||C&1)&&H(s,R[0]),R[1]&&R[1].type=="attackSelectorNode"?y?(y.p(R,C),C&2&&he(y,1)):(y=ms(R),y.c(),he(y,1),y.m(e,n)):y&&(kt(),me(y,1,1,()=>{y=null}),Pt()),R[1]&&R[1].type=="countermeasureSelectorNode"?E?(E.p(R,C),C&2&&he(E,1)):(E=ps(R),E.c(),he(E,1),E.m(e,f)):E&&(kt(),me(E,1,1,()=>{E=null}),Pt()),R[1]&&R[1].type=="artifactSelectorNode"?p?(p.p(R,C),C&2&&he(p,1)):(p=gs(R),p.c(),he(p,1),p.m(e,v)):p&&(kt(),me(p,1,1,()=>{p=null}),Pt()),(!b||C&4&&g!==(g=R[2]()))&&W(e,"style",g)},i(R){b||(he(y),he(E),he(p),b=!0)},o(R){me(y),me(E),me(p),b=!1},d(R){R&&o(e),y&&y.d(),E&&E.d(),p&&p.d(),w=!1,mt(N)}}}function jc(a,e,l){let r,t,s,i,{id:n}=e,{top:f}=e,{left:v}=e,{right:h}=e,{bottom:m}=e;const _=Ut();Ze(a,_,b=>l(11,i=b));const u=qt();Ze(a,u,b=>l(12,s=b));function d(){const b=i.find(w=>w.id===n);if(b){console.log(b);let w=structuredClone(b);w.id=`${n}-copy${Math.random()}`.slice(-24),w.position={x:b.position.x,y:b.position.y+50},ll(_,i=[...i,w],i)}}function g(){ll(_,i=i.filter(b=>b.id!==n),i),ll(u,s=s.filter(b=>b.source!==n&&b.target!==n),s),_.set(i),u.set(s)}return a.$$set=b=>{"id"in b&&l(0,n=b.id),"top"in b&&l(7,f=b.top),"left"in b&&l(8,v=b.left),"right"in b&&l(9,h=b.right),"bottom"in b&&l(10,m=b.bottom)},a.$$.update=()=>{a.$$.dirty&2049&&l(1,r=i.find(b=>b.id===n)),a.$$.dirty&1920&&l(2,t=()=>{let b="";return f&&(b+=`top:${f}px;`),m&&(b+=`bottom:${m}px;`),v&&(b+=`left:${v}px;`),h&&(b+=`right:${h}px;`),b})},[n,r,t,_,u,d,g,f,v,h,m,i]}class Lc extends st{constructor(e){super(),it(this,e,jc,Fc,at,{id:0,top:7,left:8,right:9,bottom:10})}}function bs(a,e,l){const r=a.slice();return r[12]=e[l],r}function Es(a){let e,l,r,t,s,i,n,f,v,h,m,_,u;const d=a[8].default,g=ot(d,a,a[7],null);let b=Re(a[3]),w=[];for(let N=0;N<b.length;N+=1)w[N]=ks(bs(a,b,N));return{c(){e=G("div"),l=G("div"),r=G("h2"),t=k(a[1]),s=le(),i=G("p"),n=k(a[2]),f=le(),g&&g.c(),v=le(),h=G("div");for(let N=0;N<w.length;N+=1)w[N].c();this.h()},l(N){e=K(N,"DIV",{class:!0});var y=pe(e);l=K(y,"DIV",{class:!0});var E=pe(l);r=K(E,"H2",{});var p=pe(r);t=P(p,a[1]),p.forEach(o),s=re(E),i=K(E,"P",{});var R=pe(i);n=P(R,a[2]),R.forEach(o),f=re(E),g&&g.l(E),v=re(E),h=K(E,"DIV",{class:!0});var C=pe(h);for(let F=0;F<w.length;F+=1)w[F].l(C);C.forEach(o),E.forEach(o),y.forEach(o),this.h()},h(){W(h,"class","options svelte-zbcx3u"),W(l,"class","modal-content center text-center svelte-zbcx3u"),W(e,"class","modal-overlay svelte-zbcx3u")},m(N,y){c(N,e,y),L(e,l),L(l,r),L(r,t),L(l,s),L(l,i),L(i,n),L(l,f),g&&g.m(l,null),L(l,v),L(l,h);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(h,null);m=!0,_||(u=[ve(l,"click",Nt(a[9])),ve(e,"click",a[4])],_=!0)},p(N,y){if((!m||y&2)&&H(t,N[1]),(!m||y&4)&&H(n,N[2]),g&&g.p&&(!m||y&128)&&ft(g,d,N,N[7],m?ct(d,N[7],y,null):ut(N[7]),null),y&40){b=Re(N[3]);let E;for(E=0;E<b.length;E+=1){const p=bs(N,b,E);w[E]?w[E].p(p,y):(w[E]=ks(p),w[E].c(),w[E].m(h,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=b.length}},i(N){m||(he(g,N),m=!0)},o(N){me(g,N),m=!1},d(N){N&&o(e),g&&g.d(N),Ge(w,N),_=!1,mt(u)}}}function ks(a){let e,l=a[12].label+"",r,t,s,i;function n(){return a[10](a[12])}return{c(){e=G("button"),r=k(l),t=le(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var v=pe(e);r=P(v,l),t=re(v),v.forEach(o),this.h()},h(){W(e,"class","svelte-zbcx3u")},m(f,v){c(f,e,v),L(e,r),L(e,t),s||(i=ve(e,"click",n),s=!0)},p(f,v){a=f,v&8&&l!==(l=a[12].label+"")&&H(r,l)},d(f){f&&o(e),s=!1,i()}}}function Uc(a){let e,l,r=a[0]&&Es(a);return{c(){r&&r.c(),e=ge()},l(t){r&&r.l(t),e=ge()},m(t,s){r&&r.m(t,s),c(t,e,s),l=!0},p(t,[s]){t[0]?r?(r.p(t,s),s&1&&he(r,1)):(r=Es(t),r.c(),he(r,1),r.m(e.parentNode,e)):r&&(kt(),me(r,1,1,()=>{r=null}),Pt())},i(t){l||(he(r),l=!0)},o(t){me(r),l=!1},d(t){t&&o(e),r&&r.d(t)}}}function qc(a,e,l){let{$$slots:r={},$$scope:t}=e,{is_open:s=!1}=e,{title:i=""}=e,{content:n=""}=e,{imageSrc:f=""}=e,{options:v=[]}=e;const h=nl();function m(){l(0,s=!1)}function _(g){h("optionSelected",g),m()}function u(g){Rt.call(this,a,g)}const d=g=>_(g);return a.$$set=g=>{"is_open"in g&&l(0,s=g.is_open),"title"in g&&l(1,i=g.title),"content"in g&&l(2,n=g.content),"imageSrc"in g&&l(6,f=g.imageSrc),"options"in g&&l(3,v=g.options),"$$scope"in g&&l(7,t=g.$$scope)},[s,i,n,v,m,_,f,t,r,u,d]}class Ps extends st{constructor(e){super(),it(this,e,qc,Uc,at,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function ws(a,e,l){const r=a.slice();return r[11]=e[l],r}function ys(a){let e,l,r,t,s,i,n,f,v,h,m,_,u;const d=a[7].default,g=ot(d,a,a[6],null);let b=Re(a[3]),w=[];for(let N=0;N<b.length;N+=1)w[N]=Ss(ws(a,b,N));return{c(){e=G("div"),l=G("div"),r=G("h2"),t=k(a[1]),s=le(),i=G("p"),n=k(a[2]),f=le(),g&&g.c(),v=le(),h=G("div");for(let N=0;N<w.length;N+=1)w[N].c();this.h()},l(N){e=K(N,"DIV",{class:!0});var y=pe(e);l=K(y,"DIV",{class:!0});var E=pe(l);r=K(E,"H2",{});var p=pe(r);t=P(p,a[1]),p.forEach(o),s=re(E),i=K(E,"P",{});var R=pe(i);n=P(R,a[2]),R.forEach(o),f=re(E),g&&g.l(E),v=re(E),h=K(E,"DIV",{class:!0});var C=pe(h);for(let F=0;F<w.length;F+=1)w[F].l(C);C.forEach(o),E.forEach(o),y.forEach(o),this.h()},h(){W(h,"class","options svelte-2iwk9m"),W(l,"class","modal-content center text-center svelte-2iwk9m"),W(e,"class","modal-overlay svelte-2iwk9m")},m(N,y){c(N,e,y),L(e,l),L(l,r),L(r,t),L(l,s),L(l,i),L(i,n),L(l,f),g&&g.m(l,null),L(l,v),L(l,h);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(h,null);m=!0,_||(u=[ve(l,"click",Nt(a[8])),ve(e,"click",a[4])],_=!0)},p(N,y){if((!m||y&2)&&H(t,N[1]),(!m||y&4)&&H(n,N[2]),g&&g.p&&(!m||y&64)&&ft(g,d,N,N[6],m?ct(d,N[6],y,null):ut(N[6]),null),y&40){b=Re(N[3]);let E;for(E=0;E<b.length;E+=1){const p=ws(N,b,E);w[E]?w[E].p(p,y):(w[E]=Ss(p),w[E].c(),w[E].m(h,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=b.length}},i(N){m||(he(g,N),m=!0)},o(N){me(g,N),m=!1},d(N){N&&o(e),g&&g.d(N),Ge(w,N),_=!1,mt(u)}}}function Ss(a){let e,l=a[11].label+"",r,t,s,i;function n(){return a[9](a[11])}return{c(){e=G("button"),r=k(l),t=le(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var v=pe(e);r=P(v,l),t=re(v),v.forEach(o),this.h()},h(){W(e,"class","svelte-2iwk9m")},m(f,v){c(f,e,v),L(e,r),L(e,t),s||(i=ve(e,"click",n),s=!0)},p(f,v){a=f,v&8&&l!==(l=a[11].label+"")&&H(r,l)},d(f){f&&o(e),s=!1,i()}}}function zc(a){let e,l,r=a[0]&&ys(a);return{c(){r&&r.c(),e=ge()},l(t){r&&r.l(t),e=ge()},m(t,s){r&&r.m(t,s),c(t,e,s),l=!0},p(t,[s]){t[0]?r?(r.p(t,s),s&1&&he(r,1)):(r=ys(t),r.c(),he(r,1),r.m(e.parentNode,e)):r&&(kt(),me(r,1,1,()=>{r=null}),Pt())},i(t){l||(he(r),l=!0)},o(t){me(r),l=!1},d(t){t&&o(e),r&&r.d(t)}}}function Vc(a,e,l){let{$$slots:r={},$$scope:t}=e,{is_open:s=!1}=e,{title:i=""}=e,{content:n=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const v=nl();function h(){l(0,s=!1)}function m(d){v("model_shared",d),h()}function _(d){Rt.call(this,a,d)}const u=d=>m(d);return a.$$set=d=>{"is_open"in d&&l(0,s=d.is_open),"title"in d&&l(1,i=d.title),"content"in d&&l(2,n=d.content),"options"in d&&l(3,f=d.options),"$$scope"in d&&l(6,t=d.$$scope)},[s,i,n,f,h,m,t,r,_,u]}class Bc extends st{constructor(e){super(),it(this,e,Vc,zc,at,{is_open:0,title:1,content:2,options:3})}}function Mc(a){let e,l="❐";return{c(){e=G("icon"),e.textContent=l,this.h()},l(r){e=K(r,"ICON",{title:!0,"data-svelte-h":!0}),De(e)!=="svelte-10dwkvf"&&(e.textContent=l),this.h()},h(){W(e,"title","Full Screen Mode")},m(r,t){c(r,e,t)},d(r){r&&o(e)}}}function Hc(a){let e,l="⧉ Exit Fullscreen";return{c(){e=G("icon"),e.textContent=l,this.h()},l(r){e=K(r,"ICON",{title:!0,"data-svelte-h":!0}),De(e)!=="svelte-2wnxo3"&&(e.textContent=l),this.h()},h(){W(e,"title","Exit Full Screen Mode")},m(r,t){c(r,e,t)},d(r){r&&o(e)}}}function $c(a){let e,l,r,t,s,i;function n(_,u){return _[1]?Hc:Mc}let f=n(a),v=f(a);const h=a[4].default,m=ot(h,a,a[3],null);return{c(){e=G("div"),l=G("button"),v.c(),r=le(),m&&m.c(),this.h()},l(_){e=K(_,"DIV",{id:!0,class:!0});var u=pe(e);l=K(u,"BUTTON",{class:!0});var d=pe(l);v.l(d),d.forEach(o),r=re(u),m&&m.l(u),u.forEach(o),this.h()},h(){W(l,"class","fullscreen-toggle svelte-1jzyezl"),dl(l,"left",a[0]==="left"),dl(l,"right",a[0]==="right"),W(e,"id","fullscreen-parent"),W(e,"class","svelte-1jzyezl")},m(_,u){c(_,e,u),L(e,l),v.m(l,null),L(e,r),m&&m.m(e,null),t=!0,s||(i=ve(l,"click",a[2]),s=!0)},p(_,[u]){f!==(f=n(_))&&(v.d(1),v=f(_),v&&(v.c(),v.m(l,null))),(!t||u&1)&&dl(l,"left",_[0]==="left"),(!t||u&1)&&dl(l,"right",_[0]==="right"),m&&m.p&&(!t||u&8)&&ft(m,h,_,_[3],t?ct(h,_[3],u,null):ut(_[3]),null)},i(_){t||(he(m,_),t=!0)},o(_){me(m,_),t=!1},d(_){_&&o(e),v.d(),m&&m.d(_),s=!1,i()}}}function Qc(a,e,l){let{$$slots:r={},$$scope:t}=e,{position:s="right"}=e,i=!1,n;Gl(()=>(n=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",f),()=>{document.removeEventListener("fullscreenchange",f)}));function f(){l(1,i=!!document.fullscreenElement)}async function v(){if(i)try{await document.exitFullscreen()}catch(h){console.error("Error attempting to exit fullscreen:",h)}else try{await n.requestFullscreen()}catch(h){console.error("Error attempting to enable fullscreen:",h)}}return a.$$set=h=>{"position"in h&&l(0,s=h.position),"$$scope"in h&&l(3,t=h.$$scope)},[s,i,v,t,r]}class Gc extends st{constructor(e){super(),it(this,e,Qc,$c,at,{position:0})}}function Kc(a){let e,l,r,t,s="Action",i,n,f="Event",v,h,m="Attack",_,u,d="Countermeasure",g,b,w,N="Endurant",y,E,p="Artifact",R,C,F="Information",I,A,S="Agent",T,D,j,$="State",x,ae,ie="Vulnerability",V,U,z="Condition",Z,O,M,be="Misc",ye,se,Y="Note",ee,X,_e="Thing",Te,Se;return{c(){e=G("aside"),l=G("div"),r=G("div"),t=G("div"),t.textContent=s,i=le(),n=G("div"),n.textContent=f,v=le(),h=G("div"),h.textContent=m,_=le(),u=G("div"),u.textContent=d,g=le(),b=G("div"),w=G("div"),w.textContent=N,y=le(),E=G("div"),E.textContent=p,R=le(),C=G("div"),C.textContent=F,I=le(),A=G("div"),A.textContent=S,T=le(),D=G("div"),j=G("div"),j.textContent=$,x=le(),ae=G("div"),ae.textContent=ie,V=le(),U=G("div"),U.textContent=z,Z=le(),O=G("div"),M=G("div"),M.textContent=be,ye=le(),se=G("div"),se.textContent=Y,ee=le(),X=G("div"),X.textContent=_e,this.h()},l(B){e=K(B,"ASIDE",{class:!0});var ce=pe(e);l=K(ce,"DIV",{class:!0});var Ve=pe(l);r=K(Ve,"DIV",{class:!0});var Me=pe(r);t=K(Me,"DIV",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1yk6dej"&&(t.textContent=s),i=re(Me),n=K(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),De(n)!=="svelte-1hxo6k5"&&(n.textContent=f),v=re(Me),h=K(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),De(h)!=="svelte-1m30nhf"&&(h.textContent=m),_=re(Me),u=K(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),De(u)!=="svelte-xvztkt"&&(u.textContent=d),Me.forEach(o),g=re(Ve),b=K(Ve,"DIV",{class:!0});var xe=pe(b);w=K(xe,"DIV",{class:!0,"data-svelte-h":!0}),De(w)!=="svelte-13fxc4g"&&(w.textContent=N),y=re(xe),E=K(xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(E)!=="svelte-p6iki9"&&(E.textContent=p),R=re(xe),C=K(xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(C)!=="svelte-1dw84fd"&&(C.textContent=F),I=re(xe),A=K(xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(A)!=="svelte-1k1k96h"&&(A.textContent=S),xe.forEach(o),T=re(Ve),D=K(Ve,"DIV",{class:!0});var ze=pe(D);j=K(ze,"DIV",{class:!0,"data-svelte-h":!0}),De(j)!=="svelte-82roym"&&(j.textContent=$),x=re(ze),ae=K(ze,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(ae)!=="svelte-tj9qj"&&(ae.textContent=ie),V=re(ze),U=K(ze,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(U)!=="svelte-1mwlumu"&&(U.textContent=z),ze.forEach(o),Z=re(Ve),O=K(Ve,"DIV",{class:!0});var He=pe(O);M=K(He,"DIV",{class:!0,"data-svelte-h":!0}),De(M)!=="svelte-o90l7d"&&(M.textContent=be),ye=re(He),se=K(He,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(se)!=="svelte-18cgcvt"&&(se.textContent=Y),ee=re(He),X=K(He,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),De(X)!=="svelte-kl7q0i"&&(X.textContent=_e),He.forEach(o),Ve.forEach(o),ce.forEach(o),this.h()},h(){W(t,"class","text-center font-medium"),W(n,"class","actionNode example-node svelte-1iswza3"),W(n,"draggable",!0),nt(n,"text-align","center"),nt(n,"background","white"),W(n,"title","d3f:Event"),W(h,"class","attackSelectorNode example-node svelte-1iswza3"),W(h,"draggable",!0),nt(h,"text-align","center"),nt(h,"background","#FFD0D0"),W(h,"title","d3f:OffensiveTechnique"),W(u,"class","countermeasureSelectorNode example-node svelte-1iswza3"),W(u,"draggable",!0),nt(u,"text-align","center"),nt(u,"background","#d6eaff"),W(u,"title","d3f:DefensiveTechnique"),W(r,"class","nodes-column svelte-1iswza3"),W(w,"class","text-center font-medium"),W(E,"class","artifactSelectorNode art-node example-node svelte-1iswza3"),W(E,"draggable",!0),nt(E,"text-align","center"),nt(E,"background","#fff4dd"),W(C,"class","informationSelectorNode example-node svelte-1iswza3"),W(C,"draggable",!0),nt(C,"text-align","center"),nt(C,"background","#fff4dd"),W(A,"class","agentSelectorNode example-node svelte-1iswza3"),W(A,"draggable",!0),nt(A,"text-align","center"),nt(A,"background","#f0e6e6"),W(b,"class","nodes-column svelte-1iswza3"),W(j,"class","text-center font-medium"),W(ae,"class","vulnerabilitySelectorNode example-node svelte-1iswza3"),W(ae,"draggable",!0),nt(ae,"text-align","center"),nt(ae,"background","#f9d999"),W(U,"class","conditionDefinitionNode example-node svelte-1iswza3"),W(U,"draggable",!0),nt(U,"text-align","center"),nt(U,"background","#ece6ff"),W(D,"class","nodes-column svelte-1iswza3"),W(M,"class","text-center font-medium"),W(se,"class","NoteNode example-node svelte-1iswza3"),W(se,"draggable",!0),nt(se,"text-align","center"),nt(se,"background","lightgoldenrodyellow"),W(X,"class","ThingNode example-node svelte-1iswza3"),W(X,"draggable",!0),nt(X,"text-align","center"),nt(X,"background","#f4f4f4"),W(O,"class","nodes-column svelte-1iswza3"),W(l,"class","nodes-container svelte-1iswza3"),W(e,"class","svelte-1iswza3")},m(B,ce){c(B,e,ce),L(e,l),L(l,r),L(r,t),L(r,i),L(r,n),L(r,v),L(r,h),L(r,_),L(r,u),L(l,g),L(l,b),L(b,w),L(b,y),L(b,E),L(b,R),L(b,C),L(b,I),L(b,A),L(l,T),L(l,D),L(D,j),L(D,x),L(D,ae),L(D,V),L(D,U),L(l,Z),L(l,O),L(O,M),L(O,ye),L(O,se),L(O,ee),L(O,X),Te||(Se=[ve(n,"dragstart",a[1]),ve(h,"dragstart",a[2]),ve(u,"dragstart",a[3]),ve(E,"dragstart",a[4]),ve(C,"dragstart",a[5]),ve(A,"dragstart",a[6]),ve(ae,"dragstart",a[7]),ve(U,"dragstart",a[8]),ve(se,"dragstart",a[9]),ve(X,"dragstart",a[10])],Te=!0)},p:Ce,i:Ce,o:Ce,d(B){B&&o(e),Te=!1,mt(Se)}}}function Jc(a){const e=(_,u)=>{if(!_.dataTransfer)return null;_.dataTransfer.setData("application/svelteflow",u),_.dataTransfer.effectAllowed="move"};return[e,_=>e(_,"eventNode"),_=>e(_,"attackSelectorNode"),_=>e(_,"countermeasureSelectorNode"),_=>e(_,"artifactSelectorNode"),_=>e(_,"informationSelectorNode"),_=>e(_,"agentSelectorNode"),_=>e(_,"vulnerabilitySelectorNode"),_=>e(_,"conditionDefinitionNode"),_=>e(_,"noteNode"),_=>e(_,"thingNode")]}class Yc extends st{constructor(e){super(),it(this,e,Jc,Kc,at,{})}}function Ds(a,e,l){const r=a.slice();return r[7]=e[l],r}function Cs(a){let e,l=Re(a[2]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Ns(Ds(a,l,t));return{c(){e=G("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=K(t,"DIV",{class:!0});var s=pe(e);for(let i=0;i<r.length;i+=1)r[i].l(s);s.forEach(o),this.h()},h(){W(e,"class","file-list svelte-1gm1g7x")},m(t,s){c(t,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(t,s){if(s&20){l=Re(t[2]);let i;for(i=0;i<l.length;i+=1){const n=Ds(t,l,i);r[i]?r[i].p(n,s):(r[i]=Ns(n),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(t){t&&o(e),Ge(r,t)}}}function Ns(a){let e,l=a[7].name+"",r,t,s=a[7].nodeCount+"",i,n,f=a[7].edgeCount+"",v,h,m,_;function u(){return a[5](a[7])}return{c(){e=G("div"),r=k(l),t=k(" ("),i=k(s),n=k(" nodes, "),v=k(f),h=k(` edges)
          `),this.h()},l(d){e=K(d,"DIV",{class:!0});var g=pe(e);r=P(g,l),t=P(g," ("),i=P(g,s),n=P(g," nodes, "),v=P(g,f),h=P(g,` edges)
          `),g.forEach(o),this.h()},h(){W(e,"class","file-item svelte-1gm1g7x")},m(d,g){c(d,e,g),L(e,r),L(e,t),L(e,i),L(e,n),L(e,v),L(e,h),m||(_=ve(e,"click",u),m=!0)},p(d,g){a=d,g&4&&l!==(l=a[7].name+"")&&H(r,l),g&4&&s!==(s=a[7].nodeCount+"")&&H(i,s),g&4&&f!==(f=a[7].edgeCount+"")&&H(v,f)},d(d){d&&o(e),m=!1,_()}}}function Xc(a){let e,l,r,t,s,i,n=a[1]&&Cs(a);return{c(){e=G("div"),l=G("button"),r=k(a[0]),t=le(),n&&n.c(),this.h()},l(f){e=K(f,"DIV",{class:!0});var v=pe(e);l=K(v,"BUTTON",{class:!0});var h=pe(l);r=P(h,a[0]),h.forEach(o),t=re(v),n&&n.l(v),v.forEach(o),this.h()},h(){W(l,"class","svelte-1gm1g7x"),W(e,"class","pick-list-container svelte-1gm1g7x")},m(f,v){c(f,e,v),L(e,l),L(l,r),L(e,t),n&&n.m(e,null),s||(i=ve(l,"click",a[3]),s=!0)},p(f,[v]){v&1&&H(r,f[0]),f[1]?n?n.p(f,v):(n=Cs(f),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Ce,o:Ce,d(f){f&&o(e),n&&n.d(),s=!1,i()}}}async function Zc(){return await(await fetch("/cad/examples.json")).json()}function Wc(a,e,l){const r=nl();let t=!1,{selectedFile:s="Example Graphs"}=e,i=[];function n(){l(1,t=!t)}function f(h){l(0,s=h),l(1,t=!1),r("fileSelected",h)}Gl(async()=>{l(2,i=await Zc())});const v=h=>f(h.name);return a.$$set=h=>{"selectedFile"in h&&l(0,s=h.selectedFile)},[s,t,i,n,f,v]}class xc extends st{constructor(e){super(),it(this,e,Wc,Xc,at,{selectedFile:0})}}function Rs(a){let e,l,r,t,s;return{c(){e=vr("path"),l=le(),r=vr("circle"),this.h()},l(i){e=mr(i,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),pe(e).forEach(o),l=re(i),r=mr(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),pe(r).forEach(o),this.h()},h(){W(e,"fill","transparent"),W(e,"stroke-width",2.5),W(e,"class","animated"),W(e,"stroke","black"),W(e,"d",a[2]),W(r,"cx",t=a[0].tx),W(r,"cy",s=a[0].ty),W(r,"r",3),W(r,"stroke","black"),W(r,"stroke-width",1.5)},m(i,n){c(i,e,n),c(i,l,n),c(i,r,n)},p(i,n){n&4&&W(e,"d",i[2]),n&1&&t!==(t=i[0].tx)&&W(r,"cx",t),n&1&&s!==(s=i[0].ty)&&W(r,"cy",s)},d(i){i&&(o(e),o(l),o(r))}}}function ed(a){let e,l=a[1].inProgress&&Rs(a);return{c(){l&&l.c(),e=ge()},l(r){l&&l.l(r),e=ge()},m(r,t){l&&l.m(r,t),c(r,e,t)},p(r,[t]){r[1].inProgress?l?l.p(r,t):(l=Rs(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Ce,o:Ce,d(r){r&&o(e),l&&l.d(r)}}}function td(a,e,l){let r;const t=Ai();Ze(a,t,n=>l(1,r=n));let s,i;return a.$$.update=()=>{if(a.$$.dirty&3){const n=structuredClone(r.fromNode);r.isValid?(l(0,i=_r(r.fromNode,r.toNode)),l(2,s=kr({sourceX:i.sx,sourceY:i.sy,sourcePosition:i.sourcePos,targetX:i.tx,targetY:i.ty,targetPosition:i.targetPos})[0])):(n.id="-1",n.measured={width:1,height:1},n.position={x:r.to.x,y:r.to.y},n.internals.positionAbsolute={x:r.to.x,y:r.to.y},l(0,i=_r(r.fromNode,n)),l(2,s=kr({sourceX:i.sx,sourceY:i.sy,sourcePosition:i.sourcePos,targetX:i.tx,targetY:i.ty,targetPosition:i.targetPos})[0]))}},[i,r,s,t]}class ld extends st{constructor(e){super(),it(this,e,td,ed,at,{})}}function Os(a,e,l){const r=a.slice();return r[11]=e[l],r}function Is(a){let e,l,r,t,s,i,n,f,v,h,m,_,u;const d=a[7].default,g=ot(d,a,a[6],null);let b=Re(a[3]),w=[];for(let N=0;N<b.length;N+=1)w[N]=Ts(Os(a,b,N));return{c(){e=G("div"),l=G("div"),r=G("h2"),t=k(a[1]),s=le(),i=G("p"),n=k(a[2]),f=le(),g&&g.c(),v=le(),h=G("div");for(let N=0;N<w.length;N+=1)w[N].c();this.h()},l(N){e=K(N,"DIV",{class:!0});var y=pe(e);l=K(y,"DIV",{class:!0});var E=pe(l);r=K(E,"H2",{});var p=pe(r);t=P(p,a[1]),p.forEach(o),s=re(E),i=K(E,"P",{});var R=pe(i);n=P(R,a[2]),R.forEach(o),f=re(E),g&&g.l(E),v=re(E),h=K(E,"DIV",{class:!0});var C=pe(h);for(let F=0;F<w.length;F+=1)w[F].l(C);C.forEach(o),E.forEach(o),y.forEach(o),this.h()},h(){W(h,"class","options svelte-zbcx3u"),W(l,"class","modal-content center text-center svelte-zbcx3u"),W(e,"class","modal-overlay svelte-zbcx3u")},m(N,y){c(N,e,y),L(e,l),L(l,r),L(r,t),L(l,s),L(l,i),L(i,n),L(l,f),g&&g.m(l,null),L(l,v),L(l,h);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(h,null);m=!0,_||(u=[ve(l,"click",Nt(a[8])),ve(e,"click",a[4])],_=!0)},p(N,y){if((!m||y&2)&&H(t,N[1]),(!m||y&4)&&H(n,N[2]),g&&g.p&&(!m||y&64)&&ft(g,d,N,N[6],m?ct(d,N[6],y,null):ut(N[6]),null),y&40){b=Re(N[3]);let E;for(E=0;E<b.length;E+=1){const p=Os(N,b,E);w[E]?w[E].p(p,y):(w[E]=Ts(p),w[E].c(),w[E].m(h,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=b.length}},i(N){m||(he(g,N),m=!0)},o(N){me(g,N),m=!1},d(N){N&&o(e),g&&g.d(N),Ge(w,N),_=!1,mt(u)}}}function Ts(a){let e,l=a[11].label+"",r,t,s,i;function n(){return a[9](a[11])}return{c(){e=G("button"),r=k(l),t=le(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var v=pe(e);r=P(v,l),t=re(v),v.forEach(o),this.h()},h(){W(e,"class","svelte-zbcx3u")},m(f,v){c(f,e,v),L(e,r),L(e,t),s||(i=ve(e,"click",n),s=!0)},p(f,v){a=f,v&8&&l!==(l=a[11].label+"")&&H(r,l)},d(f){f&&o(e),s=!1,i()}}}function rd(a){let e,l,r=a[0]&&Is(a);return{c(){r&&r.c(),e=ge()},l(t){r&&r.l(t),e=ge()},m(t,s){r&&r.m(t,s),c(t,e,s),l=!0},p(t,[s]){t[0]?r?(r.p(t,s),s&1&&he(r,1)):(r=Is(t),r.c(),he(r,1),r.m(e.parentNode,e)):r&&(kt(),me(r,1,1,()=>{r=null}),Pt())},i(t){l||(he(r),l=!0)},o(t){me(r),l=!1},d(t){t&&o(e),r&&r.d(t)}}}function ad(a,e,l){let{$$slots:r={},$$scope:t}=e,{is_open:s=!1}=e,{title:i=""}=e,{content:n=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const v=nl();function h(){l(0,s=!1)}function m(d){v("close_button_modal",d),h()}function _(d){Rt.call(this,a,d)}const u=d=>m(d);return a.$$set=d=>{"is_open"in d&&l(0,s=d.is_open),"title"in d&&l(1,i=d.title),"content"in d&&l(2,n=d.content),"options"in d&&l(3,f=d.options),"$$scope"in d&&l(6,t=d.$$scope)},[s,i,n,f,h,m,t,r,_,u]}class sd extends st{constructor(e){super(),it(this,e,ad,rd,at,{is_open:0,title:1,content:2,options:3})}}function As(a,e,l){const r=a.slice();return r[25]=e[l],r[26]=e,r[27]=l,r}function Fs(a,e,l){const r=a.slice();return r[28]=e[l],r[29]=e,r[27]=l,r}function js(a,e,l){const r=a.slice();return r[30]=e[l],r[31]=e,r[27]=l,r}function Ls(a){let e,l,r,t,s,i,n,f,v,h,m,_,u="Save",d,g,b=`.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .form-row label {
    width: 200px;
    text-align: right;
    margin-right: 10px;
  }

  .form-row input,
  .form-row textarea {
    flex-grow: 1;
  }`,w,N,y=a[0]&&Us(a);return{c(){e=G("div"),l=G("div"),r=G("h2"),t=k(a[2]),s=le(),i=G("p"),n=k(a[3]),f=le(),v=G("form"),y&&y.c(),h=le(),m=G("div"),_=G("button"),_.textContent=u,d=le(),g=G("style"),g.textContent=b,this.h()},l(E){e=K(E,"DIV",{class:!0});var p=pe(e);l=K(p,"DIV",{class:!0});var R=pe(l);r=K(R,"H2",{});var C=pe(r);t=P(C,a[2]),C.forEach(o),s=re(R),i=K(R,"P",{});var F=pe(i);n=P(F,a[3]),F.forEach(o),f=re(R),v=K(R,"FORM",{});var I=pe(v);y&&y.l(I),h=re(I),m=K(I,"DIV",{class:!0});var A=pe(m);_=K(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),De(_)!=="svelte-ajsp9k"&&(_.textContent=u),A.forEach(o),I.forEach(o),d=re(R),g=K(R,"STYLE",{"data-svelte-h":!0}),De(g)!=="svelte-bu94yd"&&(g.textContent=b),R.forEach(o),p.forEach(o),this.h()},h(){W(_,"type","submit"),W(_,"class","svelte-k723th"),W(m,"class","options svelte-k723th"),W(l,"class","modal-content center text-center svelte-k723th"),W(e,"class","modal-overlay svelte-k723th")},m(E,p){c(E,e,p),L(e,l),L(l,r),L(r,t),L(l,s),L(l,i),L(i,n),L(l,f),L(l,v),y&&y.m(v,null),L(v,h),L(v,m),L(m,_),L(l,d),L(l,g),w||(N=[ve(_,"click",a[5]),ve(l,"click",Nt(a[11])),ve(e,"click",a[4])],w=!0)},p(E,p){p[0]&4&&H(t,E[2]),p[0]&8&&H(n,E[3]),E[0]?y?y.p(E,p):(y=Us(E),y.c(),y.m(v,h)):y&&(y.d(1),y=null)},d(E){E&&o(e),y&&y.d(),w=!1,mt(N)}}}function Us(a){let e,l,r="Title:",t,s,i,n,f,v,h="+",m,_,u,d,g="+",b,w,N,y="Description:",E,p,R,C,F,I="Article:",A,S,T,D,j,$="D3FEND Version:",x,ae,ie,V,U="Get Current Version",z,Z,O,M="CAD Schema Version:",be,ye,se,Y,ee="Set current version",X,_e,Te,Se="Published Date:",B,ce,Ve,Me,xe="Insert Current Time",ze,He,yt='<code class="right">Example Date-Time format: 2023-10-05T14:30:00.000Z</code><br/>',Ke,Qe,Ye,gt,At="+",Ot,Qt,_t=Re(a[0].authors),ne=[];for(let te=0;te<_t.length;te+=1)ne[te]=qs(js(a,_t,te));let Ne=Re(a[0].orgs),Pe=[];for(let te=0;te<Ne.length;te+=1)Pe[te]=zs(Fs(a,Ne,te));let we=Re(a[0].references),fe=[];for(let te=0;te<we.length;te+=1)fe[te]=Vs(As(a,we,te));return{c(){e=G("div"),l=G("label"),l.textContent=r,t=le(),s=G("input"),i=le();for(let te=0;te<ne.length;te+=1)ne[te].c();n=le(),f=G("div"),v=G("button"),v.textContent=h,m=le();for(let te=0;te<Pe.length;te+=1)Pe[te].c();_=le(),u=G("div"),d=G("button"),d.textContent=g,b=le(),w=G("div"),N=G("label"),N.textContent=y,E=le(),p=G("input"),R=le(),C=G("div"),F=G("label"),F.textContent=I,A=le(),S=G("textarea"),T=le(),D=G("div"),j=G("label"),j.textContent=$,x=le(),ae=G("input"),ie=le(),V=G("button"),V.textContent=U,z=le(),Z=G("div"),O=G("label"),O.textContent=M,be=le(),ye=G("input"),se=le(),Y=G("button"),Y.textContent=ee,X=le(),_e=G("div"),Te=G("label"),Te.textContent=Se,B=le(),ce=G("input"),Ve=le(),Me=G("button"),Me.textContent=xe,ze=le(),He=G("div"),He.innerHTML=yt,Ke=le();for(let te=0;te<fe.length;te+=1)fe[te].c();Qe=le(),Ye=G("div"),gt=G("button"),gt.textContent=At,this.h()},l(te){e=K(te,"DIV",{class:!0});var ke=pe(e);l=K(ke,"LABEL",{for:!0,"data-svelte-h":!0}),De(l)!=="svelte-kpfkpc"&&(l.textContent=r),t=re(ke),s=K(ke,"INPUT",{id:!0}),ke.forEach(o),i=re(te);for(let Ct=0;Ct<ne.length;Ct+=1)ne[Ct].l(te);n=re(te),f=K(te,"DIV",{class:!0});var Ee=pe(f);v=K(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),De(v)!=="svelte-1uaie2g"&&(v.textContent=h),Ee.forEach(o),m=re(te);for(let Ct=0;Ct<Pe.length;Ct+=1)Pe[Ct].l(te);_=re(te),u=K(te,"DIV",{class:!0});var et=pe(u);d=K(et,"BUTTON",{class:!0,"data-svelte-h":!0}),De(d)!=="svelte-1cs3ez1"&&(d.textContent=g),et.forEach(o),b=re(te),w=K(te,"DIV",{class:!0});var St=pe(w);N=K(St,"LABEL",{for:!0,"data-svelte-h":!0}),De(N)!=="svelte-1jjlhqk"&&(N.textContent=y),E=re(St),p=K(St,"INPUT",{id:!0}),St.forEach(o),R=re(te),C=K(te,"DIV",{class:!0});var wt=pe(C);F=K(wt,"LABEL",{for:!0,"data-svelte-h":!0}),De(F)!=="svelte-pvmkb4"&&(F.textContent=I),A=re(wt),S=K(wt,"TEXTAREA",{id:!0}),pe(S).forEach(o),wt.forEach(o),T=re(te),D=K(te,"DIV",{class:!0});var It=pe(D);j=K(It,"LABEL",{for:!0,"data-svelte-h":!0}),De(j)!=="svelte-kepuyl"&&(j.textContent=$),x=re(It),ae=K(It,"INPUT",{id:!0}),ie=re(It),V=K(It,"BUTTON",{class:!0,"data-svelte-h":!0}),De(V)!=="svelte-1ba12do"&&(V.textContent=U),It.forEach(o),z=re(te),Z=K(te,"DIV",{class:!0});var Gt=pe(Z);O=K(Gt,"LABEL",{for:!0,"data-svelte-h":!0}),De(O)!=="svelte-120m1i5"&&(O.textContent=M),be=re(Gt),ye=K(Gt,"INPUT",{id:!0}),se=re(Gt),Y=K(Gt,"BUTTON",{class:!0,"data-svelte-h":!0}),De(Y)!=="svelte-15xxh2g"&&(Y.textContent=ee),Gt.forEach(o),X=re(te),_e=K(te,"DIV",{class:!0});var Kt=pe(_e);Te=K(Kt,"LABEL",{for:!0,"data-svelte-h":!0}),De(Te)!=="svelte-1wye32r"&&(Te.textContent=Se),B=re(Kt),ce=K(Kt,"INPUT",{id:!0}),Ve=re(Kt),Me=K(Kt,"BUTTON",{class:!0,"data-svelte-h":!0}),De(Me)!=="svelte-tkzxpc"&&(Me.textContent=xe),Kt.forEach(o),ze=re(te),He=K(te,"DIV",{class:!0,"data-svelte-h":!0}),De(He)!=="svelte-108zlq4"&&(He.innerHTML=yt),Ke=re(te);for(let Ct=0;Ct<fe.length;Ct+=1)fe[Ct].l(te);Qe=re(te),Ye=K(te,"DIV",{class:!0});var zt=pe(Ye);gt=K(zt,"BUTTON",{class:!0,"data-svelte-h":!0}),De(gt)!=="svelte-rcymu8"&&(gt.textContent=At),zt.forEach(o),this.h()},h(){W(l,"for","title"),W(s,"id","title"),W(e,"class","form-row"),W(v,"class","svelte-k723th"),W(f,"class","form-row"),W(d,"class","svelte-k723th"),W(u,"class","form-row"),W(N,"for","description"),W(p,"id","description"),W(w,"class","form-row"),W(F,"for","article"),W(S,"id","article"),W(C,"class","form-row"),W(j,"for","d3fend-version"),W(ae,"id","d3fend-version"),W(V,"class","svelte-k723th"),W(D,"class","form-row"),W(O,"for","cad-data-version"),W(ye,"id","cad-data-version"),W(Y,"class","svelte-k723th"),W(Z,"class","form-row"),W(Te,"for","published-date"),W(ce,"id","published-date"),W(Me,"class","svelte-k723th"),W(_e,"class","form-row"),W(He,"class","form-row"),W(gt,"class","svelte-k723th"),W(Ye,"class","form-row")},m(te,ke){c(te,e,ke),L(e,l),L(e,t),L(e,s),rt(s,a[0].title),c(te,i,ke);for(let Ee=0;Ee<ne.length;Ee+=1)ne[Ee]&&ne[Ee].m(te,ke);c(te,n,ke),c(te,f,ke),L(f,v),c(te,m,ke);for(let Ee=0;Ee<Pe.length;Ee+=1)Pe[Ee]&&Pe[Ee].m(te,ke);c(te,_,ke),c(te,u,ke),L(u,d),c(te,b,ke),c(te,w,ke),L(w,N),L(w,E),L(w,p),rt(p,a[0].description),c(te,R,ke),c(te,C,ke),L(C,F),L(C,A),L(C,S),rt(S,a[0].article),c(te,T,ke),c(te,D,ke),L(D,j),L(D,x),L(D,ae),rt(ae,a[0].d3fend_version),L(D,ie),L(D,V),c(te,z,ke),c(te,Z,ke),L(Z,O),L(Z,be),L(Z,ye),rt(ye,a[0].cad_data_version),L(Z,se),L(Z,Y),c(te,X,ke),c(te,_e,ke),L(_e,Te),L(_e,B),L(_e,ce),rt(ce,a[0].published_date),L(_e,Ve),L(_e,Me),c(te,ze,ke),c(te,He,ke),c(te,Ke,ke);for(let Ee=0;Ee<fe.length;Ee+=1)fe[Ee]&&fe[Ee].m(te,ke);c(te,Qe,ke),c(te,Ye,ke),L(Ye,gt),Ot||(Qt=[ve(s,"input",a[12]),ve(v,"click",a[6]),ve(d,"click",a[7]),ve(p,"input",a[15]),ve(S,"input",a[16]),ve(ae,"input",a[17]),ve(V,"click",a[9]),ve(ye,"input",a[18]),ve(Y,"click",a[19]),ve(ce,"input",a[20]),ve(Me,"click",a[21]),ve(gt,"click",a[8])],Ot=!0)},p(te,ke){if(ke[0]&1&&s.value!==te[0].title&&rt(s,te[0].title),ke[0]&1){_t=Re(te[0].authors);let Ee;for(Ee=0;Ee<_t.length;Ee+=1){const et=js(te,_t,Ee);ne[Ee]?ne[Ee].p(et,ke):(ne[Ee]=qs(et),ne[Ee].c(),ne[Ee].m(n.parentNode,n))}for(;Ee<ne.length;Ee+=1)ne[Ee].d(1);ne.length=_t.length}if(ke[0]&1){Ne=Re(te[0].orgs);let Ee;for(Ee=0;Ee<Ne.length;Ee+=1){const et=Fs(te,Ne,Ee);Pe[Ee]?Pe[Ee].p(et,ke):(Pe[Ee]=zs(et),Pe[Ee].c(),Pe[Ee].m(_.parentNode,_))}for(;Ee<Pe.length;Ee+=1)Pe[Ee].d(1);Pe.length=Ne.length}if(ke[0]&1&&p.value!==te[0].description&&rt(p,te[0].description),ke[0]&1&&rt(S,te[0].article),ke[0]&1&&ae.value!==te[0].d3fend_version&&rt(ae,te[0].d3fend_version),ke[0]&1&&ye.value!==te[0].cad_data_version&&rt(ye,te[0].cad_data_version),ke[0]&1&&ce.value!==te[0].published_date&&rt(ce,te[0].published_date),ke[0]&1){we=Re(te[0].references);let Ee;for(Ee=0;Ee<we.length;Ee+=1){const et=As(te,we,Ee);fe[Ee]?fe[Ee].p(et,ke):(fe[Ee]=Vs(et),fe[Ee].c(),fe[Ee].m(Qe.parentNode,Qe))}for(;Ee<fe.length;Ee+=1)fe[Ee].d(1);fe.length=we.length}},d(te){te&&(o(e),o(i),o(n),o(f),o(m),o(_),o(u),o(b),o(w),o(R),o(C),o(T),o(D),o(z),o(Z),o(X),o(_e),o(ze),o(He),o(Ke),o(Qe),o(Ye)),Ge(ne,te),Ge(Pe,te),Ge(fe,te),Ot=!1,mt(Qt)}}}function qs(a){let e,l,r="Authors:",t,s,i,n;function f(){a[13].call(s,a[31],a[27])}return{c(){e=G("div"),l=G("label"),l.textContent=r,t=le(),s=G("input"),this.h()},l(v){e=K(v,"DIV",{class:!0});var h=pe(e);l=K(h,"LABEL",{for:!0,"data-svelte-h":!0}),De(l)!=="svelte-1q1t6ag"&&(l.textContent=r),t=re(h),s=K(h,"INPUT",{id:!0}),h.forEach(o),this.h()},h(){W(l,"for","author-"+a[27]),W(s,"id","author-"+a[27]),W(e,"class","form-row")},m(v,h){c(v,e,h),L(e,l),L(e,t),L(e,s),rt(s,a[30]),i||(n=ve(s,"input",f),i=!0)},p(v,h){a=v,h[0]&1&&s.value!==a[30]&&rt(s,a[30])},d(v){v&&o(e),i=!1,n()}}}function zs(a){let e,l,r="Organization:",t,s,i,n;function f(){a[14].call(s,a[29],a[27])}return{c(){e=G("div"),l=G("label"),l.textContent=r,t=le(),s=G("input"),this.h()},l(v){e=K(v,"DIV",{class:!0});var h=pe(e);l=K(h,"LABEL",{for:!0,"data-svelte-h":!0}),De(l)!=="svelte-1b09fki"&&(l.textContent=r),t=re(h),s=K(h,"INPUT",{id:!0}),h.forEach(o),this.h()},h(){W(l,"for","org-"+a[27]),W(s,"id","org-"+a[27]),W(e,"class","form-row")},m(v,h){c(v,e,h),L(e,l),L(e,t),L(e,s),rt(s,a[28]),i||(n=ve(s,"input",f),i=!0)},p(v,h){a=v,h[0]&1&&s.value!==a[28]&&rt(s,a[28])},d(v){v&&o(e),i=!1,n()}}}function Vs(a){let e,l,r="Reference:",t,s,i,n;function f(){a[22].call(s,a[26],a[27])}return{c(){e=G("div"),l=G("label"),l.textContent=r,t=le(),s=G("input"),this.h()},l(v){e=K(v,"DIV",{class:!0});var h=pe(e);l=K(h,"LABEL",{for:!0,"data-svelte-h":!0}),De(l)!=="svelte-14qxm2v"&&(l.textContent=r),t=re(h),s=K(h,"INPUT",{id:!0}),h.forEach(o),this.h()},h(){W(l,"for","ref-"+a[27]),W(s,"id","ref-"+a[27]),W(e,"class","form-row")},m(v,h){c(v,e,h),L(e,l),L(e,t),L(e,s),rt(s,a[25]),i||(n=ve(s,"input",f),i=!0)},p(v,h){a=v,h[0]&1&&s.value!==a[25]&&rt(s,a[25])},d(v){v&&o(e),i=!1,n()}}}function id(a){let e,l=a[1]&&Ls(a);return{c(){l&&l.c(),e=ge()},l(r){l&&l.l(r),e=ge()},m(r,t){l&&l.m(r,t),c(r,e,t)},p(r,t){r[1]?l?l.p(r,t):(l=Ls(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Ce,o:Ce,d(r){r&&o(e),l&&l.d(r)}}}function nd(a,e,l){let{meta:r}=e,{is_open:t=!1}=e,{title:s="CAD Graph Metadata Editor"}=e,{content:i=""}=e,{options:n=[{label:"Save",value:"save"}]}=e;nl();function f(){l(1,t=!1)}function v(){document.querySelector("form").checkValidity()&&l(1,t=!1)}(r??!1)&&(r=Xs);function h(){r.authors.push(""),l(0,r)}function m(){r.orgs.push(""),l(0,r)}function _(){r.references.push(""),l(0,r)}async function u(){const S=await(await fetch("/api/version.json")).json();l(0,r.d3fend_version=S.version,r)}function d(A){Rt.call(this,a,A)}function g(){r.title=this.value,l(0,r)}function b(A,S){A[S]=this.value,l(0,r)}function w(A,S){A[S]=this.value,l(0,r)}function N(){r.description=this.value,l(0,r)}function y(){r.article=this.value,l(0,r)}function E(){r.d3fend_version=this.value,l(0,r)}function p(){r.cad_data_version=this.value,l(0,r)}const R=()=>l(0,r.cad_data_version=Xi,r);function C(){r.published_date=this.value,l(0,r)}const F=()=>{const S=new Date().toISOString();l(0,r.published_date=S,r)};function I(A,S){A[S]=this.value,l(0,r)}return a.$$set=A=>{"meta"in A&&l(0,r=A.meta),"is_open"in A&&l(1,t=A.is_open),"title"in A&&l(2,s=A.title),"content"in A&&l(3,i=A.content),"options"in A&&l(10,n=A.options)},[r,t,s,i,f,v,h,m,_,u,n,d,g,b,w,N,y,E,p,R,C,F,I]}class od extends st{constructor(e){super(),it(this,e,nd,id,at,{meta:0,is_open:1,title:2,content:3,options:10},null,[-1,-1])}}function Bs(a,e,l){const r=a.slice();return r[66]=e[l],r[68]=l,r}function Ms(a){let e=a[66].message+"",l,r;return{c(){l=k(e),r=G("br")},l(t){l=P(t,e),r=K(t,"BR",{})},m(t,s){c(t,l,s),c(t,r,s)},p(t,s){s[0]&8&&e!==(e=t[66].message+"")&&H(l,e)},d(t){t&&(o(l),o(r))}}}function fd(a){let e,l="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",r,t,s,i,n,f,v,h,m,_=Re(a[3]),u=[];for(let d=0;d<_.length;d+=1)u[d]=Ms(Bs(a,_,d));return{c(){e=G("div"),e.innerHTML=l,r=le(),t=G("br"),s=le(),i=G("br"),n=le();for(let d=0;d<u.length;d+=1)u[d].c();f=le(),v=G("br"),h=le(),m=G("br")},l(d){e=K(d,"DIV",{"data-svelte-h":!0}),De(e)!=="svelte-7el432"&&(e.innerHTML=l),r=re(d),t=K(d,"BR",{}),s=re(d),i=K(d,"BR",{}),n=re(d);for(let g=0;g<u.length;g+=1)u[g].l(d);f=re(d),v=K(d,"BR",{}),h=re(d),m=K(d,"BR",{})},m(d,g){c(d,e,g),c(d,r,g),c(d,t,g),c(d,s,g),c(d,i,g),c(d,n,g);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(d,g);c(d,f,g),c(d,v,g),c(d,h,g),c(d,m,g)},p(d,g){if(g[0]&8){_=Re(d[3]);let b;for(b=0;b<_.length;b+=1){const w=Bs(d,_,b);u[b]?u[b].p(w,g):(u[b]=Ms(w),u[b].c(),u[b].m(f.parentNode,f))}for(;b<u.length;b+=1)u[b].d(1);u.length=_.length}},d(d){d&&(o(e),o(r),o(t),o(s),o(i),o(n),o(f),o(v),o(h),o(m)),Ge(u,d)}}}function ud(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(l){e=P(l,"Please only load models from URLs you trust!")},m(l,r){c(l,e,r)},d(l){l&&o(e)}}}function cd(a){let e,l,r,t,s,i,n,f,v,h,m;return h=new Kl({props:{$$slots:{default:[ud]},$$scope:{ctx:a}}}),{c(){e=G("br"),l=le(),r=G("code"),t=k(a[2]),s=le(),i=G("br"),n=le(),f=G("br"),v=le(),Ae(h.$$.fragment),this.h()},l(_){e=K(_,"BR",{}),l=re(_),r=K(_,"CODE",{class:!0});var u=pe(r);t=P(u,a[2]),u.forEach(o),s=re(_),i=K(_,"BR",{}),n=re(_),f=K(_,"BR",{}),v=re(_),Fe(h.$$.fragment,_),this.h()},h(){W(r,"class","center text-center")},m(_,u){c(_,e,u),c(_,l,u),c(_,r,u),L(r,t),c(_,s,u),c(_,i,u),c(_,n,u),c(_,f,u),c(_,v,u),je(h,_,u),m=!0},p(_,u){(!m||u[0]&4)&&H(t,_[2]);const d={};u[2]&128&&(d.$$scope={dirty:u,ctx:_}),h.$set(d)},i(_){m||(he(h.$$.fragment,_),m=!0)},o(_){me(h.$$.fragment,_),m=!1},d(_){_&&(o(e),o(l),o(r),o(s),o(i),o(n),o(f),o(v)),Le(h,_)}}}function dd(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(l){e=P(l,"Please only load models from URLs you trust!")},m(l,r){c(l,e,r)},d(l){l&&o(e)}}}function _d(a){let e,l,r,t,s,i;return s=new Kl({props:{$$slots:{default:[dd]},$$scope:{ctx:a}}}),{c(){e=G("br"),l=le(),r=G("br"),t=le(),Ae(s.$$.fragment)},l(n){e=K(n,"BR",{}),l=re(n),r=K(n,"BR",{}),t=re(n),Fe(s.$$.fragment,n)},m(n,f){c(n,e,f),c(n,l,f),c(n,r,f),c(n,t,f),je(s,n,f),i=!0},p(n,f){const v={};f[2]&128&&(v.$$scope={dirty:f,ctx:n}),s.$set(v)},i(n){i||(he(s.$$.fragment,n),i=!0)},o(n){me(s.$$.fragment,n),i=!1},d(n){n&&(o(e),o(l),o(r),o(t)),Le(s,n)}}}function Hs(a){let e,l,r,t;return e=new Kl({props:{alert_type:"warning",$$slots:{default:[hd]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment),l=le(),r=G("br")},l(s){Fe(e.$$.fragment,s),l=re(s),r=K(s,"BR",{})},m(s,i){je(e,s,i),c(s,l,i),c(s,r,i),t=!0},i(s){t||(he(e.$$.fragment,s),t=!0)},o(s){me(e.$$.fragment,s),t=!1},d(s){s&&(o(l),o(r)),Le(e,s)}}}function hd(a){let e;return{c(){e=k("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(l){e=P(l,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(l,r){c(l,e,r)},d(l){l&&o(e)}}}function vd(a){let e,l,r,t,s=a[14].length+"",i,n,f,v,h,m,_,u,d,g,b="copy",w,N,y,E=a[14].length>2048&&Hs(a);return{c(){E&&E.c(),e=le(),l=G("div"),r=G("code"),t=k("The encoded model has a string length of "),i=k(s),n=k(" characters."),f=le(),v=G("p"),h=G("button"),m=G("a"),_=k("Share URL"),u=le(),d=G("span"),g=G("button"),g.textContent=b,this.h()},l(p){E&&E.l(p),e=re(p),l=K(p,"DIV",{});var R=pe(l);r=K(R,"CODE",{});var C=pe(r);t=P(C,"The encoded model has a string length of "),i=P(C,s),n=P(C," characters."),C.forEach(o),R.forEach(o),f=re(p),v=K(p,"P",{});var F=pe(v);h=K(F,"BUTTON",{class:!0});var I=pe(h);m=K(I,"A",{href:!0});var A=pe(m);_=P(A,"Share URL"),A.forEach(o),I.forEach(o),u=re(F),d=K(F,"SPAN",{});var S=pe(d);g=K(S,"BUTTON",{class:!0,"data-svelte-h":!0}),De(g)!=="svelte-1uua65l"&&(g.textContent=b),S.forEach(o),F.forEach(o),this.h()},h(){W(m,"href",a[15]),W(h,"class","svelte-yu4ejz"),W(g,"class","svelte-yu4ejz")},m(p,R){E&&E.m(p,R),c(p,e,R),c(p,l,R),L(l,r),L(r,t),L(r,i),L(r,n),c(p,f,R),c(p,v,R),L(v,h),L(h,m),L(m,_),L(v,u),L(v,d),L(d,g),w=!0,N||(y=ve(g,"click",a[41]),N=!0)},p(p,R){p[14].length>2048?E?R[0]&16384&&he(E,1):(E=Hs(p),E.c(),he(E,1),E.m(e.parentNode,e)):E&&(kt(),me(E,1,1,()=>{E=null}),Pt()),(!w||R[0]&16384)&&s!==(s=p[14].length+"")&&H(i,s),(!w||R[0]&32768)&&W(m,"href",p[15])},i(p){w||(he(E),w=!0)},o(p){me(E),w=!1},d(p){p&&(o(e),o(l),o(f),o(v)),E&&E.d(p),N=!1,y()}}}function $s(a){let e,l,r;return{c(){e=G("div"),l=G("div"),r=k(a[18]),this.h()},l(t){e=K(t,"DIV",{class:!0});var s=pe(e);l=K(s,"DIV",{class:!0});var i=pe(l);r=P(i,a[18]),i.forEach(o),s.forEach(o),this.h()},h(){W(l,"class","notification-blink svelte-yu4ejz"),W(e,"class","notification svelte-yu4ejz")},m(t,s){c(t,e,s),L(e,l),L(l,r)},p(t,s){s[0]&262144&&H(r,t[18])},d(t){t&&o(e)}}}function Qs(a){let e,l,r,t,s,i=a[4]>1&&Gs();return{c(){e=G("button"),l=k(a[4]),r=k(" import alert"),i&&i.c(),this.h()},l(n){e=K(n,"BUTTON",{class:!0});var f=pe(e);l=P(f,a[4]),r=P(f," import alert"),i&&i.l(f),f.forEach(o),this.h()},h(){W(e,"class","svelte-yu4ejz")},m(n,f){c(n,e,f),L(e,l),L(e,r),i&&i.m(e,null),t||(s=ve(e,"click",a[24]),t=!0)},p(n,f){f[0]&16&&H(l,n[4]),n[4]>1?i||(i=Gs(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(n){n&&o(e),i&&i.d(),t=!1,s()}}}function Gs(a){let e;return{c(){e=k("s")},l(l){e=P(l,"s")},m(l,r){c(l,e,r)},d(l){l&&o(e)}}}function Ks(a){let e,l;return e=new Lc({props:{onClick:a[33],id:a[8].id,top:a[8].top,left:a[8].left,right:a[8].right,bottom:a[8].bottom}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,t){const s={};t[0]&256&&(s.id=r[8].id),t[0]&256&&(s.top=r[8].top),t[0]&256&&(s.left=r[8].left),t[0]&256&&(s.right=r[8].right),t[0]&256&&(s.bottom=r[8].bottom),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function md(a){let e,l,r,t,s,i,n;e=new En({props:{position:"top-left"}}),r=new dn({props:{variant:_n.Dots}});let f=a[8]&&Ks(a);return i=new hn({props:{position:"top-right"}}),{c(){Ae(e.$$.fragment),l=le(),Ae(r.$$.fragment),t=le(),f&&f.c(),s=le(),Ae(i.$$.fragment)},l(v){Fe(e.$$.fragment,v),l=re(v),Fe(r.$$.fragment,v),t=re(v),f&&f.l(v),s=re(v),Fe(i.$$.fragment,v)},m(v,h){je(e,v,h),c(v,l,h),je(r,v,h),c(v,t,h),f&&f.m(v,h),c(v,s,h),je(i,v,h),n=!0},p(v,h){v[8]?f?(f.p(v,h),h[0]&256&&he(f,1)):(f=Ks(v),f.c(),he(f,1),f.m(s.parentNode,s)):f&&(kt(),me(f,1,1,()=>{f=null}),Pt())},i(v){n||(he(e.$$.fragment,v),he(r.$$.fragment,v),he(f),he(i.$$.fragment,v),n=!0)},o(v){me(e.$$.fragment,v),me(r.$$.fragment,v),me(f),me(i.$$.fragment,v),n=!1},d(v){v&&(o(l),o(t),o(s)),Le(e,v),Le(r,v),f&&f.d(v),Le(i,v)}}}function pd(a){let e,l;return e=new ld({props:{slot:"connectionLine"}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p:Ce,i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function gd(a){let e,l,r,t,s,i;return l=new Yc({}),t=new cn({props:{nodes:ml,nodeTypes:ji,edges:Ul,edgeTypes:Li,fitView:!0,defaultEdgeOptions:a[21],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[pd],default:[md]},$$scope:{ctx:a}}}),t.$on("dragover",a[27]),t.$on("drop",a[29]),t.$on("connect",a[28]),t.$on("nodecontextmenu",a[32]),t.$on("paneclick",a[33]),t.$on("onedgecreate",Pd),{c(){e=G("div"),Ae(l.$$.fragment),r=le(),Ae(t.$$.fragment),this.h()},l(n){e=K(n,"DIV",{slot:!0,id:!0,class:!0});var f=pe(e);Fe(l.$$.fragment,f),r=re(f),Fe(t.$$.fragment,f),f.forEach(o),this.h()},h(){W(e,"slot","flow"),W(e,"id","slotted-flow"),W(e,"class","svelte-yu4ejz"),Js(()=>a[47].call(e))},m(n,f){c(n,e,f),je(l,e,null),L(e,r),je(t,e,null),s=Ki(e,a[47].bind(e)),i=!0},p(n,f){const v={};f[0]&256|f[2]&128&&(v.$$scope={dirty:f,ctx:n}),t.$set(v)},i(n){i||(he(l.$$.fragment,n),he(t.$$.fragment,n),i=!0)},o(n){me(l.$$.fragment,n),me(t.$$.fragment,n),i=!1},d(n){n&&o(e),Le(l),Le(t),s()}}}function bd(a){let e,l,r;return l=new Ui({}),{c(){e=G("div"),Ae(l.$$.fragment),this.h()},l(t){e=K(t,"DIV",{slot:!0,class:!0});var s=pe(e);Fe(l.$$.fragment,s),s.forEach(o),this.h()},h(){W(e,"slot","drawer"),W(e,"class","side-panel close svelte-yu4ejz")},m(t,s){c(t,e,s),je(l,e,null),r=!0},p:Ce,i(t){r||(he(l.$$.fragment,t),r=!0)},o(t){me(l.$$.fragment,t),r=!1},d(t){t&&o(e),Le(l)}}}function Ed(a){let e,l,r,t,s,i,n,f,v,h,m,_,u,d,g,b='<a href="/cad/docs/">Documentation</a>',w,N,y,E,p,R="Load",C,F,I="Merge",A,S,T="Clear",D,j,$="Save",x,ae,ie,V="Save As...",U,z="Save As JSON...",Z,O="Save As Turtle...",M,be="Save As D3FEND Extension...",ye,se,Y="Share",ee,X,_e,Te,Se,B,ce,Ve,Me,xe="Graph Metadata",ze,He,yt,Ke,Qe;function Ye(fe){a[39](fe)}let gt={title:a[0].title,content:a[0].content,options:a[0].options,$$slots:{default:[cd]},$$scope:{ctx:a}};a[0].is_open!==void 0&&(gt.is_open=a[0].is_open),e=new Ps({props:gt}),Je.push(()=>Et(e,"is_open",Ye)),e.$on("optionSelected",a[19]);function At(fe){a[40](fe)}let Ot={title:a[1].title,content:a[1].content,options:a[1].options,$$slots:{default:[_d]},$$scope:{ctx:a}};a[1].is_open!==void 0&&(Ot.is_open=a[1].is_open),t=new Ps({props:Ot}),Je.push(()=>Et(t,"is_open",At)),t.$on("optionSelected",a[20]);function Qt(fe){a[42](fe)}let _t={title:"Share this model with a URL",$$slots:{default:[vd]},$$scope:{ctx:a}};a[13]!==void 0&&(_t.is_open=a[13]),n=new Bc({props:_t}),Je.push(()=>Et(n,"is_open",Qt));let ne=a[18]&&$s(a);function Ne(fe){a[43](fe)}let Pe={};a[7]!==void 0&&(Pe.selectedFile=a[7]),_=new xc({props:Pe}),Je.push(()=>Et(_,"selectedFile",Ne)),_.$on("fileSelected",a[30]);let we=a[4]&&Qs(a);return He=new Fi({props:{$$slots:{drawer:[bd],flow:[gd]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment),r=le(),Ae(t.$$.fragment),i=le(),Ae(n.$$.fragment),v=le(),ne&&ne.c(),h=le(),m=G("div"),Ae(_.$$.fragment),d=le(),g=G("button"),g.innerHTML=b,w=le(),N=G("br"),y=le(),E=G("div"),p=G("button"),p.textContent=R,C=le(),F=G("button"),F.textContent=I,A=le(),S=G("button"),S.textContent=T,D=le(),j=G("button"),j.textContent=$,x=le(),ae=G("select"),ie=G("option"),ie.textContent=V,U=G("option"),U.textContent=z,Z=G("option"),Z.textContent=O,M=G("option"),M.textContent=be,ye=le(),se=G("button"),se.textContent=Y,ee=le(),X=G("button"),_e=k("CAD Embed"),Se=k(`
        filename:    `),B=G("input"),ce=le(),we&&we.c(),Ve=le(),Me=G("button"),Me.textContent=xe,ze=le(),Ae(He.$$.fragment),this.h()},l(fe){Fe(e.$$.fragment,fe),r=re(fe),Fe(t.$$.fragment,fe),i=re(fe),Fe(n.$$.fragment,fe),v=re(fe),ne&&ne.l(fe),h=re(fe),m=K(fe,"DIV",{class:!0});var te=pe(m);Fe(_.$$.fragment,te),d=re(te),g=K(te,"BUTTON",{class:!0,"data-svelte-h":!0}),De(g)!=="svelte-1n3fblv"&&(g.innerHTML=b),te.forEach(o),w=re(fe),N=K(fe,"BR",{}),y=re(fe),E=K(fe,"DIV",{id:!0,class:!0});var ke=pe(E);p=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(p)!=="svelte-r4end6"&&(p.textContent=R),C=re(ke),F=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(F)!=="svelte-1s1l97g"&&(F.textContent=I),A=re(ke),S=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(S)!=="svelte-1o4uly3"&&(S.textContent=T),D=re(ke),j=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(j)!=="svelte-qm8vdx"&&(j.textContent=$),x=re(ke),ae=K(ke,"SELECT",{class:!0});var Ee=pe(ae);ie=K(Ee,"OPTION",{"data-svelte-h":!0}),De(ie)!=="svelte-hmrlsb"&&(ie.textContent=V),U=K(Ee,"OPTION",{"data-svelte-h":!0}),De(U)!=="svelte-1q30tr1"&&(U.textContent=z),Z=K(Ee,"OPTION",{"data-svelte-h":!0}),De(Z)!=="svelte-pf55hp"&&(Z.textContent=O),M=K(Ee,"OPTION",{"data-svelte-h":!0}),De(M)!=="svelte-43fn33"&&(M.textContent=be),Ee.forEach(o),ye=re(ke),se=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(se)!=="svelte-mqt2ui"&&(se.textContent=Y),ee=re(ke),X=K(ke,"BUTTON",{class:!0});var et=pe(X);_e=P(et,"CAD Embed"),et.forEach(o),Se=P(ke,`
        filename:    `),B=K(ke,"INPUT",{style:!0,type:!0}),ce=re(ke),we&&we.l(ke),Ve=re(ke),Me=K(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),De(Me)!=="svelte-d0yv6c"&&(Me.textContent=xe),ke.forEach(o),ze=re(fe),Fe(He.$$.fragment,fe),this.h()},h(){W(g,"class","svelte-yu4ejz"),W(m,"class","toolbar-examples flex"),W(p,"class","svelte-yu4ejz"),W(F,"class","svelte-yu4ejz"),W(S,"class","svelte-yu4ejz"),W(j,"class","svelte-yu4ejz"),ie.__value="",rt(ie,ie.__value),U.__value="json",rt(U,U.__value),Z.__value="turtle",rt(Z,Z.__value),M.__value="extension",rt(M,M.__value),W(ae,"class","save-as-dropdown svelte-yu4ejz"),a[6]===void 0&&Js(()=>a[44].call(ae)),W(se,"class"," svelte-yu4ejz"),W(X,"class"," svelte-yu4ejz"),X.disabled=Te=!a[16].length,nt(B,"width","275px"),W(B,"type","text"),W(Me,"class","right svelte-yu4ejz"),W(E,"id","toolbar"),W(E,"class","svelte-yu4ejz")},m(fe,te){je(e,fe,te),c(fe,r,te),je(t,fe,te),c(fe,i,te),je(n,fe,te),c(fe,v,te),ne&&ne.m(fe,te),c(fe,h,te),c(fe,m,te),je(_,m,null),L(m,d),L(m,g),c(fe,w,te),c(fe,N,te),c(fe,y,te),c(fe,E,te),L(E,p),L(E,C),L(E,F),L(E,A),L(E,S),L(E,D),L(E,j),L(E,x),L(E,ae),L(ae,ie),L(ae,U),L(ae,Z),L(ae,M),pr(ae,a[6],!0),L(E,ye),L(E,se),L(E,ee),L(E,X),L(X,_e),L(E,Se),L(E,B),rt(B,a[5]),L(E,ce),we&&we.m(E,null),L(E,Ve),L(E,Me),c(fe,ze,te),je(He,fe,te),yt=!0,Ke||(Qe=[ve(p,"click",a[25]),ve(F,"click",a[26]),ve(S,"click",a[31]),ve(j,"click",a[22]),ve(ae,"change",a[44]),ve(ae,"change",a[23]),ve(se,"click",a[34]),ve(X,"click",a[35]),ve(B,"input",a[45]),ve(Me,"click",a[46])],Ke=!0)},p(fe,te){const ke={};te[0]&1&&(ke.title=fe[0].title),te[0]&1&&(ke.content=fe[0].content),te[0]&1&&(ke.options=fe[0].options),te[0]&4|te[2]&128&&(ke.$$scope={dirty:te,ctx:fe}),!l&&te[0]&1&&(l=!0,ke.is_open=fe[0].is_open,bt(()=>l=!1)),e.$set(ke);const Ee={};te[0]&2&&(Ee.title=fe[1].title),te[0]&2&&(Ee.content=fe[1].content),te[0]&2&&(Ee.options=fe[1].options),te[2]&128&&(Ee.$$scope={dirty:te,ctx:fe}),!s&&te[0]&2&&(s=!0,Ee.is_open=fe[1].is_open,bt(()=>s=!1)),t.$set(Ee);const et={};te[0]&49152|te[2]&128&&(et.$$scope={dirty:te,ctx:fe}),!f&&te[0]&8192&&(f=!0,et.is_open=fe[13],bt(()=>f=!1)),n.$set(et),fe[18]?ne?ne.p(fe,te):(ne=$s(fe),ne.c(),ne.m(h.parentNode,h)):ne&&(ne.d(1),ne=null);const St={};!u&&te[0]&128&&(u=!0,St.selectedFile=fe[7],bt(()=>u=!1)),_.$set(St),te[0]&64&&pr(ae,fe[6]),(!yt||te[0]&65536&&Te!==(Te=!fe[16].length))&&(X.disabled=Te),te[0]&32&&B.value!==fe[5]&&rt(B,fe[5]),fe[4]?we?we.p(fe,te):(we=Qs(fe),we.c(),we.m(E,Ve)):we&&(we.d(1),we=null);const wt={};te[0]&1792|te[2]&128&&(wt.$$scope={dirty:te,ctx:fe}),He.$set(wt)},i(fe){yt||(he(e.$$.fragment,fe),he(t.$$.fragment,fe),he(n.$$.fragment,fe),he(_.$$.fragment,fe),he(He.$$.fragment,fe),yt=!0)},o(fe){me(e.$$.fragment,fe),me(t.$$.fragment,fe),me(n.$$.fragment,fe),me(_.$$.fragment,fe),me(He.$$.fragment,fe),yt=!1},d(fe){fe&&(o(r),o(i),o(v),o(h),o(m),o(w),o(N),o(y),o(E),o(ze)),Le(e,fe),Le(t,fe),Le(n,fe),ne&&ne.d(fe),Le(_),we&&we.d(),Le(He,fe),Ke=!1,mt(Qe)}}}function kd(a){let e,l,r,t='<div style="display: flex; just-content: space-between; align-items: center;"><div style="text-align: center; flex-grow: 1;"><h1 class="fancy-font svelte-yu4ejz" title="Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios">D3FEND <span class="snakes svelte-yu4ejz">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-yu4ejz" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span></h1></div></div>',s,i,n,f,v,h,m,_,u,d;e=new bn({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}});function g(E){a[36](E)}let b={title:a[4]+" import alerts",$$slots:{default:[fd]},$$scope:{ctx:a}};a[12]!==void 0&&(b.is_open=a[12]),i=new sd({props:b}),Je.push(()=>Et(i,"is_open",g));function w(E){a[37](E)}function N(E){a[38](E)}let y={};return a[11]!==void 0&&(y.is_open=a[11]),a[17]!==void 0&&(y.meta=a[17]),v=new od({props:y}),Je.push(()=>Et(v,"is_open",w)),Je.push(()=>Et(v,"meta",N)),u=new Gc({props:{position:"right",$$slots:{default:[Ed]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment),l=le(),r=G("div"),r.innerHTML=t,s=le(),Ae(i.$$.fragment),f=le(),Ae(v.$$.fragment),_=le(),Ae(u.$$.fragment),this.h()},l(E){Fe(e.$$.fragment,E),l=re(E),r=K(E,"DIV",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-x08zgs"&&(r.innerHTML=t),s=re(E),Fe(i.$$.fragment,E),f=re(E),Fe(v.$$.fragment,E),_=re(E),Fe(u.$$.fragment,E),this.h()},h(){W(r,"class","title-egg svelte-yu4ejz")},m(E,p){je(e,E,p),c(E,l,p),c(E,r,p),c(E,s,p),je(i,E,p),c(E,f,p),je(v,E,p),c(E,_,p),je(u,E,p),d=!0},p(E,p){const R={};p[0]&16&&(R.title=E[4]+" import alerts"),p[0]&8|p[2]&128&&(R.$$scope={dirty:p,ctx:E}),!n&&p[0]&4096&&(n=!0,R.is_open=E[12],bt(()=>n=!1)),i.$set(R);const C={};!h&&p[0]&2048&&(h=!0,C.is_open=E[11],bt(()=>h=!1)),!m&&p[0]&131072&&(m=!0,C.meta=E[17],bt(()=>m=!1)),v.$set(C);const F={};p[0]&389111|p[2]&128&&(F.$$scope={dirty:p,ctx:E}),u.$set(F)},i(E){d||(he(e.$$.fragment,E),he(i.$$.fragment,E),he(v.$$.fragment,E),he(u.$$.fragment,E),d=!0)},o(E){me(e.$$.fragment,E),me(i.$$.fragment,E),me(v.$$.fragment,E),me(u.$$.fragment,E),d=!1},d(E){E&&(o(l),o(r),o(s),o(f),o(_)),Le(e,E),Le(i,E),Le(v,E),Le(u,E)}}}function Pd(a){console.log(a),console.log(a)}function wd(a,e,l){let r,t,s,i,n;Ze(a,Zi,ne=>l(49,r=ne)),Ze(a,Ul,ne=>l(50,t=ne)),Ze(a,ml,ne=>l(16,s=ne)),Ze(a,il,ne=>l(17,i=ne)),Ze(a,Dt,ne=>l(18,n=ne));var f=this&&this.__awaiter||function(ne,Ne,Pe,we){function fe(te){return te instanceof Pe?te:new Pe(function(ke){ke(te)})}return new(Pe||(Pe=Promise))(function(te,ke){function Ee(wt){try{St(we.next(wt))}catch(It){ke(It)}}function et(wt){try{St(we.throw(wt))}catch(It){ke(It)}}function St(wt){wt.done?te(wt.value):fe(wt.value).then(Ee,et)}St((we=we.apply(ne,Ne||[])).next())})};const v=new Jf({useDefaults:!0,allErrors:!0});let h={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},m={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},_;r.url.searchParams.get("load")&&(_=r.url.searchParams.get("load"),h.is_open=!0),r.url.searchParams.get("loadg")&&(m.is_open=!0);function u(ne){const Ne=ne.detail;Ne.value==="load"?(Dt.add("loading remote URL"),x(_),Dt.clear()):Ne.value}function d(ne){const Ne=ne.detail;if(Ne.value==="load"){Dt.add("loading graph from URL");const Pe=r.url.searchParams.get("loadg"),we=wr.uncrush(Pe);let fe=JSON.parse(we);I(fe),Dt.clear()}else Ne.value}Gl(()=>f(void 0,void 0,void 0,function*(){Dt.add("Mounting app...");try{yield vn.initialize(),Dt.clear()}catch(ne){console.error("Failed to initialize Oxigraph in +layout.svelte",ne),ne.message}}));let g={type:"editableEdge",data:{label:void 0},markerEnd:{type:un.ArrowClosed}},b,w,N="d3fend-cad.json",y="";function E(){const ne=JSON.stringify({meta:i,nodes:s,edges:t},null,4),Ne=new Blob([ne],{type:"application/json"}),Pe=window.URL.createObjectURL(Ne),we=document.createElement("a");we.href=Pe,we.download=N,l(4,w=0),document.body.appendChild(we),we.click(),document.body.removeChild(we),window.URL.revokeObjectURL(Pe)}function p(){console.log("Saving As D3FEND Ontology Extension..."),Dt.add("Generating D3FEND Ontology Extension in Turtle file");let ne=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","my-extension");const Ne="d3fend-cad-ext-"+ne+".ttl";gn(ne).then(Pe=>{Dt.clear();const we=new Blob([Pe],{type:"text/turtle"}),fe=window.URL.createObjectURL(we),te=document.createElement("a");te.href=fe,Ne&&(te.download=Ne,document.body.appendChild(te),te.click(),document.body.removeChild(te)),window.URL.revokeObjectURL(fe)}).catch(Pe=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",Pe)})}function R(){y==="json"?F():y==="turtle"?C():y==="extension"&&p(),l(6,y="")}function C(){Dt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),pn().then(ne=>{Dt.clear();const Ne=new Blob([ne],{type:"text/turtle"}),Pe=window.URL.createObjectURL(Ne),we=document.createElement("a");we.href=Pe;let fe=prompt("Enter filename to save as Turtle file",N.replace("json","ttl"));l(4,w=0),fe&&(we.download=fe,document.body.appendChild(we),we.click(),document.body.removeChild(we)),window.URL.revokeObjectURL(Pe)}).catch(ne=>{console.error("Error serializing graph to Turtle: ",ne)})}function F(){const ne=JSON.stringify({meta:i,nodes:s,edges:t},null,4),Ne=new Blob([ne],{type:"application/json"}),Pe=window.URL.createObjectURL(Ne),we=document.createElement("a");we.href=Pe;let fe=prompt("Enter filename to save as JSON file",N);l(4,w=0),l(5,N=fe),fe&&(we.download=fe,document.body.appendChild(we),we.click(),document.body.removeChild(we)),window.URL.revokeObjectURL(Pe)}function I(ne){try{const Ne=v.compile(Tl),Pe=Ne(ne);l(3,b=Ne.errors),Pe?l(4,w=0):ne=A(Ne.errors,ne);const we=ne.nodes,fe=ne.edges;ne.meta&&ll(il,i=ne.meta,i),Dt.add("loading graph from data..."),Al(we,fe),D(),window.addEventListener("beforeunload",te=>{console.log("User is leaving the page"),te.preventDefault(),te.returnValue=""}),Dt.clear()}catch(Ne){console.error("Error parsing JSON:",Ne)}}function A(ne,Ne){l(4,w=ne.length);for(const Pe of ne){if(Pe.params.missingProperty=="user_properties"){let we=Pe.dataPath.replace(/\D/g,"");we=parseInt(we),Ne.nodes[we].data.user_properties=[]}Pe.params.missingProperty=="meta"&&(Ne.meta=Object.assign(Object.assign({},Xs),Ne.meta))}return Ne}function S(){l(12,Te=!0)}const{screenToFlowPosition:T,fitView:D}=Pn();function j(ne){const Ne=ne.target.files[0];if(Ne){const Pe=new FileReader;Pe.onload=we=>{if(typeof we.target.result=="string"){l(5,N=Ne.name);try{let fe=JSON.parse(we.target.result);const te=v.compile(Tl),ke=te(fe);l(3,b=te.errors),ke?l(4,w=0):fe=A(te.errors,fe),fe.meta&&ll(il,i=fe.meta,i);const Ee=fe.nodes,et=fe.edges;Al(Ee,et),D(),window.addEventListener("beforeunload",St=>{console.log("User is leaving the page"),St.preventDefault(),St.returnValue=""})}catch(fe){console.error("Error parsing JSON:",fe)}}else console.error("File content is not a string.")},Pe.onerror=()=>{console.error("Error reading file:",Pe.error)},Pe.readAsText(Ne)}}function $(ne){const Ne=ne.target.files[0];if(Ne){const Pe=new FileReader;Pe.onload=we=>{if(typeof we.target.result=="string"){console.log(we.target.result);try{const fe=JSON.parse(we.target.result);ml.set([...s,...fe.nodes]),Ul.set([...t,...fe.edges]),alert(` added ${fe.nodes.length} nodes and ${fe.edges.length} edges to the current graph `)}catch(fe){console.error("Error parsing JSON:",fe),alert(`Error parsing JSON:", ${fe}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},Pe.onerror=()=>{console.error("Error reading file:",Pe.error),alert(`Error reading file: ${Pe.error}`)},Pe.readAsText(Ne)}}function x(ne){return f(this,void 0,void 0,function*(){if(ne)try{let Pe=yield(yield fetch(ne)).json();const we=v.compile(Tl),fe=we(Pe);l(3,b=we.errors),fe?l(4,w=0):Pe=A(we.errors,Pe),Pe.meta&&ll(il,i=Pe.meta,i);const te=Pe.nodes,ke=Pe.edges;Al(te,ke),D()}catch(Ne){console.error("Error parsing JSON:",Ne)}})}function ae(){const ne=document.createElement("input");ne.type="file",ne.accept=".json",ne.onchange=Ne=>{j(Ne)},ne.click()}function ie(){const ne=document.createElement("input");ne.type="file",ne.accept=".json",ne.onchange=Ne=>{$(Ne)},ne.click()}const V=ne=>{ne.preventDefault(),ne.dataTransfer&&(ne.dataTransfer.dropEffect="move")},U=ne=>console.log("handle onConnect",ne),z=ne=>{if(ne.preventDefault(),!ne.dataTransfer)return null;const Ne=ne.dataTransfer.getData("application/svelteflow"),Pe=T({x:ne.clientX,y:ne.clientY}),we={id:`${Math.random()}`,type:Ne,position:Pe,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(we),ml.set(s)};function Z(ne){return f(this,void 0,void 0,function*(){const Ne=ne.detail;l(5,N=Ne);try{const Pe=yield fetch(`/resources/cad/examples/${Ne}`);if(!Pe.ok)throw new Error(`HTTP error! status: ${Pe.status}`);const we=yield Pe.json();I(we)}catch(Pe){console.error("Error fetching JSON file:",Pe)}})}let O;function M(){mn(),l(4,w=0),l(7,O="Example Graphs"),l(5,N="d3fend-cad.json")}let be,ye,se;function Y({detail:{event:ne,node:Ne}}){ne.preventDefault();let Pe=50;console.log({Y:ne.clientY,X:ne.clientX,height:se,width:ye}),l(8,be={id:Ne.id,top:ne.clientY<se-Pe?ne.clientY:void 0,left:ne.clientX<ye-Pe?ne.clientX:void 0,right:ne.clientX>=ye-Pe?ye-ne.clientX:void 0,bottom:ne.clientY>=se-Pe?se-ne.clientY:void 0}),X({detail:{event:ne,node:Ne}})}function ee(){l(8,be=null),Pr.set(null)}function X({detail:{event:ne,node:Ne}}){Pr.set(Ne)}let _e=!1,Te=!1,Se=!1,B,ce;function Ve(){Dt.add("compressing graph to string..."),l(13,Se=!0);const ne=wr.crush(JSON.stringify({nodes:s,edges:t}));l(14,B=encodeURIComponent(ne)),l(15,ce=r.url.origin+`/cad/?loadg=${B}`),Dt.clear()}function Me(){Wi("/cad-view/")}function xe(ne){Te=ne,l(12,Te)}function ze(ne){_e=ne,l(11,_e)}function He(ne){i=ne,il.set(i)}function yt(ne){a.$$.not_equal(h.is_open,ne)&&(h.is_open=ne,l(0,h))}function Ke(ne){a.$$.not_equal(m.is_open,ne)&&(m.is_open=ne,l(1,m))}const Qe=()=>en(ce);function Ye(ne){Se=ne,l(13,Se)}function gt(ne){O=ne,l(7,O)}function At(){y=Gi(this),l(6,y)}function Ot(){N=this.value,l(5,N)}const Qt=()=>l(11,_e=!_e);function _t(){ye=this.clientWidth,se=this.clientHeight,l(9,ye),l(10,se)}return[h,m,_,b,w,N,y,O,be,ye,se,_e,Te,Se,B,ce,s,i,n,u,d,g,E,R,S,ae,ie,V,U,z,Z,M,Y,ee,Ve,Me,xe,ze,He,yt,Ke,Qe,Ye,gt,At,Ot,Qt,_t]}class yd extends st{constructor(e){super(),it(this,e,wd,kd,at,{},null,[-1,-1,-1])}}function Sd(a){let e,l;return e=new yd({}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Dd(a){let e,l;return e=new qi({props:{$$slots:{default:[Sd]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(r){Fe(e.$$.fragment,r)},m(r,t){je(e,r,t),l=!0},p(r,[t]){const s={};t&2&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){l||(he(e.$$.fragment,r),l=!0)},o(r){me(e.$$.fragment,r),l=!1},d(r){Le(e,r)}}}function Cd(a,e,l){let{data:r}=e;return a.$$set=t=>{"data"in t&&l(0,r=t.data)},a.$$.update=()=>{a.$$.dirty&1&&(zi.set(r.remote_d3fend_tree),Vi.set(r.attack),Bi.set(r.dao),Mi.set(r.events),Hi.set(r.weaknesses),$i.set(r.properties),Qi.set(r.digital_information))},[r]}class Jd extends st{constructor(e){super(),it(this,e,Cd,Dd,at,{data:0})}}export{Jd as component,Kd as universal};
