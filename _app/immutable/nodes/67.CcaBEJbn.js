import{g as ul,b as xs,a as dl,c as _l,d as nt,u as eo,f as hr,h as It,i as Ot,S as Dt,j as hl,F as ml,n as pl,e as gl,P as vl,k as bl,l as $l,m as yl,o as wl,p as kl,q as El,w as Sl,r as Pl,s as Cl,t as Nl}from"../chunks/PropertyPanel.BHZWKY55.js";import{s as to}from"../chunks/sortBy.ChsTRid8.js";import{as as Ne,s as Ie,e as V,b as K,t as Q,d as z,f as Y,j as B,h as x,i as S,E as Fe,w as H,k as j,l as O,m as Oe,n as ce,x as no,o as Gt,r as Jt,c as Ue,p as ae,a4 as gt,ar as Ft,u as He,g as Ke,a as Be,y as lt,Z as mt,I as ke,v as be,Y as ze,J as Ze,$ as Yn,L as un,F as Sn,q as es,S as ro,T as so,P as st,a2 as Tl,ak as Il}from"../chunks/scheduler.BuUavueM.js";import{S as Re,i as je,c as te,b as ne,m as re,t as M,a as F,d as se,g as Me,e as Ve,f as Le}from"../chunks/index.B8nkrWGc.js";import{e as _t}from"../chunks/each.Ckho9Dz0.js";import{a as ts}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{c as Ol,s as jr}from"../chunks/schema.CcpGAuuG.js";import{p as Dl}from"../chunks/stores.1wZ9lVii.js";import{g as Rl}from"../chunks/entry.D5y5HF-9.js";import{A as ns}from"../chunks/Alert.Ci27c02Q.js";import{b as Te,T as Lt,a as rs,G as mr,m as jl,o as Al}from"../chunks/lib.BDR6A2xH.js";/* empty css                     */import{j as Ml,u as Vl,l as Qa,m as oo,n as ao,o as io,p as zl,q as Ll,r as xa,s as Fl,t as ql,M as Sr,H as lo,g as fo,h as Ul,E as Hl,v as Kl,S as ei,i as co,B as Bl,a as Gl,b as Jl}from"../chunks/style.DcuKa52U.js";import{o as ti,d as ni,n as Un,e as ri,m as Pn,a as Wl,i as er,c as Xl,s as Ar,b as Yl}from"../chunks/graphStore.CZTcZBpL.js";import{E as Zl}from"../chunks/elk.bundled.CuBE0WDf.js";import{w as uo}from"../chunks/index.hAAhajWd.js";import{t as pr,T as ss}from"../chunks/ToggleBar.BqwPd21l.js";import{I as si}from"../chunks/actions.BBsoAZW9.js";import{J as _o}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Ql}from"../chunks/Title.CTiQNLLX.js";import{C as xl}from"../chunks/Controls.DX9ZdjRz.js";async function ef({fetch:t}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:n}},{value:{["@graph"]:r}},{value:{["@graph"]:s}},{value:{["@graph"]:a}},{value:{["@graph"]:o}},{value:{da_graph:{["@graph"]:i}}}]=await Promise.allSettled(e.map(y=>t(y).then(u=>u.json()))),l=to(ul(n,"rdfs:label"),y=>y["rdfs:label"]),f=r,c=xs(r,"d3f:DigitalArtifact"),h=dl(s,"d3f:DigitalEvent"),d=to(a,y=>y["rdfs:label"]),$=o,g=_l(o),b=xs(i,"d3f:DigitalInformation");return{attack:l,dao_list:f,dao_tree:c,digital_event:s,event_tree:h,weaknesses:d,properties_list:$,properties_tree:g,digital_information:b}}const C1=Object.freeze(Object.defineProperty({__proto__:null,load:ef},Symbol.toStringTag,{value:"Module"})),ho=t=>Ml(t);function oi(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:r,snapGrid:s,viewport:a,width:o,height:i,minZoom:l,maxZoom:f,panZoom:c,nodes:h,edges:d,domNode:$,nodeLookup:g,nodeOrigin:b,edgeLookup:y,connectionLookup:u}=Vl(),p=_=>{var N,m;const w=Ne(g),v=ho(_)?_:w.get(_.id),R=v.parentId?Fl(v.position,v.measured,v.parentId,w,Ne(b)):v.position,C={id:v.id,position:R,width:((N=v.measured)==null?void 0:N.width)??v.width,height:((m=v.measured)==null?void 0:m.height)??v.height,data:v.data};return ao(C)},I=(_,w,v={replace:!1})=>{var N;const R=(N=Ne(g).get(_))==null?void 0:N.internals.userNode;if(!R)return;const C=typeof w=="function"?w(R):w;v.replace?h.update(m=>m.map(E=>E.id===_?ho(C)?C:{...E,...C}:E)):(Object.assign(R,C),h.update(m=>m))},k=_=>Ne(g).get(_);return{zoomIn:t,zoomOut:e,getInternalNode:k,getNode:_=>{var w;return(w=k(_))==null?void 0:w.internals.userNode},getNodes:_=>_===void 0?Ne(h):mo(Ne(g),_),getEdge:_=>Ne(y).get(_),getEdges:_=>_===void 0?Ne(d):mo(Ne(y),_),setZoom:(_,w)=>{const v=Ne(c);return v?v.scaleTo(_,{duration:w==null?void 0:w.duration}):Promise.resolve(!1)},getZoom:()=>Ne(a).zoom,setViewport:async(_,w)=>{const v=Ne(a),R=Ne(c);return R?(await R.setViewport({x:_.x??v.x,y:_.y??v.y,zoom:_.zoom??v.zoom},{duration:w==null?void 0:w.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ne(a),setCenter:async(_,w,v)=>{const R=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:Ne(f),C=Ne(c);return C?(await C.setViewport({x:Ne(o)/2-_*R,y:Ne(i)/2-w*R,zoom:R},{duration:v==null?void 0:v.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(_,w)=>{const v=Ne(c);if(!v)return Promise.resolve(!1);const R=Qa(_,Ne(o),Ne(i),Ne(l),Ne(f),(w==null?void 0:w.padding)??.1);return await v.setViewport(R,{duration:w==null?void 0:w.duration}),Promise.resolve(!0)},getIntersectingNodes:(_,w=!0,v)=>{const R=oo(_),C=R?_:p(_);return C?(v||Ne(h)).filter(N=>{const m=Ne(g).get(N.id);if(!m||!R&&N.id===_.id)return!1;const E=ao(m),T=io(E,C);return w&&T>0||T>=C.width*C.height}):[]},isNodeIntersecting:(_,w,v=!0)=>{const C=oo(_)?_:p(_);if(!C)return!1;const N=io(C,w);return v&&N>0||N>=C.width*C.height},deleteElements:async({nodes:_=[],edges:w=[]})=>{const{nodes:v,edges:R}=await zl({nodesToRemove:_,edgesToRemove:w,nodes:Ne(h),edges:Ne(d),onBeforeDelete:Ne(r)});return v&&h.update(C=>C.filter(N=>!v.some(({id:m})=>m===N.id))),R&&d.update(C=>C.filter(N=>!R.some(({id:m})=>m===N.id))),{deletedNodes:v,deletedEdges:R}},screenToFlowPosition:(_,w={snapToGrid:!0})=>{const v=Ne($);if(!v)return _;const R=w.snapToGrid?Ne(s):!1,{x:C,y:N,zoom:m}=Ne(a),{x:E,y:T}=v.getBoundingClientRect(),G={x:_.x-E,y:_.y-T};return Ll(G,[C,N,m],R!==null,R||[1,1])},flowToScreenPosition:_=>{const w=Ne($);if(!w)return _;const{x:v,y:R,zoom:C}=Ne(a),{x:N,y:m}=w.getBoundingClientRect(),E=ql(_,[v,R,C]);return{x:E.x+N,y:E.y+m}},toObject:()=>({nodes:Ne(h).map(_=>({..._,position:{..._.position},data:{..._.data}})),edges:Ne(d).map(_=>({..._})),viewport:{...Ne(a)}}),updateNode:I,updateNodeData:(_,w,v)=>{var N;const R=(N=Ne(g).get(_))==null?void 0:N.internals.userNode;if(!R)return;const C=typeof w=="function"?w(R):w;R.data=v!=null&&v.replace?C:{...R.data,...C},h.update(m=>m)},getNodesBounds:_=>{const w=Ne(g),v=Ne(b);return xa(_,{nodeLookup:w,nodeOrigin:v})},getHandleConnections:({type:_,id:w,nodeId:v})=>{var R;return Array.from(((R=Ne(u).get(`${v}-${_}-${w??null}`))==null?void 0:R.values())??[])},viewport:a}}function mo(t,e){var r;const n=[];for(const s of e){const a=t.get(s);if(a){const o="internals"in a?(r=a.internals)==null?void 0:r.userNode:a;n.push(o)}}return n}var Ur={exports:{}},ai={},Tt={},Dn={},An={},Ce={},Rn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(p){if(super(),!t.IDENTIFIER.test(p))throw new Error("CodeGen: name must be a valid identifier");this.str=p}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(p){super(),this._items=typeof p=="string"?[p]:p}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const p=this._items[0];return p===""||p==='""'}get str(){var p;return(p=this._str)!==null&&p!==void 0?p:this._str=this._items.reduce((I,k)=>`${I}${k}`,"")}get names(){var p;return(p=this._names)!==null&&p!==void 0?p:this._names=this._items.reduce((I,k)=>(k instanceof n&&(I[k.str]=(I[k.str]||0)+1),I),{})}}t._Code=r,t.nil=new r("");function s(u,...p){const I=[u[0]];let k=0;for(;k<p.length;)i(I,p[k]),I.push(u[++k]);return new r(I)}t._=s;const a=new r("+");function o(u,...p){const I=[$(u[0])];let k=0;for(;k<p.length;)I.push(a),i(I,p[k]),I.push(a,$(u[++k]));return l(I),new r(I)}t.str=o;function i(u,p){p instanceof r?u.push(...p._items):p instanceof n?u.push(p):u.push(h(p))}t.addCodeArg=i;function l(u){let p=1;for(;p<u.length-1;){if(u[p]===a){const I=f(u[p-1],u[p+1]);if(I!==void 0){u.splice(p-1,3,I);continue}u[p++]="+"}p++}}function f(u,p){if(p==='""')return u;if(u==='""')return p;if(typeof u=="string")return p instanceof n||u[u.length-1]!=='"'?void 0:typeof p!="string"?`${u.slice(0,-1)}${p}"`:p[0]==='"'?u.slice(0,-1)+p.slice(1):void 0;if(typeof p=="string"&&p[0]==='"'&&!(u instanceof n))return`"${u}${p.slice(1)}`}function c(u,p){return p.emptyStr()?u:u.emptyStr()?p:o`${u}${p}`}t.strConcat=c;function h(u){return typeof u=="number"||typeof u=="boolean"||u===null?u:$(Array.isArray(u)?u.join(","):u)}function d(u){return new r($(u))}t.stringify=d;function $(u){return JSON.stringify(u).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=$;function g(u){return typeof u=="string"&&t.IDENTIFIER.test(u)?new r(`.${u}`):s`[${u}]`}t.getProperty=g;function b(u){if(typeof u=="string"&&t.IDENTIFIER.test(u))return new r(`${u}`);throw new Error(`CodeGen: invalid export name: ${u}, use explicit $id name mapping`)}t.getEsmExportName=b;function y(u){return new r(u.toString())}t.regexpCode=y})(Rn);var Hr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Rn;class n extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:f,parent:c}={}){this._names={},this._prefixes=f,this._parent=c}toName(f){return f instanceof e.Name?f:this.name(f)}name(f){return new e.Name(this._newName(f))}_newName(f){const c=this._names[f]||this._nameGroup(f);return`${f}${c.index++}`}_nameGroup(f){var c,h;if(!((h=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||h===void 0)&&h.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}t.Scope=s;class a extends e.Name{constructor(f,c){super(c),this.prefix=f}setValue(f,{property:c,itemIndex:h}){this.value=f,this.scopePath=(0,e._)`.${new e.Name(c)}[${h}]`}}t.ValueScopeName=a;const o=(0,e._)`\n`;class i extends s{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?o:e.nil}}get(){return this._scope}name(f){return new a(f,this._newName(f))}value(f,c){var h;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(f),{prefix:$}=d,g=(h=c.key)!==null&&h!==void 0?h:c.ref;let b=this._values[$];if(b){const p=b.get(g);if(p)return p}else b=this._values[$]=new Map;b.set(g,d);const y=this._scope[$]||(this._scope[$]=[]),u=y.length;return y[u]=c.ref,d.setValue(c,{property:$,itemIndex:u}),d}getValue(f,c){const h=this._values[f];if(h)return h.get(c)}scopeRefs(f,c=this._values){return this._reduceValues(c,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,e._)`${f}${h.scopePath}`})}scopeCode(f=this._values,c,h){return this._reduceValues(f,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,h)}_reduceValues(f,c,h={},d){let $=e.nil;for(const g in f){const b=f[g];if(!b)continue;const y=h[g]=h[g]||new Map;b.forEach(u=>{if(y.has(u))return;y.set(u,r.Started);let p=c(u);if(p){const I=this.opts.es5?t.varKinds.var:t.varKinds.const;$=(0,e._)`${$}${I} ${u} = ${p};${this.opts._n}`}else if(p=d==null?void 0:d(u))$=(0,e._)`${$}${p}${this.opts._n}`;else throw new n(u);y.set(u,r.Completed)})}return $}}t.ValueScope=i})(Hr);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Rn,n=Hr;var r=Rn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=Hr;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class a{optimizeNodes(){return this}optimizeNames(P,D){return this}}class o extends a{constructor(P,D,A){super(),this.varKind=P,this.name=D,this.rhs=A}render({es5:P,_n:D}){const A=P?n.varKinds.var:this.varKind,J=this.rhs===void 0?"":` = ${this.rhs}`;return`${A} ${this.name}${J};`+D}optimizeNames(P,D){if(P[this.name.str])return this.rhs&&(this.rhs=G(this.rhs,P,D)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class i extends a{constructor(P,D,A){super(),this.lhs=P,this.rhs=D,this.sideEffects=A}render({_n:P}){return`${this.lhs} = ${this.rhs};`+P}optimizeNames(P,D){if(!(this.lhs instanceof e.Name&&!P[this.lhs.str]&&!this.sideEffects))return this.rhs=G(this.rhs,P,D),this}get names(){const P=this.lhs instanceof e.Name?{}:{...this.lhs.names};return T(P,this.rhs)}}class l extends i{constructor(P,D,A,J){super(P,A,J),this.op=D}render({_n:P}){return`${this.lhs} ${this.op}= ${this.rhs};`+P}}class f extends a{constructor(P){super(),this.label=P,this.names={}}render({_n:P}){return`${this.label}:`+P}}class c extends a{constructor(P){super(),this.label=P,this.names={}}render({_n:P}){return`break${this.label?` ${this.label}`:""};`+P}}class h extends a{constructor(P){super(),this.error=P}render({_n:P}){return`throw ${this.error};`+P}get names(){return this.error.names}}class d extends a{constructor(P){super(),this.code=P}render({_n:P}){return`${this.code};`+P}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(P,D){return this.code=G(this.code,P,D),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class $ extends a{constructor(P=[]){super(),this.nodes=P}render(P){return this.nodes.reduce((D,A)=>D+A.render(P),"")}optimizeNodes(){const{nodes:P}=this;let D=P.length;for(;D--;){const A=P[D].optimizeNodes();Array.isArray(A)?P.splice(D,1,...A):A?P[D]=A:P.splice(D,1)}return P.length>0?this:void 0}optimizeNames(P,D){const{nodes:A}=this;let J=A.length;for(;J--;){const ee=A[J];ee.optimizeNames(P,D)||(ue(P,ee.names),A.splice(J,1))}return A.length>0?this:void 0}get names(){return this.nodes.reduce((P,D)=>E(P,D.names),{})}}class g extends ${render(P){return"{"+P._n+super.render(P)+"}"+P._n}}class b extends ${}class y extends g{}y.kind="else";class u extends g{constructor(P,D){super(D),this.condition=P}render(P){let D=`if(${this.condition})`+super.render(P);return this.else&&(D+="else "+this.else.render(P)),D}optimizeNodes(){super.optimizeNodes();const P=this.condition;if(P===!0)return this.nodes;let D=this.else;if(D){const A=D.optimizeNodes();D=this.else=Array.isArray(A)?new y(A):A}if(D)return P===!1?D instanceof u?D:D.nodes:this.nodes.length?this:new u(Z(P),D instanceof u?[D]:D.nodes);if(!(P===!1||!this.nodes.length))return this}optimizeNames(P,D){var A;if(this.else=(A=this.else)===null||A===void 0?void 0:A.optimizeNames(P,D),!!(super.optimizeNames(P,D)||this.else))return this.condition=G(this.condition,P,D),this}get names(){const P=super.names;return T(P,this.condition),this.else&&E(P,this.else.names),P}}u.kind="if";class p extends g{}p.kind="for";class I extends p{constructor(P){super(),this.iteration=P}render(P){return`for(${this.iteration})`+super.render(P)}optimizeNames(P,D){if(super.optimizeNames(P,D))return this.iteration=G(this.iteration,P,D),this}get names(){return E(super.names,this.iteration.names)}}class k extends p{constructor(P,D,A,J){super(),this.varKind=P,this.name=D,this.from=A,this.to=J}render(P){const D=P.es5?n.varKinds.var:this.varKind,{name:A,from:J,to:ee}=this;return`for(${D} ${A}=${J}; ${A}<${ee}; ${A}++)`+super.render(P)}get names(){const P=T(super.names,this.from);return T(P,this.to)}}class _ extends p{constructor(P,D,A,J){super(),this.loop=P,this.varKind=D,this.name=A,this.iterable=J}render(P){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(P)}optimizeNames(P,D){if(super.optimizeNames(P,D))return this.iterable=G(this.iterable,P,D),this}get names(){return E(super.names,this.iterable.names)}}class w extends g{constructor(P,D,A){super(),this.name=P,this.args=D,this.async=A}render(P){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(P)}}w.kind="func";class v extends ${render(P){return"return "+super.render(P)}}v.kind="return";class R extends g{render(P){let D="try"+super.render(P);return this.catch&&(D+=this.catch.render(P)),this.finally&&(D+=this.finally.render(P)),D}optimizeNodes(){var P,D;return super.optimizeNodes(),(P=this.catch)===null||P===void 0||P.optimizeNodes(),(D=this.finally)===null||D===void 0||D.optimizeNodes(),this}optimizeNames(P,D){var A,J;return super.optimizeNames(P,D),(A=this.catch)===null||A===void 0||A.optimizeNames(P,D),(J=this.finally)===null||J===void 0||J.optimizeNames(P,D),this}get names(){const P=super.names;return this.catch&&E(P,this.catch.names),this.finally&&E(P,this.finally.names),P}}class C extends g{constructor(P){super(),this.error=P}render(P){return`catch(${this.error})`+super.render(P)}}C.kind="catch";class N extends g{render(P){return"finally"+super.render(P)}}N.kind="finally";class m{constructor(P,D={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...D,_n:D.lines?`
`:""},this._extScope=P,this._scope=new n.Scope({parent:P}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(P){return this._scope.name(P)}scopeName(P){return this._extScope.name(P)}scopeValue(P,D){const A=this._extScope.value(P,D);return(this._values[A.prefix]||(this._values[A.prefix]=new Set)).add(A),A}getScopeValue(P,D){return this._extScope.getValue(P,D)}scopeRefs(P){return this._extScope.scopeRefs(P,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(P,D,A,J){const ee=this._scope.toName(D);return A!==void 0&&J&&(this._constants[ee.str]=A),this._leafNode(new o(P,ee,A)),ee}const(P,D,A){return this._def(n.varKinds.const,P,D,A)}let(P,D,A){return this._def(n.varKinds.let,P,D,A)}var(P,D,A){return this._def(n.varKinds.var,P,D,A)}assign(P,D,A){return this._leafNode(new i(P,D,A))}add(P,D){return this._leafNode(new l(P,t.operators.ADD,D))}code(P){return typeof P=="function"?P():P!==e.nil&&this._leafNode(new d(P)),this}object(...P){const D=["{"];for(const[A,J]of P)D.length>1&&D.push(","),D.push(A),(A!==J||this.opts.es5)&&(D.push(":"),(0,e.addCodeArg)(D,J));return D.push("}"),new e._Code(D)}if(P,D,A){if(this._blockNode(new u(P)),D&&A)this.code(D).else().code(A).endIf();else if(D)this.code(D).endIf();else if(A)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(P){return this._elseNode(new u(P))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(u,y)}_for(P,D){return this._blockNode(P),D&&this.code(D).endFor(),this}for(P,D){return this._for(new I(P),D)}forRange(P,D,A,J,ee=this.opts.es5?n.varKinds.var:n.varKinds.let){const le=this._scope.toName(P);return this._for(new k(ee,le,D,A),()=>J(le))}forOf(P,D,A,J=n.varKinds.const){const ee=this._scope.toName(P);if(this.opts.es5){const le=D instanceof e.Name?D:this.var("_arr",D);return this.forRange("_i",0,(0,e._)`${le}.length`,he=>{this.var(ee,(0,e._)`${le}[${he}]`),A(ee)})}return this._for(new _("of",J,ee,D),()=>A(ee))}forIn(P,D,A,J=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(P,(0,e._)`Object.keys(${D})`,A);const ee=this._scope.toName(P);return this._for(new _("in",J,ee,D),()=>A(ee))}endFor(){return this._endBlockNode(p)}label(P){return this._leafNode(new f(P))}break(P){return this._leafNode(new c(P))}return(P){const D=new v;if(this._blockNode(D),this.code(P),D.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(v)}try(P,D,A){if(!D&&!A)throw new Error('CodeGen: "try" without "catch" and "finally"');const J=new R;if(this._blockNode(J),this.code(P),D){const ee=this.name("e");this._currNode=J.catch=new C(ee),D(ee)}return A&&(this._currNode=J.finally=new N,this.code(A)),this._endBlockNode(C,N)}throw(P){return this._leafNode(new h(P))}block(P,D){return this._blockStarts.push(this._nodes.length),P&&this.code(P).endBlock(D),this}endBlock(P){const D=this._blockStarts.pop();if(D===void 0)throw new Error("CodeGen: not in self-balancing block");const A=this._nodes.length-D;if(A<0||P!==void 0&&A!==P)throw new Error(`CodeGen: wrong number of nodes: ${A} vs ${P} expected`);return this._nodes.length=D,this}func(P,D=e.nil,A,J){return this._blockNode(new w(P,D,A)),J&&this.code(J).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(P=1){for(;P-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(P){return this._currNode.nodes.push(P),this}_blockNode(P){this._currNode.nodes.push(P),this._nodes.push(P)}_endBlockNode(P,D){const A=this._currNode;if(A instanceof P||D&&A instanceof D)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${D?`${P.kind}/${D.kind}`:P.kind}"`)}_elseNode(P){const D=this._currNode;if(!(D instanceof u))throw new Error('CodeGen: "else" without "if"');return this._currNode=D.else=P,this}get _root(){return this._nodes[0]}get _currNode(){const P=this._nodes;return P[P.length-1]}set _currNode(P){const D=this._nodes;D[D.length-1]=P}}t.CodeGen=m;function E(L,P){for(const D in P)L[D]=(L[D]||0)+(P[D]||0);return L}function T(L,P){return P instanceof e._CodeOrName?E(L,P.names):L}function G(L,P,D){if(L instanceof e.Name)return A(L);if(!J(L))return L;return new e._Code(L._items.reduce((ee,le)=>(le instanceof e.Name&&(le=A(le)),le instanceof e._Code?ee.push(...le._items):ee.push(le),ee),[]));function A(ee){const le=D[ee.str];return le===void 0||P[ee.str]!==1?ee:(delete P[ee.str],le)}function J(ee){return ee instanceof e._Code&&ee._items.some(le=>le instanceof e.Name&&P[le.str]===1&&D[le.str]!==void 0)}}function ue(L,P){for(const D in P)L[D]=(L[D]||0)-(P[D]||0)}function Z(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,e._)`!${U(L)}`}t.not=Z;const ie=q(t.operators.AND);function Ee(...L){return L.reduce(ie)}t.and=Ee;const ve=q(t.operators.OR);function W(...L){return L.reduce(ve)}t.or=W;function q(L){return(P,D)=>P===e.nil?D:D===e.nil?P:(0,e._)`${U(P)} ${L} ${U(D)}`}function U(L){return L instanceof e.Name?L:(0,e._)`(${L})`}})(Ce);var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.checkStrictMode=_e.getErrorPath=_e.Type=_e.useFunc=_e.setEvaluated=_e.evaluatedPropsToName=_e.mergeEvaluated=_e.eachItem=_e.unescapeJsonPointer=_e.escapeJsonPointer=_e.escapeFragment=_e.unescapeFragment=_e.schemaRefOrVal=_e.schemaHasRulesButRef=_e.schemaHasRules=_e.checkUnknownRules=_e.alwaysValidSchema=_e.toHash=void 0;const Je=Ce,tf=Rn;function nf(t){const e={};for(const n of t)e[n]=!0;return e}_e.toHash=nf;function rf(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(ii(t,e),!li(e,t.self.RULES.all))}_e.alwaysValidSchema=rf;function ii(t,e=t.schema){const{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;const s=r.RULES.keywords;for(const a in e)s[a]||ui(t,`unknown keyword: "${a}"`)}_e.checkUnknownRules=ii;function li(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(e[n])return!0;return!1}_e.schemaHasRules=li;function sf(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}_e.schemaHasRulesButRef=sf;function of({topSchemaRef:t,schemaPath:e},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Je._)`${n}`}return(0,Je._)`${t}${e}${(0,Je.getProperty)(r)}`}_e.schemaRefOrVal=of;function af(t){return fi(decodeURIComponent(t))}_e.unescapeFragment=af;function lf(t){return encodeURIComponent(os(t))}_e.escapeFragment=lf;function os(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}_e.escapeJsonPointer=os;function fi(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}_e.unescapeJsonPointer=fi;function ff(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)}_e.eachItem=ff;function po({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(s,a,o,i)=>{const l=o===void 0?a:o instanceof Je.Name?(a instanceof Je.Name?t(s,a,o):e(s,a,o),o):a instanceof Je.Name?(e(s,o,a),a):n(a,o);return i===Je.Name&&!(l instanceof Je.Name)?r(s,l):l}}_e.mergeEvaluated={props:po({mergeNames:(t,e,n)=>t.if((0,Je._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,Je._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,Je._)`${n} || {}`).code((0,Je._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,Je._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,Je._)`${n} || {}`),as(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:ci}),items:po({mergeNames:(t,e,n)=>t.if((0,Je._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,Je._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,Je._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,Je._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function ci(t,e){if(e===!0)return t.var("props",!0);const n=t.var("props",(0,Je._)`{}`);return e!==void 0&&as(t,n,e),n}_e.evaluatedPropsToName=ci;function as(t,e,n){Object.keys(n).forEach(r=>t.assign((0,Je._)`${e}${(0,Je.getProperty)(r)}`,!0))}_e.setEvaluated=as;const go={};function cf(t,e){return t.scopeValue("func",{ref:e,code:go[e.code]||(go[e.code]=new tf._Code(e.code))})}_e.useFunc=cf;var Kr;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Kr||(_e.Type=Kr={}));function uf(t,e,n){if(t instanceof Je.Name){const r=e===Kr.Num;return n?r?(0,Je._)`"[" + ${t} + "]"`:(0,Je._)`"['" + ${t} + "']"`:r?(0,Je._)`"/" + ${t}`:(0,Je._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Je.getProperty)(t).toString():"/"+os(t)}_e.getErrorPath=uf;function ui(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}_e.checkStrictMode=ui;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});const dt=Ce,df={data:new dt.Name("data"),valCxt:new dt.Name("valCxt"),instancePath:new dt.Name("instancePath"),parentData:new dt.Name("parentData"),parentDataProperty:new dt.Name("parentDataProperty"),rootData:new dt.Name("rootData"),dynamicAnchors:new dt.Name("dynamicAnchors"),vErrors:new dt.Name("vErrors"),errors:new dt.Name("errors"),this:new dt.Name("this"),self:new dt.Name("self"),scope:new dt.Name("scope"),json:new dt.Name("json"),jsonPos:new dt.Name("jsonPos"),jsonLen:new dt.Name("jsonLen"),jsonPart:new dt.Name("jsonPart")};qt.default=df;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Ce,n=_e,r=qt;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:u})=>u?(0,e.str)`"${y}" keyword must be ${u} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function s(y,u=t.keywordError,p,I){const{it:k}=y,{gen:_,compositeRule:w,allErrors:v}=k,R=h(y,u,p);I??(w||v)?l(_,R):f(k,(0,e._)`[${R}]`)}t.reportError=s;function a(y,u=t.keywordError,p){const{it:I}=y,{gen:k,compositeRule:_,allErrors:w}=I,v=h(y,u,p);l(k,v),_||w||f(I,r.default.vErrors)}t.reportExtraError=a;function o(y,u){y.assign(r.default.errors,u),y.if((0,e._)`${r.default.vErrors} !== null`,()=>y.if(u,()=>y.assign((0,e._)`${r.default.vErrors}.length`,u),()=>y.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function i({gen:y,keyword:u,schemaValue:p,data:I,errsCount:k,it:_}){if(k===void 0)throw new Error("ajv implementation error");const w=y.name("err");y.forRange("i",k,r.default.errors,v=>{y.const(w,(0,e._)`${r.default.vErrors}[${v}]`),y.if((0,e._)`${w}.instancePath === undefined`,()=>y.assign((0,e._)`${w}.instancePath`,(0,e.strConcat)(r.default.instancePath,_.errorPath))),y.assign((0,e._)`${w}.schemaPath`,(0,e.str)`${_.errSchemaPath}/${u}`),_.opts.verbose&&(y.assign((0,e._)`${w}.schema`,p),y.assign((0,e._)`${w}.data`,I))})}t.extendErrors=i;function l(y,u){const p=y.const("err",u);y.if((0,e._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,e._)`[${p}]`),(0,e._)`${r.default.vErrors}.push(${p})`),y.code((0,e._)`${r.default.errors}++`)}function f(y,u){const{gen:p,validateName:I,schemaEnv:k}=y;k.$async?p.throw((0,e._)`new ${y.ValidationError}(${u})`):(p.assign((0,e._)`${I}.errors`,u),p.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function h(y,u,p){const{createErrors:I}=y.it;return I===!1?(0,e._)`{}`:d(y,u,p)}function d(y,u,p={}){const{gen:I,it:k}=y,_=[$(k,p),g(y,p)];return b(y,u,_),I.object(..._)}function $({errorPath:y},{instancePath:u}){const p=u?(0,e.str)`${y}${(0,n.getErrorPath)(u,n.Type.Str)}`:y;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,p)]}function g({keyword:y,it:{errSchemaPath:u}},{schemaPath:p,parentSchema:I}){let k=I?u:(0,e.str)`${u}/${y}`;return p&&(k=(0,e.str)`${k}${(0,n.getErrorPath)(p,n.Type.Str)}`),[c.schemaPath,k]}function b(y,{params:u,message:p},I){const{keyword:k,data:_,schemaValue:w,it:v}=y,{opts:R,propertyName:C,topSchemaRef:N,schemaPath:m}=v;I.push([c.keyword,k],[c.params,typeof u=="function"?u(y):u||(0,e._)`{}`]),R.messages&&I.push([c.message,typeof p=="function"?p(y):p]),R.verbose&&I.push([c.schema,w],[c.parentSchema,(0,e._)`${N}${m}`],[r.default.data,_]),C&&I.push([c.propertyName,C])}})(An);Object.defineProperty(Dn,"__esModule",{value:!0});Dn.boolOrEmptySchema=Dn.topBoolOrEmptySchema=void 0;const _f=An,hf=Ce,mf=qt,pf={message:"boolean schema is false"};function gf(t){const{gen:e,schema:n,validateName:r}=t;n===!1?di(t,!1):typeof n=="object"&&n.$async===!0?e.return(mf.default.data):(e.assign((0,hf._)`${r}.errors`,null),e.return(!0))}Dn.topBoolOrEmptySchema=gf;function vf(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),di(t)):n.var(e,!0)}Dn.boolOrEmptySchema=vf;function di(t,e){const{gen:n,data:r}=t,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,_f.reportError)(s,pf,void 0,e)}var it={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.getRules=bn.isJSONType=void 0;const bf=["string","number","integer","boolean","null","object","array"],$f=new Set(bf);function yf(t){return typeof t=="string"&&$f.has(t)}bn.isJSONType=yf;function wf(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}bn.getRules=wf;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.shouldUseRule=Qt.shouldUseGroup=Qt.schemaHasRulesForType=void 0;function kf({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&_i(t,r)}Qt.schemaHasRulesForType=kf;function _i(t,e){return e.rules.some(n=>hi(t,n))}Qt.shouldUseGroup=_i;function hi(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}Qt.shouldUseRule=hi;Object.defineProperty(it,"__esModule",{value:!0});it.reportTypeError=it.checkDataTypes=it.checkDataType=it.coerceAndCheckDataType=it.getJSONTypes=it.getSchemaTypes=it.DataType=void 0;const Ef=bn,Sf=Qt,Pf=An,Pe=Ce,mi=_e;var In;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(In||(it.DataType=In={}));function Cf(t){const e=pi(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}it.getSchemaTypes=Cf;function pi(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(Ef.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}it.getJSONTypes=pi;function Nf(t,e){const{gen:n,data:r,opts:s}=t,a=Tf(e,s.coerceTypes),o=e.length>0&&!(a.length===0&&e.length===1&&(0,Sf.schemaHasRulesForType)(t,e[0]));if(o){const i=is(e,r,s.strictNumbers,In.Wrong);n.if(i,()=>{a.length?If(t,e,a):ls(t)})}return o}it.coerceAndCheckDataType=Nf;const gi=new Set(["string","number","integer","boolean","null"]);function Tf(t,e){return e?t.filter(n=>gi.has(n)||e==="array"&&n==="array"):[]}function If(t,e,n){const{gen:r,data:s,opts:a}=t,o=r.let("dataType",(0,Pe._)`typeof ${s}`),i=r.let("coerced",(0,Pe._)`undefined`);a.coerceTypes==="array"&&r.if((0,Pe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,Pe._)`${s}[0]`).assign(o,(0,Pe._)`typeof ${s}`).if(is(e,s,a.strictNumbers),()=>r.assign(i,s))),r.if((0,Pe._)`${i} !== undefined`);for(const f of n)(gi.has(f)||f==="array"&&a.coerceTypes==="array")&&l(f);r.else(),ls(t),r.endIf(),r.if((0,Pe._)`${i} !== undefined`,()=>{r.assign(s,i),Of(t,i)});function l(f){switch(f){case"string":r.elseIf((0,Pe._)`${o} == "number" || ${o} == "boolean"`).assign(i,(0,Pe._)`"" + ${s}`).elseIf((0,Pe._)`${s} === null`).assign(i,(0,Pe._)`""`);return;case"number":r.elseIf((0,Pe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(i,(0,Pe._)`+${s}`);return;case"integer":r.elseIf((0,Pe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(i,(0,Pe._)`+${s}`);return;case"boolean":r.elseIf((0,Pe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(i,!1).elseIf((0,Pe._)`${s} === "true" || ${s} === 1`).assign(i,!0);return;case"null":r.elseIf((0,Pe._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(i,null);return;case"array":r.elseIf((0,Pe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(i,(0,Pe._)`[${s}]`)}}}function Of({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,Pe._)`${e} !== undefined`,()=>t.assign((0,Pe._)`${e}[${n}]`,r))}function Br(t,e,n,r=In.Correct){const s=r===In.Correct?Pe.operators.EQ:Pe.operators.NEQ;let a;switch(t){case"null":return(0,Pe._)`${e} ${s} null`;case"array":a=(0,Pe._)`Array.isArray(${e})`;break;case"object":a=(0,Pe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=o((0,Pe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=o();break;default:return(0,Pe._)`typeof ${e} ${s} ${t}`}return r===In.Correct?a:(0,Pe.not)(a);function o(i=Pe.nil){return(0,Pe.and)((0,Pe._)`typeof ${e} == "number"`,i,n?(0,Pe._)`isFinite(${e})`:Pe.nil)}}it.checkDataType=Br;function is(t,e,n,r){if(t.length===1)return Br(t[0],e,n,r);let s;const a=(0,mi.toHash)(t);if(a.array&&a.object){const o=(0,Pe._)`typeof ${e} != "object"`;s=a.null?o:(0,Pe._)`!${e} || ${o}`,delete a.null,delete a.array,delete a.object}else s=Pe.nil;a.number&&delete a.integer;for(const o in a)s=(0,Pe.and)(s,Br(o,e,n,r));return s}it.checkDataTypes=is;const Df={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Pe._)`{type: ${t}}`:(0,Pe._)`{type: ${e}}`};function ls(t){const e=Rf(t);(0,Pf.reportError)(e,Df)}it.reportTypeError=ls;function Rf(t){const{gen:e,data:n,schema:r}=t,s=(0,mi.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:t}}var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.assignDefaults=void 0;const Cn=Ce,jf=_e;function Af(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const s in n)vo(t,s,n[s].default);else e==="array"&&Array.isArray(r)&&r.forEach((s,a)=>vo(t,a,s.default))}Pr.assignDefaults=Af;function vo(t,e,n){const{gen:r,compositeRule:s,data:a,opts:o}=t;if(n===void 0)return;const i=(0,Cn._)`${a}${(0,Cn.getProperty)(e)}`;if(s){(0,jf.checkStrictMode)(t,`default is ignored for: ${i}`);return}let l=(0,Cn._)`${i} === undefined`;o.useDefaults==="empty"&&(l=(0,Cn._)`${l} || ${i} === null || ${i} === ""`),r.if(l,(0,Cn._)`${i} = ${(0,Cn.stringify)(n)}`)}var Xt={},De={};Object.defineProperty(De,"__esModule",{value:!0});De.validateUnion=De.validateArray=De.usePattern=De.callValidateCode=De.schemaProperties=De.allSchemaProperties=De.noPropertyInData=De.propertyInData=De.isOwnProperty=De.hasPropFunc=De.reportMissingProp=De.checkMissingProp=De.checkReportMissingProp=void 0;const Qe=Ce,fs=_e,ln=qt,Mf=_e;function Vf(t,e){const{gen:n,data:r,it:s}=t;n.if(us(n,r,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Qe._)`${e}`},!0),t.error()})}De.checkReportMissingProp=Vf;function zf({gen:t,data:e,it:{opts:n}},r,s){return(0,Qe.or)(...r.map(a=>(0,Qe.and)(us(t,e,a,n.ownProperties),(0,Qe._)`${s} = ${a}`)))}De.checkMissingProp=zf;function Lf(t,e){t.setParams({missingProperty:e},!0),t.error()}De.reportMissingProp=Lf;function vi(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Qe._)`Object.prototype.hasOwnProperty`})}De.hasPropFunc=vi;function cs(t,e,n){return(0,Qe._)`${vi(t)}.call(${e}, ${n})`}De.isOwnProperty=cs;function Ff(t,e,n,r){const s=(0,Qe._)`${e}${(0,Qe.getProperty)(n)} !== undefined`;return r?(0,Qe._)`${s} && ${cs(t,e,n)}`:s}De.propertyInData=Ff;function us(t,e,n,r){const s=(0,Qe._)`${e}${(0,Qe.getProperty)(n)} === undefined`;return r?(0,Qe.or)(s,(0,Qe.not)(cs(t,e,n))):s}De.noPropertyInData=us;function bi(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}De.allSchemaProperties=bi;function qf(t,e){return bi(e).filter(n=>!(0,fs.alwaysValidSchema)(t,e[n]))}De.schemaProperties=qf;function Uf({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:a},it:o},i,l,f){const c=f?(0,Qe._)`${t}, ${e}, ${r}${s}`:e,h=[[ln.default.instancePath,(0,Qe.strConcat)(ln.default.instancePath,a)],[ln.default.parentData,o.parentData],[ln.default.parentDataProperty,o.parentDataProperty],[ln.default.rootData,ln.default.rootData]];o.opts.dynamicRef&&h.push([ln.default.dynamicAnchors,ln.default.dynamicAnchors]);const d=(0,Qe._)`${c}, ${n.object(...h)}`;return l!==Qe.nil?(0,Qe._)`${i}.call(${l}, ${d})`:(0,Qe._)`${i}(${d})`}De.callValidateCode=Uf;const Hf=(0,Qe._)`new RegExp`;function Kf({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:s}=e.code,a=s(n,r);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,Qe._)`${s.code==="new RegExp"?Hf:(0,Mf.useFunc)(t,s)}(${n}, ${r})`})}De.usePattern=Kf;function Bf(t){const{gen:e,data:n,keyword:r,it:s}=t,a=e.name("valid");if(s.allErrors){const i=e.let("valid",!0);return o(()=>e.assign(i,!1)),i}return e.var(a,!0),o(()=>e.break()),a;function o(i){const l=e.const("len",(0,Qe._)`${n}.length`);e.forRange("i",0,l,f=>{t.subschema({keyword:r,dataProp:f,dataPropType:fs.Type.Num},a),e.if((0,Qe.not)(a),i)})}}De.validateArray=Bf;function Gf(t){const{gen:e,schema:n,keyword:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,fs.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),i=e.name("_valid");e.block(()=>n.forEach((l,f)=>{const c=t.subschema({keyword:r,schemaProp:f,compositeRule:!0},i);e.assign(o,(0,Qe._)`${o} || ${i}`),t.mergeValidEvaluated(c,i)||e.if((0,Qe.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}De.validateUnion=Gf;Object.defineProperty(Xt,"__esModule",{value:!0});Xt.validateKeywordUsage=Xt.validSchemaType=Xt.funcKeywordCode=Xt.macroKeywordCode=void 0;const pt=Ce,pn=qt,Jf=De,Wf=An;function Xf(t,e){const{gen:n,keyword:r,schema:s,parentSchema:a,it:o}=t,i=e.macro.call(o.self,s,a,o),l=$i(n,r,i);o.opts.validateSchema!==!1&&o.self.validateSchema(i,!0);const f=n.name("valid");t.subschema({schema:i,schemaPath:pt.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},f),t.pass(f,()=>t.error(!0))}Xt.macroKeywordCode=Xf;function Yf(t,e){var n;const{gen:r,keyword:s,schema:a,parentSchema:o,$data:i,it:l}=t;Qf(l,e);const f=!i&&e.compile?e.compile.call(l.self,a,o,l):e.validate,c=$i(r,s,f),h=r.let("valid");t.block$data(h,d),t.ok((n=e.valid)!==null&&n!==void 0?n:h);function d(){if(e.errors===!1)b(),e.modifying&&bo(t),y(()=>t.error());else{const u=e.async?$():g();e.modifying&&bo(t),y(()=>Zf(t,u))}}function $(){const u=r.let("ruleErrs",null);return r.try(()=>b((0,pt._)`await `),p=>r.assign(h,!1).if((0,pt._)`${p} instanceof ${l.ValidationError}`,()=>r.assign(u,(0,pt._)`${p}.errors`),()=>r.throw(p))),u}function g(){const u=(0,pt._)`${c}.errors`;return r.assign(u,null),b(pt.nil),u}function b(u=e.async?(0,pt._)`await `:pt.nil){const p=l.opts.passContext?pn.default.this:pn.default.self,I=!("compile"in e&&!i||e.schema===!1);r.assign(h,(0,pt._)`${u}${(0,Jf.callValidateCode)(t,c,p,I)}`,e.modifying)}function y(u){var p;r.if((0,pt.not)((p=e.valid)!==null&&p!==void 0?p:h),u)}}Xt.funcKeywordCode=Yf;function bo(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,pt._)`${r.parentData}[${r.parentDataProperty}]`))}function Zf(t,e){const{gen:n}=t;n.if((0,pt._)`Array.isArray(${e})`,()=>{n.assign(pn.default.vErrors,(0,pt._)`${pn.default.vErrors} === null ? ${e} : ${pn.default.vErrors}.concat(${e})`).assign(pn.default.errors,(0,pt._)`${pn.default.vErrors}.length`),(0,Wf.extendErrors)(t)},()=>t.error())}function Qf({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function $i(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,pt.stringify)(n)})}function xf(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Xt.validSchemaType=xf;function ec({schema:t,opts:e,self:n,errSchemaPath:r},s,a){if(Array.isArray(s.keyword)?!s.keyword.includes(a):s.keyword!==a)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(i=>!Object.prototype.hasOwnProperty.call(t,i)))throw new Error(`parent schema must have dependencies of ${a}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[a])){const l=`keyword "${a}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}Xt.validateKeywordUsage=ec;var dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.extendSubschemaMode=dn.extendSubschemaData=dn.getSubschema=void 0;const Wt=Ce,yi=_e;function tc(t,{keyword:e,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:a,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const i=t.schema[e];return n===void 0?{schema:i,schemaPath:(0,Wt._)`${t.schemaPath}${(0,Wt.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:i[n],schemaPath:(0,Wt._)`${t.schemaPath}${(0,Wt.getProperty)(e)}${(0,Wt.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,yi.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||a===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}dn.getSubschema=tc;function nc(t,e,{dataProp:n,dataPropType:r,data:s,dataTypes:a,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=e;if(n!==void 0){const{errorPath:f,dataPathArr:c,opts:h}=e,d=i.let("data",(0,Wt._)`${e.data}${(0,Wt.getProperty)(n)}`,!0);l(d),t.errorPath=(0,Wt.str)`${f}${(0,yi.getErrorPath)(n,r,h.jsPropertySyntax)}`,t.parentDataProperty=(0,Wt._)`${n}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){const f=s instanceof Wt.Name?s:i.let("data",s,!0);l(f),o!==void 0&&(t.propertyName=o)}a&&(t.dataTypes=a);function l(f){t.data=f,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,f]}}dn.extendSubschemaData=nc;function rc(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:a}){r!==void 0&&(t.compositeRule=r),s!==void 0&&(t.createErrors=s),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=n}dn.extendSubschemaMode=rc;var ct={},wi=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var o=a[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},ki={exports:{}},cn=ki.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};fr(e,r,s,t,"",t)};cn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};cn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};cn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};cn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function fr(t,e,n,r,s,a,o,i,l,f){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,s,a,o,i,l,f);for(var c in r){var h=r[c];if(Array.isArray(h)){if(c in cn.arrayKeywords)for(var d=0;d<h.length;d++)fr(t,e,n,h[d],s+"/"+c+"/"+d,a,s,c,r,d)}else if(c in cn.propsKeywords){if(h&&typeof h=="object")for(var $ in h)fr(t,e,n,h[$],s+"/"+c+"/"+sc($),a,s,c,r,$)}else(c in cn.keywords||t.allKeys&&!(c in cn.skipKeywords))&&fr(t,e,n,h,s+"/"+c,a,s,c,r)}n(r,s,a,o,i,l,f)}}function sc(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var oc=ki.exports;Object.defineProperty(ct,"__esModule",{value:!0});ct.getSchemaRefs=ct.resolveUrl=ct.normalizeId=ct._getFullPath=ct.getFullPath=ct.inlineRef=void 0;const ac=_e,ic=wi,lc=oc,fc=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cc(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Gr(t):e?Ei(t)<=e:!1}ct.inlineRef=cc;const uc=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Gr(t){for(const e in t){if(uc.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(Gr)||typeof n=="object"&&Gr(n))return!0}return!1}function Ei(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!fc.has(n)&&(typeof t[n]=="object"&&(0,ac.eachItem)(t[n],r=>e+=Ei(r)),e===1/0))return 1/0}return e}function Si(t,e="",n){n!==!1&&(e=On(e));const r=t.parse(e);return Pi(t,r)}ct.getFullPath=Si;function Pi(t,e){return t.serialize(e).split("#")[0]+"#"}ct._getFullPath=Pi;const dc=/#\/?$/;function On(t){return t?t.replace(dc,""):""}ct.normalizeId=On;function _c(t,e,n){return n=On(n),t.resolve(e,n)}ct.resolveUrl=_c;const hc=/^[a-z_][-a-z0-9._]*$/i;function mc(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=On(t[n]||e),a={"":s},o=Si(r,s,!1),i={},l=new Set;return lc(t,{allKeys:!0},(h,d,$,g)=>{if(g===void 0)return;const b=o+d;let y=a[g];typeof h[n]=="string"&&(y=u.call(this,h[n])),p.call(this,h.$anchor),p.call(this,h.$dynamicAnchor),a[d]=y;function u(I){const k=this.opts.uriResolver.resolve;if(I=On(y?k(y,I):I),l.has(I))throw c(I);l.add(I);let _=this.refs[I];return typeof _=="string"&&(_=this.refs[_]),typeof _=="object"?f(h,_.schema,I):I!==On(b)&&(I[0]==="#"?(f(h,i[I],I),i[I]=h):this.refs[I]=b),I}function p(I){if(typeof I=="string"){if(!hc.test(I))throw new Error(`invalid anchor "${I}"`);u.call(this,`#${I}`)}}}),i;function f(h,d,$){if(d!==void 0&&!ic(h,d))throw c($)}function c(h){return new Error(`reference "${h}" resolves to more than one schema`)}}ct.getSchemaRefs=mc;Object.defineProperty(Tt,"__esModule",{value:!0});Tt.getData=Tt.KeywordCxt=Tt.validateFunctionCode=void 0;const Ci=Dn,$o=it,ds=Qt,gr=it,pc=Pr,Bn=Xt,Mr=dn,pe=Ce,ye=qt,gc=ct,xt=_e,Fn=An;function vc(t){if(Ii(t)&&(Oi(t),Ti(t))){yc(t);return}Ni(t,()=>(0,Ci.topBoolOrEmptySchema)(t))}Tt.validateFunctionCode=vc;function Ni({gen:t,validateName:e,schema:n,schemaEnv:r,opts:s},a){s.code.es5?t.func(e,(0,pe._)`${ye.default.data}, ${ye.default.valCxt}`,r.$async,()=>{t.code((0,pe._)`"use strict"; ${yo(n,s)}`),$c(t,s),t.code(a)}):t.func(e,(0,pe._)`${ye.default.data}, ${bc(s)}`,r.$async,()=>t.code(yo(n,s)).code(a))}function bc(t){return(0,pe._)`{${ye.default.instancePath}="", ${ye.default.parentData}, ${ye.default.parentDataProperty}, ${ye.default.rootData}=${ye.default.data}${t.dynamicRef?(0,pe._)`, ${ye.default.dynamicAnchors}={}`:pe.nil}}={}`}function $c(t,e){t.if(ye.default.valCxt,()=>{t.var(ye.default.instancePath,(0,pe._)`${ye.default.valCxt}.${ye.default.instancePath}`),t.var(ye.default.parentData,(0,pe._)`${ye.default.valCxt}.${ye.default.parentData}`),t.var(ye.default.parentDataProperty,(0,pe._)`${ye.default.valCxt}.${ye.default.parentDataProperty}`),t.var(ye.default.rootData,(0,pe._)`${ye.default.valCxt}.${ye.default.rootData}`),e.dynamicRef&&t.var(ye.default.dynamicAnchors,(0,pe._)`${ye.default.valCxt}.${ye.default.dynamicAnchors}`)},()=>{t.var(ye.default.instancePath,(0,pe._)`""`),t.var(ye.default.parentData,(0,pe._)`undefined`),t.var(ye.default.parentDataProperty,(0,pe._)`undefined`),t.var(ye.default.rootData,ye.default.data),e.dynamicRef&&t.var(ye.default.dynamicAnchors,(0,pe._)`{}`)})}function yc(t){const{schema:e,opts:n,gen:r}=t;Ni(t,()=>{n.$comment&&e.$comment&&Ri(t),Pc(t),r.let(ye.default.vErrors,null),r.let(ye.default.errors,0),n.unevaluated&&wc(t),Di(t),Tc(t)})}function wc(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,pe._)`${n}.evaluated`),e.if((0,pe._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,pe._)`${t.evaluated}.props`,(0,pe._)`undefined`)),e.if((0,pe._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,pe._)`${t.evaluated}.items`,(0,pe._)`undefined`))}function yo(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,pe._)`/*# sourceURL=${n} */`:pe.nil}function kc(t,e){if(Ii(t)&&(Oi(t),Ti(t))){Ec(t,e);return}(0,Ci.boolOrEmptySchema)(t,e)}function Ti({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function Ii(t){return typeof t.schema!="boolean"}function Ec(t,e){const{schema:n,gen:r,opts:s}=t;s.$comment&&n.$comment&&Ri(t),Cc(t),Nc(t);const a=r.const("_errs",ye.default.errors);Di(t,a),r.var(e,(0,pe._)`${a} === ${ye.default.errors}`)}function Oi(t){(0,xt.checkUnknownRules)(t),Sc(t)}function Di(t,e){if(t.opts.jtd)return wo(t,[],!1,e);const n=(0,$o.getSchemaTypes)(t.schema),r=(0,$o.coerceAndCheckDataType)(t,n);wo(t,n,!r,e)}function Sc(t){const{schema:e,errSchemaPath:n,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,xt.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Pc(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,xt.checkStrictMode)(t,"default is ignored in the schema root")}function Cc(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,gc.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Nc(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ri({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:s}){const a=n.$comment;if(s.$comment===!0)t.code((0,pe._)`${ye.default.self}.logger.log(${a})`);else if(typeof s.$comment=="function"){const o=(0,pe.str)`${r}/$comment`,i=t.scopeValue("root",{ref:e.root});t.code((0,pe._)`${ye.default.self}.opts.$comment(${a}, ${o}, ${i}.schema)`)}}function Tc(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:s,opts:a}=t;n.$async?e.if((0,pe._)`${ye.default.errors} === 0`,()=>e.return(ye.default.data),()=>e.throw((0,pe._)`new ${s}(${ye.default.vErrors})`)):(e.assign((0,pe._)`${r}.errors`,ye.default.vErrors),a.unevaluated&&Ic(t),e.return((0,pe._)`${ye.default.errors} === 0`))}function Ic({gen:t,evaluated:e,props:n,items:r}){n instanceof pe.Name&&t.assign((0,pe._)`${e}.props`,n),r instanceof pe.Name&&t.assign((0,pe._)`${e}.items`,r)}function wo(t,e,n,r){const{gen:s,schema:a,data:o,allErrors:i,opts:l,self:f}=t,{RULES:c}=f;if(a.$ref&&(l.ignoreKeywordsWithRef||!(0,xt.schemaHasRulesButRef)(a,c))){s.block(()=>Mi(t,"$ref",c.all.$ref.definition));return}l.jtd||Oc(t,e),s.block(()=>{for(const d of c.rules)h(d);h(c.post)});function h(d){(0,ds.shouldUseGroup)(a,d)&&(d.type?(s.if((0,gr.checkDataType)(d.type,o,l.strictNumbers)),ko(t,d),e.length===1&&e[0]===d.type&&n&&(s.else(),(0,gr.reportTypeError)(t)),s.endIf()):ko(t,d),i||s.if((0,pe._)`${ye.default.errors} === ${r||0}`))}}function ko(t,e){const{gen:n,schema:r,opts:{useDefaults:s}}=t;s&&(0,pc.assignDefaults)(t,e.type),n.block(()=>{for(const a of e.rules)(0,ds.shouldUseRule)(r,a)&&Mi(t,a.keyword,a.definition,e.type)})}function Oc(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Dc(t,e),t.opts.allowUnionTypes||Rc(t,e),jc(t,t.dataTypes))}function Dc(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{ji(t.dataTypes,n)||_s(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),Mc(t,e)}}function Rc(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&_s(t,"use allowUnionTypes to allow union type keyword")}function jc(t,e){const n=t.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,ds.shouldUseRule)(t.schema,s)){const{type:a}=s.definition;a.length&&!a.some(o=>Ac(e,o))&&_s(t,`missing type "${a.join(",")}" for keyword "${r}"`)}}}function Ac(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function ji(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Mc(t,e){const n=[];for(const r of t.dataTypes)ji(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function _s(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,xt.checkStrictMode)(t,e,t.opts.strictTypes)}class Ai{constructor(e,n,r){if((0,Bn.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,xt.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",Vi(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Bn.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ye.default.errors))}result(e,n,r){this.failResult((0,pe.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,pe.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,pe._)`${n} !== undefined && (${(0,pe.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?Fn.reportExtraError:Fn.reportError)(this,this.def.error,n)}$dataError(){(0,Fn.reportError)(this,this.def.$dataError||Fn.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Fn.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=pe.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=pe.nil,n=pe.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:a,def:o}=this;r.if((0,pe.or)((0,pe._)`${s} === undefined`,n)),e!==pe.nil&&r.assign(e,!0),(a.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==pe.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:s,it:a}=this;return(0,pe.or)(o(),i());function o(){if(r.length){if(!(n instanceof pe.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,pe._)`${(0,gr.checkDataTypes)(l,n,a.opts.strictNumbers,gr.DataType.Wrong)}`}return pe.nil}function i(){if(s.validateSchema){const l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,pe._)`!${l}(${n})`}return pe.nil}}subschema(e,n){const r=(0,Mr.getSubschema)(this.it,e);(0,Mr.extendSubschemaData)(r,this.it,e),(0,Mr.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return kc(s,n),s}mergeEvaluated(e,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=xt.mergeEvaluated.props(s,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=xt.mergeEvaluated.items(s,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(e,pe.Name)),!0}}Tt.KeywordCxt=Ai;function Mi(t,e,n,r){const s=new Ai(t,n,e);"code"in n?n.code(s,r):s.$data&&n.validate?(0,Bn.funcKeywordCode)(s,n):"macro"in n?(0,Bn.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,Bn.funcKeywordCode)(s,n)}const Vc=/^\/(?:[^~]|~0|~1)*$/,zc=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Vi(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let s,a;if(t==="")return ye.default.rootData;if(t[0]==="/"){if(!Vc.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,a=ye.default.rootData}else{const f=zc.exec(t);if(!f)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+f[1];if(s=f[2],s==="#"){if(c>=e)throw new Error(l("property/index",c));return r[e-c]}if(c>e)throw new Error(l("data",c));if(a=n[e-c],!s)return a}let o=a;const i=s.split("/");for(const f of i)f&&(a=(0,pe._)`${a}${(0,pe.getProperty)((0,xt.unescapeJsonPointer)(f))}`,o=(0,pe._)`${o} && ${a}`);return o;function l(f,c){return`Cannot access ${f} ${c} levels up, current level is ${e}`}}Tt.getData=Vi;var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});class Lc extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Zn.default=Lc;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const Vr=ct;class Fc extends Error{constructor(e,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Vr.resolveUrl)(e,n,r),this.missingSchema=(0,Vr.normalizeId)((0,Vr.getFullPath)(e,this.missingRef))}}Mn.default=Fc;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.resolveSchema=yt.getCompilingSchema=yt.resolveRef=yt.compileSchema=yt.SchemaEnv=void 0;const Mt=Ce,qc=Zn,mn=qt,zt=ct,Eo=_e,Uc=Tt;class Cr{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,zt.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}yt.SchemaEnv=Cr;function hs(t){const e=zi.call(this,t);if(e)return e;const n=(0,zt.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:a}=this.opts,o=new Mt.CodeGen(this.scope,{es5:r,lines:s,ownProperties:a});let i;t.$async&&(i=o.scopeValue("Error",{ref:qc.default,code:(0,Mt._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");t.validateName=l;const f={gen:o,allErrors:this.opts.allErrors,data:mn.default.data,parentData:mn.default.parentData,parentDataProperty:mn.default.parentDataProperty,dataNames:[mn.default.data],dataPathArr:[Mt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Mt.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:i,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:Mt.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Mt._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,Uc.validateFunctionCode)(f),o.optimize(this.opts.code.optimize);const h=o.toString();c=`${o.scopeRefs(mn.default.scope)}return ${h}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const $=new Function(`${mn.default.self}`,`${mn.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:$}),$.errors=null,$.schema=t.schema,$.schemaEnv=t,t.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:l,validateCode:h,scopeValues:o._values}),this.opts.unevaluated){const{props:g,items:b}=f;$.evaluated={props:g instanceof Mt.Name?void 0:g,items:b instanceof Mt.Name?void 0:b,dynamicProps:g instanceof Mt.Name,dynamicItems:b instanceof Mt.Name},$.source&&($.source.evaluated=(0,Mt.stringify)($.evaluated))}return t.validate=$,t}catch(h){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),h}finally{this._compilations.delete(t)}}yt.compileSchema=hs;function Hc(t,e,n){var r;n=(0,zt.resolveUrl)(this.opts.uriResolver,e,n);const s=t.refs[n];if(s)return s;let a=Gc.call(this,t,n);if(a===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:i}=this.opts;o&&(a=new Cr({schema:o,schemaId:i,root:t,baseId:e}))}if(a!==void 0)return t.refs[n]=Kc.call(this,a)}yt.resolveRef=Hc;function Kc(t){return(0,zt.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:hs.call(this,t)}function zi(t){for(const e of this._compilations)if(Bc(e,t))return e}yt.getCompilingSchema=zi;function Bc(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Gc(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||Nr.call(this,t,e)}function Nr(t,e){const n=this.opts.uriResolver.parse(e),r=(0,zt._getFullPath)(this.opts.uriResolver,n);let s=(0,zt.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===s)return zr.call(this,n,t);const a=(0,zt.normalizeId)(r),o=this.refs[a]||this.schemas[a];if(typeof o=="string"){const i=Nr.call(this,t,o);return typeof(i==null?void 0:i.schema)!="object"?void 0:zr.call(this,n,i)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||hs.call(this,o),a===(0,zt.normalizeId)(e)){const{schema:i}=o,{schemaId:l}=this.opts,f=i[l];return f&&(s=(0,zt.resolveUrl)(this.opts.uriResolver,s,f)),new Cr({schema:i,schemaId:l,root:t,baseId:s})}return zr.call(this,n,o)}}yt.resolveSchema=Nr;const Jc=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function zr(t,{baseId:e,schema:n,root:r}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const i of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,Eo.unescapeFragment)(i)];if(l===void 0)return;n=l;const f=typeof n=="object"&&n[this.opts.schemaId];!Jc.has(i)&&f&&(e=(0,zt.resolveUrl)(this.opts.uriResolver,e,f))}let a;if(typeof n!="boolean"&&n.$ref&&!(0,Eo.schemaHasRulesButRef)(n,this.RULES)){const i=(0,zt.resolveUrl)(this.opts.uriResolver,e,n.$ref);a=Nr.call(this,r,i)}const{schemaId:o}=this.opts;if(a=a||new Cr({schema:n,schemaId:o,root:r,baseId:e}),a.schema!==a.root.schema)return a}const Wc="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Xc="Meta-schema for $data reference (JSON AnySchema extension proposal)",Yc="object",Zc=["$data"],Qc={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xc=!1,eu={$id:Wc,description:Xc,type:Yc,required:Zc,properties:Qc,additionalProperties:xc};var ms={},Tr={exports:{}};const tu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var nu={HEX:tu};const{HEX:ru}=nu;function Li(t){if(qi(t,".")<3)return{host:t,isIPV4:!1};const e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[n]=e;return n?{host:ou(n,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Jr(t,e=!1){let n="",r=!0;for(const s of t){if(ru[s]===void 0)return;s!=="0"&&r===!0&&(r=!1),r||(n+=s)}return e&&n.length===0&&(n="0"),n}function su(t){let e=0;const n={error:!1,address:"",zone:""},r=[],s=[];let a=!1,o=!1,i=!1;function l(){if(s.length){if(a===!1){const f=Jr(s);if(f!==void 0)r.push(f);else return n.error=!0,!1}s.length=0}return!0}for(let f=0;f<t.length;f++){const c=t[f];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(i=!0),!l())break;if(e++,r.push(":"),e>7){n.error=!0;break}f-1>=0&&t[f-1]===":"&&(o=!0);continue}else if(c==="%"){if(!l())break;a=!0}else{s.push(c);continue}}return s.length&&(a?n.zone=s.join(""):i?r.push(s.join("")):r.push(Jr(s))),n.address=r.join(""),n}function Fi(t,e={}){if(qi(t,":")<2)return{host:t,isIPV6:!1};const n=su(t);if(n.error)return{host:t,isIPV6:!1};{let r=n.address,s=n.address;return n.zone&&(r+="%"+n.zone,s+="%25"+n.zone),{host:r,escapedHost:s,isIPV6:!0}}}function ou(t,e){let n="",r=!0;const s=t.length;for(let a=0;a<s;a++){const o=t[a];o==="0"&&r?(a+1<=s&&t[a+1]===e||a+1===s)&&(n+=o,r=!1):(o===e?r=!0:r=!1,n+=o)}return n}function qi(t,e){let n=0;for(let r=0;r<t.length;r++)t[r]===e&&n++;return n}const So=/^\.\.?\//u,Po=/^\/\.(?:\/|$)/u,Co=/^\/\.\.(?:\/|$)/u,au=/^\/?(?:.|\n)*?(?=\/|$)/u;function iu(t){const e=[];for(;t.length;)if(t.match(So))t=t.replace(So,"");else if(t.match(Po))t=t.replace(Po,"/");else if(t.match(Co))t=t.replace(Co,"/"),e.pop();else if(t==="."||t==="..")t="";else{const n=t.match(au);if(n){const r=n[0];t=t.slice(r.length),e.push(r)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function lu(t,e){const n=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=n(t.scheme)),t.userinfo!==void 0&&(t.userinfo=n(t.userinfo)),t.host!==void 0&&(t.host=n(t.host)),t.path!==void 0&&(t.path=n(t.path)),t.query!==void 0&&(t.query=n(t.query)),t.fragment!==void 0&&(t.fragment=n(t.fragment)),t}function fu(t,e){const n=[];if(t.userinfo!==void 0&&(n.push(t.userinfo),n.push("@")),t.host!==void 0){let r=unescape(t.host);const s=Li(r);if(s.isIPV4)r=s.host;else{const a=Fi(s.host,{isIPV4:!1});a.isIPV6===!0?r=`[${a.escapedHost}]`:r=t.host}n.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(n.push(":"),n.push(String(t.port))),n.length?n.join(""):void 0}var cu={recomposeAuthority:fu,normalizeComponentEncoding:lu,removeDotSegments:iu,normalizeIPv4:Li,normalizeIPv6:Fi,stringArrayToHexStripped:Jr};const uu=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,du=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ui(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function Hi(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Ki(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function _u(t){return t.secure=Ui(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function hu(t){if((t.port===(Ui(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,n]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=n,t.resourceName=void 0}return t.fragment=void 0,t}function mu(t,e){if(!t.path)return t.error="URN can not be parsed",t;const n=t.path.match(du);if(n){const r=e.scheme||t.scheme||"urn";t.nid=n[1].toLowerCase(),t.nss=n[2];const s=`${r}:${e.nid||t.nid}`,a=ps[s];t.path=void 0,a&&(t=a.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function pu(t,e){const n=e.scheme||t.scheme||"urn",r=t.nid.toLowerCase(),s=`${n}:${e.nid||r}`,a=ps[s];a&&(t=a.serialize(t,e));const o=t,i=t.nss;return o.path=`${r||e.nid}:${i}`,e.skipEscape=!0,o}function gu(t,e){const n=t;return n.uuid=n.nss,n.nss=void 0,!e.tolerant&&(!n.uuid||!uu.test(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function vu(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const Bi={scheme:"http",domainHost:!0,parse:Hi,serialize:Ki},bu={scheme:"https",domainHost:Bi.domainHost,parse:Hi,serialize:Ki},cr={scheme:"ws",domainHost:!0,parse:_u,serialize:hu},$u={scheme:"wss",domainHost:cr.domainHost,parse:cr.parse,serialize:cr.serialize},yu={scheme:"urn",parse:mu,serialize:pu,skipNormalize:!0},wu={scheme:"urn:uuid",parse:gu,serialize:vu,skipNormalize:!0},ps={http:Bi,https:bu,ws:cr,wss:$u,urn:yu,"urn:uuid":wu};var ku=ps;const{normalizeIPv6:Eu,normalizeIPv4:Su,removeDotSegments:Hn,recomposeAuthority:Pu,normalizeComponentEncoding:tr}=cu,gs=ku;function Cu(t,e){return typeof t=="string"?t=Yt(tn(t,e),e):typeof t=="object"&&(t=tn(Yt(t,e),e)),t}function Nu(t,e,n){const r=Object.assign({scheme:"null"},n),s=Gi(tn(t,r),tn(e,r),r,!0);return Yt(s,{...r,skipEscape:!0})}function Gi(t,e,n,r){const s={};return r||(t=tn(Yt(t,n),n),e=tn(Yt(e,n),n)),n=n||{},!n.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Hn(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Hn(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=Hn(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Hn(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function Tu(t,e,n){return typeof t=="string"?(t=unescape(t),t=Yt(tr(tn(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Yt(tr(t,!0),{...n,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Yt(tr(tn(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Yt(tr(e,!0),{...n,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Yt(t,e){const n={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},r=Object.assign({},e),s=[],a=gs[(r.scheme||n.scheme||"").toLowerCase()];a&&a.serialize&&a.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&s.push(n.scheme,":");const o=Pu(n,r);if(o!==void 0&&(r.reference!=="suffix"&&s.push("//"),s.push(o),n.path&&n.path.charAt(0)!=="/"&&s.push("/")),n.path!==void 0){let i=n.path;!r.absolutePath&&(!a||!a.absolutePath)&&(i=Hn(i)),o===void 0&&(i=i.replace(/^\/\//u,"/%2F")),s.push(i)}return n.query!==void 0&&s.push("?",n.query),n.fragment!==void 0&&s.push("#",n.fragment),s.join("")}const Iu=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function Ou(t){let e=0;for(let n=0,r=t.length;n<r;++n)if(e=t.charCodeAt(n),e>126||Iu[e])return!0;return!1}const Du=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function tn(t,e){const n=Object.assign({},e),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1;let a=!1;n.reference==="suffix"&&(t=(n.scheme?n.scheme+":":"")+"//"+t);const o=t.match(Du);if(o){if(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5]),r.host){const l=Su(r.host);if(l.isIPV4===!1){const f=Eu(l.host,{isIPV4:!1});r.host=f.host.toLowerCase(),a=f.isIPV6}else r.host=l.host,a=!0}r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&!r.path&&r.query===void 0?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const i=gs[(n.scheme||r.scheme||"").toLowerCase()];if(!n.unicodeSupport&&(!i||!i.unicodeSupport)&&r.host&&(n.domainHost||i&&i.domainHost)&&a===!1&&Ou(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(l){r.error=r.error||"Host's domain name can not be converted to ASCII: "+l}(!i||i&&!i.skipNormalize)&&(s&&r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),s&&r.host!==void 0&&(r.host=unescape(r.host)),r.path!==void 0&&r.path.length&&(r.path=escape(unescape(r.path))),r.fragment!==void 0&&r.fragment.length&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),i&&i.parse&&i.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const vs={SCHEMES:gs,normalize:Cu,resolve:Nu,resolveComponents:Gi,equal:Tu,serialize:Yt,parse:tn};Tr.exports=vs;Tr.exports.default=vs;Tr.exports.fastUri=vs;var Ru=Tr.exports;Object.defineProperty(ms,"__esModule",{value:!0});const Ji=Ru;Ji.code='require("ajv/dist/runtime/uri").default';ms.default=Ji;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Tt;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=Ce;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Zn,s=Mn,a=bn,o=yt,i=Ce,l=ct,f=it,c=_e,h=eu,d=ms,$=(W,q)=>new RegExp(W,q);$.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},u={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},p=200;function I(W){var q,U,L,P,D,A,J,ee,le,he,ge,Se,Ge,xe,Xe,ut,et,Rt,Pt,vt,nn,Kt,Ct,kt,bt;const Bt=W.strict,Zt=(q=W.code)===null||q===void 0?void 0:q.optimize,_n=Zt===!0||Zt===void 0?1:Zt||0,jt=(L=(U=W.code)===null||U===void 0?void 0:U.regExp)!==null&&L!==void 0?L:$,tt=(P=W.uriResolver)!==null&&P!==void 0?P:d.default;return{strictSchema:(A=(D=W.strictSchema)!==null&&D!==void 0?D:Bt)!==null&&A!==void 0?A:!0,strictNumbers:(ee=(J=W.strictNumbers)!==null&&J!==void 0?J:Bt)!==null&&ee!==void 0?ee:!0,strictTypes:(he=(le=W.strictTypes)!==null&&le!==void 0?le:Bt)!==null&&he!==void 0?he:"log",strictTuples:(Se=(ge=W.strictTuples)!==null&&ge!==void 0?ge:Bt)!==null&&Se!==void 0?Se:"log",strictRequired:(xe=(Ge=W.strictRequired)!==null&&Ge!==void 0?Ge:Bt)!==null&&xe!==void 0?xe:!1,code:W.code?{...W.code,optimize:_n,regExp:jt}:{optimize:_n,regExp:jt},loopRequired:(Xe=W.loopRequired)!==null&&Xe!==void 0?Xe:p,loopEnum:(ut=W.loopEnum)!==null&&ut!==void 0?ut:p,meta:(et=W.meta)!==null&&et!==void 0?et:!0,messages:(Rt=W.messages)!==null&&Rt!==void 0?Rt:!0,inlineRefs:(Pt=W.inlineRefs)!==null&&Pt!==void 0?Pt:!0,schemaId:(vt=W.schemaId)!==null&&vt!==void 0?vt:"$id",addUsedSchema:(nn=W.addUsedSchema)!==null&&nn!==void 0?nn:!0,validateSchema:(Kt=W.validateSchema)!==null&&Kt!==void 0?Kt:!0,validateFormats:(Ct=W.validateFormats)!==null&&Ct!==void 0?Ct:!0,unicodeRegExp:(kt=W.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(bt=W.int32range)!==null&&bt!==void 0?bt:!0,uriResolver:tt}}class k{constructor(q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,q=this.opts={...q,...I(q)};const{es5:U,lines:L}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:b,es5:U,lines:L}),this.logger=E(q.logger);const P=q.validateFormats;q.validateFormats=!1,this.RULES=(0,a.getRules)(),_.call(this,y,q,"NOT SUPPORTED"),_.call(this,u,q,"DEPRECATED","warn"),this._metaOpts=N.call(this),q.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),q.keywords&&C.call(this,q.keywords),typeof q.meta=="object"&&this.addMetaSchema(q.meta),v.call(this),q.validateFormats=P}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:q,meta:U,schemaId:L}=this.opts;let P=h;L==="id"&&(P={...h},P.id=P.$id,delete P.$id),U&&q&&this.addMetaSchema(P,P[L],!1)}defaultMeta(){const{meta:q,schemaId:U}=this.opts;return this.opts.defaultMeta=typeof q=="object"?q[U]||q:void 0}validate(q,U){let L;if(typeof q=="string"){if(L=this.getSchema(q),!L)throw new Error(`no schema with key or ref "${q}"`)}else L=this.compile(q);const P=L(U);return"$async"in L||(this.errors=L.errors),P}compile(q,U){const L=this._addSchema(q,U);return L.validate||this._compileSchemaEnv(L)}compileAsync(q,U){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return P.call(this,q,U);async function P(he,ge){await D.call(this,he.$schema);const Se=this._addSchema(he,ge);return Se.validate||A.call(this,Se)}async function D(he){he&&!this.getSchema(he)&&await P.call(this,{$ref:he},!0)}async function A(he){try{return this._compileSchemaEnv(he)}catch(ge){if(!(ge instanceof s.default))throw ge;return J.call(this,ge),await ee.call(this,ge.missingSchema),A.call(this,he)}}function J({missingSchema:he,missingRef:ge}){if(this.refs[he])throw new Error(`AnySchema ${he} is loaded but ${ge} cannot be resolved`)}async function ee(he){const ge=await le.call(this,he);this.refs[he]||await D.call(this,ge.$schema),this.refs[he]||this.addSchema(ge,he,U)}async function le(he){const ge=this._loading[he];if(ge)return ge;try{return await(this._loading[he]=L(he))}finally{delete this._loading[he]}}}addSchema(q,U,L,P=this.opts.validateSchema){if(Array.isArray(q)){for(const A of q)this.addSchema(A,void 0,L,P);return this}let D;if(typeof q=="object"){const{schemaId:A}=this.opts;if(D=q[A],D!==void 0&&typeof D!="string")throw new Error(`schema ${A} must be string`)}return U=(0,l.normalizeId)(U||D),this._checkUnique(U),this.schemas[U]=this._addSchema(q,L,U,P,!0),this}addMetaSchema(q,U,L=this.opts.validateSchema){return this.addSchema(q,U,!0,L),this}validateSchema(q,U){if(typeof q=="boolean")return!0;let L;if(L=q.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const P=this.validate(L,q);if(!P&&U){const D="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(D);else throw new Error(D)}return P}getSchema(q){let U;for(;typeof(U=w.call(this,q))=="string";)q=U;if(U===void 0){const{schemaId:L}=this.opts,P=new o.SchemaEnv({schema:{},schemaId:L});if(U=o.resolveSchema.call(this,P,q),!U)return;this.refs[q]=U}return U.validate||this._compileSchemaEnv(U)}removeSchema(q){if(q instanceof RegExp)return this._removeAllSchemas(this.schemas,q),this._removeAllSchemas(this.refs,q),this;switch(typeof q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const U=w.call(this,q);return typeof U=="object"&&this._cache.delete(U.schema),delete this.schemas[q],delete this.refs[q],this}case"object":{const U=q;this._cache.delete(U);let L=q[this.opts.schemaId];return L&&(L=(0,l.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(q){for(const U of q)this.addKeyword(U);return this}addKeyword(q,U){let L;if(typeof q=="string")L=q,typeof U=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),U.keyword=L);else if(typeof q=="object"&&U===void 0){if(U=q,L=U.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(G.call(this,L,U),!U)return(0,c.eachItem)(L,D=>ue.call(this,D)),this;ie.call(this,U);const P={...U,type:(0,f.getJSONTypes)(U.type),schemaType:(0,f.getJSONTypes)(U.schemaType)};return(0,c.eachItem)(L,P.type.length===0?D=>ue.call(this,D,P):D=>P.type.forEach(A=>ue.call(this,D,P,A))),this}getKeyword(q){const U=this.RULES.all[q];return typeof U=="object"?U.definition:!!U}removeKeyword(q){const{RULES:U}=this;delete U.keywords[q],delete U.all[q];for(const L of U.rules){const P=L.rules.findIndex(D=>D.keyword===q);P>=0&&L.rules.splice(P,1)}return this}addFormat(q,U){return typeof U=="string"&&(U=new RegExp(U)),this.formats[q]=U,this}errorsText(q=this.errors,{separator:U=", ",dataVar:L="data"}={}){return!q||q.length===0?"No errors":q.map(P=>`${L}${P.instancePath} ${P.message}`).reduce((P,D)=>P+U+D)}$dataMetaSchema(q,U){const L=this.RULES.all;q=JSON.parse(JSON.stringify(q));for(const P of U){const D=P.split("/").slice(1);let A=q;for(const J of D)A=A[J];for(const J in L){const ee=L[J];if(typeof ee!="object")continue;const{$data:le}=ee.definition,he=A[J];le&&he&&(A[J]=ve(he))}}return q}_removeAllSchemas(q,U){for(const L in q){const P=q[L];(!U||U.test(L))&&(typeof P=="string"?delete q[L]:P&&!P.meta&&(this._cache.delete(P.schema),delete q[L]))}}_addSchema(q,U,L,P=this.opts.validateSchema,D=this.opts.addUsedSchema){let A;const{schemaId:J}=this.opts;if(typeof q=="object")A=q[J];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof q!="boolean")throw new Error("schema must be object or boolean")}let ee=this._cache.get(q);if(ee!==void 0)return ee;L=(0,l.normalizeId)(A||L);const le=l.getSchemaRefs.call(this,q,L);return ee=new o.SchemaEnv({schema:q,schemaId:J,meta:U,baseId:L,localRefs:le}),this._cache.set(ee.schema,ee),D&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=ee),P&&this.validateSchema(q,!0),ee}_checkUnique(q){if(this.schemas[q]||this.refs[q])throw new Error(`schema with key or id "${q}" already exists`)}_compileSchemaEnv(q){if(q.meta?this._compileMetaSchema(q):o.compileSchema.call(this,q),!q.validate)throw new Error("ajv implementation error");return q.validate}_compileMetaSchema(q){const U=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,q)}finally{this.opts=U}}}k.ValidationError=r.default,k.MissingRefError=s.default,t.default=k;function _(W,q,U,L="error"){for(const P in W){const D=P;D in q&&this.logger[L](`${U}: option ${P}. ${W[D]}`)}}function w(W){return W=(0,l.normalizeId)(W),this.schemas[W]||this.refs[W]}function v(){const W=this.opts.schemas;if(W)if(Array.isArray(W))this.addSchema(W);else for(const q in W)this.addSchema(W[q],q)}function R(){for(const W in this.opts.formats){const q=this.opts.formats[W];q&&this.addFormat(W,q)}}function C(W){if(Array.isArray(W)){this.addVocabulary(W);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const q in W){const U=W[q];U.keyword||(U.keyword=q),this.addKeyword(U)}}function N(){const W={...this.opts};for(const q of g)delete W[q];return W}const m={log(){},warn(){},error(){}};function E(W){if(W===!1)return m;if(W===void 0)return console;if(W.log&&W.warn&&W.error)return W;throw new Error("logger must implement log, warn and error methods")}const T=/^[a-z_$][a-z0-9_$:-]*$/i;function G(W,q){const{RULES:U}=this;if((0,c.eachItem)(W,L=>{if(U.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!T.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!q&&q.$data&&!("code"in q||"validate"in q))throw new Error('$data keyword must have "code" or "validate" function')}function ue(W,q,U){var L;const P=q==null?void 0:q.post;if(U&&P)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:D}=this;let A=P?D.post:D.rules.find(({type:ee})=>ee===U);if(A||(A={type:U,rules:[]},D.rules.push(A)),D.keywords[W]=!0,!q)return;const J={keyword:W,definition:{...q,type:(0,f.getJSONTypes)(q.type),schemaType:(0,f.getJSONTypes)(q.schemaType)}};q.before?Z.call(this,A,J,q.before):A.rules.push(J),D.all[W]=J,(L=q.implements)===null||L===void 0||L.forEach(ee=>this.addKeyword(ee))}function Z(W,q,U){const L=W.rules.findIndex(P=>P.keyword===U);L>=0?W.rules.splice(L,0,q):(W.rules.push(q),this.logger.warn(`rule ${U} is not defined`))}function ie(W){let{metaSchema:q}=W;q!==void 0&&(W.$data&&this.opts.$data&&(q=ve(q)),W.validateSchema=this.compile(q,!0))}const Ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ve(W){return{anyOf:[W,Ee]}}})(ai);var bs={},$s={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});const ju={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ys.default=ju;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.callRef=$n.getValidate=void 0;const Au=Mn,No=De,$t=Ce,Nn=qt,To=yt,nr=_e,Mu={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:s,schemaEnv:a,validateName:o,opts:i,self:l}=r,{root:f}=a;if((n==="#"||n==="#/")&&s===f.baseId)return h();const c=To.resolveRef.call(l,f,s,n);if(c===void 0)throw new Au.default(r.opts.uriResolver,s,n);if(c instanceof To.SchemaEnv)return d(c);return $(c);function h(){if(a===f)return ur(t,o,a,a.$async);const g=e.scopeValue("root",{ref:f});return ur(t,(0,$t._)`${g}.validate`,f,f.$async)}function d(g){const b=Wi(t,g);ur(t,b,g,g.$async)}function $(g){const b=e.scopeValue("schema",i.code.source===!0?{ref:g,code:(0,$t.stringify)(g)}:{ref:g}),y=e.name("valid"),u=t.subschema({schema:g,dataTypes:[],schemaPath:$t.nil,topSchemaRef:b,errSchemaPath:n},y);t.mergeEvaluated(u),t.ok(y)}}};function Wi(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,$t._)`${n.scopeValue("wrapper",{ref:e})}.validate`}$n.getValidate=Wi;function ur(t,e,n,r){const{gen:s,it:a}=t,{allErrors:o,schemaEnv:i,opts:l}=a,f=l.passContext?Nn.default.this:$t.nil;r?c():h();function c(){if(!i.$async)throw new Error("async schema referenced by sync schema");const g=s.let("valid");s.try(()=>{s.code((0,$t._)`await ${(0,No.callValidateCode)(t,e,f)}`),$(e),o||s.assign(g,!0)},b=>{s.if((0,$t._)`!(${b} instanceof ${a.ValidationError})`,()=>s.throw(b)),d(b),o||s.assign(g,!1)}),t.ok(g)}function h(){t.result((0,No.callValidateCode)(t,e,f),()=>$(e),()=>d(e))}function d(g){const b=(0,$t._)`${g}.errors`;s.assign(Nn.default.vErrors,(0,$t._)`${Nn.default.vErrors} === null ? ${b} : ${Nn.default.vErrors}.concat(${b})`),s.assign(Nn.default.errors,(0,$t._)`${Nn.default.vErrors}.length`)}function $(g){var b;if(!a.opts.unevaluated)return;const y=(b=n==null?void 0:n.validate)===null||b===void 0?void 0:b.evaluated;if(a.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(a.props=nr.mergeEvaluated.props(s,y.props,a.props));else{const u=s.var("props",(0,$t._)`${g}.evaluated.props`);a.props=nr.mergeEvaluated.props(s,u,a.props,$t.Name)}if(a.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(a.items=nr.mergeEvaluated.items(s,y.items,a.items));else{const u=s.var("items",(0,$t._)`${g}.evaluated.items`);a.items=nr.mergeEvaluated.items(s,u,a.items,$t.Name)}}}$n.callRef=ur;$n.default=Mu;Object.defineProperty($s,"__esModule",{value:!0});const Vu=ys,zu=$n,Lu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Vu.default,zu.default];$s.default=Lu;var ws={},ks={};Object.defineProperty(ks,"__esModule",{value:!0});const vr=Ce,fn=vr.operators,br={maximum:{okStr:"<=",ok:fn.LTE,fail:fn.GT},minimum:{okStr:">=",ok:fn.GTE,fail:fn.LT},exclusiveMaximum:{okStr:"<",ok:fn.LT,fail:fn.GTE},exclusiveMinimum:{okStr:">",ok:fn.GT,fail:fn.LTE}},Fu={message:({keyword:t,schemaCode:e})=>(0,vr.str)`must be ${br[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,vr._)`{comparison: ${br[t].okStr}, limit: ${e}}`},qu={keyword:Object.keys(br),type:"number",schemaType:"number",$data:!0,error:Fu,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,vr._)`${n} ${br[e].fail} ${r} || isNaN(${n})`)}};ks.default=qu;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});const Gn=Ce,Uu={message:({schemaCode:t})=>(0,Gn.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Gn._)`{multipleOf: ${t}}`},Hu={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Uu,code(t){const{gen:e,data:n,schemaCode:r,it:s}=t,a=s.opts.multipleOfPrecision,o=e.let("res"),i=a?(0,Gn._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${a}`:(0,Gn._)`${o} !== parseInt(${o})`;t.fail$data((0,Gn._)`(${r} === 0 || (${o} = ${n}/${r}, ${i}))`)}};Es.default=Hu;var Ss={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});function Xi(t){const e=t.length;let n=0,r=0,s;for(;r<e;)n++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<e&&(s=t.charCodeAt(r),(s&64512)===56320&&r++);return n}Ps.default=Xi;Xi.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ss,"__esModule",{value:!0});const gn=Ce,Ku=_e,Bu=Ps,Gu={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,gn.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,gn._)`{limit: ${t}}`},Ju={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Gu,code(t){const{keyword:e,data:n,schemaCode:r,it:s}=t,a=e==="maxLength"?gn.operators.GT:gn.operators.LT,o=s.opts.unicode===!1?(0,gn._)`${n}.length`:(0,gn._)`${(0,Ku.useFunc)(t.gen,Bu.default)}(${n})`;t.fail$data((0,gn._)`${o} ${a} ${r}`)}};Ss.default=Ju;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});const Wu=De,$r=Ce,Xu={message:({schemaCode:t})=>(0,$r.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,$r._)`{pattern: ${t}}`},Yu={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Xu,code(t){const{data:e,$data:n,schema:r,schemaCode:s,it:a}=t,o=a.opts.unicodeRegExp?"u":"",i=n?(0,$r._)`(new RegExp(${s}, ${o}))`:(0,Wu.usePattern)(t,r);t.fail$data((0,$r._)`!${i}.test(${e})`)}};Cs.default=Yu;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});const Jn=Ce,Zu={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,Jn.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,Jn._)`{limit: ${t}}`},Qu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Zu,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxProperties"?Jn.operators.GT:Jn.operators.LT;t.fail$data((0,Jn._)`Object.keys(${n}).length ${s} ${r}`)}};Ns.default=Qu;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});const qn=De,Wn=Ce,xu=_e,ed={message:({params:{missingProperty:t}})=>(0,Wn.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Wn._)`{missingProperty: ${t}}`},td={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ed,code(t){const{gen:e,schema:n,schemaCode:r,data:s,$data:a,it:o}=t,{opts:i}=o;if(!a&&n.length===0)return;const l=n.length>=i.loopRequired;if(o.allErrors?f():c(),i.strictRequired){const $=t.parentSchema.properties,{definedProperties:g}=t.it;for(const b of n)if(($==null?void 0:$[b])===void 0&&!g.has(b)){const y=o.schemaEnv.baseId+o.errSchemaPath,u=`required property "${b}" is not defined at "${y}" (strictRequired)`;(0,xu.checkStrictMode)(o,u,o.opts.strictRequired)}}function f(){if(l||a)t.block$data(Wn.nil,h);else for(const $ of n)(0,qn.checkReportMissingProp)(t,$)}function c(){const $=e.let("missing");if(l||a){const g=e.let("valid",!0);t.block$data(g,()=>d($,g)),t.ok(g)}else e.if((0,qn.checkMissingProp)(t,n,$)),(0,qn.reportMissingProp)(t,$),e.else()}function h(){e.forOf("prop",r,$=>{t.setParams({missingProperty:$}),e.if((0,qn.noPropertyInData)(e,s,$,i.ownProperties),()=>t.error())})}function d($,g){t.setParams({missingProperty:$}),e.forOf($,r,()=>{e.assign(g,(0,qn.propertyInData)(e,s,$,i.ownProperties)),e.if((0,Wn.not)(g),()=>{t.error(),e.break()})},Wn.nil)}}};Ts.default=td;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});const Xn=Ce,nd={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,Xn.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,Xn._)`{limit: ${t}}`},rd={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:nd,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxItems"?Xn.operators.GT:Xn.operators.LT;t.fail$data((0,Xn._)`${n}.length ${s} ${r}`)}};Is.default=rd;var Os={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});const Yi=wi;Yi.code='require("ajv/dist/runtime/equal").default';Qn.default=Yi;Object.defineProperty(Os,"__esModule",{value:!0});const Lr=it,ft=Ce,sd=_e,od=Qn,ad={message:({params:{i:t,j:e}})=>(0,ft.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,ft._)`{i: ${t}, j: ${e}}`},id={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ad,code(t){const{gen:e,data:n,$data:r,schema:s,parentSchema:a,schemaCode:o,it:i}=t;if(!r&&!s)return;const l=e.let("valid"),f=a.items?(0,Lr.getSchemaTypes)(a.items):[];t.block$data(l,c,(0,ft._)`${o} === false`),t.ok(l);function c(){const g=e.let("i",(0,ft._)`${n}.length`),b=e.let("j");t.setParams({i:g,j:b}),e.assign(l,!0),e.if((0,ft._)`${g} > 1`,()=>(h()?d:$)(g,b))}function h(){return f.length>0&&!f.some(g=>g==="object"||g==="array")}function d(g,b){const y=e.name("item"),u=(0,Lr.checkDataTypes)(f,y,i.opts.strictNumbers,Lr.DataType.Wrong),p=e.const("indices",(0,ft._)`{}`);e.for((0,ft._)`;${g}--;`,()=>{e.let(y,(0,ft._)`${n}[${g}]`),e.if(u,(0,ft._)`continue`),f.length>1&&e.if((0,ft._)`typeof ${y} == "string"`,(0,ft._)`${y} += "_"`),e.if((0,ft._)`typeof ${p}[${y}] == "number"`,()=>{e.assign(b,(0,ft._)`${p}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,ft._)`${p}[${y}] = ${g}`)})}function $(g,b){const y=(0,sd.useFunc)(e,od.default),u=e.name("outer");e.label(u).for((0,ft._)`;${g}--;`,()=>e.for((0,ft._)`${b} = ${g}; ${b}--;`,()=>e.if((0,ft._)`${y}(${n}[${g}], ${n}[${b}])`,()=>{t.error(),e.assign(l,!1).break(u)})))}}};Os.default=id;var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});const Wr=Ce,ld=_e,fd=Qn,cd={message:"must be equal to constant",params:({schemaCode:t})=>(0,Wr._)`{allowedValue: ${t}}`},ud={keyword:"const",$data:!0,error:cd,code(t){const{gen:e,data:n,$data:r,schemaCode:s,schema:a}=t;r||a&&typeof a=="object"?t.fail$data((0,Wr._)`!${(0,ld.useFunc)(e,fd.default)}(${n}, ${s})`):t.fail((0,Wr._)`${a} !== ${n}`)}};Ds.default=ud;var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});const Kn=Ce,dd=_e,_d=Qn,hd={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Kn._)`{allowedValues: ${t}}`},md={keyword:"enum",schemaType:"array",$data:!0,error:hd,code(t){const{gen:e,data:n,$data:r,schema:s,schemaCode:a,it:o}=t;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const i=s.length>=o.opts.loopEnum;let l;const f=()=>l??(l=(0,dd.useFunc)(e,_d.default));let c;if(i||r)c=e.let("valid"),t.block$data(c,h);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const $=e.const("vSchema",a);c=(0,Kn.or)(...s.map((g,b)=>d($,b)))}t.pass(c);function h(){e.assign(c,!1),e.forOf("v",a,$=>e.if((0,Kn._)`${f()}(${n}, ${$})`,()=>e.assign(c,!0).break()))}function d($,g){const b=s[g];return typeof b=="object"&&b!==null?(0,Kn._)`${f()}(${n}, ${$}[${g}])`:(0,Kn._)`${n} === ${b}`}}};Rs.default=md;Object.defineProperty(ws,"__esModule",{value:!0});const pd=ks,gd=Es,vd=Ss,bd=Cs,$d=Ns,yd=Ts,wd=Is,kd=Os,Ed=Ds,Sd=Rs,Pd=[pd.default,gd.default,vd.default,bd.default,$d.default,yd.default,wd.default,kd.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Ed.default,Sd.default];ws.default=Pd;var js={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.validateAdditionalItems=void 0;const vn=Ce,Xr=_e,Cd={message:({params:{len:t}})=>(0,vn.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,vn._)`{limit: ${t}}`},Nd={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Cd,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,Xr.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Zi(t,r)}};function Zi(t,e){const{gen:n,schema:r,data:s,keyword:a,it:o}=t;o.items=!0;const i=n.const("len",(0,vn._)`${s}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,vn._)`${i} <= ${e.length}`);else if(typeof r=="object"&&!(0,Xr.alwaysValidSchema)(o,r)){const f=n.var("valid",(0,vn._)`${i} <= ${e.length}`);n.if((0,vn.not)(f),()=>l(f)),t.ok(f)}function l(f){n.forRange("i",e.length,i,c=>{t.subschema({keyword:a,dataProp:c,dataPropType:Xr.Type.Num},f),o.allErrors||n.if((0,vn.not)(f),()=>n.break())})}}Vn.validateAdditionalItems=Zi;Vn.default=Nd;var As={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.validateTuple=void 0;const Io=Ce,dr=_e,Td=De,Id={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return Qi(t,"additionalItems",e);n.items=!0,!(0,dr.alwaysValidSchema)(n,e)&&t.ok((0,Td.validateArray)(t))}};function Qi(t,e,n=t.schema){const{gen:r,parentSchema:s,data:a,keyword:o,it:i}=t;c(s),i.opts.unevaluated&&n.length&&i.items!==!0&&(i.items=dr.mergeEvaluated.items(r,n.length,i.items));const l=r.name("valid"),f=r.const("len",(0,Io._)`${a}.length`);n.forEach((h,d)=>{(0,dr.alwaysValidSchema)(i,h)||(r.if((0,Io._)`${f} > ${d}`,()=>t.subschema({keyword:o,schemaProp:d,dataProp:d},l)),t.ok(l))});function c(h){const{opts:d,errSchemaPath:$}=i,g=n.length,b=g===h.minItems&&(g===h.maxItems||h[e]===!1);if(d.strictTuples&&!b){const y=`"${o}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${$}"`;(0,dr.checkStrictMode)(i,y,d.strictTuples)}}}zn.validateTuple=Qi;zn.default=Id;Object.defineProperty(As,"__esModule",{value:!0});const Od=zn,Dd={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Od.validateTuple)(t,"items")};As.default=Dd;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});const Oo=Ce,Rd=_e,jd=De,Ad=Vn,Md={message:({params:{len:t}})=>(0,Oo.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Oo._)`{limit: ${t}}`},Vd={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Md,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:s}=n;r.items=!0,!(0,Rd.alwaysValidSchema)(r,e)&&(s?(0,Ad.validateAdditionalItems)(t,s):t.ok((0,jd.validateArray)(t)))}};Ms.default=Vd;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});const Nt=Ce,rr=_e,zd={message:({params:{min:t,max:e}})=>e===void 0?(0,Nt.str)`must contain at least ${t} valid item(s)`:(0,Nt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Nt._)`{minContains: ${t}}`:(0,Nt._)`{minContains: ${t}, maxContains: ${e}}`},Ld={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:zd,code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:a}=t;let o,i;const{minContains:l,maxContains:f}=r;a.opts.next?(o=l===void 0?1:l,i=f):o=1;const c=e.const("len",(0,Nt._)`${s}.length`);if(t.setParams({min:o,max:i}),i===void 0&&o===0){(0,rr.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(i!==void 0&&o>i){(0,rr.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,rr.alwaysValidSchema)(a,n)){let b=(0,Nt._)`${c} >= ${o}`;i!==void 0&&(b=(0,Nt._)`${b} && ${c} <= ${i}`),t.pass(b);return}a.items=!0;const h=e.name("valid");i===void 0&&o===1?$(h,()=>e.if(h,()=>e.break())):o===0?(e.let(h,!0),i!==void 0&&e.if((0,Nt._)`${s}.length > 0`,d)):(e.let(h,!1),d()),t.result(h,()=>t.reset());function d(){const b=e.name("_valid"),y=e.let("count",0);$(b,()=>e.if(b,()=>g(y)))}function $(b,y){e.forRange("i",0,c,u=>{t.subschema({keyword:"contains",dataProp:u,dataPropType:rr.Type.Num,compositeRule:!0},b),y()})}function g(b){e.code((0,Nt._)`${b}++`),i===void 0?e.if((0,Nt._)`${b} >= ${o}`,()=>e.assign(h,!0).break()):(e.if((0,Nt._)`${b} > ${i}`,()=>e.assign(h,!1).break()),o===1?e.assign(h,!0):e.if((0,Nt._)`${b} >= ${o}`,()=>e.assign(h,!0)))}}};Vs.default=Ld;var xi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Ce,n=_e,r=De;t.error={message:({params:{property:l,depsCount:f,deps:c}})=>{const h=f===1?"property":"properties";return(0,e.str)`must have ${h} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:f,deps:c,missingProperty:h}})=>(0,e._)`{property: ${l},
    missingProperty: ${h},
    depsCount: ${f},
    deps: ${c}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[f,c]=a(l);o(l,f),i(l,c)}};function a({schema:l}){const f={},c={};for(const h in l){if(h==="__proto__")continue;const d=Array.isArray(l[h])?f:c;d[h]=l[h]}return[f,c]}function o(l,f=l.schema){const{gen:c,data:h,it:d}=l;if(Object.keys(f).length===0)return;const $=c.let("missing");for(const g in f){const b=f[g];if(b.length===0)continue;const y=(0,r.propertyInData)(c,h,g,d.opts.ownProperties);l.setParams({property:g,depsCount:b.length,deps:b.join(", ")}),d.allErrors?c.if(y,()=>{for(const u of b)(0,r.checkReportMissingProp)(l,u)}):(c.if((0,e._)`${y} && (${(0,r.checkMissingProp)(l,b,$)})`),(0,r.reportMissingProp)(l,$),c.else())}}t.validatePropertyDeps=o;function i(l,f=l.schema){const{gen:c,data:h,keyword:d,it:$}=l,g=c.name("valid");for(const b in f)(0,n.alwaysValidSchema)($,f[b])||(c.if((0,r.propertyInData)(c,h,b,$.opts.ownProperties),()=>{const y=l.subschema({keyword:d,schemaProp:b},g);l.mergeValidEvaluated(y,g)},()=>c.var(g,!0)),l.ok(g))}t.validateSchemaDeps=i,t.default=s})(xi);var zs={};Object.defineProperty(zs,"__esModule",{value:!0});const el=Ce,Fd=_e,qd={message:"property name must be valid",params:({params:t})=>(0,el._)`{propertyName: ${t.propertyName}}`},Ud={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:qd,code(t){const{gen:e,schema:n,data:r,it:s}=t;if((0,Fd.alwaysValidSchema)(s,n))return;const a=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},a),e.if((0,el.not)(a),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(a)}};zs.default=Ud;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});const sr=De,Vt=Ce,Hd=qt,or=_e,Kd={message:"must NOT have additional properties",params:({params:t})=>(0,Vt._)`{additionalProperty: ${t.additionalProperty}}`},Bd={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Kd,code(t){const{gen:e,schema:n,parentSchema:r,data:s,errsCount:a,it:o}=t;if(!a)throw new Error("ajv implementation error");const{allErrors:i,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,or.alwaysValidSchema)(o,n))return;const f=(0,sr.allSchemaProperties)(r.properties),c=(0,sr.allSchemaProperties)(r.patternProperties);h(),t.ok((0,Vt._)`${a} === ${Hd.default.errors}`);function h(){e.forIn("key",s,y=>{!f.length&&!c.length?g(y):e.if(d(y),()=>g(y))})}function d(y){let u;if(f.length>8){const p=(0,or.schemaRefOrVal)(o,r.properties,"properties");u=(0,sr.isOwnProperty)(e,p,y)}else f.length?u=(0,Vt.or)(...f.map(p=>(0,Vt._)`${y} === ${p}`)):u=Vt.nil;return c.length&&(u=(0,Vt.or)(u,...c.map(p=>(0,Vt._)`${(0,sr.usePattern)(t,p)}.test(${y})`))),(0,Vt.not)(u)}function $(y){e.code((0,Vt._)`delete ${s}[${y}]`)}function g(y){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){$(y);return}if(n===!1){t.setParams({additionalProperty:y}),t.error(),i||e.break();return}if(typeof n=="object"&&!(0,or.alwaysValidSchema)(o,n)){const u=e.name("valid");l.removeAdditional==="failing"?(b(y,u,!1),e.if((0,Vt.not)(u),()=>{t.reset(),$(y)})):(b(y,u),i||e.if((0,Vt.not)(u),()=>e.break()))}}function b(y,u,p){const I={keyword:"additionalProperties",dataProp:y,dataPropType:or.Type.Str};p===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(I,u)}}};Ir.default=Bd;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});const Gd=Tt,Do=De,Fr=_e,Ro=Ir,Jd={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:a}=t;a.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Ro.default.code(new Gd.KeywordCxt(a,Ro.default,"additionalProperties"));const o=(0,Do.allSchemaProperties)(n);for(const h of o)a.definedProperties.add(h);a.opts.unevaluated&&o.length&&a.props!==!0&&(a.props=Fr.mergeEvaluated.props(e,(0,Fr.toHash)(o),a.props));const i=o.filter(h=>!(0,Fr.alwaysValidSchema)(a,n[h]));if(i.length===0)return;const l=e.name("valid");for(const h of i)f(h)?c(h):(e.if((0,Do.propertyInData)(e,s,h,a.opts.ownProperties)),c(h),a.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(l);function f(h){return a.opts.useDefaults&&!a.compositeRule&&n[h].default!==void 0}function c(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},l)}}};Ls.default=Jd;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});const jo=De,ar=Ce,Ao=_e,Mo=_e,Wd={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:s,it:a}=t,{opts:o}=a,i=(0,jo.allSchemaProperties)(n),l=i.filter(b=>(0,Ao.alwaysValidSchema)(a,n[b]));if(i.length===0||l.length===i.length&&(!a.opts.unevaluated||a.props===!0))return;const f=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");a.props!==!0&&!(a.props instanceof ar.Name)&&(a.props=(0,Mo.evaluatedPropsToName)(e,a.props));const{props:h}=a;d();function d(){for(const b of i)f&&$(b),a.allErrors?g(b):(e.var(c,!0),g(b),e.if(c))}function $(b){for(const y in f)new RegExp(b).test(y)&&(0,Ao.checkStrictMode)(a,`property ${y} matches pattern ${b} (use allowMatchingProperties)`)}function g(b){e.forIn("key",r,y=>{e.if((0,ar._)`${(0,jo.usePattern)(t,b)}.test(${y})`,()=>{const u=l.includes(b);u||t.subschema({keyword:"patternProperties",schemaProp:b,dataProp:y,dataPropType:Mo.Type.Str},c),a.opts.unevaluated&&h!==!0?e.assign((0,ar._)`${h}[${y}]`,!0):!u&&!a.allErrors&&e.if((0,ar.not)(c),()=>e.break())})})}}};Fs.default=Wd;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});const Xd=_e,Yd={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,Xd.alwaysValidSchema)(r,n)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};qs.default=Yd;var Us={};Object.defineProperty(Us,"__esModule",{value:!0});const Zd=De,Qd={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Zd.validateUnion,error:{message:"must match a schema in anyOf"}};Us.default=Qd;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});const _r=Ce,xd=_e,e_={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,_r._)`{passingSchemas: ${t.passing}}`},t_={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:e_,code(t){const{gen:e,schema:n,parentSchema:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const a=n,o=e.let("valid",!1),i=e.let("passing",null),l=e.name("_valid");t.setParams({passing:i}),e.block(f),t.result(o,()=>t.reset(),()=>t.error(!0));function f(){a.forEach((c,h)=>{let d;(0,xd.alwaysValidSchema)(s,c)?e.var(l,!0):d=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},l),h>0&&e.if((0,_r._)`${l} && ${o}`).assign(o,!1).assign(i,(0,_r._)`[${i}, ${h}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(i,h),d&&t.mergeEvaluated(d,_r.Name)})})}}};Hs.default=t_;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});const n_=_e,r_={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=e.name("valid");n.forEach((a,o)=>{if((0,n_.alwaysValidSchema)(r,a))return;const i=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(i)})}};Ks.default=r_;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});const yr=Ce,tl=_e,s_={message:({params:t})=>(0,yr.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,yr._)`{failingKeyword: ${t.ifClause}}`},o_={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:s_,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,tl.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=Vo(r,"then"),a=Vo(r,"else");if(!s&&!a)return;const o=e.let("valid",!0),i=e.name("_valid");if(l(),t.reset(),s&&a){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(i,f("then",c),f("else",c))}else s?e.if(i,f("then")):e.if((0,yr.not)(i),f("else"));t.pass(o,()=>t.error(!0));function l(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);t.mergeEvaluated(c)}function f(c,h){return()=>{const d=t.subschema({keyword:c},i);e.assign(o,i),t.mergeValidEvaluated(d,o),h?e.assign(h,(0,yr._)`${c}`):t.setParams({ifClause:c})}}}};function Vo(t,e){const n=t.schema[e];return n!==void 0&&!(0,tl.alwaysValidSchema)(t,n)}Bs.default=o_;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});const a_=_e,i_={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,a_.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};Gs.default=i_;Object.defineProperty(js,"__esModule",{value:!0});const l_=Vn,f_=As,c_=zn,u_=Ms,d_=Vs,__=xi,h_=zs,m_=Ir,p_=Ls,g_=Fs,v_=qs,b_=Us,$_=Hs,y_=Ks,w_=Bs,k_=Gs;function E_(t=!1){const e=[v_.default,b_.default,$_.default,y_.default,w_.default,k_.default,h_.default,m_.default,__.default,p_.default,g_.default];return t?e.push(f_.default,u_.default):e.push(l_.default,c_.default),e.push(d_.default),e}js.default=E_;var Js={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});const rt=Ce,S_={message:({schemaCode:t})=>(0,rt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,rt._)`{format: ${t}}`},P_={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:S_,code(t,e){const{gen:n,data:r,$data:s,schema:a,schemaCode:o,it:i}=t,{opts:l,errSchemaPath:f,schemaEnv:c,self:h}=i;if(!l.validateFormats)return;s?d():$();function d(){const g=n.scopeValue("formats",{ref:h.formats,code:l.code.formats}),b=n.const("fDef",(0,rt._)`${g}[${o}]`),y=n.let("fType"),u=n.let("format");n.if((0,rt._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>n.assign(y,(0,rt._)`${b}.type || "string"`).assign(u,(0,rt._)`${b}.validate`),()=>n.assign(y,(0,rt._)`"string"`).assign(u,b)),t.fail$data((0,rt.or)(p(),I()));function p(){return l.strictSchema===!1?rt.nil:(0,rt._)`${o} && !${u}`}function I(){const k=c.$async?(0,rt._)`(${b}.async ? await ${u}(${r}) : ${u}(${r}))`:(0,rt._)`${u}(${r})`,_=(0,rt._)`(typeof ${u} == "function" ? ${k} : ${u}.test(${r}))`;return(0,rt._)`${u} && ${u} !== true && ${y} === ${e} && !${_}`}}function $(){const g=h.formats[a];if(!g){p();return}if(g===!0)return;const[b,y,u]=I(g);b===e&&t.pass(k());function p(){if(l.strictSchema===!1){h.logger.warn(_());return}throw new Error(_());function _(){return`unknown format "${a}" ignored in schema at path "${f}"`}}function I(_){const w=_ instanceof RegExp?(0,rt.regexpCode)(_):l.code.formats?(0,rt._)`${l.code.formats}${(0,rt.getProperty)(a)}`:void 0,v=n.scopeValue("formats",{key:a,ref:_,code:w});return typeof _=="object"&&!(_ instanceof RegExp)?[_.type||"string",_.validate,(0,rt._)`${v}.validate`]:["string",_,v]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!c.$async)throw new Error("async format in sync schema");return(0,rt._)`await ${u}(${r})`}return typeof y=="function"?(0,rt._)`${u}(${r})`:(0,rt._)`${u}.test(${r})`}}}};Ws.default=P_;Object.defineProperty(Js,"__esModule",{value:!0});const C_=Ws,N_=[C_.default];Js.default=N_;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.contentVocabulary=jn.metadataVocabulary=void 0;jn.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];jn.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(bs,"__esModule",{value:!0});const T_=$s,I_=ws,O_=js,D_=Js,zo=jn,R_=[T_.default,I_.default,(0,O_.default)(),D_.default,zo.metadataVocabulary,zo.contentVocabulary];bs.default=R_;var Xs={},Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.DiscrError=void 0;var Lo;(function(t){t.Tag="tag",t.Mapping="mapping"})(Lo||(Or.DiscrError=Lo={}));Object.defineProperty(Xs,"__esModule",{value:!0});const Tn=Ce,Yr=Or,Fo=yt,j_=Mn,A_=_e,M_={message:({params:{discrError:t,tagName:e}})=>t===Yr.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Tn._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},V_={keyword:"discriminator",type:"object",schemaType:"object",error:M_,code(t){const{gen:e,data:n,schema:r,parentSchema:s,it:a}=t,{oneOf:o}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=r.propertyName;if(typeof i!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),f=e.const("tag",(0,Tn._)`${n}${(0,Tn.getProperty)(i)}`);e.if((0,Tn._)`typeof ${f} == "string"`,()=>c(),()=>t.error(!1,{discrError:Yr.DiscrError.Tag,tag:f,tagName:i})),t.ok(l);function c(){const $=d();e.if(!1);for(const g in $)e.elseIf((0,Tn._)`${f} === ${g}`),e.assign(l,h($[g]));e.else(),t.error(!1,{discrError:Yr.DiscrError.Mapping,tag:f,tagName:i}),e.endIf()}function h($){const g=e.name("valid"),b=t.subschema({keyword:"oneOf",schemaProp:$},g);return t.mergeEvaluated(b,Tn.Name),g}function d(){var $;const g={},b=u(s);let y=!0;for(let k=0;k<o.length;k++){let _=o[k];if(_!=null&&_.$ref&&!(0,A_.schemaHasRulesButRef)(_,a.self.RULES)){const v=_.$ref;if(_=Fo.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,v),_ instanceof Fo.SchemaEnv&&(_=_.schema),_===void 0)throw new j_.default(a.opts.uriResolver,a.baseId,v)}const w=($=_==null?void 0:_.properties)===null||$===void 0?void 0:$[i];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);y=y&&(b||u(_)),p(w,k)}if(!y)throw new Error(`discriminator: "${i}" must be required`);return g;function u({required:k}){return Array.isArray(k)&&k.includes(i)}function p(k,_){if(k.const)I(k.const,_);else if(k.enum)for(const w of k.enum)I(w,_);else throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`)}function I(k,_){if(typeof k!="string"||k in g)throw new Error(`discriminator: "${i}" values must be unique strings`);g[k]=_}}}};Xs.default=V_;const z_="http://json-schema.org/draft-07/schema#",L_="http://json-schema.org/draft-07/schema#",F_="Core schema meta-schema",q_={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},U_=["object","boolean"],H_={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},K_={$schema:z_,$id:L_,title:F_,definitions:q_,type:U_,properties:H_,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=ai,r=bs,s=Xs,a=K_,o=["/properties"],i="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(a,o):a;this.addMetaSchema(g,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}e.Ajv=l,t.exports=e=l,t.exports.Ajv=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var f=Tt;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var c=Ce;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var h=Zn;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return h.default}});var d=Mn;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Ur,Ur.exports);var Ys=Ur.exports;const B_=ts(Ys);var Zr={exports:{}},nl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(m,E){return{validate:m,compare:E}}t.fullFormats={date:e(a,o),time:e(l(!0),f),"date-time":e(d(!0),$),"iso-time":e(l(),c),"iso-date-time":e(d(),g),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:u,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:N,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:I,int32:{type:"number",validate:w},int64:{type:"number",validate:v},float:{type:"number",validate:R},double:{type:"number",validate:R},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,$),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,g),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(m){return m%4===0&&(m%100!==0||m%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(m){const E=r.exec(m);if(!E)return!1;const T=+E[1],G=+E[2],ue=+E[3];return G>=1&&G<=12&&ue>=1&&ue<=(G===2&&n(T)?29:s[G])}function o(m,E){if(m&&E)return m>E?1:m<E?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(m){return function(T){const G=i.exec(T);if(!G)return!1;const ue=+G[1],Z=+G[2],ie=+G[3],Ee=G[4],ve=G[5]==="-"?-1:1,W=+(G[6]||0),q=+(G[7]||0);if(W>23||q>59||m&&!Ee)return!1;if(ue<=23&&Z<=59&&ie<60)return!0;const U=Z-q*ve,L=ue-W*ve-(U<0?1:0);return(L===23||L===-1)&&(U===59||U===-1)&&ie<61}}function f(m,E){if(!(m&&E))return;const T=new Date("2020-01-01T"+m).valueOf(),G=new Date("2020-01-01T"+E).valueOf();if(T&&G)return T-G}function c(m,E){if(!(m&&E))return;const T=i.exec(m),G=i.exec(E);if(T&&G)return m=T[1]+T[2]+T[3],E=G[1]+G[2]+G[3],m>E?1:m<E?-1:0}const h=/t|\s/i;function d(m){const E=l(m);return function(G){const ue=G.split(h);return ue.length===2&&a(ue[0])&&E(ue[1])}}function $(m,E){if(!(m&&E))return;const T=new Date(m).valueOf(),G=new Date(E).valueOf();if(T&&G)return T-G}function g(m,E){if(!(m&&E))return;const[T,G]=m.split(h),[ue,Z]=E.split(h),ie=o(T,ue);if(ie!==void 0)return ie||f(G,Z)}const b=/\/|:/,y=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function u(m){return b.test(m)&&y.test(m)}const p=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function I(m){return p.lastIndex=0,p.test(m)}const k=-(2**31),_=2**31-1;function w(m){return Number.isInteger(m)&&m<=_&&m>=k}function v(m){return Number.isInteger(m)}function R(){return!0}const C=/[^\\]\\Z/;function N(m){if(C.test(m))return!1;try{return new RegExp(m),!0}catch{return!1}}})(nl);var rl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=Ys,n=Ce,r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:i,schemaCode:l})=>(0,n.str)`should be ${s[i].okStr} ${l}`,params:({keyword:i,schemaCode:l})=>(0,n._)`{comparison: ${s[i].okStr}, limit: ${l}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:a,code(i){const{gen:l,data:f,schemaCode:c,keyword:h,it:d}=i,{opts:$,self:g}=d;if(!$.validateFormats)return;const b=new e.KeywordCxt(d,g.RULES.all.format.definition,"format");b.$data?y():u();function y(){const I=l.scopeValue("formats",{ref:g.formats,code:$.code.formats}),k=l.const("fmt",(0,n._)`${I}[${b.schemaCode}]`);i.fail$data((0,n.or)((0,n._)`typeof ${k} != "object"`,(0,n._)`${k} instanceof RegExp`,(0,n._)`typeof ${k}.compare != "function"`,p(k)))}function u(){const I=b.schema,k=g.formats[I];if(!k||k===!0)return;if(typeof k!="object"||k instanceof RegExp||typeof k.compare!="function")throw new Error(`"${h}": format "${I}" does not define "compare" function`);const _=l.scopeValue("formats",{key:I,ref:k,code:$.code.formats?(0,n._)`${$.code.formats}${(0,n.getProperty)(I)}`:void 0});i.fail$data(p(_))}function p(I){return(0,n._)`${I}.compare(${f}, ${c}) ${s[h].fail} 0`}},dependencies:["format"]};const o=i=>(i.addKeyword(t.formatLimitDefinition),i);t.default=o})(rl);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=nl,r=rl,s=Ce,a=new s.Name("fullFormats"),o=new s.Name("fastFormats"),i=(f,c={keywords:!0})=>{if(Array.isArray(c))return l(f,c,n.fullFormats,a),f;const[h,d]=c.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,a],$=c.formats||n.formatNames;return l(f,$,h,d),c.keywords&&(0,r.default)(f),f};i.get=(f,c="full")=>{const d=(c==="fast"?n.fastFormats:n.fullFormats)[f];if(!d)throw new Error(`Unknown format "${f}"`);return d};function l(f,c,h,d){var $,g;($=(g=f.opts.code).formats)!==null&&$!==void 0||(g.formats=(0,s._)`require("ajv-formats/dist/formats").${d}`);for(const b of c)f.addFormat(b,h[b])}t.exports=e=i,Object.defineProperty(e,"__esModule",{value:!0}),e.default=i})(Zr,Zr.exports);var G_=Zr.exports;const J_=ts(G_);var Qr={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=Ys,r=Ce,s=Rn,a=Tt,o=An,i=qt,l="errorMessage",f=new n.Name("emUsed"),c={required:"missingProperty",dependencies:"property",dependentRequired:"property"},h=/\$\{[^}]+\}/,d=/\$\{([^}]+)\}/g,$=/^""\s*\+\s*|\s*\+\s*""$/g;function g(y){return{keyword:l,schemaType:["string","object"],post:!0,code(u){const{gen:p,data:I,schema:k,schemaValue:_,it:w}=u;if(w.createErrors===!1)return;const v=k,R=r.strConcat(i.default.instancePath,w.errorPath);p.if(n._`${i.default.errors} > 0`,()=>{if(typeof v=="object"){const[L,P]=N(v);P&&m(P),L&&E(L),T(C(v))}const U=typeof v=="string"?v:v._;U&&G(U),y.keepErrors||ue()});function C({properties:U,items:L}){const P={};if(U){P.props={};for(const D in U)P.props[D]=[]}if(L){P.items={};for(let D=0;D<L.length;D++)P.items[D]=[]}return P}function N(U){let L,P;for(const D in U){if(D==="properties"||D==="items")continue;const A=U[D];if(typeof A=="object"){L||(L={});const J=L[D]={};for(const ee in A)J[ee]=[]}else P||(P={}),P[D]=[]}return[L,P]}function m(U){const L=p.const("emErrors",n.stringify(U)),P=p.const("templates",ve(U,k));p.forOf("err",i.default.vErrors,ee=>p.if(Z(ee,L),()=>p.code(n._`${L}[${ee}.keyword].push(${ee})`).assign(n._`${ee}.${f}`,!0)));const{singleError:D}=y;if(D){const ee=p.let("message",n._`""`),le=p.let("paramsErrors",n._`[]`);A(he=>{p.if(ee,()=>p.code(n._`${ee} += ${typeof D=="string"?D:";"}`)),p.code(n._`${ee} += ${J(he)}`),p.assign(le,n._`${le}.concat(${L}[${he}])`)}),o.reportError(u,{message:ee,params:n._`{errors: ${le}}`})}else A(ee=>o.reportError(u,{message:J(ee),params:n._`{errors: ${L}[${ee}]}`}));function A(ee){p.forIn("key",L,le=>p.if(n._`${L}[${le}].length`,()=>ee(le)))}function J(ee){return n._`${ee} in ${P} ? ${P}[${ee}]() : ${_}[${ee}]`}}function E(U){const L=p.const("emErrors",n.stringify(U)),P=[];for(const le in U)P.push([le,ve(U[le],k[le])]);const D=p.const("templates",p.object(...P)),A=p.scopeValue("obj",{ref:c,code:n.stringify(c)}),J=p.let("emPropParams"),ee=p.let("emParamsErrors");p.forOf("err",i.default.vErrors,le=>p.if(Z(le,L),()=>{p.assign(J,n._`${A}[${le}.keyword]`),p.assign(ee,n._`${L}[${le}.keyword][${le}.params[${J}]]`),p.if(ee,()=>p.code(n._`${ee}.push(${le})`).assign(n._`${le}.${f}`,!0))})),p.forIn("key",L,le=>p.forIn("keyProp",n._`${L}[${le}]`,he=>{p.assign(ee,n._`${L}[${le}][${he}]`),p.if(n._`${ee}.length`,()=>{const ge=p.const("tmpl",n._`${D}[${le}] && ${D}[${le}][${he}]`);o.reportError(u,{message:n._`${ge} ? ${ge}() : ${_}[${le}][${he}]`,params:n._`{errors: ${ee}}`})})}))}function T(U){const{props:L,items:P}=U;if(!L&&!P)return;const D=n._`typeof ${I} == "object"`,A=n._`Array.isArray(${I})`,J=p.let("emErrors");let ee,le;const he=p.let("templates");L&&P?(ee=p.let("emChildKwd"),p.if(D),p.if(A,()=>{ge(P,k.items),p.assign(ee,n.str`items`)},()=>{ge(L,k.properties),p.assign(ee,n.str`properties`)}),le=n._`[${ee}]`):P?(p.if(A),ge(P,k.items),le=n._`.items`):L&&(p.if(r.and(D,r.not(A))),ge(L,k.properties),le=n._`.properties`),p.forOf("err",i.default.vErrors,Se=>ie(Se,J,Ge=>p.code(n._`${J}[${Ge}].push(${Se})`).assign(n._`${Se}.${f}`,!0))),p.forIn("key",J,Se=>p.if(n._`${J}[${Se}].length`,()=>{o.reportError(u,{message:n._`${Se} in ${he} ? ${he}[${Se}]() : ${_}${le}[${Se}]`,params:n._`{errors: ${J}[${Se}]}`}),p.assign(n._`${i.default.vErrors}[${i.default.errors}-1].instancePath`,n._`${R} + "/" + ${Se}.replace(/~/g, "~0").replace(/\\//g, "~1")`)})),p.endIf();function ge(Se,Ge){p.assign(J,n.stringify(Se)),p.assign(he,ve(Se,Ge))}}function G(U){const L=p.const("emErrs",n._`[]`);p.forOf("err",i.default.vErrors,P=>p.if(Ee(P),()=>p.code(n._`${L}.push(${P})`).assign(n._`${P}.${f}`,!0))),p.if(n._`${L}.length`,()=>o.reportError(u,{message:W(U),params:n._`{errors: ${L}}`}))}function ue(){const U=p.const("emErrs",n._`[]`);p.forOf("err",i.default.vErrors,L=>p.if(n._`!${L}.${f}`,()=>p.code(n._`${U}.push(${L})`))),p.assign(i.default.vErrors,U).assign(i.default.errors,n._`${U}.length`)}function Z(U,L){return r.and(n._`${U}.keyword !== ${l}`,n._`!${U}.${f}`,n._`${U}.instancePath === ${R}`,n._`${U}.keyword in ${L}`,n._`${U}.schemaPath.indexOf(${w.errSchemaPath}) === 0`,n._`/^\\/[^\\/]*$/.test(${U}.schemaPath.slice(${w.errSchemaPath.length}))`)}function ie(U,L,P){p.if(r.and(n._`${U}.keyword !== ${l}`,n._`!${U}.${f}`,n._`${U}.instancePath.indexOf(${R}) === 0`),()=>{const D=p.scopeValue("pattern",{ref:/^\/([^/]*)(?:\/|$)/,code:n._`new RegExp("^\\\/([^/]*)(?:\\\/|$)")`}),A=p.const("emMatches",n._`${D}.exec(${U}.instancePath.slice(${R}.length))`),J=p.const("emChild",n._`${A} && ${A}[1].replace(/~1/g, "/").replace(/~0/g, "~")`);p.if(n._`${J} !== undefined && ${J} in ${L}`,()=>P(J))})}function Ee(U){return r.and(n._`${U}.keyword !== ${l}`,n._`!${U}.${f}`,r.or(n._`${U}.instancePath === ${R}`,r.and(n._`${U}.instancePath.indexOf(${R}) === 0`,n._`${U}.instancePath[${R}.length] === "/"`)),n._`${U}.schemaPath.indexOf(${w.errSchemaPath}) === 0`,n._`${U}.schemaPath[${w.errSchemaPath}.length] === "/"`)}function ve(U,L){const P=[];for(const D in U){const A=L[D];h.test(A)&&P.push([D,q(A)])}return p.object(...P)}function W(U){return h.test(U)?new s._Code(s.safeStringify(U).replace(d,(L,P)=>`" + JSON.stringify(${a.getData(P,w)}) + "`).replace($,"")):n.stringify(U)}function q(U){return n._`function(){return ${W(U)}}`}},metaSchema:{anyOf:[{type:"string"},{type:"object",properties:{properties:{$ref:"#/$defs/stringMap"},items:{$ref:"#/$defs/stringList"},required:{$ref:"#/$defs/stringOrMap"},dependencies:{$ref:"#/$defs/stringOrMap"}},additionalProperties:{type:"string"}}],$defs:{stringMap:{type:"object",additionalProperties:{type:"string"}},stringOrMap:{anyOf:[{type:"string"},{$ref:"#/$defs/stringMap"}]},stringList:{type:"array",items:{type:"string"}}}}}}const b=(y,u={})=>{if(!y.opts.allErrors)throw new Error("ajv-errors: Ajv option allErrors must be true");if(y.opts.jsPropertySyntax)throw new Error("ajv-errors: ajv option jsPropertySyntax is not supported");return y.addKeyword(g(u))};e.default=b,t.exports=b,t.exports.default=b})(Qr,Qr.exports);var W_=Qr.exports;const X_=ts(W_);function Y_(t){const e={"archive-ext":"d3f:ArchiveFile",artifact:"d3f:DigitalArtifact","autonomous-system":"d3f:System",directory:"d3f:Directory","domain-name":"d3f:DomainName","email-addr":"d3f:Identifier","email-message":"d3f:Email",file:"d3f:File","http-request-ext":"d3f:WebNetworkTraffic","ipv4-addr":"d3f:IPAddress","ipv6-addr":"d3f:IPAddress","icmp-ext":"d3f:NetworkTraffic","mac-address":"d3f:Identifier",mutex:"d3f:DigitalArtifact","network-traffic":"d3f:NetworkTraffic","ntfs-ext":"d3f:FileSystem","pdf-ext":"d3f:DocumentFile",process:"d3f:Process","raster-image-ext":"d3f:DigitalArtifact","socket-ext":"d3f:NetworkTraffic",software:"d3f:Software","tcp-ext":"d3f:NetworkTraffic",url:"d3f:URL","unix-account-ext":"d3f:UserAccount","user-account":"d3f:UserAccount","windows-pebinary-ext":"d3f:ExecutableBinary","windows-process-ext":"d3f:Process","windows-registry-key":"d3f:WindowsRegistryKey","windows-service-ext":"d3f:Service","x509-certificate":"d3f:CertificateFile"};for(let n in e)if(t.pattern.includes(n))return e[n];return console.log("Unknown artifact:",t),"d3f:DigitalArtifact"}function Z_(t){if(t.external_references&&t.external_references.length>0)return"d3f:"+t.external_references[0].external_id;const e=/\[(T[\d\.]+)\]/;if(t.name){const n=t.name.match(e);if(n&&n[1])return"d3f:"+n[1]}return console.warn("No technique ID found for attack pattern:",t),null}async function Q_(t){const e=`
    PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>
    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

    SELECT DISTINCT ?tactic ?tacticLabel ?displayOrder
    WHERE {
      # Check if the given technique enables a tactic or if any superclass enables a tactic
      {
        BIND(${t} AS ?technique)
        ?technique d3f:enables ?tactic .
      }
      UNION
      {
        ${t} rdfs:subClassOf* ?superclass .
        ?superclass d3f:enables ?tactic .
      }

      # Retrieve display order and optional label for the tactic
      ?tactic d3f:display-order ?displayOrder .
      OPTIONAL { ?tactic rdfs:label ?tacticLabel }
    }
    ORDER BY ?displayOrder
  `;try{const n=await ti.query(e);return Array.isArray(n)&&n.length>0?n.map(r=>{var s,a,o;return{tactic:(s=r.get("tactic"))==null?void 0:s.value,tacticLabel:(a=r.get("tacticLabel"))==null?void 0:a.value,displayOrder:parseInt((o=r.get("displayOrder"))==null?void 0:o.value)}}):(console.warn("No tactics found for the given technique.",t),[])}catch(n){return console.error(`Error fetching tactics for technique ${t}:`,n),[]}}async function x_(t,e){var l;const n={selected:!1,origin:[.5,0],position:{x:0,y:0},dragging:!1};let r,s,a,o=[],i=0;switch(t.type){case"attack-pattern":if(r="attack-node",s=t.name,a=Z_(t),!a)return console.error("attack pattern could not be matched to ATT&CK technique"),null;i=(((l=(await Q_(a))[0])==null?void 0:l.displayOrder)??0)+1;break;case"indicator":r="artifact-node",s=t.name,a=Y_(t),o.push(["pattern",t.pattern]);break;case"threat-actor":r="agent-node",s=t.name,a="d3f:Agent";break;case"location":r="thing-node",s=t.administrative_area,a="d3f:PhysicalLocation";break;case"marking-definition":return null;case"report":r="thing-node",s=t.name,a="d3f:InformationContentEntity",o.push(["description",t.description]),(t.object_refs||[]).forEach(h=>{(h.startsWith("indicator")||h.startsWith("attack-pattern"))&&e.push({id:`${t.id}_${h}`,source:t.id,target:h,sourceHandle:"source",targetHandle:"target",type:"editableEdge",selected:!1,data:{label:"contains"}})});break;case"relationship":return null;default:return console.warn("Unmapped STIX object type:",t.type),null}return{id:t.id,type:r,...n,data:{label:s,sequence:i,d3f_class:a,user_properties:o}}}function eh(t,e){const n=e[t.source_ref],r=e[t.target_ref];return!n||!r?(console.warn(`Incomplete relationship: ${t.id}`),null):{id:t.id,source:t.source_ref,target:t.target_ref,type:"editableEdge",sourceHandle:"source",targetHandle:"target",data:{label:t.relationship_type||"related"},markerEnd:{type:"ArrowClosed"},selected:!1}}async function th(t){const e=[],n=[],r={};await Promise.all(t.objects.map(async s=>{const a=await x_(s,n);a&&(e.push(a),r[s.id]=a)}));for(const s of t.objects)if(s.type==="relationship"){const a=eh(s,r);a&&n.push(a)}return{nodes:e,edges:n}}function nh(t){const e={title:"",authors:[],orgs:[],description:"",article:"",d3fend_version:"0.17.0",cad_schema_version:1,published_date:new Date().toISOString(),references:[],settings:{}};return t.objects.forEach(({type:n,name:r,description:s,identity_class:a,external_references:o,published:i})=>{n==="report"&&(e.title=r||e.title,e.description=s||e.description,e.published_date=i||e.published,(o||[]).forEach(l=>{l.source_name&&e.references.push(l.source_name)})),n==="identity"&&(a==="organization"&&r?e.orgs.push(r):a==="individual"&&r&&e.authors.push(r))}),e}function rh(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const sh=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function en(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function wr(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function oh(t){const e=wr(t,"border-left-width"),n=wr(t,"border-right-width");return t.clientWidth+e+n}function ah(t){const e=wr(t,"border-top-width"),n=wr(t,"border-bottom-width");return t.clientHeight+e+n}function sl(t,e={}){const n=e.width||oh(t),r=e.height||ah(t);return{width:n,height:r}}function ih(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const St=16384;function lh(t){(t.width>St||t.height>St)&&(t.width>St&&t.height>St?t.width>t.height?(t.height*=St/t.width,t.width=St):(t.width*=St/t.height,t.height=St):t.width>St?(t.height*=St/t.width,t.width=St):(t.width*=St/t.height,t.height=St))}function kr(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function fh(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function ch(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),fh(s)}const wt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||wt(n,e)};function uh(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function dh(t){return en(t).map(e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`}).join(" ")}function _h(t,e,n){const r=`.${t}:${e}`,s=n.cssText?uh(n):dh(n);return document.createTextNode(`${r}{${s}}`)}function qo(t,e,n){const r=window.getComputedStyle(t,n),s=r.getPropertyValue("content");if(s===""||s==="none")return;const a=sh();try{e.className=`${e.className} ${a}`}catch{return}const o=document.createElement("style");o.appendChild(_h(a,n,r)),e.appendChild(o)}function hh(t,e){qo(t,e,":before"),qo(t,e,":after")}const Uo="application/font-woff",Ho="image/jpeg",mh={woff:Uo,woff2:Uo,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ho,jpeg:Ho,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ph(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Zs(t){const e=ph(t).toLowerCase();return mh[e]||""}function gh(t){return t.split(/,/)[1]}function xr(t){return t.search(/^(data:)/)!==-1}function vh(t,e){return`data:${e};base64,${t}`}async function ol(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,o)=>{const i=new FileReader;i.onerror=o,i.onloadend=()=>{try{a(n({res:r,result:i.result}))}catch(l){o(l)}},i.readAsDataURL(s)})}const qr={};function bh(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Qs(t,e,n){const r=bh(t,e,n.includeQueryParams);if(qr[r]!=null)return qr[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await ol(t,n.fetchRequestInit,({res:o,result:i})=>(e||(e=o.headers.get("Content-Type")||""),gh(i)));s=vh(a,e)}catch(a){s=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return qr[r]=s,s}async function $h(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):kr(e)}async function yh(t,e){if(t.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,o==null||o.drawImage(t,0,0,a.width,a.height);const i=a.toDataURL();return kr(i)}const n=t.poster,r=Zs(n),s=await Qs(n,r,e);return kr(s)}async function wh(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await Dr(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function kh(t,e){return wt(t,HTMLCanvasElement)?$h(t):wt(t,HTMLVideoElement)?yh(t,e):wt(t,HTMLIFrameElement)?wh(t):t.cloneNode(!1)}const Eh=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function Sh(t,e,n){var r,s;let a=[];return Eh(t)&&t.assignedNodes?a=en(t.assignedNodes()):wt(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=en(t.contentDocument.body.childNodes):a=en(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||wt(t,HTMLVideoElement)||await a.reduce((o,i)=>o.then(()=>Dr(i,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function Ph(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):en(r).forEach(s=>{let a=r.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),wt(t,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),n.setProperty(s,a,r.getPropertyPriority(s))})}function Ch(t,e){wt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),wt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function Nh(t,e){if(wt(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function Th(t,e){return wt(e,Element)&&(Ph(t,e),hh(t,e),Ch(t,e),Nh(t,e)),e}async function Ih(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const i=n[a].getAttribute("xlink:href");if(i){const l=t.querySelector(i),f=document.querySelector(i);!l&&f&&!r[i]&&(r[i]=await Dr(f,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const i=document.createElementNS(a,"defs");o.appendChild(i);for(let l=0;l<s.length;l++)i.appendChild(s[l]);t.appendChild(o)}return t}async function Dr(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>kh(r,e)).then(r=>Sh(t,r,e)).then(r=>Th(t,r)).then(r=>Ih(r,e))}const al=/url\((['"]?)([^'"]+?)\1\)/g,Oh=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Dh=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Rh(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function jh(t){const e=[];return t.replace(al,(n,r,s)=>(e.push(s),n)),e.filter(n=>!xr(n))}async function Ah(t,e,n,r,s){try{const a=n?rh(e,n):e,o=Zs(e);let i;return s||(i=await Qs(a,o,r)),t.replace(Rh(e),`$1${i}$3`)}catch{}return t}function Mh(t,{preferredFontFormat:e}){return e?t.replace(Dh,n=>{for(;;){const[r,,s]=Oh.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function il(t){return t.search(al)!==-1}async function ll(t,e,n){if(!il(t))return t;const r=Mh(t,n);return jh(r).reduce((a,o)=>a.then(i=>Ah(i,o,e,n)),Promise.resolve(r))}async function ir(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await ll(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function Vh(t,e){await ir("background",t,e)||await ir("background-image",t,e),await ir("mask",t,e)||await ir("mask-image",t,e)}async function zh(t,e){const n=wt(t,HTMLImageElement);if(!(n&&!xr(t.src))&&!(wt(t,SVGImageElement)&&!xr(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await Qs(r,Zs(r),e);await new Promise((a,o)=>{t.onload=a,t.onerror=o;const i=t;i.decode&&(i.decode=a),i.loading==="lazy"&&(i.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function Lh(t,e){const r=en(t.childNodes).map(s=>fl(s,e));await Promise.all(r).then(()=>t)}async function fl(t,e){wt(t,Element)&&(await Vh(t,e),await zh(t,e),await Lh(t,e))}function Fh(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const Ko={};async function Bo(t){let e=Ko[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},Ko[t]=e,e}async function Go(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let i=o.replace(r,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),ol(i,e.fetchRequestInit,({result:l})=>(n=n.replace(o,`url(${l})`),[o,l]))});return Promise.all(a).then(()=>n)}function Jo(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",i=new RegExp(o,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=i.exec(r),l===null)break;a.lastIndex=i.lastIndex}else i.lastIndex=a.lastIndex;e.push(l[0])}return e}async function qh(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{en(s.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let i=o+1;const l=a.href,f=Bo(l).then(c=>Go(c,e)).then(c=>Jo(c).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?i+=1:s.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:h,error:d})}})).catch(c=>{console.error("Error loading remote css",c.toString())});r.push(f)}})}catch(a){const o=t.find(i=>i.href==null)||document.styleSheets[0];s.href!=null&&r.push(Bo(s.href).then(i=>Go(i,e)).then(i=>Jo(i).forEach(l=>{o.insertRule(l,s.cssRules.length)})).catch(i=>{console.error("Error loading remote stylesheet",i)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{en(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function Uh(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>il(e.style.getPropertyValue("src")))}async function Hh(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=en(t.ownerDocument.styleSheets),r=await qh(n,e);return Uh(r)}async function Kh(t,e){const n=await Hh(t,e);return(await Promise.all(n.map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return ll(s.cssText,a,e)}))).join(`
`)}async function Bh(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Kh(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function Gh(t,e={}){const{width:n,height:r}=sl(t,e),s=await Dr(t,e,!0);return await Bh(s,e),await fl(s,e),Fh(s,e),await ch(s,n,r)}async function Jh(t,e={}){const{width:n,height:r}=sl(t,e),s=await Gh(t,e),a=await kr(s),o=document.createElement("canvas"),i=o.getContext("2d"),l=e.pixelRatio||ih(),f=e.canvasWidth||n,c=e.canvasHeight||r;return o.width=f*l,o.height=c*l,e.skipAutoScale||lh(o),o.style.width=`${f}`,o.style.height=`${c}`,e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(a,0,0,o.width,o.height),o}async function Wh(t,e={}){return(await Jh(t,e)).toDataURL()}function Xh(t,e){const n=xa(t),{x:r,y:s,width:a,height:o}=n,i=Qa(n,a,o,.5,2,.2),l=document.querySelector(".svelte-flow__viewport");l&&Wh(l,{backgroundColor:"#ffffff",width:a,height:o,style:{width:`${a}px`,height:`${o}px`,transform:`translate(${i.x}px, ${i.y}px) scale(${i.zoom})`}}).then(f=>{const c=document.createElement("a");c.download=e.replace("json","png"),c.href=f,c.click()}).catch(f=>{console.log("Error capturing graph:",f),nt.add("Saving the image failed. Is the graph too large?")})}const Yh=new Zl;function We(t,e,n,r,s=void 0,a=void 0,o=void 0,i=void 0){return{id:`${Math.random()}`,type:t,position:{x:o,y:i},data:{label:e,sequence:n,d3f_class:r,user_properties:[]},measured:{width:s,height:a},selected:!1,dragging:!1}}function ht(t,e,n,r=void 0){return{data:{label:t},markerStart:Sr.ArrowClosed,style:r,source:e,sourceHandle:"source",target:n,targetHandle:"target",id:`xy-edge__${e}source-${n}target`,selected:!1}}function Ut(t,e,n,r,s,a,o,i,l,f,c,h,d){let $=We(r,s,o,a,f,c,i,l),g,b;d?(g=$.id,b=n.id):(g=n.id,b=$.id);let y=ht(h,b,g);e.update(u=>[...u,y]),t.update(u=>[...u,$])}const cl={"elk.algorithm":"layered","elk.direction":"RIGHT","elk.layered.spacing.nodeNodeBetweenLayers":"120","elk.spacing.nodeNode":"60","elk.spacing.edgeNode":"30","elk.layered.nodePlacement.strategy":"NETWORK_SIMPLEX","elk.layered.spacing.edgeNodeBetweenLayers":"50","elk.separateConnectedComponents":"false"};function Zh(t,e,n=cl){const r={id:"root",layoutOptions:n,children:t.map(s=>{let a={"elk.alignment":"CENTER"};return e.find(o=>(o.source==s.id||o.target==s.id)&&o.data.label=="rdfs:subClassOf")&&(a["elk.spacing.individual"]="elk.spacing.nodeNode: 200;,;elk.spacing.edgeNode: 200"),{...s,width:s.measured.width+10,height:s.measured.height+10,layoutOptions:a}}),edges:e};return Yh.layout(r).then(s=>({nodes:s.children.map(a=>({...a,position:{x:a.x,y:a.y}})),edges:s.edges})).then(s=>{if(s.edges.find(a=>a.data.label=="rdfs:subClassOf")){let a=1,o=200;for(const i of s.edges.filter(l=>l.data.label=="rdfs:subClassOf")){let l=s.nodes.find(c=>c.id==i.target),f=s.nodes.find(c=>c.id==i.source);l.position.x=f.position.x,l.position.y=f.position.y-a*o,a+=1}}return s}).catch(console.error)}function Qh(t){let e,n,r,s,a,o,i=t[0].label+"",l,f;return n=new lo({props:{type:"target",class:"customHandle",position:fo.Left,id:"target",style:"z-index: -2; pointer-events: none;"}}),s=new lo({props:{type:"source",position:fo.Top,id:"source",style:"visibility: hidden;"}}),{c(){e=V("div"),te(n.$$.fragment),r=K(),te(s.$$.fragment),a=K(),o=V("div"),l=Q(i),this.h()},l(c){e=z(c,"DIV",{class:!0,style:!0});var h=Y(e);ne(n.$$.fragment,h),r=B(h),ne(s.$$.fragment,h),a=B(h),o=z(h,"DIV",{style:!0});var d=Y(o);l=x(d,i),d.forEach(S),h.forEach(S),this.h()},h(){Fe(o,"text-align","center"),H(e,"class","node-container svelte-1hyqcox"),H(e,"style",t[1])},m(c,h){j(c,e,h),re(n,e,null),O(e,r),re(s,e,null),O(e,a),O(e,o),O(o,l),f=!0},p(c,[h]){(!f||h&1)&&i!==(i=c[0].label+"")&&Oe(l,i),(!f||h&2)&&H(e,"style",c[1])},i(c){f||(M(n.$$.fragment,c),M(s.$$.fragment,c),f=!0)},o(c){F(n.$$.fragment,c),F(s.$$.fragment,c),f=!1},d(c){c&&S(e),se(n),se(s)}}}function xh(t,e,n){let r,{data:s}=e;return t.$$set=a=>{"data"in a&&n(0,s=a.data)},t.$$.update=()=>{t.$$.dirty&1&&n(1,r=s!=null&&s.to_insert?"outline: 3px gray solid; box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.3);":"")},[s,r]}class xn extends Re{constructor(e){super(),je(this,e,xh,Qh,Ie,{data:0})}}function em(t){let e,n,r;return n=new xn({props:{data:t[0]}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"class","artifact svelte-efm5an")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.data=s[0]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function tm(t,e,n){let{data:r}=e;return r.node_super_class="artifact-node",t.$$set=s=>{"data"in s&&n(0,r=s.data)},[r]}class nm extends Re{constructor(e){super(),je(this,e,tm,em,Ie,{data:0})}}function rm(t){let e,n,r;return n=new xn({props:{data:t[0]}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"class","attack svelte-2uxrhz")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.data=s[0]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function sm(t,e,n){let{data:r}=e;return r.node_super_class="attack-node",t.$$set=s=>{"data"in s&&n(0,r=s.data)},[r]}class om extends Re{constructor(e){super(),je(this,e,sm,rm,Ie,{data:0})}}function am(t){let e,n,r;return n=new xn({props:{data:t[0]}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"class","countermeasure svelte-1mulm8z")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.data=s[0]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function im(t,e,n){let{data:r}=e;return r.node_super_class="countermeasure-node",t.$$set=s=>{"data"in s&&n(0,r=s.data)},[r]}class lm extends Re{constructor(e){super(),je(this,e,im,am,Ie,{data:0})}}function fm(t){let e,n,r;return n=new xn({props:{data:t[0]}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"class","weakness-mini svelte-13elh46")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.data=s[0]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function cm(t,e,n){let{data:r}=e;return r.node_super_class="vulnerability-node",t.$$set=s=>{"data"in s&&n(0,r=s.data)},[r]}class um extends Re{constructor(e){super(),je(this,e,cm,fm,Ie,{data:0})}}function dm(t){let e,n,r;return n=new xn({props:{data:t[0]}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"class","event-mini svelte-18h1uzv")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.data=s[0]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function _m(t,e,n){let{data:r}=e;return r.node_super_class="event-node",t.$$set=s=>{"data"in s&&n(0,r=s.data)},[r]}class hm extends Re{constructor(e){super(),je(this,e,_m,dm,Ie,{data:0})}}function mm(t){let e,n=t[0].label+"",r,s,a=`translate(-50%, -50%) translate(${t[4]}px,${t[5]}px)`;return{c(){e=V("div"),r=Q(n),this.h()},l(o){e=z(o,"DIV",{class:!0});var i=Y(e);r=x(i,n),i.forEach(S),this.h()},h(){H(e,"class",s="edge-label-container "+t[6]+" svelte-1t4f3k0"),Fe(e,"transform",a)},m(o,i){j(o,e,i),O(e,r)},p(o,i){i&1&&n!==(n=o[0].label+"")&&Oe(r,n),i&64&&s!==(s="edge-label-container "+o[6]+" svelte-1t4f3k0")&&H(e,"class",s),i&48&&a!==(a=`translate(-50%, -50%) translate(${o[4]}px,${o[5]}px)`)&&Fe(e,"transform",a)},d(o){o&&S(e)}}}function pm(t){let e,n,r,s;return e=new Ul({props:{path:t[3],markerEnd:t[1],style:t[2]}}),r=new Hl({props:{$$slots:{default:[mm]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment)},l(a){ne(e.$$.fragment,a),n=B(a),ne(r.$$.fragment,a)},m(a,o){re(e,a,o),j(a,n,o),re(r,a,o),s=!0},p(a,[o]){const i={};o&8&&(i.path=a[3]),o&2&&(i.markerEnd=a[1]),o&4&&(i.style=a[2]),e.$set(i);const l={};o&1048689&&(l.$$scope={dirty:o,ctx:a}),r.$set(l)},i(a){s||(M(e.$$.fragment,a),M(r.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),F(r.$$.fragment,a),s=!1},d(a){a&&S(n),se(e,a),se(r,a)}}}function gm(t,e,n){let r,s,a,o,i=ce,l=()=>(i(),i=no(s,m=>n(18,o=m)),s),f,c=ce,h=()=>(c(),c=no(r,m=>n(19,f=m)),r);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>c());let{id:d}=e,{data:$}=e,{sourceX:g}=e,{sourceY:b}=e,{source:y}=e,{sourcePosition:u}=e,{targetX:p}=e,{targetY:I}=e,{target:k}=e,{targetPosition:_}=e,{markerEnd:w=Sr.ArrowClosed}=e,{style:v="stroke-width: 2px"}=e,R,C,N;return t.$$set=m=>{"id"in m&&n(9,d=m.id),"data"in m&&n(0,$=m.data),"sourceX"in m&&n(10,g=m.sourceX),"sourceY"in m&&n(11,b=m.sourceY),"source"in m&&n(12,y=m.source),"sourcePosition"in m&&n(13,u=m.sourcePosition),"targetX"in m&&n(14,p=m.targetX),"targetY"in m&&n(15,I=m.targetY),"target"in m&&n(16,k=m.target),"targetPosition"in m&&n(17,_=m.targetPosition),"markerEnd"in m&&n(1,w=m.markerEnd),"style"in m&&n(2,v=m.style)},t.$$.update=()=>{if(t.$$.dirty&4096&&h(n(8,r=eo(y))),t.$$.dirty&65536&&l(n(7,s=eo(k))),t.$$.dirty&908288)if(f&&o&&f!=o){const m=hr(f,o);n(3,[R,C,N]=Kl({sourceX:m.sx,sourceY:m.sy,targetX:m.tx,targetY:m.ty}),R,(n(4,C),n(19,f),n(18,o),n(12,y),n(16,k),n(10,g),n(14,p),n(11,b),n(15,I)),(n(5,N),n(19,f),n(18,o),n(12,y),n(16,k),n(10,g),n(14,p),n(11,b),n(15,I)))}else if(f&&o&&y===k){const m=g-p,E=40;hr(f,o),n(3,R=`M ${g-5} ${b} A ${m} ${E} 0 1 0 ${p+2} ${I}`),n(4,C=g-20),n(5,N=b-20)}else n(3,R=void 0);t.$$.dirty&1&&n(6,a=$.d3f_property&&$.d3f_property.startsWith(":")?"glow":"")},[$,w,v,R,C,N,a,s,r,d,g,b,y,u,p,I,k,_,o,f]}class vm extends Re{constructor(e){super(),je(this,e,gm,pm,Ie,{id:9,data:0,sourceX:10,sourceY:11,source:12,sourcePosition:13,targetX:14,targetY:15,target:16,targetPosition:17,markerEnd:1,style:2})}}const bm={"mini-artifact-node":nm,"mini-attack-node":om,"mini-countermeasure-node":lm,"mini-weakness-node":um,"mini-event-node":hm},$m={"mini-base-edge":vm};function ym(t){let e,n,r;return n=new ei({props:{id:t[0],defaultEdgeOptions:t[3],nodes:t[4],nodeTypes:t[1],edges:t[5],edgeTypes:t[2],nodesDraggable:!0,nodesConnectable:!1,deleteKey:"",style:"height:70vh; width:50vw;"}}),n.$on("nodeclick",t[6]),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{id:!0,style:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"id","slotted-flow"),H(e,"style","height:70vh;width:50vw;")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&1&&(o.id=s[0]),a&2&&(o.nodeTypes=s[1]),a&4&&(o.edgeTypes=s[2]),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function Wo(t){let e=0;for(;e<100&&t.find(n=>t.find(r=>n!=r&&n.source==r.source&&n.target==r.target));){let n=t.find(r=>t.find(s=>r!=s&&r.source==s.source&&r.target==s.target));console.log(n),n&&(t=t.filter(r=>r!=n)),e+=1}return t}function wm(t,e,n){let r,s,{flow_id:a="context_flow"}=e,{nodes_to_insert:o}=e,{nodes:i=[]}=e,{edges:l=[]}=e,{node_types:f=bm}=e,{edge_types:c=$m}=e,{auto_layout:h=!1}=e;const{fitView:d}=oi();let $={type:"mini-base-edge",data:{label:void 0},markerEnd:{type:Sr.ArrowClosed}};const g=uo([]);Gt(t,g,p=>n(12,s=p));const b=uo([]);Gt(t,b,p=>n(11,r=p)),g.set(i),b.set(Wo(l)),g.subscribe(p=>{n(7,i=p)}),b.subscribe(p=>{n(8,l=Wo(p))});const y=p=>{o.includes(p.detail.node)?(p.detail.node.data=Object.assign(Object.assign({},p.detail.node.data),{to_insert:!1}),n(10,o=o.filter(I=>I!==p.detail.node))):(p.detail.node.data=Object.assign(Object.assign({},p.detail.node.data),{to_insert:!0}),o.push(p.detail.node)),g.set(s),n(10,o)};function u(){Zh(s,r,cl).then(({nodes:k,edges:_})=>{Jt(g,s=k,s),Jt(b,r=_,r),n(9,h=!1),d()})}return t.$$set=p=>{"flow_id"in p&&n(0,a=p.flow_id),"nodes_to_insert"in p&&n(10,o=p.nodes_to_insert),"nodes"in p&&n(7,i=p.nodes),"edges"in p&&n(8,l=p.edges),"node_types"in p&&n(1,f=p.node_types),"edge_types"in p&&n(2,c=p.edge_types),"auto_layout"in p&&n(9,h=p.auto_layout)},t.$$.update=()=>{t.$$.dirty&896&&h&&i.length>0&&l.length>0&&i.every(p=>p.measured.width&&p.measured.height)&&u()},[a,f,c,$,g,b,y,i,l,h,o]}class Ht extends Re{constructor(e){super(),je(this,e,wm,ym,Ie,{flow_id:0,nodes_to_insert:10,nodes:7,edges:8,node_types:1,edge_types:2,auto_layout:9})}}const km=t=>({}),Xo=t=>({});function Em(t){let e;return{c(){e=Q("No related offensive techniques in this release.")},l(n){e=x(n,"No related offensive techniques in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function Sm(t){let e,n;return e=new Dt({props:{$$slots:{default:[Cm]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&8216&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Pm(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Cm(t){let e,n,r;function s(o){t[9](o)}let a={flow_id:"flow_da_off",nodes:t[3].nodes,edges:t[3].edges,auto_layout:!0};return t[4]!==void 0&&(a.nodes_to_insert=t[4]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&8&&(l.nodes=o[3].nodes),i&8&&(l.edges=o[3].edges),!n&&i&16&&(n=!0,l.nodes_to_insert=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Nm(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[4].length+"",b,y,u,p,I;const k=t[7].header,_=Ue(k,t,t[13],Xo),w=t[7].default,v=Ue(w,t,t[13],null),R=[Pm,Sm,Em],C=[];function N(m,E){return m[1]?m[1].da_to_off.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Related Attack Techniques To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Related Attack Techniques To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[10](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[5]),ae(n,"click",gt(t[8])),ae(e,"close",t[11]),ae(e,"click",Ft(t[12]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&8192)&&He(_,k,m,m[13],u?Be(k,m[13],E,km):Ke(m[13]),Xo),v&&v.p&&(!u||E&8192)&&He(v,w,m,m[13],u?Be(w,m[13],E,null):Ke(m[13]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&16)&&g!==(g=m[4].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[10](null),p=!1,lt(I)}}}function Tm(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_attack_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d;function $(){let _=[],w=[];for(const v of l.da_to_off.results.bindings)g.edge_is_unique(v.off_tech_label.value,v.off_artifact_rel_label.value,v.off_artifact_label.value)&&(_.find(R=>R.data.d3f_class=="d3f:"+v.off_tech_id.value)||_.push(We("mini-attack-node",v.off_tech_label.value,0,"d3f:"+v.off_tech_id.value)),_.find(R=>R.data.d3f_class=="d3f:"+Te(v.off_artifact.value))||_.push(We("mini-artifact-node",v.off_artifact_label.value,0,"d3f:"+Te(v.off_artifact.value))),w.push(ht(v.off_artifact_rel_label.value.replace(/ /g,""),_.find(R=>R.data.label==v.off_tech_label.value).id,_.find(R=>R.data.label==v.off_artifact_label.value).id)));return{nodes:_,edges:w}}let g=new Lt;function b(){let _=0,w=200,v=150;for(const R of r){let C=l.da_to_off.results.bindings.find(m=>"d3f:"+m.off_tech_id.value==R.data.d3f_class),N="";C&&(N=C.off_artifact_rel_label.value),Ut(c,h,i,R.data.node_super_class,R.data.label,R.data.d3f_class,i.data.sequence,i.position.x+_*w,i.position.y+v,182,63,N,!1),_+=1}f&&f.close(),n(4,r=[])}function y(_){mt.call(this,t,_)}function u(_){r=_,n(4,r)}function p(_){ke[_?"unshift":"push"](()=>{f=_,n(2,f)})}const I=()=>n(0,o=!1),k=()=>{f.close(),n(4,r=[])};return t.$$set=_=>{"show_attack_modal"in _&&n(0,o=_.show_attack_modal),"parent_node"in _&&n(6,i=_.parent_node),"data"in _&&n(1,l=_.data),"$$scope"in _&&n(13,a=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&l&&l.da_to_off.results.bindings.length>0&&n(3,d=$()),t.$$.dirty&5&&o&&f&&(f.showModal(),g.reset()),t.$$.dirty&5&&!o&&f&&(f.close(),g.reset())},n(4,r=[]),[o,l,f,d,r,b,i,s,y,u,p,I,k,a]}class Im extends Re{constructor(e){super(),je(this,e,Tm,Nm,Ie,{show_attack_modal:0,parent_node:6,data:1})}}const Om=t=>({}),Yo=t=>({});function Dm(t){let e;return{c(){e=Q("No related defensive techniques in this release.")},l(n){e=x(n,"No related defensive techniques in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function Rm(t){let e,n,r,s,a,o=t[3],i,l;function f(d){t[13](d)}let c={toggles:t[4]};t[3]!==void 0&&(c.selected=t[3]),r=new ss({props:c}),ke.push(()=>Le(r,"selected",f));let h=Zo(t);return{c(){e=V("br"),n=K(),te(r.$$.fragment),a=K(),h.c(),i=Ze()},l(d){e=z(d,"BR",{}),n=B(d),ne(r.$$.fragment,d),a=B(d),h.l(d),i=Ze()},m(d,$){j(d,e,$),j(d,n,$),re(r,d,$),j(d,a,$),h.m(d,$),j(d,i,$),l=!0},p(d,$){const g={};$&16&&(g.toggles=d[4]),!s&&$&8&&(s=!0,g.selected=d[3],ze(()=>s=!1)),r.$set(g),$&8&&Ie(o,o=d[3])?(Me(),F(h,1,1,ce),Ve(),h=Zo(d),h.c(),M(h,1),h.m(i.parentNode,i)):h.p(d,$)},i(d){l||(M(r.$$.fragment,d),M(h),l=!0)},o(d){F(r.$$.fragment,d),F(h),l=!1},d(d){d&&(S(e),S(n),S(a),S(i)),se(r,d),h.d(d)}}}function jm(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Am(t){let e,n,r;function s(o){t[14](o)}let a={flow_id:"flow_da_def",nodes:t[5].nodes,edges:t[5].edges,auto_layout:!0};return t[6]!==void 0&&(a.nodes_to_insert=t[6]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&32&&(l.nodes=o[5].nodes),i&32&&(l.edges=o[5].edges),!n&&i&64&&(n=!0,l.nodes_to_insert=o[6],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Zo(t){let e,n;return e=new Dt({props:{$$slots:{default:[Am]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&262240&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Mm(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[6].length+"",b,y,u,p,I;const k=t[11].header,_=Ue(k,t,t[18],Yo),w=t[11].default,v=Ue(w,t,t[18],null),R=[jm,Rm,Dm],C=[];function N(m,E){return m[1]?m[1].da_to_def.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Countermeasure Techniques To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Countermeasure Techniques To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[15](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[7]),ae(n,"click",gt(t[12])),ae(e,"close",t[16]),ae(e,"click",Ft(t[17]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&262144)&&He(_,k,m,m[18],u?Be(k,m[18],E,Om):Ke(m[18]),Yo),v&&v.p&&(!u||E&262144)&&He(v,w,m,m[18],u?Be(w,m[18],E,null):Ke(m[18]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&64)&&g!==(g=m[6].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[15](null),p=!1,lt(I)}}}function Vm(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_defend_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d=new Lt;function $(){let N=0,m=200,E=150;for(const T of r){let G=l.da_to_def.results.bindings.find(Z=>Z.def_tech_label.value==T.data.label),ue="";G&&(ue=G.def_artifact_rel_label.value),Ut(c,h,i,T.data.node_super_class,T.data.label,T.data.d3f_class,i.data.sequence,i.position.x+N*m,i.position.y-E,182,63,ue,!1),N+=1}f&&f.close(),n(6,r=[])}let g=new Set,b=[],y=[];rs(b,y)&&(y=[]);function u(N){n(6,r=[])}let p;function I(){let N=[],m=[];for(const E of l.da_to_def.results.bindings)d.edge_is_unique(E.def_tech_label.value,E.def_artifact_rel_label.value,E.def_artifact_label.value)&&!y.includes(E.def_tactic_label.value)&&(N.find(T=>T.data.d3f_class=="d3f:"+Te(E.def_tech.value))||N.push(We("mini-countermeasure-node",E.def_tech_label.value,0,"d3f:"+Te(E.def_tech.value))),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.def_artifact.value))||N.push(We("mini-artifact-node",E.def_artifact_label.value,0,"d3f:"+Te(E.def_artifact.value))),m.push(ht(E.def_artifact_rel_label.value.replace(/ /g,""),N.find(T=>T.data.label==E.def_tech_label.value).id,N.find(T=>T.data.label==E.def_artifact_label.value).id)));return{nodes:N,edges:m}}function k(N){mt.call(this,t,N)}function _(N){y=N,n(3,y)}function w(N){r=N,n(6,r)}function v(N){ke[N?"unshift":"push"](()=>{f=N,n(2,f)})}const R=()=>n(0,o=!1),C=()=>{f.close(),n(6,r=[])};return t.$$set=N=>{"show_defend_modal"in N&&n(0,o=N.show_defend_modal),"parent_node"in N&&n(8,i=N.parent_node),"data"in N&&n(1,l=N.data),"$$scope"in N&&n(18,a=N.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&f&&(f.showModal(),n(9,d=new Lt)),t.$$.dirty&5&&!o&&f&&f.close(),t.$$.dirty&1026&&l&&(l.da_to_def.results.bindings.forEach(N=>{g.add(N.def_tactic_label.value)}),n(10,g),n(1,l)),t.$$.dirty&1024&&n(4,b=Array.from(g).sort(function(N,m){return pr[N]-pr[m]})),t.$$.dirty&8&&u(),t.$$.dirty&520&&d.reset(y),t.$$.dirty&10&&l&&l.da_to_def.results.bindings.length>0&&y&&n(5,p=I())},n(6,r=[]),[o,l,f,y,b,p,r,$,i,d,g,s,k,_,w,v,R,C,a]}class zm extends Re{constructor(e){super(),je(this,e,Vm,Mm,Ie,{show_defend_modal:0,parent_node:8,data:1})}}const Lm=t=>({}),Qo=t=>({});function Fm(t){let e;return{c(){e=Q("No related weaknesses in this release.")},l(n){e=x(n,"No related weaknesses in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function qm(t){let e,n;return e=new Dt({props:{$$slots:{default:[Hm]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&2097200&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Um(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Hm(t){let e,n,r;function s(o){t[17](o)}let a={flow_id:"flow_da_weak",nodes:t[4].nodes,edges:t[4].edges,auto_layout:!0};return t[5]!==void 0&&(a.nodes_to_insert=t[5]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&16&&(l.nodes=o[4].nodes),i&16&&(l.edges=o[4].edges),!n&&i&32&&(n=!0,l.nodes_to_insert=o[5],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Km(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[5].length+"",b,y,u,p,I;const k=t[15].header,_=Ue(k,t,t[21],Qo),w=t[15].default,v=Ue(w,t,t[21],null),R=[Um,qm,Fm],C=[];function N(m,E){return m[1]?m[3].graph.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Weaknesses To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Weaknesses To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[18](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[6]),ae(n,"click",gt(t[16])),ae(e,"close",t[19]),ae(e,"click",Ft(t[20]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&2097152)&&He(_,k,m,m[21],u?Be(k,m[21],E,Lm):Ke(m[21]),Qo),v&&v.p&&(!u||E&2097152)&&He(v,w,m,m[21],u?Be(w,m[21],E,null):Ke(m[21]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&32)&&g!==(g=m[5].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[18](null),p=!1,lt(I)}}}function Bm(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:i="#fff4dd"}=e,{root_color:l="#fff4dd"}=e,{link_function:f=E=>`/dao/artifact/${E["@id"]}`}=e,{inbound_link_function:c=f}=e,{root_link_function:h=E=>`/dao/artifact/${E["@id"]}`}=e,{outbound_link_function:d=f}=e,{show_weakness_modal:$}=e,{parent_node:g}=e,{data:b}=e,y;const u=It(),p=Ot();let I;function k(){let E=[],T=[];for(const G of _.graph.filter(ue=>ue["@id"]!=b.description["@id"]&&ue["d3f:outbound"]))for(const ue of G["d3f:outbound"])for(const Z of G[ue["@id"]])E.find(ie=>ie.data.d3f_class==G["@id"])||E.push(We("mini-weakness-node",G["rdfs:label"][0],0,G["@id"])),E.find(ie=>ie.data.d3f_class==Z["@id"])||E.push(We("mini-artifact-node",_.i(Z["@id"])["rdfs:label"][0],0,Z["@id"])),T.push(ht(Te(ue["@id"]),E.find(ie=>ie.data.d3f_class==G["@id"]).id,E.find(ie=>ie.data.d3f_class==Z["@id"]).id));return{nodes:E,edges:T}}let _;function w(){let E=0,T=200,G=150;for(const ue of r){let Z=b.da_to_weak["@graph"].find(Ee=>Ee["@id"]==ue.data.d3f_class),ie="";Z&&Z["d3f:outbound"]&&(ie=Z["d3f:outbound"][0]["@id"].replace("d3f:","")),Z&&(Ut(u,p,g,ue.data.node_super_class,ue.data.label,ue.data.d3f_class,g.data.sequence,g.position.x+E*T,g.position.y+G,182,63,ie,!1),E+=1)}y&&y.close(),n(5,r=[])}function v(E){mt.call(this,t,E)}function R(E){r=E,n(5,r)}function C(E){ke[E?"unshift":"push"](()=>{y=E,n(2,y)})}const N=()=>n(0,$=!1),m=()=>{y.close(),n(5,r=[])};return t.$$set=E=>{"outbound_color"in E&&n(7,o=E.outbound_color),"inbound_color"in E&&n(8,i=E.inbound_color),"root_color"in E&&n(9,l=E.root_color),"link_function"in E&&n(10,f=E.link_function),"inbound_link_function"in E&&n(11,c=E.inbound_link_function),"root_link_function"in E&&n(12,h=E.root_link_function),"outbound_link_function"in E&&n(13,d=E.outbound_link_function),"show_weakness_modal"in E&&n(0,$=E.show_weakness_modal),"parent_node"in E&&n(14,g=E.parent_node),"data"in E&&n(1,b=E.data),"$$scope"in E&&n(21,a=E.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&b&&n(3,_=new mr(b.da_to_weak,{index:!0})),t.$$.dirty&8&&_&&_.graph&&n(4,I=k()),t.$$.dirty&5&&$&&y&&y.showModal(),t.$$.dirty&5&&!$&&y&&y.close()},n(5,r=[]),[$,b,y,_,I,r,w,o,i,l,f,c,h,d,g,s,v,R,C,N,m,a]}class Gm extends Re{constructor(e){super(),je(this,e,Bm,Km,Ie,{outbound_color:7,inbound_color:8,root_color:9,link_function:10,inbound_link_function:11,root_link_function:12,outbound_link_function:13,show_weakness_modal:0,parent_node:14,data:1})}}const Jm=t=>({}),xo=t=>({});function Wm(t){let e=t[2].data.d3f_class+"",n,r,s;return{c(){n=Q(e),r=K(),s=Q(t[1])},l(a){n=x(a,e),r=B(a),s=x(a,t[1])},m(a,o){j(a,n,o),j(a,r,o),j(a,s,o)},p(a,o){o&4&&e!==(e=a[2].data.d3f_class+"")&&Oe(n,e),o&2&&Oe(s,a[1])},i:ce,o:ce,d(a){a&&(S(n),S(r),S(s))}}}function Xm(t){let e,n;return e=new Dt({props:{$$slots:{default:[Zm]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&16777600&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Ym(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Zm(t){let e,n,r;function s(o){t[20](o)}let a={flow_id:"flow_da_neighbors",nodes:t[7].nodes,edges:t[7].edges,auto_layout:!0};return t[8]!==void 0&&(a.nodes_to_insert=t[8]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&128&&(l.nodes=o[7].nodes),i&128&&(l.edges=o[7].edges),!n&&i&256&&(n=!0,l.nodes_to_insert=o[8],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Qm(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[8].length+"",b,y,u,p,I;const k=t[18].header,_=Ue(k,t,t[24],xo),w=t[18].default,v=Ue(w,t,t[24],null),R=[Ym,Xm,Wm],C=[];function N(m,E){return m[3]?m[6]&&m[5].graph.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Parts/Control Neighbors To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Parts/Control Neighbors To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[21](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[9]),ae(n,"click",gt(t[19])),ae(e,"close",t[22]),ae(e,"click",Ft(t[23]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&16777216)&&He(_,k,m,m[24],u?Be(k,m[24],E,Jm):Ke(m[24]),xo),v&&v.p&&(!u||E&16777216)&&He(v,w,m,m[24],u?Be(w,m[24],E,null):Ke(m[24]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&256)&&g!==(g=m[8].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[21](null),p=!1,lt(I)}}}function xm(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{empty_message:o="has no direct neighbors in this release."}=e,{outbound_color:i="#fff4dd"}=e,{inbound_color:l="#fff4dd"}=e,{root_color:f="#fff4dd"}=e,{link_function:c=Z=>`/dao/artifact/${Z["@id"]}`}=e,{inbound_link_function:h=c}=e,{root_link_function:d=Z=>`/dao/artifact/${Z["@id"]}`}=e,{outbound_link_function:$=c}=e,{show_neighbors_modal:g}=e,{neighbor_filter_labels:b}=e,{root_node:y}=e,{data:u}=e,p,I=!1;const k=It(),_=Ot();let w=new Lt,v;function R(){let Z=[],ie=[];Z.push(We("mini-artifact-node",C.i(y.data.d3f_class)["rdfs:label"][0],0,y.data.d3f_class));for(const Ee of C.graph.filter(ve=>ve["@id"]!=u.description["@id"]&&ve["d3f:outbound"]))for(const ve of Ee["d3f:outbound"].filter(W=>b.length==0||b.includes(W["@id"])))for(const W of Ee[ve["@id"]])Z.find(q=>q.data.d3f_class==Ee["@id"])||Z.push(We("mini-artifact-node",Ee["rdfs:label"][0],0,Ee["@id"])),Z.find(q=>q.data.d3f_class==W["@id"])||Z.push(We("mini-artifact-node",C.i(W["@id"])["rdfs:label"][0],0,W["@id"])),ie.find(q=>q.source==Z.find(U=>U.data.d3f_class==Ee["@id"]).id&&q.target==Z.find(U=>U.data.d3f_class==W["@id"]).id)||ie.push(ht(Te(ve["@id"]),Z.find(q=>q.data.d3f_class==Ee["@id"]).id,Z.find(q=>q.data.d3f_class==W["@id"]).id)),C.i(y.data.d3f_class)&&Ee["@id"]!=y.data.d3f_class&&W["@id"]!=y.data.d3f_class&&w.edge_is_unique(y.data.d3f_class,ve["@id"],W["@id"])&&ie.push(ht("may-"+Te(ve["@id"]),Z.find(q=>q.data.d3f_class==y.data.d3f_class).id,Z.find(q=>q.data.d3f_class==W["@id"]).id,"stroke-width: 2px; stroke-dasharray:5%"));if(C.i(y.data.d3f_class)&&C.i(y.data.d3f_class)["rdfs:subClassOf"])for(const Ee of C.i(y.data.d3f_class)["rdfs:subClassOf"])for(const ve of C.graph.filter(W=>W["@id"]==Ee["@id"])){let W=Z.find(U=>U.data.d3f_class==ve["@id"]),q=Z.find(U=>U.data.d3f_class==y.data.d3f_class);W!=null&&ie.find(U=>U.target==W.id&&U.source==q.id)&&(W=We("mini-artifact-node",ve["rdfs:label"][0],0,ve["@id"]),Z.push(W)),ie.push(ht("rdfs:subClassOf",Z.find(U=>U.data.d3f_class==y.data.d3f_class).id,W.id))}return{nodes:Z,edges:ie}}let C;function N(){let Z=0,ie=0,Ee=200,ve=150;for(const W of r){let q=v.nodes.find(D=>D.data.d3f_class==y.data.d3f_class),U=!0,L="",P=v.edges.find(D=>D.source==W.id&&D.target==q.id);P?(L=P.data.label,U=!1):(P=v.edges.find(D=>D.target==W.id&&D.source==q.id),P&&(L=P.data.label,U=!0)),Ut(k,_,y,W.data.node_super_class,W.data.label,W.data.d3f_class,y.data.sequence,y.position.x+(U?Z:ie)*Ee,U?y.position.y+ve:y.position.y-ve,182,63,L,U),U?Z+=1:ie+=1}p&&(p.close(),n(6,I=!1)),n(8,r=[])}function m(Z){mt.call(this,t,Z)}function E(Z){r=Z,n(8,r)}function T(Z){ke[Z?"unshift":"push"](()=>{p=Z,n(4,p)})}const G=()=>n(0,g=!1),ue=()=>{p.close(),n(8,r=[])};return t.$$set=Z=>{"empty_message"in Z&&n(1,o=Z.empty_message),"outbound_color"in Z&&n(10,i=Z.outbound_color),"inbound_color"in Z&&n(11,l=Z.inbound_color),"root_color"in Z&&n(12,f=Z.root_color),"link_function"in Z&&n(13,c=Z.link_function),"inbound_link_function"in Z&&n(14,h=Z.inbound_link_function),"root_link_function"in Z&&n(15,d=Z.root_link_function),"outbound_link_function"in Z&&n(16,$=Z.outbound_link_function),"show_neighbors_modal"in Z&&n(0,g=Z.show_neighbors_modal),"neighbor_filter_labels"in Z&&n(17,b=Z.neighbor_filter_labels),"root_node"in Z&&n(2,y=Z.root_node),"data"in Z&&n(3,u=Z.data),"$$scope"in Z&&n(24,a=Z.$$scope)},t.$$.update=()=>{t.$$.dirty&131080&&u&&(n(6,I=!1),b.length==0?(n(6,I=!0),n(5,C=new mr(u.neighbors,{index:!0}))):u.neighbors["@graph"].some(Z=>Z["d3f:outbound"]&&b.some(ie=>Z["d3f:outbound"].some(Ee=>Ee["@id"]==ie)))&&(n(6,I=!0),n(5,C=new mr(u.neighbors,{index:!0})))),t.$$.dirty&32&&C&&C.graph.length>0&&n(7,v=R()),t.$$.dirty&17&&g&&p&&(p.showModal(),w.reset()),t.$$.dirty&17&&!g&&p&&(p.close(),w.reset())},n(8,r=[]),[g,o,y,u,p,C,I,v,r,N,i,l,f,c,h,d,$,b,s,m,E,T,G,ue,a]}class ep extends Re{constructor(e){super(),je(this,e,xm,Qm,Ie,{empty_message:1,outbound_color:10,inbound_color:11,root_color:12,link_function:13,inbound_link_function:14,root_link_function:15,outbound_link_function:16,show_neighbors_modal:0,neighbor_filter_labels:17,root_node:2,data:3})}}const tp=t=>({}),ea=t=>({});function np(t){let e;return{c(){e=Q("No related sensors in this release.")},l(n){e=x(n,"No related sensors in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function rp(t){let e,n;return e=new Dt({props:{$$slots:{default:[op]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&2097200&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function sp(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function op(t){let e,n,r;function s(o){t[17](o)}let a={flow_id:"flow_da_sensor",nodes:t[4].nodes,edges:t[4].edges,auto_layout:!0};return t[5]!==void 0&&(a.nodes_to_insert=t[5]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&16&&(l.nodes=o[4].nodes),i&16&&(l.edges=o[4].edges),!n&&i&32&&(n=!0,l.nodes_to_insert=o[5],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function ap(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[5].length+"",b,y,u,p,I;const k=t[15].header,_=Ue(k,t,t[21],ea),w=t[15].default,v=Ue(w,t,t[21],null),R=[sp,rp,np],C=[];function N(m,E){return m[1]?m[3].graph.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
      Select Sensors To Insert
      `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
      Select Sensors To Insert
      `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-7tw19s"),H(n,"class","svelte-7tw19s"),H(e,"class","svelte-7tw19s")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[18](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[6]),ae(n,"click",gt(t[16])),ae(e,"close",t[19]),ae(e,"click",Ft(t[20]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&2097152)&&He(_,k,m,m[21],u?Be(k,m[21],E,tp):Ke(m[21]),ea),v&&v.p&&(!u||E&2097152)&&He(v,w,m,m[21],u?Be(w,m[21],E,null):Ke(m[21]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&32)&&g!==(g=m[5].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[18](null),p=!1,lt(I)}}}function ip(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:i="#fff4dd"}=e,{root_color:l="#fff4dd"}=e,{link_function:f=E=>`/dao/artifact/${E["@id"]}`}=e,{inbound_link_function:c=f}=e,{root_link_function:h=E=>`/dao/artifact/${E["@id"]}`}=e,{outbound_link_function:d=f}=e,{show_sensor_modal:$}=e,{parent_node:g}=e,{data:b}=e,y;const u=It(),p=Ot();let I;function k(){let E=[],T=[];for(const G of _.graph.filter(ue=>ue["@id"]!=b.description["@id"]&&ue["d3f:outbound"]))for(const ue of G["d3f:outbound"])for(const Z of G[ue["@id"]])E.find(ie=>ie.data.d3f_class==G["@id"])||E.push(We("mini-artifact-node",G["rdfs:label"][0],0,G["@id"])),E.find(ie=>ie.data.d3f_class==Z["@id"])||E.push(We("mini-artifact-node",_.i(Z["@id"])["rdfs:label"][0],0,Z["@id"])),T.push(ht(Te(ue["@id"]),E.find(ie=>ie.data.d3f_class==G["@id"]).id,E.find(ie=>ie.data.d3f_class==Z["@id"]).id));return{nodes:E,edges:T}}let _;function w(){let E=0,T=200,G=150;for(const ue of r){let Z=b.sensors["@graph"].find(Ee=>Ee["@id"]==ue.data.d3f_class),ie="";Z&&Z["d3f:outbound"]&&(ie=Z["d3f:outbound"][0]["@id"]),Z&&(Ut(u,p,g,ue.data.node_super_class,ue.data.label,ue.data.d3f_class,g.data.sequence,g.position.x+E*T,g.position.y+G,182,63,ie,!1),E+=1)}y&&y.close(),n(5,r=[])}function v(E){mt.call(this,t,E)}function R(E){r=E,n(5,r)}function C(E){ke[E?"unshift":"push"](()=>{y=E,n(2,y)})}const N=()=>n(0,$=!1),m=()=>{y.close(),n(5,r=[])};return t.$$set=E=>{"outbound_color"in E&&n(7,o=E.outbound_color),"inbound_color"in E&&n(8,i=E.inbound_color),"root_color"in E&&n(9,l=E.root_color),"link_function"in E&&n(10,f=E.link_function),"inbound_link_function"in E&&n(11,c=E.inbound_link_function),"root_link_function"in E&&n(12,h=E.root_link_function),"outbound_link_function"in E&&n(13,d=E.outbound_link_function),"show_sensor_modal"in E&&n(0,$=E.show_sensor_modal),"parent_node"in E&&n(14,g=E.parent_node),"data"in E&&n(1,b=E.data),"$$scope"in E&&n(21,a=E.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&b&&b.sensors&&n(3,_=new mr(b.sensors,{index:!0})),t.$$.dirty&8&&_&&_.graph&&n(4,I=k()),t.$$.dirty&5&&$&&y&&y.showModal(),t.$$.dirty&5&&!$&&y&&y.close()},n(5,r=[]),[$,b,y,_,I,r,w,o,i,l,f,c,h,d,g,s,v,R,C,N,m,a]}class lp extends Re{constructor(e){super(),je(this,e,ip,ap,Ie,{outbound_color:7,inbound_color:8,root_color:9,link_function:10,inbound_link_function:11,root_link_function:12,outbound_link_function:13,show_sensor_modal:0,parent_node:14,data:1})}}const fp=t=>({}),ta=t=>({});function cp(t){let e;return{c(){e=Q("No related events in this release.")},l(n){e=x(n,"No related events in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function up(t){let e,n,r,s,a,o=t[3],i,l;function f(d){t[12](d)}let c={toggles:t[4]};t[3]!==void 0&&(c.selected=t[3]),r=new ss({props:c}),ke.push(()=>Le(r,"selected",f));let h=na(t);return{c(){e=V("br"),n=K(),te(r.$$.fragment),a=K(),h.c(),i=Ze()},l(d){e=z(d,"BR",{}),n=B(d),ne(r.$$.fragment,d),a=B(d),h.l(d),i=Ze()},m(d,$){j(d,e,$),j(d,n,$),re(r,d,$),j(d,a,$),h.m(d,$),j(d,i,$),l=!0},p(d,$){const g={};$&16&&(g.toggles=d[4]),!s&&$&8&&(s=!0,g.selected=d[3],ze(()=>s=!1)),r.$set(g),$&8&&Ie(o,o=d[3])?(Me(),F(h,1,1,ce),Ve(),h=na(d),h.c(),M(h,1),h.m(i.parentNode,i)):h.p(d,$)},i(d){l||(M(r.$$.fragment,d),M(h),l=!0)},o(d){F(r.$$.fragment,d),F(h),l=!1},d(d){d&&(S(e),S(n),S(a),S(i)),se(r,d),h.d(d)}}}function dp(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function _p(t){let e,n,r;function s(o){t[13](o)}let a={flow_id:"flow_da_events",nodes:t[5].nodes,edges:t[5].edges,auto_layout:!0};return t[6]!==void 0&&(a.nodes_to_insert=t[6]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&32&&(l.nodes=o[5].nodes),i&32&&(l.edges=o[5].edges),!n&&i&64&&(n=!0,l.nodes_to_insert=o[6],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function na(t){let e,n;return e=new Dt({props:{$$slots:{default:[_p]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&131168&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function hp(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[6].length+"",b,y,u,p,I;const k=t[10].header,_=Ue(k,t,t[17],ta),w=t[10].default,v=Ue(w,t,t[17],null),R=[dp,up,cp],C=[];function N(m,E){return m[1]?m[1].da_to_events.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Event Mappings to Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Event Mappings to Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[14](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[7]),ae(n,"click",gt(t[11])),ae(e,"close",t[15]),ae(e,"click",Ft(t[16]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&131072)&&He(_,k,m,m[17],u?Be(k,m[17],E,fp):Ke(m[17]),ta),v&&v.p&&(!u||E&131072)&&He(v,w,m,m[17],u?Be(w,m[17],E,null):Ke(m[17]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&64)&&g!==(g=m[6].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[14](null),p=!1,lt(I)}}}function mp(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_events_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d=new Lt;function $(){let N=0,m=200,E=150;for(const T of r){let G=l.da_to_events.results.bindings.find(Z=>{var ie;return((ie=Z.event_label)===null||ie===void 0?void 0:ie.value)==T.data.label}),ue="";G&&(ue=G.event_rel_label.value),Ut(c,h,i,T.data.node_super_class,T.data.label,T.data.d3f_class,i.data.sequence,i.position.x+N*m,i.position.y-E,182,63,ue,!1),N+=1}f&&f.close(),n(6,r=[])}let g=new Set,b=[],y=[];rs(b,y)&&(y=[]);function u(N){n(6,r=[])}let p;function I(){let N=[],m=[];for(const E of l.da_to_events.results.bindings)d.edge_is_unique(E.event_label.value,E.event_rel_label.value,E.artifact_label.value)&&!y.includes(E.event_label.value)&&(N.find(T=>T.data.d3f_class=="d3f:"+Te(E.event.value))||N.push(We("mini-event-node",E.event_label.value,0,"d3f:"+Te(E.event.value))),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.artifact.value))||N.push(We("mini-artifact-node",E.artifact_label.value,0,"d3f:"+Te(E.artifact.value))),m.push(ht(E.event_rel_label.value.replace(/ /g,""),N.find(T=>T.data.label==E.event_label.value).id,N.find(T=>T.data.label==E.artifact_label.value).id)));return{nodes:N,edges:m}}function k(N){mt.call(this,t,N)}function _(N){y=N,n(3,y)}function w(N){r=N,n(6,r)}function v(N){ke[N?"unshift":"push"](()=>{f=N,n(2,f)})}const R=()=>n(0,o=!1),C=()=>{f.close(),n(6,r=[])};return t.$$set=N=>{"show_events_modal"in N&&n(0,o=N.show_events_modal),"parent_node"in N&&n(8,i=N.parent_node),"data"in N&&n(1,l=N.data),"$$scope"in N&&n(17,a=N.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&f&&(f.showModal(),n(9,d=new Lt)),t.$$.dirty&5&&!o&&f&&f.close(),t.$$.dirty&2&&l&&l.da_to_events.results.bindings.forEach(N=>{g.add(N.event_label.value)}),t.$$.dirty&8&&u(),t.$$.dirty&520&&d.reset(y),t.$$.dirty&10&&l&&l.da_to_events.results.bindings.length>0&&y&&n(5,p=I())},n(6,r=[]),n(4,b=Array.from(g)),[o,l,f,y,b,p,r,$,i,d,s,k,_,w,v,R,C,a]}class pp extends Re{constructor(e){super(),je(this,e,mp,hp,Ie,{show_events_modal:0,parent_node:8,data:1})}}function gp(t){let e,n,r,s,a,o,i;return o=new si({props:{size:28,iconName:"arrowRight",clickable:!1}}),{c(){e=V("div"),n=V("div"),r=V("span"),s=Q(t[0]),a=K(),te(o.$$.fragment),this.h()},l(l){e=z(l,"DIV",{class:!0});var f=Y(e);n=z(f,"DIV",{class:!0});var c=Y(n);r=z(c,"SPAN",{style:!0});var h=Y(r);s=x(h,t[0]),h.forEach(S),a=B(c),ne(o.$$.fragment,c),c.forEach(S),f.forEach(S),this.h()},h(){Fe(r,"padding-right","10px"),Fe(r,"align-content","center"),H(n,"class","item-title item-title-disabled svelte-1srr1yj"),H(e,"class","menu svelte-1srr1yj")},m(l,f){j(l,e,f),O(e,n),O(n,r),O(r,s),O(n,a),re(o,n,null),i=!0},p(l,f){(!i||f&1)&&Oe(s,l[0])},i(l){i||(M(o.$$.fragment,l),i=!0)},o(l){F(o.$$.fragment,l),i=!1},d(l){l&&S(e),se(o)}}}function vp(t){let e,n,r,s,a,o,i,l,f,c;o=new si({props:{size:28,iconName:"arrowRight",clickable:!1}});let h=t[2]&&ra(t);return{c(){e=V("div"),n=V("div"),r=V("span"),s=Q(t[0]),a=K(),te(o.$$.fragment),i=K(),h&&h.c(),this.h()},l(d){e=z(d,"DIV",{class:!0});var $=Y(e);n=z($,"DIV",{class:!0});var g=Y(n);r=z(g,"SPAN",{style:!0});var b=Y(r);s=x(b,t[0]),b.forEach(S),a=B(g),ne(o.$$.fragment,g),g.forEach(S),i=B($),h&&h.l($),$.forEach(S),this.h()},h(){Fe(r,"padding-right","10px"),Fe(r,"align-content","center"),H(n,"class","item-title svelte-1srr1yj"),H(e,"class","menu svelte-1srr1yj")},m(d,$){j(d,e,$),O(e,n),O(n,r),O(r,s),O(n,a),re(o,n,null),O(e,i),h&&h.m(e,null),l=!0,f||(c=[ae(e,"mouseenter",t[3]),ae(e,"mouseleave",t[3])],f=!0)},p(d,$){(!l||$&1)&&Oe(s,d[0]),d[2]?h?(h.p(d,$),$&4&&M(h,1)):(h=ra(d),h.c(),M(h,1),h.m(e,null)):h&&(Me(),F(h,1,1,()=>{h=null}),Ve())},i(d){l||(M(o.$$.fragment,d),M(h),l=!0)},o(d){F(o.$$.fragment,d),F(h),l=!1},d(d){d&&S(e),se(o),h&&h.d(),f=!1,lt(c)}}}function ra(t){let e,n;const r=t[5].default,s=Ue(r,t,t[4],null);return{c(){e=V("div"),s&&s.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var o=Y(e);s&&s.l(o),o.forEach(S),this.h()},h(){H(e,"class","menu-popout-container svelte-1srr1yj")},m(a,o){j(a,e,o),s&&s.m(e,null),n=!0},p(a,o){s&&s.p&&(!n||o&16)&&He(s,r,a,a[4],n?Be(r,a[4],o,null):Ke(a[4]),null)},i(a){n||(M(s,a),n=!0)},o(a){F(s,a),n=!1},d(a){a&&S(e),s&&s.d(a)}}}function bp(t){let e,n,r,s;const a=[vp,gp],o=[];function i(l,f){return l[1]?1:0}return e=i(t),n=o[e]=a[e](t),{c(){n.c(),r=Ze()},l(l){n.l(l),r=Ze()},m(l,f){o[e].m(l,f),j(l,r,f),s=!0},p(l,[f]){let c=e;e=i(l),e===c?o[e].p(l,f):(Me(),F(o[c],1,1,()=>{o[c]=null}),Ve(),n=o[e],n?n.p(l,f):(n=o[e]=a[e](l),n.c()),M(n,1),n.m(r.parentNode,r))},i(l){s||(M(n),s=!0)},o(l){F(n),s=!1},d(l){l&&S(r),o[e].d(l)}}}function $p(t,e,n){let{$$slots:r={},$$scope:s}=e,{title:a=""}=e,{disabled:o=!1}=e,i=!1;function l(){n(2,i=!i)}return t.$$set=f=>{"title"in f&&n(0,a=f.title),"disabled"in f&&n(1,o=f.disabled),"$$scope"in f&&n(4,s=f.$$scope)},[a,o,i,l,s,r]}class Er extends Re{constructor(e){super(),je(this,e,$p,bp,Ie,{title:0,disabled:1})}}function yp(t){let e,n;const r=t[4].default,s=Ue(r,t,t[3],null);return{c(){e=V("div"),s&&s.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var o=Y(e);s&&s.l(o),o.forEach(S),this.h()},h(){H(e,"class","menu-item-disabled svelte-19nsmo9")},m(a,o){j(a,e,o),s&&s.m(e,null),n=!0},p(a,o){s&&s.p&&(!n||o&8)&&He(s,r,a,a[3],n?Be(r,a[3],o,null):Ke(a[3]),null)},i(a){n||(M(s,a),n=!0)},o(a){F(s,a),n=!1},d(a){a&&S(e),s&&s.d(a)}}}function wp(t){let e,n,r,s,a,o;const i=t[4].default,l=Ue(i,t,t[3],null);let f=t[1].length>0&&sa(t);return{c(){e=V("div"),n=V("span"),l&&l.c(),r=K(),f&&f.c(),this.h()},l(c){e=z(c,"DIV",{class:!0,style:!0});var h=Y(e);n=z(h,"SPAN",{});var d=Y(n);l&&l.l(d),d.forEach(S),r=B(h),f&&f.l(h),h.forEach(S),this.h()},h(){H(e,"class","menu-item svelte-19nsmo9"),H(e,"style",t[2])},m(c,h){j(c,e,h),O(e,n),l&&l.m(n,null),O(e,r),f&&f.m(e,null),s=!0,a||(o=ae(e,"click",t[5]),a=!0)},p(c,h){l&&l.p&&(!s||h&8)&&He(l,i,c,c[3],s?Be(i,c[3],h,null):Ke(c[3]),null),c[1].length>0?f?f.p(c,h):(f=sa(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!s||h&4)&&H(e,"style",c[2])},i(c){s||(M(l,c),s=!0)},o(c){F(l,c),s=!1},d(c){c&&S(e),l&&l.d(c),f&&f.d(),a=!1,o()}}}function sa(t){let e,n;return{c(){e=V("span"),n=Q(t[1]),this.h()},l(r){e=z(r,"SPAN",{class:!0});var s=Y(e);n=x(s,t[1]),s.forEach(S),this.h()},h(){H(e,"class","keybind-text svelte-19nsmo9")},m(r,s){j(r,e,s),O(e,n)},p(r,s){s&2&&Oe(n,r[1])},d(r){r&&S(e)}}}function kp(t){let e,n,r,s;const a=[wp,yp],o=[];function i(l,f){return l[0]?1:0}return e=i(t),n=o[e]=a[e](t),{c(){n.c(),r=Ze()},l(l){n.l(l),r=Ze()},m(l,f){o[e].m(l,f),j(l,r,f),s=!0},p(l,[f]){let c=e;e=i(l),e===c?o[e].p(l,f):(Me(),F(o[c],1,1,()=>{o[c]=null}),Ve(),n=o[e],n?n.p(l,f):(n=o[e]=a[e](l),n.c()),M(n,1),n.m(r.parentNode,r))},i(l){s||(M(n),s=!0)},o(l){F(n),s=!1},d(l){l&&S(r),o[e].d(l)}}}function Ep(t,e,n){let{$$slots:r={},$$scope:s}=e,{disabled:a=!1}=e,{keybind:o=""}=e,{style:i=""}=e;function l(f){mt.call(this,t,f)}return t.$$set=f=>{"disabled"in f&&n(0,a=f.disabled),"keybind"in f&&n(1,o=f.keybind),"style"in f&&n(2,i=f.style),"$$scope"in f&&n(3,s=f.$$scope)},[a,o,i,s,r,l]}class qe extends Re{constructor(e){super(),je(this,e,Ep,kp,Ie,{disabled:0,keybind:1,style:2})}}function oa(t){let e,n,r;function s(o){t[11](o)}let a={parent_node:t[0],data:t[7]};return t[1]!==void 0&&(a.show_attack_modal=t[1]),e=new Im({props:a}),ke.push(()=>Le(e,"show_attack_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&128&&(l.data=o[7]),!n&&i&2&&(n=!0,l.show_attack_modal=o[1],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function aa(t){let e,n,r;function s(o){t[12](o)}let a={parent_node:t[0],data:t[7]};return t[2]!==void 0&&(a.show_defend_modal=t[2]),e=new zm({props:a}),ke.push(()=>Le(e,"show_defend_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&128&&(l.data=o[7]),!n&&i&4&&(n=!0,l.show_defend_modal=o[2],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function ia(t){let e,n,r;function s(o){t[13](o)}let a={neighbor_filter_labels:t[8],root_node:t[0],empty_message:"has no related direct neighbors in this release.",inbound_color:"#f9d999",inbound_link_function:t[10],data:t[7]};return t[4]!==void 0&&(a.show_neighbors_modal=t[4]),e=new ep({props:a}),ke.push(()=>Le(e,"show_neighbors_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&256&&(l.neighbor_filter_labels=o[8]),i&1&&(l.root_node=o[0]),i&128&&(l.data=o[7]),!n&&i&16&&(n=!0,l.show_neighbors_modal=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function la(t){let e,n,r;function s(o){t[14](o)}let a={parent_node:t[0],inbound_color:"#f9d999",data:t[7]};return t[5]!==void 0&&(a.show_sensor_modal=t[5]),e=new lp({props:a}),ke.push(()=>Le(e,"show_sensor_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&128&&(l.data=o[7]),!n&&i&32&&(n=!0,l.show_sensor_modal=o[5],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function fa(t){let e,n,r;function s(o){t[15](o)}let a={parent_node:t[0],inbound_color:"#f9d999",inbound_link_function:t[10],data:t[7]};return t[3]!==void 0&&(a.show_weakness_modal=t[3]),e=new Gm({props:a}),ke.push(()=>Le(e,"show_weakness_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&128&&(l.data=o[7]),!n&&i&8&&(n=!0,l.show_weakness_modal=o[3],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function ca(t){let e,n,r;function s(o){t[16](o)}let a={parent_node:t[0],data:t[7]};return t[6]!==void 0&&(a.show_events_modal=t[6]),e=new pp({props:a}),ke.push(()=>Le(e,"show_events_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&128&&(l.data=o[7]),!n&&i&64&&(n=!0,l.show_events_modal=o[6],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Sp(t){let e;return{c(){e=Q("attack the node")},l(n){e=x(n,"attack the node")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Pp(t){let e;return{c(){e=Q("defend the node")},l(n){e=x(n,"defend the node")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Cp(t){let e;return{c(){e=Q("explode all")},l(n){e=x(n,"explode all")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Np(t){let e;return{c(){e=Q("explode parts")},l(n){e=x(n,"explode parts")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Tp(t){let e;return{c(){e=Q("explode control")},l(n){e=x(n,"explode control")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Ip(t){let e,n,r,s,a,o;return e=new qe({props:{$$slots:{default:[Cp]},$$scope:{ctx:t}}}),e.$on("click",t[19]),r=new qe({props:{$$slots:{default:[Np]},$$scope:{ctx:t}}}),r.$on("click",t[20]),a=new qe({props:{$$slots:{default:[Tp]},$$scope:{ctx:t}}}),a.$on("click",t[21]),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),s=K(),te(a.$$.fragment)},l(i){ne(e.$$.fragment,i),n=B(i),ne(r.$$.fragment,i),s=B(i),ne(a.$$.fragment,i)},m(i,l){re(e,i,l),j(i,n,l),re(r,i,l),j(i,s,l),re(a,i,l),o=!0},p(i,l){const f={};l&134217728&&(f.$$scope={dirty:l,ctx:i}),e.$set(f);const c={};l&134217728&&(c.$$scope={dirty:l,ctx:i}),r.$set(c);const h={};l&134217728&&(h.$$scope={dirty:l,ctx:i}),a.$set(h)},i(i){o||(M(e.$$.fragment,i),M(r.$$.fragment,i),M(a.$$.fragment,i),o=!0)},o(i){F(e.$$.fragment,i),F(r.$$.fragment,i),F(a.$$.fragment,i),o=!1},d(i){i&&(S(n),S(s)),se(e,i),se(r,i),se(a,i)}}}function Op(t){let e;return{c(){e=Q("add weaknesses")},l(n){e=x(n,"add weaknesses")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Dp(t){let e;return{c(){e=Q("add sensors")},l(n){e=x(n,"add sensors")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Rp(t){let e;return{c(){e=Q("add events")},l(n){e=x(n,"add events")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function jp(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g,b,y,u,p,I=t[1]&&oa(t),k=t[2]&&aa(t),_=t[4]&&ia(t),w=t[5]&&la(t),v=t[3]&&fa(t),R=t[6]&&ca(t);return i=new qe({props:{$$slots:{default:[Sp]},$$scope:{ctx:t}}}),i.$on("click",t[17]),f=new qe({props:{$$slots:{default:[Pp]},$$scope:{ctx:t}}}),f.$on("click",t[18]),h=new Er({props:{title:"explode",$$slots:{default:[Ip]},$$scope:{ctx:t}}}),$=new qe({props:{$$slots:{default:[Op]},$$scope:{ctx:t}}}),$.$on("click",t[22]),b=new qe({props:{$$slots:{default:[Dp]},$$scope:{ctx:t}}}),b.$on("click",t[23]),u=new qe({props:{$$slots:{default:[Rp]},$$scope:{ctx:t}}}),u.$on("click",t[24]),{c(){I&&I.c(),e=K(),k&&k.c(),n=K(),_&&_.c(),r=K(),w&&w.c(),s=K(),v&&v.c(),a=K(),R&&R.c(),o=K(),te(i.$$.fragment),l=K(),te(f.$$.fragment),c=K(),te(h.$$.fragment),d=K(),te($.$$.fragment),g=K(),te(b.$$.fragment),y=K(),te(u.$$.fragment)},l(C){I&&I.l(C),e=B(C),k&&k.l(C),n=B(C),_&&_.l(C),r=B(C),w&&w.l(C),s=B(C),v&&v.l(C),a=B(C),R&&R.l(C),o=B(C),ne(i.$$.fragment,C),l=B(C),ne(f.$$.fragment,C),c=B(C),ne(h.$$.fragment,C),d=B(C),ne($.$$.fragment,C),g=B(C),ne(b.$$.fragment,C),y=B(C),ne(u.$$.fragment,C)},m(C,N){I&&I.m(C,N),j(C,e,N),k&&k.m(C,N),j(C,n,N),_&&_.m(C,N),j(C,r,N),w&&w.m(C,N),j(C,s,N),v&&v.m(C,N),j(C,a,N),R&&R.m(C,N),j(C,o,N),re(i,C,N),j(C,l,N),re(f,C,N),j(C,c,N),re(h,C,N),j(C,d,N),re($,C,N),j(C,g,N),re(b,C,N),j(C,y,N),re(u,C,N),p=!0},p(C,[N]){C[1]?I?(I.p(C,N),N&2&&M(I,1)):(I=oa(C),I.c(),M(I,1),I.m(e.parentNode,e)):I&&(Me(),F(I,1,1,()=>{I=null}),Ve()),C[2]?k?(k.p(C,N),N&4&&M(k,1)):(k=aa(C),k.c(),M(k,1),k.m(n.parentNode,n)):k&&(Me(),F(k,1,1,()=>{k=null}),Ve()),C[4]?_?(_.p(C,N),N&16&&M(_,1)):(_=ia(C),_.c(),M(_,1),_.m(r.parentNode,r)):_&&(Me(),F(_,1,1,()=>{_=null}),Ve()),C[5]?w?(w.p(C,N),N&32&&M(w,1)):(w=la(C),w.c(),M(w,1),w.m(s.parentNode,s)):w&&(Me(),F(w,1,1,()=>{w=null}),Ve()),C[3]?v?(v.p(C,N),N&8&&M(v,1)):(v=fa(C),v.c(),M(v,1),v.m(a.parentNode,a)):v&&(Me(),F(v,1,1,()=>{v=null}),Ve()),C[6]?R?(R.p(C,N),N&64&&M(R,1)):(R=ca(C),R.c(),M(R,1),R.m(o.parentNode,o)):R&&(Me(),F(R,1,1,()=>{R=null}),Ve());const m={};N&134217728&&(m.$$scope={dirty:N,ctx:C}),i.$set(m);const E={};N&134217728&&(E.$$scope={dirty:N,ctx:C}),f.$set(E);const T={};N&134218129&&(T.$$scope={dirty:N,ctx:C}),h.$set(T);const G={};N&134217728&&(G.$$scope={dirty:N,ctx:C}),$.$set(G);const ue={};N&134217728&&(ue.$$scope={dirty:N,ctx:C}),b.$set(ue);const Z={};N&134217728&&(Z.$$scope={dirty:N,ctx:C}),u.$set(Z)},i(C){p||(M(I),M(k),M(_),M(w),M(v),M(R),M(i.$$.fragment,C),M(f.$$.fragment,C),M(h.$$.fragment,C),M($.$$.fragment,C),M(b.$$.fragment,C),M(u.$$.fragment,C),p=!0)},o(C){F(I),F(k),F(_),F(w),F(v),F(R),F(i.$$.fragment,C),F(f.$$.fragment,C),F(h.$$.fragment,C),F($.$$.fragment,C),F(b.$$.fragment,C),F(u.$$.fragment,C),p=!1},d(C){C&&(S(e),S(n),S(r),S(s),S(a),S(o),S(l),S(c),S(d),S(g),S(y)),I&&I.d(C),k&&k.d(C),_&&_.d(C),w&&w.d(C),v&&v.d(C),R&&R.d(C),se(i,C),se(f,C),se(h,C),se($,C),se(b,C),se(u,C)}}}function Ap(t,e,n){var r=this&&this.__awaiter||function(G,ue,Z,ie){function Ee(ve){return ve instanceof Z?ve:new Z(function(W){W(ve)})}return new(Z||(Z=Promise))(function(ve,W){function q(P){try{L(ie.next(P))}catch(D){W(D)}}function U(P){try{L(ie.throw(P))}catch(D){W(D)}}function L(P){P.done?ve(P.value):Ee(P.value).then(q,U)}L((ie=ie.apply(G,ue||[])).next())})};let{node:s}=e,a=!1,o=!1,i=!1,l=!1,f=!1,c=!1,h,d=[];function $(G){alert(G),n(1,a=!1),n(2,o=!1),n(3,i=!1),n(4,l=!1),n(5,f=!1),n(6,c=!1)}function g(G){return r(this,void 0,void 0,function*(){if(G.data.d3f_class&&G.data.d3f_class.includes("d3f:")){const ue=G.data.d3f_class,Z=yield fetch(`/api/dao/artifact/${ue}.json`);if(Z.status!=200)return $(`D3FEND Artifact: "${ue.replace("d3f:","")}" not found in ontology`),null;{const ie=yield Z.json();return ie.description["@graph"].length==0?($(`D3FEND Artifact: "${ue.replace("d3f:","")}" not found in ontology`),null):ie}}else $("Please specify a D3FEND Class for this node to enable inferential mapping")})}function b(G){return jl(G["d3f:cwe-id"][0])}function y(G){a=G,n(1,a)}function u(G){o=G,n(2,o)}function p(G){l=G,n(4,l)}function I(G){f=G,n(5,f)}function k(G){i=G,n(3,i)}function _(G){c=G,n(6,c)}const w=async()=>{n(7,h=null),n(1,a=!0),n(7,h=await g(s))},v=async()=>{n(7,h=null),n(2,o=!0),n(7,h=await g(s))},R=async()=>{n(7,h=null),n(4,l=!0),n(8,d=[]),n(7,h=await g(s))},C=async()=>{n(7,h=null),n(4,l=!0),n(8,d=["d3f:contains","d3f:may-contain"]),n(7,h=await g(s))},N=async()=>{n(7,h=null),n(4,l=!0),n(8,d=["d3f:runs","d3f:loads","d3f:manages"]),n(7,h=await g(s))},m=async()=>{n(7,h=null),n(3,i=!0),n(7,h=await g(s))},E=async()=>{n(7,h=null),n(5,f=!0),n(7,h=await g(s))},T=async()=>{n(7,h=null),n(6,c=!0),n(7,h=await g(s))};return t.$$set=G=>{"node"in G&&n(0,s=G.node)},[s,a,o,i,l,f,c,h,d,g,b,y,u,p,I,k,_,w,v,R,C,N,m,E,T]}class Mp extends Re{constructor(e){super(),je(this,e,Ap,jp,Ie,{node:0})}}const Vp=t=>({}),ua=t=>({});function zp(t){let e;return{c(){e=Q("No related artifacts in this release.")},l(n){e=x(n,"No related artifacts in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function Lp(t){let e,n;return e=new Dt({props:{$$slots:{default:[qp]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&16408&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Fp(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function qp(t){let e,n,r;function s(o){t[10](o)}let a={flow_id:"flow_def_art",nodes:t[3].nodes,edges:t[3].edges,auto_layout:!0};return t[4]!==void 0&&(a.nodes_to_insert=t[4]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&8&&(l.nodes=o[3].nodes),i&8&&(l.edges=o[3].edges),!n&&i&16&&(n=!0,l.nodes_to_insert=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Up(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[4].length+"",b,y,u,p,I;const k=t[8].header,_=Ue(k,t,t[14],ua),w=t[8].default,v=Ue(w,t,t[14],null),R=[Fp,Lp,zp],C=[];function N(m,E){return m[1]?m[1].digital_artifacts.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Related Artifacts To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Related Artifacts To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[11](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[5]),ae(n,"click",gt(t[9])),ae(e,"close",t[12]),ae(e,"click",Ft(t[13]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&16384)&&He(_,k,m,m[14],u?Be(k,m[14],E,Vp):Ke(m[14]),ua),v&&v.p&&(!u||E&16384)&&He(v,w,m,m[14],u?Be(w,m[14],E,null):Ke(m[14]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&16)&&g!==(g=m[4].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[11](null),p=!1,lt(I)}}}function Hp(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_artifacts_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d=new Lt,$;function g(){let _=[],w=[];for(const v of l.digital_artifacts.results.bindings)d.edge_is_unique(v.def_tech_label.value,v.def_artifact_rel_label.value,v.def_artifact_label.value)&&(_.find(R=>R.data.d3f_class=="d3f:"+Te(v.def_tech.value))||_.push(We("mini-countermeasure-node",v.def_tech_label.value,0,"d3f:"+Te(v.def_tech.value))),_.find(R=>R.data.d3f_class=="d3f:"+Te(v.def_artifact.value))||_.push(We("mini-artifact-node",v.def_artifact_label.value,0,"d3f:"+Te(v.def_artifact.value))),w.push(ht(v.def_artifact_rel_label.value.replace(/ /g,""),_.find(R=>R.data.label==v.def_tech_label.value).id,_.find(R=>R.data.label==v.def_artifact_label.value).id)));return{nodes:_,edges:w}}function b(){let _=0,w=200,v=150;for(const R of r){let C=l.digital_artifacts.results.bindings.find(m=>"d3f:"+Te(m.def_artifact.value)==R.data.d3f_class),N="";C&&(N=C.def_artifact_rel_label.value),Ut(c,h,i,R.data.node_super_class,R.data.label,R.data.d3f_class,i.data.sequence,i.position.x+_*w,i.position.y+v,182,63,N,!0),_+=1}f&&f.close(),n(4,r=[])}function y(_){mt.call(this,t,_)}function u(_){r=_,n(4,r)}function p(_){ke[_?"unshift":"push"](()=>{f=_,n(2,f)})}const I=()=>n(0,o=!1),k=()=>{f.close(),n(4,r=[])};return t.$$set=_=>{"show_artifacts_modal"in _&&n(0,o=_.show_artifacts_modal),"parent_node"in _&&n(6,i=_.parent_node),"data"in _&&n(1,l=_.data),"$$scope"in _&&n(14,a=_.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&f&&(f.showModal(),n(7,d=new Lt)),t.$$.dirty&133&&!o&&f&&(f.close(),d.reset()),t.$$.dirty&2&&l&&l.digital_artifacts.results.bindings.length>0&&n(3,$=g())},n(4,r=[]),[o,l,f,$,r,b,i,d,s,y,u,p,I,k,a]}class Kp extends Re{constructor(e){super(),je(this,e,Hp,Up,Ie,{show_artifacts_modal:0,parent_node:6,data:1})}}const Bp=t=>({}),da=t=>({});function Gp(t){let e;return{c(){e=Q("No related offensive techniques in this release.")},l(n){e=x(n,"No related offensive techniques in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function Jp(t){let e,n;return e=new Dt({props:{$$slots:{default:[Xp]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&8216&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Wp(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Xp(t){let e,n,r;function s(o){t[9](o)}let a={flow_id:"flow_def_off",nodes:t[3].nodes,edges:t[3].edges,auto_layout:!0};return t[4]!==void 0&&(a.nodes_to_insert=t[4]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&8&&(l.nodes=o[3].nodes),i&8&&(l.edges=o[3].edges),!n&&i&16&&(n=!0,l.nodes_to_insert=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Yp(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[4].length+"",b,y,u,p,I;const k=t[7].header,_=Ue(k,t,t[13],da),w=t[7].default,v=Ue(w,t,t[13],null),R=[Wp,Jp,Gp],C=[];function N(m,E){return m[1]?m[1].def_to_off.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Attack Techniques To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Attack Techniques To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[10](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[5]),ae(n,"click",gt(t[8])),ae(e,"close",t[11]),ae(e,"click",Ft(t[12]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&8192)&&He(_,k,m,m[13],u?Be(k,m[13],E,Bp):Ke(m[13]),da),v&&v.p&&(!u||E&8192)&&He(v,w,m,m[13],u?Be(w,m[13],E,null):Ke(m[13]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&16)&&g!==(g=m[4].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[10](null),p=!1,lt(I)}}}function Zp(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_attack_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d=new Lt;function $(){let _=0,w=200,v=150;for(const R of r){let C=l.def_to_off.results.bindings.find(m=>"d3f:"+m.off_tech_id.value==R.data.d3f_class),N="";C&&(N="may-"+C.def_tactic_label.value.toLowerCase()),Ut(c,h,i,R.data.node_super_class,R.data.label,R.data.d3f_class,i.data.sequence,i.position.x+_*w,i.position.y+v,182,63,N,!0),_+=1}f&&f.close(),n(4,r=[])}let g;function b(){let _=[],w=[];for(const v of l.def_to_off.results.bindings)d.edge_is_unique(v.def_tech_label.value,v.off_artifact_rel_label.value,v.off_artifact_label.value)&&(_.find(R=>R.data.d3f_class=="d3f:"+Te(v.def_tech.value))||_.push(We("mini-countermeasure-node",v.def_tech_label.value,0,"d3f:"+Te(v.def_tech.value))),_.find(R=>R.data.d3f_class=="d3f:"+v.off_tech_id.value)||_.push(We("mini-attack-node",v.off_tech_label.value,0,"d3f:"+v.off_tech_id.value)),w.find(R=>R.source==_.find(C=>C.data.d3f_class=="d3f:"+Te(v.def_tech.value)).id&&R.target==_.find(C=>C.data.d3f_class=="d3f:"+v.off_tech_id.value).id)||w.push(ht("may-"+v.def_tactic_label.value.replace(/ /g,"").toLowerCase(),_.find(R=>R.data.d3f_class=="d3f:"+Te(v.def_tech.value)).id,_.find(R=>R.data.d3f_class=="d3f:"+v.off_tech_id.value).id)));return{nodes:_,edges:w}}function y(_){mt.call(this,t,_)}function u(_){r=_,n(4,r)}function p(_){ke[_?"unshift":"push"](()=>{f=_,n(2,f)})}const I=()=>n(0,o=!1),k=()=>{f.close(),n(4,r=[])};return t.$$set=_=>{"show_attack_modal"in _&&n(0,o=_.show_attack_modal),"parent_node"in _&&n(6,i=_.parent_node),"data"in _&&n(1,l=_.data),"$$scope"in _&&n(13,a=_.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&f&&(f.showModal(),d.reset()),t.$$.dirty&5&&!o&&f&&(f.close(),d.reset()),t.$$.dirty&2&&l&&l.digital_artifacts.results.bindings.length>0&&n(3,g=b())},n(4,r=[]),[o,l,f,g,r,$,i,s,y,u,p,I,k,a]}class Qp extends Re{constructor(e){super(),je(this,e,Zp,Yp,Ie,{show_attack_modal:0,parent_node:6,data:1})}}function xp(t){let e;return{c(){e=Q("artifacts")},l(n){e=x(n,"artifacts")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function eg(t){let e;return{c(){e=Q("offensive techniques")},l(n){e=x(n,"offensive techniques")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function tg(t){let e;return{c(){e=Q("weaknesses (coming soon)")},l(n){e=x(n,"weaknesses (coming soon)")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function ng(t){let e,n,r,s,a,o,i,l,f,c,h,d;e=new qe({props:{$$slots:{default:[xp]},$$scope:{ctx:t}}}),e.$on("click",t[5]);function $(u){t[6](u)}let g={parent_node:t[0],data:t[1]};t[3]!==void 0&&(g.show_artifacts_modal=t[3]),r=new Kp({props:g}),ke.push(()=>Le(r,"show_artifacts_modal",$)),o=new qe({props:{$$slots:{default:[eg]},$$scope:{ctx:t}}}),o.$on("click",t[7]);function b(u){t[8](u)}let y={parent_node:t[0],data:t[1]};return t[2]!==void 0&&(y.show_attack_modal=t[2]),l=new Qp({props:y}),ke.push(()=>Le(l,"show_attack_modal",b)),h=new qe({props:{disabled:!0,$$slots:{default:[tg]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),a=K(),te(o.$$.fragment),i=K(),te(l.$$.fragment),c=K(),te(h.$$.fragment)},l(u){ne(e.$$.fragment,u),n=B(u),ne(r.$$.fragment,u),a=B(u),ne(o.$$.fragment,u),i=B(u),ne(l.$$.fragment,u),c=B(u),ne(h.$$.fragment,u)},m(u,p){re(e,u,p),j(u,n,p),re(r,u,p),j(u,a,p),re(o,u,p),j(u,i,p),re(l,u,p),j(u,c,p),re(h,u,p),d=!0},p(u,[p]){const I={};p&2048&&(I.$$scope={dirty:p,ctx:u}),e.$set(I);const k={};p&1&&(k.parent_node=u[0]),p&2&&(k.data=u[1]),!s&&p&8&&(s=!0,k.show_artifacts_modal=u[3],ze(()=>s=!1)),r.$set(k);const _={};p&2048&&(_.$$scope={dirty:p,ctx:u}),o.$set(_);const w={};p&1&&(w.parent_node=u[0]),p&2&&(w.data=u[1]),!f&&p&4&&(f=!0,w.show_attack_modal=u[2],ze(()=>f=!1)),l.$set(w);const v={};p&2048&&(v.$$scope={dirty:p,ctx:u}),h.$set(v)},i(u){d||(M(e.$$.fragment,u),M(r.$$.fragment,u),M(o.$$.fragment,u),M(l.$$.fragment,u),M(h.$$.fragment,u),d=!0)},o(u){F(e.$$.fragment,u),F(r.$$.fragment,u),F(o.$$.fragment,u),F(l.$$.fragment,u),F(h.$$.fragment,u),d=!1},d(u){u&&(S(n),S(a),S(i),S(c)),se(e,u),se(r,u),se(o,u),se(l,u),se(h,u)}}}function rg(t,e,n){let r,s;var a=this&&this.__awaiter||function(g,b,y,u){function p(I){return I instanceof y?I:new y(function(k){k(I)})}return new(y||(y=Promise))(function(I,k){function _(R){try{v(u.next(R))}catch(C){k(C)}}function w(R){try{v(u.throw(R))}catch(C){k(C)}}function v(R){R.done?I(R.value):p(R.value).then(_,w)}v((u=u.apply(g,b||[])).next())})};let{node:o}=e,i;function l(g){alert(g),n(3,r=!1),n(2,s=!1)}function f(g){return a(this,void 0,void 0,function*(){if(g.data.d3f_class&&g.data.d3f_class.includes("d3f:")){const b=g.data.d3f_class,y=yield fetch(`/api/technique/${b}.json`);if(y.status!=200)return l(`D3FEND Technique: "${b.replace("d3f:","")}" not found in ontology`),null;{const u=yield y.json();return u.description["@graph"].length==0?(l(`D3FEND Technique: "${b.replace("d3f:","")}" not found in ontology`),null):u}}else l("Please specify a D3FEND Class for this node to enable inferential mapping")})}const c=async()=>{n(1,i=null),n(3,r=!0),n(1,i=await f(o))};function h(g){r=g,n(3,r)}const d=async()=>{n(1,i=null),n(2,s=!0),n(1,i=await f(o))};function $(g){s=g,n(2,s)}return t.$$set=g=>{"node"in g&&n(0,o=g.node)},n(3,r=!1),n(2,s=!1),[o,i,s,r,f,c,h,d,$]}class sg extends Re{constructor(e){super(),je(this,e,rg,ng,Ie,{node:0})}}const og=t=>({}),_a=t=>({});function ag(t){let e;return{c(){e=Q("No related artifacts in this release.")},l(n){e=x(n,"No related artifacts in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function ig(t){let e,n;return e=new Dt({props:{$$slots:{default:[fg]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&8216&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function lg(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function fg(t){let e,n,r;function s(o){t[9](o)}let a={flow_id:"flow_off_art",nodes:t[3].nodes,edges:t[3].edges,auto_layout:!0};return t[4]!==void 0&&(a.nodes_to_insert=t[4]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&8&&(l.nodes=o[3].nodes),i&8&&(l.edges=o[3].edges),!n&&i&16&&(n=!0,l.nodes_to_insert=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function cg(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[4].length+"",b,y,u,p,I;const k=t[7].header,_=Ue(k,t,t[13],_a),w=t[7].default,v=Ue(w,t,t[13],null),R=[lg,ig,ag],C=[];function N(m,E){return m[1]?m[1].off_to_def.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Related Artifacts To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Related Artifacts To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[10](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[5]),ae(n,"click",gt(t[8])),ae(e,"close",t[11]),ae(e,"click",Ft(t[12]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&8192)&&He(_,k,m,m[13],u?Be(k,m[13],E,og):Ke(m[13]),_a),v&&v.p&&(!u||E&8192)&&He(v,w,m,m[13],u?Be(w,m[13],E,null):Ke(m[13]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&16)&&g!==(g=m[4].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[10](null),p=!1,lt(I)}}}function ug(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_artifacts_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d;function $(){let _=[],w=[];for(const v of l.off_to_def.results.bindings)g.edge_is_unique(v.off_tech_label.value,v.off_artifact_rel_label.value,v.off_artifact_label.value)&&(_.find(R=>R.data.d3f_class=="d3f:"+v.off_tech_id.value)||_.push(We("mini-attack-node",v.off_tech_label.value,0,"d3f:"+v.off_tech_id.value)),_.find(R=>R.data.d3f_class=="d3f:"+Te(v.off_artifact.value))||_.push(We("mini-artifact-node",v.off_artifact_label.value,0,"d3f:"+Te(v.off_artifact.value))),w.push(ht(v.off_artifact_rel_label.value.replace(/ /g,""),_.find(R=>R.data.label==v.off_tech_label.value).id,_.find(R=>R.data.label==v.off_artifact_label.value).id)));return{nodes:_,edges:w}}let g=new Lt;function b(){let _=0,w=200,v=150;for(const R of r){let C=l.off_to_def.results.bindings.find(m=>"d3f:"+Te(m.off_artifact.value)==R.data.d3f_class),N="";C&&(N=C.off_artifact_rel_label.value),Ut(c,h,i,R.data.node_super_class,R.data.label,R.data.d3f_class,i.data.sequence,i.position.x+_*w,i.position.y+v,182,63,N,!0),_+=1}f&&f.close(),n(4,r=[])}function y(_){mt.call(this,t,_)}function u(_){r=_,n(4,r)}function p(_){ke[_?"unshift":"push"](()=>{f=_,n(2,f)})}const I=()=>n(0,o=!1),k=()=>{f.close(),n(4,r=[])};return t.$$set=_=>{"show_artifacts_modal"in _&&n(0,o=_.show_artifacts_modal),"parent_node"in _&&n(6,i=_.parent_node),"data"in _&&n(1,l=_.data),"$$scope"in _&&n(13,a=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&l&&l.off_to_def.results.bindings.length>0&&n(3,d=$()),t.$$.dirty&5&&o&&f&&(f.showModal(),g.reset()),t.$$.dirty&5&&!o&&f&&(f.close(),g.reset())},n(4,r=[]),[o,l,f,d,r,b,i,s,y,u,p,I,k,a]}class dg extends Re{constructor(e){super(),je(this,e,ug,cg,Ie,{show_artifacts_modal:0,parent_node:6,data:1})}}const _g=t=>({}),ha=t=>({});function hg(t){let e;return{c(){e=Q("No related defensive techniques in this release.")},l(n){e=x(n,"No related defensive techniques in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function mg(t){let e,n,r,s,a,o,i=t[3],l,f;function c($){t[12]($)}let h={toggles:t[4]};t[3]!==void 0&&(h.selected=t[3]),n=new ss({props:h}),ke.push(()=>Le(n,"selected",c));let d=ma(t);return{c(){e=V("div"),te(n.$$.fragment),s=K(),a=V("br"),o=K(),d.c(),l=Ze(),this.h()},l($){e=z($,"DIV",{class:!0});var g=Y(e);ne(n.$$.fragment,g),g.forEach(S),s=B($),a=z($,"BR",{}),o=B($),d.l($),l=Ze(),this.h()},h(){H(e,"class","center shrink")},m($,g){j($,e,g),re(n,e,null),j($,s,g),j($,a,g),j($,o,g),d.m($,g),j($,l,g),f=!0},p($,g){const b={};g&16&&(b.toggles=$[4]),!r&&g&8&&(r=!0,b.selected=$[3],ze(()=>r=!1)),n.$set(b),g&8&&Ie(i,i=$[3])?(Me(),F(d,1,1,ce),Ve(),d=ma($),d.c(),M(d,1),d.m(l.parentNode,l)):d.p($,g)},i($){f||(M(n.$$.fragment,$),M(d),f=!0)},o($){F(n.$$.fragment,$),F(d),f=!1},d($){$&&(S(e),S(s),S(a),S(o),S(l)),se(n),d.d($)}}}function pg(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function gg(t){let e,n,r;function s(o){t[13](o)}let a={flow_id:"flow_off_def",nodes:t[5].nodes,edges:t[5].edges,auto_layout:!0};return t[6]!==void 0&&(a.nodes_to_insert=t[6]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&32&&(l.nodes=o[5].nodes),i&32&&(l.edges=o[5].edges),!n&&i&64&&(n=!0,l.nodes_to_insert=o[6],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function ma(t){let e,n;return e=new Dt({props:{$$slots:{default:[gg]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&131168&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function vg(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[6].length+"",b,y,u,p,I;const k=t[10].header,_=Ue(k,t,t[17],ha),w=t[10].default,v=Ue(w,t,t[17],null),R=[pg,mg,hg],C=[];function N(m,E){return m[1]?m[1].off_to_def.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Related Defensive Techniques To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Related Defensive Techniques To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[14](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[7]),ae(n,"click",gt(t[11])),ae(e,"close",t[15]),ae(e,"click",Ft(t[16]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&131072)&&He(_,k,m,m[17],u?Be(k,m[17],E,_g):Ke(m[17]),ha),v&&v.p&&(!u||E&131072)&&He(v,w,m,m[17],u?Be(w,m[17],E,null):Ke(m[17]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&64)&&g!==(g=m[6].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[14](null),p=!1,lt(I)}}}function bg(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_defend_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d=new Lt;function $(){let N=0,m=200,E=150;for(const T of r){let G="",ue=l.off_to_def.results.bindings.find(Z=>"def_tech"in Z&&"d3f:"+Te(Z.def_tech.value)==T.data.d3f_class);ue&&(G="may-"+ue.def_tactic_label.value.toLowerCase()),Ut(c,h,i,T.data.node_super_class,T.data.label,T.data.d3f_class,i.data.sequence,i.position.x+N*m,i.position.y+E,182,63,G,!1),N+=1}f&&f.close(),n(6,r=[])}let g=new Set,b=[],y=[];rs(b,y)&&(y=[]);function u(N){n(6,r=[])}let p;function I(){let N=[],m=[];for(const E of l.off_to_def.results.bindings)E.def_tech?d.edge_is_unique(E.def_tech_label.value,E.def_artifact_rel_label.value,E.off_artifact_label.value)&&!y.includes(E.def_tactic_label.value)&&(N.find(T=>T.data.d3f_class=="d3f:"+Te(E.off_artifact.value))||N.push(We("mini-artifact-node",E.off_artifact_label.value,0,"d3f:"+Te(E.off_artifact.value))),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.def_tech.value))||N.push(We("mini-countermeasure-node",E.def_tech_label.value,0,"d3f:"+Te(E.def_tech.value))),m.push(ht(E.def_artifact_rel_label.value.replace(/ /g,""),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.def_tech.value)).id,N.find(T=>T.data.d3f_class=="d3f:"+Te(E.off_artifact.value)).id,"stroke-width: 2px; opacity:0.6")),m.push(ht("may-"+E.def_artifact_rel_label.value.replace(/ /g,"").toLowerCase(),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.def_tech.value)).id,N.find(T=>T.data.d3f_class=="d3f:"+E.off_tech_id.value).id,"stroke-width: 2px; stroke-dasharray:2%"))):d.edge_is_unique(E.off_tech_label.value,E.off_artifact_rel_label.value,E.off_artifact_label.value)&&(N.find(T=>T.data.d3f_class=="d3f:"+E.off_tech_id.value)||N.push(We("mini-attack-node",E.off_tech_label.value,0,"d3f:"+E.off_tech_id.value)),N.find(T=>T.data.d3f_class=="d3f:"+Te(E.off_artifact.value))||N.push(We("mini-artifact-node",E.off_artifact_label.value,0,"d3f:"+Te(E.off_artifact.value))),m.push(ht(E.off_artifact_rel_label.value.replace(/ /g,""),N.find(T=>T.data.d3f_class=="d3f:"+E.off_tech_id.value).id,N.find(T=>T.data.d3f_class=="d3f:"+Te(E.off_artifact.value)).id)));return{nodes:N,edges:m}}function k(N){mt.call(this,t,N)}function _(N){y=N,n(3,y)}function w(N){r=N,n(6,r)}function v(N){ke[N?"unshift":"push"](()=>{f=N,n(2,f)})}const R=()=>n(0,o=!1),C=()=>{f.close(),n(6,r=[])};return t.$$set=N=>{"show_defend_modal"in N&&n(0,o=N.show_defend_modal),"parent_node"in N&&n(8,i=N.parent_node),"data"in N&&n(1,l=N.data),"$$scope"in N&&n(17,a=N.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&f&&(f.showModal(),d.reset()),t.$$.dirty&5&&!o&&f&&(f.close(),d.reset()),t.$$.dirty&514&&l&&(l.off_to_def.results.bindings.forEach(N=>{"def_tactic_label"in N&&g.add(N.def_tactic_label.value)}),n(9,g),n(1,l)),t.$$.dirty&512&&n(4,b=Array.from(g).sort(function(N,m){return pr[N]-pr[m]})),t.$$.dirty&8&&u(),t.$$.dirty&8&&d.reset(y),t.$$.dirty&10&&l&&l.off_to_def.results.bindings.length>0&&y&&n(5,p=I())},n(6,r=[]),[o,l,f,y,b,p,r,$,i,g,s,k,_,w,v,R,C,a]}class $g extends Re{constructor(e){super(),je(this,e,bg,vg,Ie,{show_defend_modal:0,parent_node:8,data:1})}}function yg(t){let e;return{c(){e=Q("artifacts")},l(n){e=x(n,"artifacts")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function wg(t){let e;return{c(){e=Q("defensive techniques")},l(n){e=x(n,"defensive techniques")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function kg(t){let e,n,r,s,a,o,i,l,f,c;e=new qe({props:{$$slots:{default:[yg]},$$scope:{ctx:t}}}),e.$on("click",t[5]);function h(b){t[6](b)}let d={parent_node:t[0],data:t[1]};t[3]!==void 0&&(d.show_artifacts_modal=t[3]),r=new dg({props:d}),ke.push(()=>Le(r,"show_artifacts_modal",h)),o=new qe({props:{$$slots:{default:[wg]},$$scope:{ctx:t}}}),o.$on("click",t[7]);function $(b){t[8](b)}let g={parent_node:t[0],data:t[1]};return t[2]!==void 0&&(g.show_defend_modal=t[2]),l=new $g({props:g}),ke.push(()=>Le(l,"show_defend_modal",$)),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),a=K(),te(o.$$.fragment),i=K(),te(l.$$.fragment)},l(b){ne(e.$$.fragment,b),n=B(b),ne(r.$$.fragment,b),a=B(b),ne(o.$$.fragment,b),i=B(b),ne(l.$$.fragment,b)},m(b,y){re(e,b,y),j(b,n,y),re(r,b,y),j(b,a,y),re(o,b,y),j(b,i,y),re(l,b,y),c=!0},p(b,[y]){const u={};y&2048&&(u.$$scope={dirty:y,ctx:b}),e.$set(u);const p={};y&1&&(p.parent_node=b[0]),y&2&&(p.data=b[1]),!s&&y&8&&(s=!0,p.show_artifacts_modal=b[3],ze(()=>s=!1)),r.$set(p);const I={};y&2048&&(I.$$scope={dirty:y,ctx:b}),o.$set(I);const k={};y&1&&(k.parent_node=b[0]),y&2&&(k.data=b[1]),!f&&y&4&&(f=!0,k.show_defend_modal=b[2],ze(()=>f=!1)),l.$set(k)},i(b){c||(M(e.$$.fragment,b),M(r.$$.fragment,b),M(o.$$.fragment,b),M(l.$$.fragment,b),c=!0)},o(b){F(e.$$.fragment,b),F(r.$$.fragment,b),F(o.$$.fragment,b),F(l.$$.fragment,b),c=!1},d(b){b&&(S(n),S(a),S(i)),se(e,b),se(r,b),se(o,b),se(l,b)}}}function Eg(t,e,n){let r,s;var a=this&&this.__awaiter||function(g,b,y,u){function p(I){return I instanceof y?I:new y(function(k){k(I)})}return new(y||(y=Promise))(function(I,k){function _(R){try{v(u.next(R))}catch(C){k(C)}}function w(R){try{v(u.throw(R))}catch(C){k(C)}}function v(R){R.done?I(R.value):p(R.value).then(_,w)}v((u=u.apply(g,b||[])).next())})};let{node:o}=e,i;function l(g){alert(g),n(3,r=!1),n(2,s=!1)}function f(g){return a(this,void 0,void 0,function*(){if(g.data.d3f_class&&g.data.d3f_class.includes("d3f:")){const b=g.data.d3f_class,y=yield fetch(`/api/offensive-technique/attack/${b.replace("d3f:","")}.json`);if(y.status!=200)return l(`Offensive Technique: "${b.replace("d3f:","")}" not found in ontology`),null;{const u=yield y.json();return u.description["@graph"].length==0?(l(`Offensive Technique: "${b.replace("d3f:","")}" not found in ontology`),null):u}}else l("Please specify a D3FEND Class for this node to enable inferential mapping")})}const c=async()=>{n(1,i=null),n(3,r=!0),n(1,i=await f(o))};function h(g){r=g,n(3,r)}const d=async()=>{n(1,i=null),n(2,s=!0),n(1,i=await f(o))};function $(g){s=g,n(2,s)}return t.$$set=g=>{"node"in g&&n(0,o=g.node)},n(3,r=!1),n(2,s=!1),[o,i,s,r,f,c,h,d,$]}class Sg extends Re{constructor(e){super(),je(this,e,Eg,kg,Ie,{node:0})}}const Pg=t=>({}),pa=t=>({});function Cg(t){let e;return{c(){e=Q("No related artifacts in this release.")},l(n){e=x(n,"No related artifacts in this release.")},m(n,r){j(n,e,r)},p:ce,i:ce,o:ce,d(n){n&&S(e)}}}function Ng(t){let e,n;return e=new Dt({props:{$$slots:{default:[Ig]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s&8216&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Tg(t){let e,n="Loading...";return{c(){e=V("div"),e.textContent=n},l(r){e=z(r,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-194gxkm"&&(e.textContent=n)},m(r,s){j(r,e,s)},p:ce,i:ce,o:ce,d(r){r&&S(e)}}}function Ig(t){let e,n,r;function s(o){t[9](o)}let a={flow_id:"flow_event_da",nodes:t[3].nodes,edges:t[3].edges,auto_layout:!0};return t[4]!==void 0&&(a.nodes_to_insert=t[4]),e=new Ht({props:a}),ke.push(()=>Le(e,"nodes_to_insert",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&8&&(l.nodes=o[3].nodes),i&8&&(l.edges=o[3].edges),!n&&i&16&&(n=!0,l.nodes_to_insert=o[4],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function Og(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g=t[4].length+"",b,y,u,p,I;const k=t[7].header,_=Ue(k,t,t[13],pa),w=t[7].default,v=Ue(w,t,t[13],null),R=[Tg,Ng,Cg],C=[];function N(m,E){return m[1]?m[1].event_to_da.results.bindings.length>0?1:2:0}return i=N(t),l=C[i]=R[i](t),{c(){e=V("dialog"),n=V("div"),_&&_.c(),r=Q(`
    Select Related Artifacts To Insert
    `),v&&v.c(),s=K(),a=V("hr"),o=K(),l.c(),f=K(),c=V("hr"),h=K(),d=V("button"),$=Q("Insert ("),b=Q(g),y=Q(")"),this.h()},l(m){e=z(m,"DIALOG",{class:!0});var E=Y(e);n=z(E,"DIV",{class:!0});var T=Y(n);_&&_.l(T),r=x(T,`
    Select Related Artifacts To Insert
    `),v&&v.l(T),s=B(T),a=z(T,"HR",{}),o=B(T),l.l(T),f=B(T),c=z(T,"HR",{}),h=B(T),d=z(T,"BUTTON",{class:!0});var G=Y(d);$=x(G,"Insert ("),b=x(G,g),y=x(G,")"),G.forEach(S),T.forEach(S),E.forEach(S),this.h()},h(){d.autofocus=!0,H(d,"class","svelte-13fs2eo"),H(n,"class","svelte-13fs2eo"),H(e,"class","svelte-13fs2eo")},m(m,E){j(m,e,E),O(e,n),_&&_.m(n,null),O(n,r),v&&v.m(n,null),O(n,s),O(n,a),O(n,o),C[i].m(n,null),O(n,f),O(n,c),O(n,h),O(n,d),O(d,$),O(d,b),O(d,y),t[10](e),u=!0,d.focus(),p||(I=[ae(d,"click",t[5]),ae(n,"click",gt(t[8])),ae(e,"close",t[11]),ae(e,"click",Ft(t[12]))],p=!0)},p(m,[E]){_&&_.p&&(!u||E&8192)&&He(_,k,m,m[13],u?Be(k,m[13],E,Pg):Ke(m[13]),pa),v&&v.p&&(!u||E&8192)&&He(v,w,m,m[13],u?Be(w,m[13],E,null):Ke(m[13]),null);let T=i;i=N(m),i===T?C[i].p(m,E):(Me(),F(C[T],1,1,()=>{C[T]=null}),Ve(),l=C[i],l?l.p(m,E):(l=C[i]=R[i](m),l.c()),M(l,1),l.m(n,f)),(!u||E&16)&&g!==(g=m[4].length+"")&&Oe(b,g)},i(m){u||(M(_,m),M(v,m),M(l),u=!0)},o(m){F(_,m),F(v,m),F(l),u=!1},d(m){m&&S(e),_&&_.d(m),v&&v.d(m),C[i].d(),t[10](null),p=!1,lt(I)}}}function Dg(t,e,n){let r,{$$slots:s={},$$scope:a}=e,{show_artifacts_modal:o}=e,{parent_node:i}=e,{data:l}=e,f;const c=It(),h=Ot();let d;function $(){let k=[],_=[];for(const w of l.event_to_da.results.bindings){const v=w.event_label.value,R=w.artifact_label.value,C=w.event_rel_label.value;k.find(N=>N.data.d3f_class==w.event.value)||k.push(We("mini-event-node",v,0,w.event.value)),k.find(N=>N.data.d3f_class=="d3f:"+Te(w.artifact.value))||k.push(We("mini-artifact-node",R,0,"d3f:"+Te(w.artifact.value))),_.push(ht(C.replace(/ /g,""),k.find(N=>N.data.label==v).id,k.find(N=>N.data.label==R).id))}return{nodes:k,edges:_}}function g(){let k=0,_=200,w=150;for(const v of r){let R=l.event_to_da.results.bindings.find(N=>"d3f:"+Te(N.artifact.value)==v.data.d3f_class),C="";R&&(C=R.event_rel_label.value),Ut(c,h,i,v.data.node_super_class,v.data.label,v.data.d3f_class,0,i.position.x+k*_,i.position.y+w,182,63,C,!1),k+=1}f&&f.close(),n(4,r=[])}function b(k){mt.call(this,t,k)}function y(k){r=k,n(4,r)}function u(k){ke[k?"unshift":"push"](()=>{f=k,n(2,f)})}const p=()=>n(0,o=!1),I=()=>{f.close(),n(4,r=[])};return t.$$set=k=>{"show_artifacts_modal"in k&&n(0,o=k.show_artifacts_modal),"parent_node"in k&&n(6,i=k.parent_node),"data"in k&&n(1,l=k.data),"$$scope"in k&&n(13,a=k.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&l&&l.event_to_da.results.bindings.length>0&&n(3,d=$()),t.$$.dirty&5&&o&&f&&f.showModal(),t.$$.dirty&5&&!o&&f&&f.close()},n(4,r=[]),[o,l,f,d,r,g,i,s,b,y,u,p,I,a]}class Rg extends Re{constructor(e){super(),je(this,e,Dg,Og,Ie,{show_artifacts_modal:0,parent_node:6,data:1})}}function ga(t){let e,n,r;function s(o){t[5](o)}let a={parent_node:t[0],data:t[1]};return t[2]!==void 0&&(a.show_artifacts_modal=t[2]),e=new Rg({props:a}),ke.push(()=>Le(e,"show_artifacts_modal",s)),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){re(e,o,i),r=!0},p(o,i){const l={};i&1&&(l.parent_node=o[0]),i&2&&(l.data=o[1]),!n&&i&4&&(n=!0,l.show_artifacts_modal=o[2],ze(()=>n=!1)),e.$set(l)},i(o){r||(M(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){se(e,o)}}}function jg(t){let e,n="artifacts",r,s,a,o,i,l=t[2]&&ga(t);return{c(){e=V("button"),e.textContent=n,r=K(),l&&l.c(),s=Ze(),this.h()},l(f){e=z(f,"BUTTON",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-rdbxlw"&&(e.textContent=n),r=B(f),l&&l.l(f),s=Ze(),this.h()},h(){H(e,"class","svelte-5he3i1")},m(f,c){j(f,e,c),j(f,r,c),l&&l.m(f,c),j(f,s,c),a=!0,o||(i=ae(e,"click",t[4]),o=!0)},p(f,[c]){f[2]?l?(l.p(f,c),c&4&&M(l,1)):(l=ga(f),l.c(),M(l,1),l.m(s.parentNode,s)):l&&(Me(),F(l,1,1,()=>{l=null}),Ve())},i(f){a||(M(l),a=!0)},o(f){F(l),a=!1},d(f){f&&(S(e),S(r),S(s)),l&&l.d(f),o=!1,i()}}}function Ag(t,e,n){let r;var s=this&&this.__awaiter||function(h,d,$,g){function b(y){return y instanceof $?y:new $(function(u){u(y)})}return new($||($=Promise))(function(y,u){function p(_){try{k(g.next(_))}catch(w){u(w)}}function I(_){try{k(g.throw(_))}catch(w){u(w)}}function k(_){_.done?y(_.value):b(_.value).then(p,I)}k((g=g.apply(h,d||[])).next())})};let{node:a}=e,o;function i(h){alert(h),n(2,r=!1)}function l(h){return s(this,void 0,void 0,function*(){if(h.data.d3f_class&&h.data.d3f_class.includes("d3f:")){const d=h.data.d3f_class,$=yield fetch(`/api/event/${d}.json`);if($.status!=200)return i(`D3FEND Event: "${d.replace("d3f:","")}" not found in ontology`),null;{const g=yield $.json();return g.description["@graph"].length==0?(i(`D3FEND Event: "${d.replace("d3f:","")}" not found in ontology`),null):g}}else i("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{n(1,o=null),n(2,r=!0),n(1,o=await l(a))};function c(h){r=h,n(2,r)}return t.$$set=h=>{"node"in h&&n(0,a=h.node)},n(2,r=!1),[a,o,r,l,f,c]}class Mg extends Re{constructor(e){super(),je(this,e,Ag,jg,Ie,{node:0})}}function va(t){let e,n,r,s;return e=new Sg({props:{node:t[1]}}),{c(){te(e.$$.fragment),n=K(),r=V("hr"),this.h()},l(a){ne(e.$$.fragment,a),n=B(a),r=z(a,"HR",{class:!0}),this.h()},h(){H(r,"class","svelte-ouqov5")},m(a,o){re(e,a,o),j(a,n,o),j(a,r,o),s=!0},p(a,o){const i={};o&2&&(i.node=a[1]),e.$set(i)},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),se(e,a)}}}function ba(t){let e,n,r,s;return e=new sg({props:{node:t[1]}}),{c(){te(e.$$.fragment),n=K(),r=V("hr"),this.h()},l(a){ne(e.$$.fragment,a),n=B(a),r=z(a,"HR",{class:!0}),this.h()},h(){H(r,"class","svelte-ouqov5")},m(a,o){re(e,a,o),j(a,n,o),j(a,r,o),s=!0},p(a,o){const i={};o&2&&(i.node=a[1]),e.$set(i)},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),se(e,a)}}}function $a(t){let e,n,r,s;return e=new Mp({props:{node:t[1]}}),{c(){te(e.$$.fragment),n=K(),r=V("hr"),this.h()},l(a){ne(e.$$.fragment,a),n=B(a),r=z(a,"HR",{class:!0}),this.h()},h(){H(r,"class","svelte-ouqov5")},m(a,o){re(e,a,o),j(a,n,o),j(a,r,o),s=!0},p(a,o){const i={};o&2&&(i.node=a[1]),e.$set(i)},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),se(e,a)}}}function ya(t){let e,n,r,s;return e=new Mg({props:{node:t[1]}}),{c(){te(e.$$.fragment),n=K(),r=V("hr"),this.h()},l(a){ne(e.$$.fragment,a),n=B(a),r=z(a,"HR",{class:!0}),this.h()},h(){H(r,"class","svelte-ouqov5")},m(a,o){re(e,a,o),j(a,n,o),j(a,r,o),s=!0},p(a,o){const i={};o&2&&(i.node=a[1]),e.$set(i)},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),se(e,a)}}}function Vg(t){let e;return{c(){e=Q("duplicate")},l(n){e=x(n,"duplicate")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function zg(t){let e;return{c(){e=Q("delete")},l(n){e=x(n,"delete")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Lg(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g,b,y,u,p=t[1]&&t[1].type=="attack-node"&&va(t),I=t[1]&&t[1].type=="countermeasure-node"&&ba(t),k=t[1]&&t[1].type=="artifact-node"&&$a(t),_=t[1]&&t[1].type=="event-node"&&ya(t);return $=new qe({props:{$$slots:{default:[Vg]},$$scope:{ctx:t}}}),$.$on("click",t[5]),b=new qe({props:{$$slots:{default:[zg]},$$scope:{ctx:t}}}),b.$on("click",t[6]),{c(){e=V("div"),n=V("p"),r=V("small"),s=Q("node: "),a=Q(t[0]),o=K(),i=V("hr"),l=K(),p&&p.c(),f=K(),I&&I.c(),c=K(),k&&k.c(),h=K(),_&&_.c(),d=K(),te($.$$.fragment),g=K(),te(b.$$.fragment),this.h()},l(w){e=z(w,"DIV",{style:!0,class:!0});var v=Y(e);n=z(v,"P",{style:!0});var R=Y(n);r=z(R,"SMALL",{});var C=Y(r);s=x(C,"node: "),a=x(C,t[0]),C.forEach(S),R.forEach(S),o=B(v),i=z(v,"HR",{class:!0}),l=B(v),p&&p.l(v),f=B(v),I&&I.l(v),c=B(v),k&&k.l(v),h=B(v),_&&_.l(v),d=B(v),ne($.$$.fragment,v),g=B(v),ne(b.$$.fragment,v),v.forEach(S),this.h()},h(){Fe(n,"margin","0.5em"),H(i,"class","svelte-ouqov5"),H(e,"style",y=t[2]()),H(e,"class","context-menu svelte-ouqov5")},m(w,v){j(w,e,v),O(e,n),O(n,r),O(r,s),O(r,a),O(e,o),O(e,i),O(e,l),p&&p.m(e,null),O(e,f),I&&I.m(e,null),O(e,c),k&&k.m(e,null),O(e,h),_&&_.m(e,null),O(e,d),re($,e,null),O(e,g),re(b,e,null),u=!0},p(w,[v]){(!u||v&1)&&Oe(a,w[0]),w[1]&&w[1].type=="attack-node"?p?(p.p(w,v),v&2&&M(p,1)):(p=va(w),p.c(),M(p,1),p.m(e,f)):p&&(Me(),F(p,1,1,()=>{p=null}),Ve()),w[1]&&w[1].type=="countermeasure-node"?I?(I.p(w,v),v&2&&M(I,1)):(I=ba(w),I.c(),M(I,1),I.m(e,c)):I&&(Me(),F(I,1,1,()=>{I=null}),Ve()),w[1]&&w[1].type=="artifact-node"?k?(k.p(w,v),v&2&&M(k,1)):(k=$a(w),k.c(),M(k,1),k.m(e,h)):k&&(Me(),F(k,1,1,()=>{k=null}),Ve()),w[1]&&w[1].type=="event-node"?_?(_.p(w,v),v&2&&M(_,1)):(_=ya(w),_.c(),M(_,1),_.m(e,d)):_&&(Me(),F(_,1,1,()=>{_=null}),Ve());const R={};v&16384&&(R.$$scope={dirty:v,ctx:w}),$.$set(R);const C={};v&16384&&(C.$$scope={dirty:v,ctx:w}),b.$set(C),(!u||v&4&&y!==(y=w[2]()))&&H(e,"style",y)},i(w){u||(M(p),M(I),M(k),M(_),M($.$$.fragment,w),M(b.$$.fragment,w),u=!0)},o(w){F(p),F(I),F(k),F(_),F($.$$.fragment,w),F(b.$$.fragment,w),u=!1},d(w){w&&S(e),p&&p.d(),I&&I.d(),k&&k.d(),_&&_.d(),se($),se(b)}}}function Fg(t,e,n){let r,s,a,o,{id:i}=e,{top:l}=e,{left:f}=e,{right:c}=e,{bottom:h}=e,{close_menu:d}=e;const $=It();Gt(t,$,u=>n(12,o=u));const g=Ot();Gt(t,g,u=>n(13,a=u));function b(){const u=o.find(p=>p.id===i);if(u){let p=structuredClone(u);p.id=`${i}-copy${Math.random()}`.slice(-24),p.position={x:u.position.x,y:u.position.y+50},Jt($,o=[...o,p],o)}d()}function y(){Jt($,o=o.filter(u=>u.id!==i),o),Jt(g,a=a.filter(u=>u.source!==i&&u.target!==i),a),d()}return t.$$set=u=>{"id"in u&&n(0,i=u.id),"top"in u&&n(7,l=u.top),"left"in u&&n(8,f=u.left),"right"in u&&n(9,c=u.right),"bottom"in u&&n(10,h=u.bottom),"close_menu"in u&&n(11,d=u.close_menu)},t.$$.update=()=>{t.$$.dirty&4097&&n(1,r=o.find(u=>u.id===i)),t.$$.dirty&1920&&n(2,s=()=>{let u="";return l&&(u+=`top:${l}px;`),h&&(u+=`bottom:${h}px;`),f&&(u+=`left:${f}px;`),c&&(u+=`right:${c}px;`),u})},[i,r,s,$,g,b,y,l,f,c,h,d,o]}class qg extends Re{constructor(e){super(),je(this,e,Fg,Lg,Ie,{id:0,top:7,left:8,right:9,bottom:10,close_menu:11})}}function wa(t,e,n){const r=t.slice();return r[12]=e[n],r}function ka(t){let e,n,r,s,a,o,i,l,f,c,h,d,$;const g=t[8].default,b=Ue(g,t,t[7],null);let y=_t(t[3]),u=[];for(let p=0;p<y.length;p+=1)u[p]=Ea(wa(t,y,p));return{c(){e=V("div"),n=V("div"),r=V("h2"),s=Q(t[1]),a=K(),o=V("p"),i=Q(t[2]),l=K(),b&&b.c(),f=K(),c=V("div");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=z(p,"DIV",{class:!0});var I=Y(e);n=z(I,"DIV",{class:!0});var k=Y(n);r=z(k,"H2",{});var _=Y(r);s=x(_,t[1]),_.forEach(S),a=B(k),o=z(k,"P",{});var w=Y(o);i=x(w,t[2]),w.forEach(S),l=B(k),b&&b.l(k),f=B(k),c=z(k,"DIV",{class:!0});var v=Y(c);for(let R=0;R<u.length;R+=1)u[R].l(v);v.forEach(S),k.forEach(S),I.forEach(S),this.h()},h(){H(c,"class","options svelte-zbcx3u"),H(n,"class","modal-content center text-center svelte-zbcx3u"),H(e,"class","modal-overlay svelte-zbcx3u")},m(p,I){j(p,e,I),O(e,n),O(n,r),O(r,s),O(n,a),O(n,o),O(o,i),O(n,l),b&&b.m(n,null),O(n,f),O(n,c);for(let k=0;k<u.length;k+=1)u[k]&&u[k].m(c,null);h=!0,d||($=[ae(n,"click",gt(t[9])),ae(e,"click",t[4])],d=!0)},p(p,I){if((!h||I&2)&&Oe(s,p[1]),(!h||I&4)&&Oe(i,p[2]),b&&b.p&&(!h||I&128)&&He(b,g,p,p[7],h?Be(g,p[7],I,null):Ke(p[7]),null),I&40){y=_t(p[3]);let k;for(k=0;k<y.length;k+=1){const _=wa(p,y,k);u[k]?u[k].p(_,I):(u[k]=Ea(_),u[k].c(),u[k].m(c,null))}for(;k<u.length;k+=1)u[k].d(1);u.length=y.length}},i(p){h||(M(b,p),h=!0)},o(p){F(b,p),h=!1},d(p){p&&S(e),b&&b.d(p),un(u,p),d=!1,lt($)}}}function Ea(t){let e,n=t[12].label+"",r,s,a,o;function i(){return t[10](t[12])}return{c(){e=V("button"),r=Q(n),s=K(),this.h()},l(l){e=z(l,"BUTTON",{class:!0});var f=Y(e);r=x(f,n),s=B(f),f.forEach(S),this.h()},h(){H(e,"class","svelte-zbcx3u")},m(l,f){j(l,e,f),O(e,r),O(e,s),a||(o=ae(e,"click",i),a=!0)},p(l,f){t=l,f&8&&n!==(n=t[12].label+"")&&Oe(r,n)},d(l){l&&S(e),a=!1,o()}}}function Ug(t){let e,n,r=t[0]&&ka(t);return{c(){r&&r.c(),e=Ze()},l(s){r&&r.l(s),e=Ze()},m(s,a){r&&r.m(s,a),j(s,e,a),n=!0},p(s,[a]){s[0]?r?(r.p(s,a),a&1&&M(r,1)):(r=ka(s),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Me(),F(r,1,1,()=>{r=null}),Ve())},i(s){n||(M(r),n=!0)},o(s){F(r),n=!1},d(s){s&&S(e),r&&r.d(s)}}}function Hg(t,e,n){let{$$slots:r={},$$scope:s}=e,{is_open:a=!1}=e,{title:o=""}=e,{content:i=""}=e,{imageSrc:l=""}=e,{options:f=[]}=e;const c=Yn();function h(){n(0,a=!1)}function d(b){c("optionSelected",b),h()}function $(b){mt.call(this,t,b)}const g=b=>d(b);return t.$$set=b=>{"is_open"in b&&n(0,a=b.is_open),"title"in b&&n(1,o=b.title),"content"in b&&n(2,i=b.content),"imageSrc"in b&&n(6,l=b.imageSrc),"options"in b&&n(3,f=b.options),"$$scope"in b&&n(7,s=b.$$scope)},[a,o,i,f,h,d,l,s,r,$,g]}class Sa extends Re{constructor(e){super(),je(this,e,Hg,Ug,Ie,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function Pa(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ca(t){let e,n,r,s,a,o,i,l,f,c,h,d,$;const g=t[7].default,b=Ue(g,t,t[6],null);let y=_t(t[3]),u=[];for(let p=0;p<y.length;p+=1)u[p]=Na(Pa(t,y,p));return{c(){e=V("div"),n=V("div"),r=V("h2"),s=Q(t[1]),a=K(),o=V("p"),i=Q(t[2]),l=K(),b&&b.c(),f=K(),c=V("div");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=z(p,"DIV",{class:!0});var I=Y(e);n=z(I,"DIV",{class:!0});var k=Y(n);r=z(k,"H2",{});var _=Y(r);s=x(_,t[1]),_.forEach(S),a=B(k),o=z(k,"P",{});var w=Y(o);i=x(w,t[2]),w.forEach(S),l=B(k),b&&b.l(k),f=B(k),c=z(k,"DIV",{class:!0});var v=Y(c);for(let R=0;R<u.length;R+=1)u[R].l(v);v.forEach(S),k.forEach(S),I.forEach(S),this.h()},h(){H(c,"class","options svelte-2iwk9m"),H(n,"class","modal-content center text-center svelte-2iwk9m"),H(e,"class","modal-overlay svelte-2iwk9m")},m(p,I){j(p,e,I),O(e,n),O(n,r),O(r,s),O(n,a),O(n,o),O(o,i),O(n,l),b&&b.m(n,null),O(n,f),O(n,c);for(let k=0;k<u.length;k+=1)u[k]&&u[k].m(c,null);h=!0,d||($=[ae(n,"click",gt(t[8])),ae(e,"click",t[4])],d=!0)},p(p,I){if((!h||I&2)&&Oe(s,p[1]),(!h||I&4)&&Oe(i,p[2]),b&&b.p&&(!h||I&64)&&He(b,g,p,p[6],h?Be(g,p[6],I,null):Ke(p[6]),null),I&40){y=_t(p[3]);let k;for(k=0;k<y.length;k+=1){const _=Pa(p,y,k);u[k]?u[k].p(_,I):(u[k]=Na(_),u[k].c(),u[k].m(c,null))}for(;k<u.length;k+=1)u[k].d(1);u.length=y.length}},i(p){h||(M(b,p),h=!0)},o(p){F(b,p),h=!1},d(p){p&&S(e),b&&b.d(p),un(u,p),d=!1,lt($)}}}function Na(t){let e,n=t[11].label+"",r,s,a,o;function i(){return t[9](t[11])}return{c(){e=V("button"),r=Q(n),s=K(),this.h()},l(l){e=z(l,"BUTTON",{class:!0});var f=Y(e);r=x(f,n),s=B(f),f.forEach(S),this.h()},h(){H(e,"class","svelte-2iwk9m")},m(l,f){j(l,e,f),O(e,r),O(e,s),a||(o=ae(e,"click",i),a=!0)},p(l,f){t=l,f&8&&n!==(n=t[11].label+"")&&Oe(r,n)},d(l){l&&S(e),a=!1,o()}}}function Kg(t){let e,n,r=t[0]&&Ca(t);return{c(){r&&r.c(),e=Ze()},l(s){r&&r.l(s),e=Ze()},m(s,a){r&&r.m(s,a),j(s,e,a),n=!0},p(s,[a]){s[0]?r?(r.p(s,a),a&1&&M(r,1)):(r=Ca(s),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Me(),F(r,1,1,()=>{r=null}),Ve())},i(s){n||(M(r),n=!0)},o(s){F(r),n=!1},d(s){s&&S(e),r&&r.d(s)}}}function Bg(t,e,n){let{$$slots:r={},$$scope:s}=e,{is_open:a=!1}=e,{title:o=""}=e,{content:i=""}=e,{options:l=[{label:"Cancel",value:"cancel"}]}=e;const f=Yn();function c(){n(0,a=!1)}function h(g){f("model_shared",g),c()}function d(g){mt.call(this,t,g)}const $=g=>h(g);return t.$$set=g=>{"is_open"in g&&n(0,a=g.is_open),"title"in g&&n(1,o=g.title),"content"in g&&n(2,i=g.content),"options"in g&&n(3,l=g.options),"$$scope"in g&&n(6,s=g.$$scope)},[a,o,i,l,c,h,s,r,d,$]}class Gg extends Re{constructor(e){super(),je(this,e,Bg,Kg,Ie,{is_open:0,title:1,content:2,options:3})}}function Jg(t){let e,n="";return{c(){e=V("icon"),e.textContent=n,this.h()},l(r){e=z(r,"ICON",{title:!0,"data-svelte-h":!0}),be(e)!=="svelte-10dwkvf"&&(e.textContent=n),this.h()},h(){H(e,"title","Full Screen Mode")},m(r,s){j(r,e,s)},d(r){r&&S(e)}}}function Wg(t){let e,n=" Exit Fullscreen";return{c(){e=V("icon"),e.textContent=n,this.h()},l(r){e=z(r,"ICON",{title:!0,"data-svelte-h":!0}),be(e)!=="svelte-2wnxo3"&&(e.textContent=n),this.h()},h(){H(e,"title","Exit Full Screen Mode")},m(r,s){j(r,e,s)},d(r){r&&S(e)}}}function Xg(t){let e,n,r,s,a,o;function i(d,$){return d[0]?Wg:Jg}let l=i(t),f=l(t);const c=t[4].default,h=Ue(c,t,t[3],null);return{c(){e=V("div"),n=V("button"),f.c(),r=K(),h&&h.c(),this.h()},l(d){e=z(d,"DIV",{id:!0,class:!0});var $=Y(e);n=z($,"BUTTON",{class:!0});var g=Y(n);f.l(g),g.forEach(S),r=B($),h&&h.l($),$.forEach(S),this.h()},h(){H(n,"class","fullscreen-toggle svelte-twnutp"),Sn(n,"left",t[1]==="left"),Sn(n,"right",t[1]==="right"),Sn(n,"hidden",t[1]==="hidden"),H(e,"id","fullscreen-parent"),H(e,"class","svelte-twnutp")},m(d,$){j(d,e,$),O(e,n),f.m(n,null),O(e,r),h&&h.m(e,null),s=!0,a||(o=ae(n,"click",t[2]),a=!0)},p(d,[$]){l!==(l=i(d))&&(f.d(1),f=l(d),f&&(f.c(),f.m(n,null))),(!s||$&2)&&Sn(n,"left",d[1]==="left"),(!s||$&2)&&Sn(n,"right",d[1]==="right"),(!s||$&2)&&Sn(n,"hidden",d[1]==="hidden"),h&&h.p&&(!s||$&8)&&He(h,c,d,d[3],s?Be(c,d[3],$,null):Ke(d[3]),null)},i(d){s||(M(h,d),s=!0)},o(d){F(h,d),s=!1},d(d){d&&S(e),f.d(),h&&h.d(d),a=!1,o()}}}function Yg(t,e,n){let{$$slots:r={},$$scope:s}=e,{position:a="right"}=e,{is_fullscreen:o=!1}=e,i;es(()=>(i=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",l),()=>{document.removeEventListener("fullscreenchange",l)}));function l(){n(0,o=!!document.fullscreenElement)}async function f(){if(o)try{await document.exitFullscreen()}catch(c){console.error("Error attempting to exit fullscreen:",c)}else try{await i.requestFullscreen()}catch(c){console.error("Error attempting to enable fullscreen:",c)}}return t.$$set=c=>{"position"in c&&n(1,a=c.position),"is_fullscreen"in c&&n(0,o=c.is_fullscreen),"$$scope"in c&&n(3,s=c.$$scope)},[o,a,f,s,r]}class Zg extends Re{constructor(e){super(),je(this,e,Yg,Xg,Ie,{position:1,is_fullscreen:0,toggleFullscreen:2})}get toggleFullscreen(){return this.$$.ctx[2]}}function Qg(t){let e,n,r,s,a="Action",o,i,l="Event",f,c,h="Attack",d,$,g="Countermeasure",b,y,u,p="Object",I,k,_="Digital Artifact",w,v,R="Agent",C,N,m,E="State",T,G,ue="Vulnerability",Z,ie,Ee="Condition",ve,W,q,U="Misc",L,P,D="Note",A,J,ee="Thing",le,he;return{c(){e=V("aside"),n=V("div"),r=V("div"),s=V("div"),s.textContent=a,o=K(),i=V("div"),i.textContent=l,f=K(),c=V("div"),c.textContent=h,d=K(),$=V("div"),$.textContent=g,b=K(),y=V("div"),u=V("div"),u.textContent=p,I=K(),k=V("div"),k.textContent=_,w=K(),v=V("div"),v.textContent=R,C=K(),N=V("div"),m=V("div"),m.textContent=E,T=K(),G=V("div"),G.textContent=ue,Z=K(),ie=V("div"),ie.textContent=Ee,ve=K(),W=V("div"),q=V("div"),q.textContent=U,L=K(),P=V("div"),P.textContent=D,A=K(),J=V("div"),J.textContent=ee,this.h()},l(ge){e=z(ge,"ASIDE",{class:!0});var Se=Y(e);n=z(Se,"DIV",{class:!0});var Ge=Y(n);r=z(Ge,"DIV",{class:!0});var xe=Y(r);s=z(xe,"DIV",{class:!0,"data-svelte-h":!0}),be(s)!=="svelte-1yk6dej"&&(s.textContent=a),o=B(xe),i=z(xe,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),be(i)!=="svelte-1m1bg3g"&&(i.textContent=l),f=B(xe),c=z(xe,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),be(c)!=="svelte-1jv1xt1"&&(c.textContent=h),d=B(xe),$=z(xe,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),be($)!=="svelte-19pbwjb"&&($.textContent=g),xe.forEach(S),b=B(Ge),y=z(Ge,"DIV",{class:!0});var Xe=Y(y);u=z(Xe,"DIV",{class:!0,"data-svelte-h":!0}),be(u)!=="svelte-lt0v58"&&(u.textContent=p),I=B(Xe),k=z(Xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(k)!=="svelte-q2uy53"&&(k.textContent=_),w=B(Xe),v=z(Xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(v)!=="svelte-1d4jm49"&&(v.textContent=R),Xe.forEach(S),C=B(Ge),N=z(Ge,"DIV",{class:!0});var ut=Y(N);m=z(ut,"DIV",{class:!0,"data-svelte-h":!0}),be(m)!=="svelte-82roym"&&(m.textContent=E),T=B(ut),G=z(ut,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(G)!=="svelte-8k3xhl"&&(G.textContent=ue),Z=B(ut),ie=z(ut,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(ie)!=="svelte-htddmm"&&(ie.textContent=Ee),ut.forEach(S),ve=B(Ge),W=z(Ge,"DIV",{class:!0});var et=Y(W);q=z(et,"DIV",{class:!0,"data-svelte-h":!0}),be(q)!=="svelte-o90l7d"&&(q.textContent=U),L=B(et),P=z(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(P)!=="svelte-y4yhxa"&&(P.textContent=D),A=B(et),J=z(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),be(J)!=="svelte-1qa1sij"&&(J.textContent=ee),et.forEach(S),Ge.forEach(S),Se.forEach(S),this.h()},h(){H(s,"class","text-center font-medium"),H(i,"class","actionNode example-node svelte-1iswza3"),H(i,"draggable",!0),Fe(i,"text-align","center"),Fe(i,"background","white"),H(i,"title","d3f:Event"),H(c,"class","attack-node example-node svelte-1iswza3"),H(c,"draggable",!0),Fe(c,"text-align","center"),Fe(c,"background","#FFD0D0"),H(c,"title","d3f:OffensiveTechnique"),H($,"class","countermeasure-node example-node svelte-1iswza3"),H($,"draggable",!0),Fe($,"text-align","center"),Fe($,"background","#d6eaff"),H($,"title","d3f:DefensiveTechnique"),H(r,"class","nodes-column svelte-1iswza3"),H(u,"class","text-center font-medium"),H(k,"class","artifact-node art-node example-node svelte-1iswza3"),H(k,"draggable",!0),Fe(k,"text-align","center"),Fe(k,"background","#fff4dd"),H(v,"class","agent-node example-node svelte-1iswza3"),H(v,"draggable",!0),Fe(v,"text-align","center"),Fe(v,"background","#f0e6e6"),H(y,"class","nodes-column svelte-1iswza3"),H(m,"class","text-center font-medium"),H(G,"class","vulnerability-node example-node svelte-1iswza3"),H(G,"draggable",!0),Fe(G,"text-align","center"),Fe(G,"background","#f9d999"),H(ie,"class","condition-node example-node svelte-1iswza3"),H(ie,"draggable",!0),Fe(ie,"text-align","center"),Fe(ie,"background","#ece6ff"),H(N,"class","nodes-column svelte-1iswza3"),H(q,"class","text-center font-medium"),H(P,"class","NoteNode example-node svelte-1iswza3"),H(P,"draggable",!0),Fe(P,"text-align","center"),Fe(P,"background","lightgoldenrodyellow"),H(J,"class","ThingNode example-node svelte-1iswza3"),H(J,"draggable",!0),Fe(J,"text-align","center"),Fe(J,"background","#f4f4f4"),H(W,"class","nodes-column svelte-1iswza3"),H(n,"class","nodes-container svelte-1iswza3"),H(e,"class","svelte-1iswza3")},m(ge,Se){j(ge,e,Se),O(e,n),O(n,r),O(r,s),O(r,o),O(r,i),O(r,f),O(r,c),O(r,d),O(r,$),O(n,b),O(n,y),O(y,u),O(y,I),O(y,k),O(y,w),O(y,v),O(n,C),O(n,N),O(N,m),O(N,T),O(N,G),O(N,Z),O(N,ie),O(n,ve),O(n,W),O(W,q),O(W,L),O(W,P),O(W,A),O(W,J),le||(he=[ae(i,"dragstart",t[1]),ae(c,"dragstart",t[2]),ae($,"dragstart",t[3]),ae(k,"dragstart",t[4]),ae(v,"dragstart",t[5]),ae(G,"dragstart",t[6]),ae(ie,"dragstart",t[7]),ae(P,"dragstart",t[8]),ae(J,"dragstart",t[9])],le=!0)},p:ce,i:ce,o:ce,d(ge){ge&&S(e),le=!1,lt(he)}}}function xg(t){const e=(h,d)=>{if(!h.dataTransfer)return null;h.dataTransfer.setData("application/svelteflow",d),h.dataTransfer.effectAllowed="move"};return[e,h=>e(h,"event-node"),h=>e(h,"attack-node"),h=>e(h,"countermeasure-node"),h=>e(h,"artifact-node"),h=>e(h,"agent-node"),h=>e(h,"vulnerability-node"),h=>e(h,"condition-node"),h=>e(h,"note-node"),h=>e(h,"thing-node")]}class e0 extends Re{constructor(e){super(),je(this,e,xg,Qg,Ie,{})}}function Ta(t,e,n){const r=t.slice();return r[5]=e[n],r}function t0(t){let e=t[5].name+"",n,r,s,a,o=t[5].nodeCount+"",i,l,f=t[5].edgeCount+"",c,h,d;return{c(){n=Q(e),r=K(),s=V("span"),a=Q("("),i=Q(o),l=Q(" nodes, "),c=Q(f),h=Q(" edges)"),d=K(),this.h()},l($){n=x($,e),r=B($),s=z($,"SPAN",{style:!0});var g=Y(s);a=x(g,"("),i=x(g,o),l=x(g," nodes, "),c=x(g,f),h=x(g," edges)"),g.forEach(S),d=B($),this.h()},h(){Fe(s,"color","gray")},m($,g){j($,n,g),j($,r,g),j($,s,g),O(s,a),O(s,i),O(s,l),O(s,c),O(s,h),j($,d,g)},p($,g){g&2&&e!==(e=$[5].name+"")&&Oe(n,e),g&2&&o!==(o=$[5].nodeCount+"")&&Oe(i,o),g&2&&f!==(f=$[5].edgeCount+"")&&Oe(c,f)},d($){$&&(S(n),S(r),S(s),S(d))}}}function Ia(t){let e,n;function r(){return t[3](t[5])}return e=new qe({props:{class:"file-item",$$slots:{default:[t0]},$$scope:{ctx:t}}}),e.$on("click",r),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,a){re(e,s,a),n=!0},p(s,a){t=s;const o={};a&258&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){se(e,s)}}}function n0(t){let e,n,r=_t(t[1]),s=[];for(let o=0;o<r.length;o+=1)s[o]=Ia(Ta(t,r,o));const a=o=>F(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ze()},l(o){for(let i=0;i<s.length;i+=1)s[i].l(o);e=Ze()},m(o,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(o,i);j(o,e,i),n=!0},p(o,i){if(i&6){r=_t(o[1]);let l;for(l=0;l<r.length;l+=1){const f=Ta(o,r,l);s[l]?(s[l].p(f,i),M(s[l],1)):(s[l]=Ia(f),s[l].c(),M(s[l],1),s[l].m(e.parentNode,e))}for(Me(),l=r.length;l<s.length;l+=1)a(l);Ve()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)M(s[i]);n=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)F(s[i]);n=!1},d(o){o&&S(e),un(s,o)}}}function r0(t){let e,n;return e=new Er({props:{title:t[0],$$slots:{default:[n0]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,[s]){const a={};s&1&&(a.title=r[0]),s&258&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}async function s0(){return await(await fetch("/cad/examples.json")).json()}function o0(t,e,n){const r=Yn();let{selectedFile:s="Example Graphs..."}=e,a=[];function o(l){r("fileSelected",l)}es(async()=>{n(1,a=await s0())});const i=l=>o(l.name);return t.$$set=l=>{"selectedFile"in l&&n(0,s=l.selectedFile)},[s,a,o,i]}class a0 extends Re{constructor(e){super(),je(this,e,o0,r0,Ie,{selectedFile:0})}}function Oa(t){let e,n,r,s,a;return{c(){e=ro("path"),n=K(),r=ro("circle"),this.h()},l(o){e=so(o,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),Y(e).forEach(S),n=B(o),r=so(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),Y(r).forEach(S),this.h()},h(){H(e,"fill","transparent"),H(e,"stroke-width",2.5),H(e,"class","animated"),H(e,"stroke","black"),H(e,"d",t[2]),H(r,"cx",s=t[0].tx),H(r,"cy",a=t[0].ty),H(r,"r",3),H(r,"stroke","black"),H(r,"stroke-width",1.5)},m(o,i){j(o,e,i),j(o,n,i),j(o,r,i)},p(o,i){i&4&&H(e,"d",o[2]),i&1&&s!==(s=o[0].tx)&&H(r,"cx",s),i&1&&a!==(a=o[0].ty)&&H(r,"cy",a)},d(o){o&&(S(e),S(n),S(r))}}}function i0(t){let e,n=t[1].inProgress&&Oa(t);return{c(){n&&n.c(),e=Ze()},l(r){n&&n.l(r),e=Ze()},m(r,s){n&&n.m(r,s),j(r,e,s)},p(r,[s]){r[1].inProgress?n?n.p(r,s):(n=Oa(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ce,o:ce,d(r){r&&S(e),n&&n.d(r)}}}function l0(t,e,n){let r;const s=hl();Gt(t,s,i=>n(1,r=i));let a,o;return t.$$.update=()=>{if(t.$$.dirty&3){const i=structuredClone(r.fromNode);r.isValid?(n(0,o=hr(r.fromNode,r.toNode)),n(2,a=co({sourceX:o.sx,sourceY:o.sy,sourcePosition:o.sourcePos,targetX:o.tx,targetY:o.ty,targetPosition:o.targetPos})[0])):(i.id="-1",i.measured={width:1,height:1},i.position={x:r.to.x,y:r.to.y},i.internals.positionAbsolute={x:r.to.x,y:r.to.y},n(0,o=hr(r.fromNode,i)),n(2,a=co({sourceX:o.sx,sourceY:o.sy,sourcePosition:o.sourcePos,targetX:o.tx,targetY:o.ty,targetPosition:o.targetPos})[0]))}},[o,r,a,s]}class f0 extends Re{constructor(e){super(),je(this,e,l0,i0,Ie,{})}}function Da(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ra(t){let e,n,r,s,a,o,i,l,f,c,h,d,$;const g=t[7].default,b=Ue(g,t,t[6],null);let y=_t(t[3]),u=[];for(let p=0;p<y.length;p+=1)u[p]=ja(Da(t,y,p));return{c(){e=V("div"),n=V("div"),r=V("h2"),s=Q(t[1]),a=K(),o=V("p"),i=Q(t[2]),l=K(),b&&b.c(),f=K(),c=V("div");for(let p=0;p<u.length;p+=1)u[p].c();this.h()},l(p){e=z(p,"DIV",{class:!0});var I=Y(e);n=z(I,"DIV",{class:!0});var k=Y(n);r=z(k,"H2",{});var _=Y(r);s=x(_,t[1]),_.forEach(S),a=B(k),o=z(k,"P",{});var w=Y(o);i=x(w,t[2]),w.forEach(S),l=B(k),b&&b.l(k),f=B(k),c=z(k,"DIV",{class:!0});var v=Y(c);for(let R=0;R<u.length;R+=1)u[R].l(v);v.forEach(S),k.forEach(S),I.forEach(S),this.h()},h(){H(c,"class","options svelte-zbcx3u"),H(n,"class","modal-content center text-center svelte-zbcx3u"),H(e,"class","modal-overlay svelte-zbcx3u")},m(p,I){j(p,e,I),O(e,n),O(n,r),O(r,s),O(n,a),O(n,o),O(o,i),O(n,l),b&&b.m(n,null),O(n,f),O(n,c);for(let k=0;k<u.length;k+=1)u[k]&&u[k].m(c,null);h=!0,d||($=[ae(n,"click",gt(t[8])),ae(e,"click",t[4])],d=!0)},p(p,I){if((!h||I&2)&&Oe(s,p[1]),(!h||I&4)&&Oe(i,p[2]),b&&b.p&&(!h||I&64)&&He(b,g,p,p[6],h?Be(g,p[6],I,null):Ke(p[6]),null),I&40){y=_t(p[3]);let k;for(k=0;k<y.length;k+=1){const _=Da(p,y,k);u[k]?u[k].p(_,I):(u[k]=ja(_),u[k].c(),u[k].m(c,null))}for(;k<u.length;k+=1)u[k].d(1);u.length=y.length}},i(p){h||(M(b,p),h=!0)},o(p){F(b,p),h=!1},d(p){p&&S(e),b&&b.d(p),un(u,p),d=!1,lt($)}}}function ja(t){let e,n=t[11].label+"",r,s,a,o;function i(){return t[9](t[11])}return{c(){e=V("button"),r=Q(n),s=K(),this.h()},l(l){e=z(l,"BUTTON",{class:!0});var f=Y(e);r=x(f,n),s=B(f),f.forEach(S),this.h()},h(){H(e,"class","svelte-zbcx3u")},m(l,f){j(l,e,f),O(e,r),O(e,s),a||(o=ae(e,"click",i),a=!0)},p(l,f){t=l,f&8&&n!==(n=t[11].label+"")&&Oe(r,n)},d(l){l&&S(e),a=!1,o()}}}function c0(t){let e,n,r=t[0]&&Ra(t);return{c(){r&&r.c(),e=Ze()},l(s){r&&r.l(s),e=Ze()},m(s,a){r&&r.m(s,a),j(s,e,a),n=!0},p(s,[a]){s[0]?r?(r.p(s,a),a&1&&M(r,1)):(r=Ra(s),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Me(),F(r,1,1,()=>{r=null}),Ve())},i(s){n||(M(r),n=!0)},o(s){F(r),n=!1},d(s){s&&S(e),r&&r.d(s)}}}function u0(t,e,n){let{$$slots:r={},$$scope:s}=e,{is_open:a=!1}=e,{title:o=""}=e,{content:i=""}=e,{options:l=[{label:"Cancel",value:"cancel"}]}=e;const f=Yn();function c(){n(0,a=!1)}function h(g){f("close_button_modal",g),c()}function d(g){mt.call(this,t,g)}const $=g=>h(g);return t.$$set=g=>{"is_open"in g&&n(0,a=g.is_open),"title"in g&&n(1,o=g.title),"content"in g&&n(2,i=g.content),"options"in g&&n(3,l=g.options),"$$scope"in g&&n(6,s=g.$$scope)},[a,o,i,l,c,h,s,r,d,$]}class d0 extends Re{constructor(e){super(),je(this,e,u0,c0,Ie,{is_open:0,title:1,content:2,options:3})}}function Aa(t,e,n){const r=t.slice();return r[25]=e[n],r[26]=e,r[27]=n,r}function Ma(t,e,n){const r=t.slice();return r[28]=e[n],r[29]=e,r[27]=n,r}function Va(t,e,n){const r=t.slice();return r[30]=e[n],r[31]=e,r[27]=n,r}function za(t){let e,n,r,s,a,o,i,l,f,c,h,d,$="Save",g,b,y=`.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .form-row label {
    width: 200px;
    text-align: right;
    margin-right: 10px;
  }

  .form-row input,
  .form-row textarea {
    flex-grow: 1;
  }`,u,p,I=t[0]&&La(t);return{c(){e=V("div"),n=V("div"),r=V("h2"),s=Q(t[2]),a=K(),o=V("p"),i=Q(t[3]),l=K(),f=V("form"),I&&I.c(),c=K(),h=V("div"),d=V("button"),d.textContent=$,g=K(),b=V("style"),b.textContent=y,this.h()},l(k){e=z(k,"DIV",{class:!0});var _=Y(e);n=z(_,"DIV",{class:!0});var w=Y(n);r=z(w,"H2",{});var v=Y(r);s=x(v,t[2]),v.forEach(S),a=B(w),o=z(w,"P",{});var R=Y(o);i=x(R,t[3]),R.forEach(S),l=B(w),f=z(w,"FORM",{});var C=Y(f);I&&I.l(C),c=B(C),h=z(C,"DIV",{class:!0});var N=Y(h);d=z(N,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),be(d)!=="svelte-ajsp9k"&&(d.textContent=$),N.forEach(S),C.forEach(S),g=B(w),b=z(w,"STYLE",{"data-svelte-h":!0}),be(b)!=="svelte-bu94yd"&&(b.textContent=y),w.forEach(S),_.forEach(S),this.h()},h(){H(d,"type","submit"),H(d,"class","svelte-k723th"),H(h,"class","options svelte-k723th"),H(n,"class","modal-content center text-center svelte-k723th"),H(e,"class","modal-overlay svelte-k723th")},m(k,_){j(k,e,_),O(e,n),O(n,r),O(r,s),O(n,a),O(n,o),O(o,i),O(n,l),O(n,f),I&&I.m(f,null),O(f,c),O(f,h),O(h,d),O(n,g),O(n,b),u||(p=[ae(d,"click",t[5]),ae(n,"click",gt(t[11])),ae(e,"click",t[4])],u=!0)},p(k,_){_[0]&4&&Oe(s,k[2]),_[0]&8&&Oe(i,k[3]),k[0]?I?I.p(k,_):(I=La(k),I.c(),I.m(f,c)):I&&(I.d(1),I=null)},d(k){k&&S(e),I&&I.d(),u=!1,lt(p)}}}function La(t){let e,n,r="Title:",s,a,o,i,l,f,c="+",h,d,$,g,b="+",y,u,p,I="Description:",k,_,w,v,R,C="Article:",N,m,E,T,G,ue="D3FEND Version:",Z,ie,Ee,ve,W="Get Current Version",q,U,L,P="CAD Schema Version:",D,A,J,ee,le="Set current version",he,ge,Se,Ge="Published Date:",xe,Xe,ut,et,Rt="Insert Current Time",Pt,vt,nn='<code class="right">Example Date-Time format: 2023-10-05T14:30:00.000Z</code><br/>',Kt,Ct,kt,bt,Bt="+",Zt,_n,jt=_t(t[0].authors),tt=[];for(let oe=0;oe<jt.length;oe+=1)tt[oe]=Fa(Va(t,jt,oe));let rn=_t(t[0].orgs),ot=[];for(let oe=0;oe<rn.length;oe+=1)ot[oe]=qa(Ma(t,rn,oe));let sn=_t(t[0].references),at=[];for(let oe=0;oe<sn.length;oe+=1)at[oe]=Ua(Aa(t,sn,oe));return{c(){e=V("div"),n=V("label"),n.textContent=r,s=K(),a=V("input"),o=K();for(let oe=0;oe<tt.length;oe+=1)tt[oe].c();i=K(),l=V("div"),f=V("button"),f.textContent=c,h=K();for(let oe=0;oe<ot.length;oe+=1)ot[oe].c();d=K(),$=V("div"),g=V("button"),g.textContent=b,y=K(),u=V("div"),p=V("label"),p.textContent=I,k=K(),_=V("input"),w=K(),v=V("div"),R=V("label"),R.textContent=C,N=K(),m=V("textarea"),E=K(),T=V("div"),G=V("label"),G.textContent=ue,Z=K(),ie=V("input"),Ee=K(),ve=V("button"),ve.textContent=W,q=K(),U=V("div"),L=V("label"),L.textContent=P,D=K(),A=V("input"),J=K(),ee=V("button"),ee.textContent=le,he=K(),ge=V("div"),Se=V("label"),Se.textContent=Ge,xe=K(),Xe=V("input"),ut=K(),et=V("button"),et.textContent=Rt,Pt=K(),vt=V("div"),vt.innerHTML=nn,Kt=K();for(let oe=0;oe<at.length;oe+=1)at[oe].c();Ct=K(),kt=V("div"),bt=V("button"),bt.textContent=Bt,this.h()},l(oe){e=z(oe,"DIV",{class:!0});var we=Y(e);n=z(we,"LABEL",{for:!0,"data-svelte-h":!0}),be(n)!=="svelte-kpfkpc"&&(n.textContent=r),s=B(we),a=z(we,"INPUT",{id:!0}),we.forEach(S),o=B(oe);for(let fe=0;fe<tt.length;fe+=1)tt[fe].l(oe);i=B(oe),l=z(oe,"DIV",{class:!0});var me=Y(l);f=z(me,"BUTTON",{class:!0,"data-svelte-h":!0}),be(f)!=="svelte-1uaie2g"&&(f.textContent=c),me.forEach(S),h=B(oe);for(let fe=0;fe<ot.length;fe+=1)ot[fe].l(oe);d=B(oe),$=z(oe,"DIV",{class:!0});var Et=Y($);g=z(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),be(g)!=="svelte-1cs3ez1"&&(g.textContent=b),Et.forEach(S),y=B(oe),u=z(oe,"DIV",{class:!0});var yn=Y(u);p=z(yn,"LABEL",{for:!0,"data-svelte-h":!0}),be(p)!=="svelte-1jjlhqk"&&(p.textContent=I),k=B(yn),_=z(yn,"INPUT",{id:!0}),yn.forEach(S),w=B(oe),v=z(oe,"DIV",{class:!0});var wn=Y(v);R=z(wn,"LABEL",{for:!0,"data-svelte-h":!0}),be(R)!=="svelte-pvmkb4"&&(R.textContent=C),N=B(wn),m=z(wn,"TEXTAREA",{id:!0}),Y(m).forEach(S),wn.forEach(S),E=B(oe),T=z(oe,"DIV",{class:!0});var on=Y(T);G=z(on,"LABEL",{for:!0,"data-svelte-h":!0}),be(G)!=="svelte-kepuyl"&&(G.textContent=ue),Z=B(on),ie=z(on,"INPUT",{id:!0}),Ee=B(on),ve=z(on,"BUTTON",{class:!0,"data-svelte-h":!0}),be(ve)!=="svelte-1ba12do"&&(ve.textContent=W),on.forEach(S),q=B(oe),U=z(oe,"DIV",{class:!0});var an=Y(U);L=z(an,"LABEL",{for:!0,"data-svelte-h":!0}),be(L)!=="svelte-120m1i5"&&(L.textContent=P),D=B(an),A=z(an,"INPUT",{id:!0}),J=B(an),ee=z(an,"BUTTON",{class:!0,"data-svelte-h":!0}),be(ee)!=="svelte-15xxh2g"&&(ee.textContent=le),an.forEach(S),he=B(oe),ge=z(oe,"DIV",{class:!0});var X=Y(ge);Se=z(X,"LABEL",{for:!0,"data-svelte-h":!0}),be(Se)!=="svelte-1wye32r"&&(Se.textContent=Ge),xe=B(X),Xe=z(X,"INPUT",{id:!0}),ut=B(X),et=z(X,"BUTTON",{class:!0,"data-svelte-h":!0}),be(et)!=="svelte-tkzxpc"&&(et.textContent=Rt),X.forEach(S),Pt=B(oe),vt=z(oe,"DIV",{class:!0,"data-svelte-h":!0}),be(vt)!=="svelte-108zlq4"&&(vt.innerHTML=nn),Kt=B(oe);for(let fe=0;fe<at.length;fe+=1)at[fe].l(oe);Ct=B(oe),kt=z(oe,"DIV",{class:!0});var de=Y(kt);bt=z(de,"BUTTON",{class:!0,"data-svelte-h":!0}),be(bt)!=="svelte-rcymu8"&&(bt.textContent=Bt),de.forEach(S),this.h()},h(){H(n,"for","title"),H(a,"id","title"),H(e,"class","form-row"),H(f,"class","svelte-k723th"),H(l,"class","form-row"),H(g,"class","svelte-k723th"),H($,"class","form-row"),H(p,"for","description"),H(_,"id","description"),H(u,"class","form-row"),H(R,"for","article"),H(m,"id","article"),H(v,"class","form-row"),H(G,"for","d3fend-version"),H(ie,"id","d3fend-version"),H(ve,"class","svelte-k723th"),H(T,"class","form-row"),H(L,"for","cad-data-version"),H(A,"id","cad-data-version"),H(ee,"class","svelte-k723th"),H(U,"class","form-row"),H(Se,"for","published-date"),H(Xe,"id","published-date"),H(et,"class","svelte-k723th"),H(ge,"class","form-row"),H(vt,"class","form-row"),H(bt,"class","svelte-k723th"),H(kt,"class","form-row")},m(oe,we){j(oe,e,we),O(e,n),O(e,s),O(e,a),st(a,t[0].title),j(oe,o,we);for(let me=0;me<tt.length;me+=1)tt[me]&&tt[me].m(oe,we);j(oe,i,we),j(oe,l,we),O(l,f),j(oe,h,we);for(let me=0;me<ot.length;me+=1)ot[me]&&ot[me].m(oe,we);j(oe,d,we),j(oe,$,we),O($,g),j(oe,y,we),j(oe,u,we),O(u,p),O(u,k),O(u,_),st(_,t[0].description),j(oe,w,we),j(oe,v,we),O(v,R),O(v,N),O(v,m),st(m,t[0].article),j(oe,E,we),j(oe,T,we),O(T,G),O(T,Z),O(T,ie),st(ie,t[0].d3fend_version),O(T,Ee),O(T,ve),j(oe,q,we),j(oe,U,we),O(U,L),O(U,D),O(U,A),st(A,t[0].cad_data_version),O(U,J),O(U,ee),j(oe,he,we),j(oe,ge,we),O(ge,Se),O(ge,xe),O(ge,Xe),st(Xe,t[0].published_date),O(ge,ut),O(ge,et),j(oe,Pt,we),j(oe,vt,we),j(oe,Kt,we);for(let me=0;me<at.length;me+=1)at[me]&&at[me].m(oe,we);j(oe,Ct,we),j(oe,kt,we),O(kt,bt),Zt||(_n=[ae(a,"input",t[12]),ae(f,"click",t[6]),ae(g,"click",t[7]),ae(_,"input",t[15]),ae(m,"input",t[16]),ae(ie,"input",t[17]),ae(ve,"click",t[9]),ae(A,"input",t[18]),ae(ee,"click",t[19]),ae(Xe,"input",t[20]),ae(et,"click",t[21]),ae(bt,"click",t[8])],Zt=!0)},p(oe,we){if(we[0]&1&&a.value!==oe[0].title&&st(a,oe[0].title),we[0]&1){jt=_t(oe[0].authors);let me;for(me=0;me<jt.length;me+=1){const Et=Va(oe,jt,me);tt[me]?tt[me].p(Et,we):(tt[me]=Fa(Et),tt[me].c(),tt[me].m(i.parentNode,i))}for(;me<tt.length;me+=1)tt[me].d(1);tt.length=jt.length}if(we[0]&1){rn=_t(oe[0].orgs);let me;for(me=0;me<rn.length;me+=1){const Et=Ma(oe,rn,me);ot[me]?ot[me].p(Et,we):(ot[me]=qa(Et),ot[me].c(),ot[me].m(d.parentNode,d))}for(;me<ot.length;me+=1)ot[me].d(1);ot.length=rn.length}if(we[0]&1&&_.value!==oe[0].description&&st(_,oe[0].description),we[0]&1&&st(m,oe[0].article),we[0]&1&&ie.value!==oe[0].d3fend_version&&st(ie,oe[0].d3fend_version),we[0]&1&&A.value!==oe[0].cad_data_version&&st(A,oe[0].cad_data_version),we[0]&1&&Xe.value!==oe[0].published_date&&st(Xe,oe[0].published_date),we[0]&1){sn=_t(oe[0].references);let me;for(me=0;me<sn.length;me+=1){const Et=Aa(oe,sn,me);at[me]?at[me].p(Et,we):(at[me]=Ua(Et),at[me].c(),at[me].m(Ct.parentNode,Ct))}for(;me<at.length;me+=1)at[me].d(1);at.length=sn.length}},d(oe){oe&&(S(e),S(o),S(i),S(l),S(h),S(d),S($),S(y),S(u),S(w),S(v),S(E),S(T),S(q),S(U),S(he),S(ge),S(Pt),S(vt),S(Kt),S(Ct),S(kt)),un(tt,oe),un(ot,oe),un(at,oe),Zt=!1,lt(_n)}}}function Fa(t){let e,n,r="Authors:",s,a,o,i;function l(){t[13].call(a,t[31],t[27])}return{c(){e=V("div"),n=V("label"),n.textContent=r,s=K(),a=V("input"),this.h()},l(f){e=z(f,"DIV",{class:!0});var c=Y(e);n=z(c,"LABEL",{for:!0,"data-svelte-h":!0}),be(n)!=="svelte-1q1t6ag"&&(n.textContent=r),s=B(c),a=z(c,"INPUT",{id:!0}),c.forEach(S),this.h()},h(){H(n,"for","author-"+t[27]),H(a,"id","author-"+t[27]),H(e,"class","form-row")},m(f,c){j(f,e,c),O(e,n),O(e,s),O(e,a),st(a,t[30]),o||(i=ae(a,"input",l),o=!0)},p(f,c){t=f,c[0]&1&&a.value!==t[30]&&st(a,t[30])},d(f){f&&S(e),o=!1,i()}}}function qa(t){let e,n,r="Organization:",s,a,o,i;function l(){t[14].call(a,t[29],t[27])}return{c(){e=V("div"),n=V("label"),n.textContent=r,s=K(),a=V("input"),this.h()},l(f){e=z(f,"DIV",{class:!0});var c=Y(e);n=z(c,"LABEL",{for:!0,"data-svelte-h":!0}),be(n)!=="svelte-1b09fki"&&(n.textContent=r),s=B(c),a=z(c,"INPUT",{id:!0}),c.forEach(S),this.h()},h(){H(n,"for","org-"+t[27]),H(a,"id","org-"+t[27]),H(e,"class","form-row")},m(f,c){j(f,e,c),O(e,n),O(e,s),O(e,a),st(a,t[28]),o||(i=ae(a,"input",l),o=!0)},p(f,c){t=f,c[0]&1&&a.value!==t[28]&&st(a,t[28])},d(f){f&&S(e),o=!1,i()}}}function Ua(t){let e,n,r="Reference:",s,a,o,i;function l(){t[22].call(a,t[26],t[27])}return{c(){e=V("div"),n=V("label"),n.textContent=r,s=K(),a=V("input"),this.h()},l(f){e=z(f,"DIV",{class:!0});var c=Y(e);n=z(c,"LABEL",{for:!0,"data-svelte-h":!0}),be(n)!=="svelte-14qxm2v"&&(n.textContent=r),s=B(c),a=z(c,"INPUT",{id:!0}),c.forEach(S),this.h()},h(){H(n,"for","ref-"+t[27]),H(a,"id","ref-"+t[27]),H(e,"class","form-row")},m(f,c){j(f,e,c),O(e,n),O(e,s),O(e,a),st(a,t[25]),o||(i=ae(a,"input",l),o=!0)},p(f,c){t=f,c[0]&1&&a.value!==t[25]&&st(a,t[25])},d(f){f&&S(e),o=!1,i()}}}function _0(t){let e,n=t[1]&&za(t);return{c(){n&&n.c(),e=Ze()},l(r){n&&n.l(r),e=Ze()},m(r,s){n&&n.m(r,s),j(r,e,s)},p(r,s){r[1]?n?n.p(r,s):(n=za(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ce,o:ce,d(r){r&&S(e),n&&n.d(r)}}}function h0(t,e,n){let{meta:r}=e,{is_open:s=!1}=e,{title:a="CAD Graph Metadata Editor"}=e,{content:o=""}=e,{options:i=[{label:"Save",value:"save"}]}=e;Yn();function l(){n(1,s=!1)}function f(){document.querySelector("form").checkValidity()&&n(1,s=!1)}(r??!1)&&(r=ni);function c(){r.authors.push(""),n(0,r)}function h(){r.orgs.push(""),n(0,r)}function d(){r.references.push(""),n(0,r)}async function $(){const m=await(await fetch("/api/version.json")).json();n(0,r.d3fend_version=m.version,r)}function g(N){mt.call(this,t,N)}function b(){r.title=this.value,n(0,r)}function y(N,m){N[m]=this.value,n(0,r)}function u(N,m){N[m]=this.value,n(0,r)}function p(){r.description=this.value,n(0,r)}function I(){r.article=this.value,n(0,r)}function k(){r.d3fend_version=this.value,n(0,r)}function _(){r.cad_data_version=this.value,n(0,r)}const w=()=>n(0,r.cad_data_version=Ol,r);function v(){r.published_date=this.value,n(0,r)}const R=()=>{const m=new Date().toISOString();n(0,r.published_date=m,r)};function C(N,m){N[m]=this.value,n(0,r)}return t.$$set=N=>{"meta"in N&&n(0,r=N.meta),"is_open"in N&&n(1,s=N.is_open),"title"in N&&n(2,a=N.title),"content"in N&&n(3,o=N.content),"options"in N&&n(10,i=N.options)},[r,s,a,o,l,f,c,h,d,$,i,g,b,y,u,p,I,k,_,w,v,R,C]}class m0 extends Re{constructor(e){super(),je(this,e,h0,_0,Ie,{meta:0,is_open:1,title:2,content:3,options:10},null,[-1,-1])}}function Ha(t){let e,n,r,s;const a=t[4].default,o=Ue(a,t,t[3],null);return{c(){e=V("div"),o&&o.c(),this.h()},l(i){e=z(i,"DIV",{class:!0});var l=Y(e);o&&o.l(l),l.forEach(S),this.h()},h(){H(e,"class","menu-item-container svelte-4zsf52")},m(i,l){j(i,e,l),o&&o.m(e,null),n=!0,r||(s=ae(e,"click",t[2]),r=!0)},p(i,l){o&&o.p&&(!n||l&8)&&He(o,a,i,i[3],n?Be(a,i[3],l,null):Ke(i[3]),null)},i(i){n||(M(o,i),n=!0)},o(i){F(o,i),n=!1},d(i){i&&S(e),o&&o.d(i),r=!1,s()}}}function p0(t){let e,n,r,s,a,o,i,l=t[1]&&Ha(t);return{c(){e=V("span"),n=V("div"),r=Q(t[0]),s=K(),l&&l.c(),this.h()},l(f){e=z(f,"SPAN",{class:!0});var c=Y(e);n=z(c,"DIV",{class:!0});var h=Y(n);r=x(h,t[0]),h.forEach(S),s=B(c),l&&l.l(c),c.forEach(S),this.h()},h(){H(n,"class","menu-title svelte-4zsf52"),H(e,"class","menu svelte-4zsf52")},m(f,c){j(f,e,c),O(e,n),O(n,r),O(e,s),l&&l.m(e,null),a=!0,o||(i=[ae(e,"mouseenter",t[2]),ae(e,"mouseleave",t[2])],o=!0)},p(f,[c]){(!a||c&1)&&Oe(r,f[0]),f[1]?l?(l.p(f,c),c&2&&M(l,1)):(l=Ha(f),l.c(),M(l,1),l.m(e,null)):l&&(Me(),F(l,1,1,()=>{l=null}),Ve())},i(f){a||(M(l),a=!0)},o(f){F(l),a=!1},d(f){f&&S(e),l&&l.d(),o=!1,lt(i)}}}function g0(t,e,n){let{$$slots:r={},$$scope:s}=e,{title:a=""}=e,o=!1;function i(){n(1,o=!o)}return t.$$set=l=>{"title"in l&&n(0,a=l.title),"$$scope"in l&&n(3,s=l.$$scope)},[a,o,i,s,r]}class lr extends Re{constructor(e){super(),je(this,e,g0,p0,Ie,{title:0})}}function Ka(t,e,n){const r=t.slice();return r[81]=e[n],r[83]=n,r}function Ba(t){let e=t[81].message+"",n,r;return{c(){n=Q(e),r=V("br")},l(s){n=x(s,e),r=z(s,"BR",{})},m(s,a){j(s,n,a),j(s,r,a)},p(s,a){a[0]&8&&e!==(e=s[81].message+"")&&Oe(n,e)},d(s){s&&(S(n),S(r))}}}function v0(t){let e,n="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",r,s,a,o,i,l,f,c,h,d=_t(t[3]),$=[];for(let g=0;g<d.length;g+=1)$[g]=Ba(Ka(t,d,g));return{c(){e=V("div"),e.innerHTML=n,r=K(),s=V("br"),a=K(),o=V("br"),i=K();for(let g=0;g<$.length;g+=1)$[g].c();l=K(),f=V("br"),c=K(),h=V("br")},l(g){e=z(g,"DIV",{"data-svelte-h":!0}),be(e)!=="svelte-1gxhz0c"&&(e.innerHTML=n),r=B(g),s=z(g,"BR",{}),a=B(g),o=z(g,"BR",{}),i=B(g);for(let b=0;b<$.length;b+=1)$[b].l(g);l=B(g),f=z(g,"BR",{}),c=B(g),h=z(g,"BR",{})},m(g,b){j(g,e,b),j(g,r,b),j(g,s,b),j(g,a,b),j(g,o,b),j(g,i,b);for(let y=0;y<$.length;y+=1)$[y]&&$[y].m(g,b);j(g,l,b),j(g,f,b),j(g,c,b),j(g,h,b)},p(g,b){if(b[0]&8){d=_t(g[3]);let y;for(y=0;y<d.length;y+=1){const u=Ka(g,d,y);$[y]?$[y].p(u,b):($[y]=Ba(u),$[y].c(),$[y].m(l.parentNode,l))}for(;y<$.length;y+=1)$[y].d(1);$.length=d.length}},d(g){g&&(S(e),S(r),S(s),S(a),S(o),S(i),S(l),S(f),S(c),S(h)),un($,g)}}}function b0(t){let e;return{c(){e=Q("Please only load models from URLs you trust!")},l(n){e=x(n,"Please only load models from URLs you trust!")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function $0(t){let e,n,r,s,a,o,i,l,f,c,h;return c=new ns({props:{$$slots:{default:[b0]},$$scope:{ctx:t}}}),{c(){e=V("br"),n=K(),r=V("code"),s=Q(t[2]),a=K(),o=V("br"),i=K(),l=V("br"),f=K(),te(c.$$.fragment),this.h()},l(d){e=z(d,"BR",{}),n=B(d),r=z(d,"CODE",{class:!0});var $=Y(r);s=x($,t[2]),$.forEach(S),a=B(d),o=z(d,"BR",{}),i=B(d),l=z(d,"BR",{}),f=B(d),ne(c.$$.fragment,d),this.h()},h(){H(r,"class","center text-center")},m(d,$){j(d,e,$),j(d,n,$),j(d,r,$),O(r,s),j(d,a,$),j(d,o,$),j(d,i,$),j(d,l,$),j(d,f,$),re(c,d,$),h=!0},p(d,$){(!h||$[0]&4)&&Oe(s,d[2]);const g={};$[2]&4194304&&(g.$$scope={dirty:$,ctx:d}),c.$set(g)},i(d){h||(M(c.$$.fragment,d),h=!0)},o(d){F(c.$$.fragment,d),h=!1},d(d){d&&(S(e),S(n),S(r),S(a),S(o),S(i),S(l),S(f)),se(c,d)}}}function y0(t){let e;return{c(){e=Q("Please only load models from URLs you trust!")},l(n){e=x(n,"Please only load models from URLs you trust!")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function w0(t){let e,n,r,s,a,o;return a=new ns({props:{$$slots:{default:[y0]},$$scope:{ctx:t}}}),{c(){e=V("br"),n=K(),r=V("br"),s=K(),te(a.$$.fragment)},l(i){e=z(i,"BR",{}),n=B(i),r=z(i,"BR",{}),s=B(i),ne(a.$$.fragment,i)},m(i,l){j(i,e,l),j(i,n,l),j(i,r,l),j(i,s,l),re(a,i,l),o=!0},p(i,l){const f={};l[2]&4194304&&(f.$$scope={dirty:l,ctx:i}),a.$set(f)},i(i){o||(M(a.$$.fragment,i),o=!0)},o(i){F(a.$$.fragment,i),o=!1},d(i){i&&(S(e),S(n),S(r),S(s)),se(a,i)}}}function Ga(t){let e,n,r,s;return e=new ns({props:{alert_type:"warning",$$slots:{default:[k0]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment),n=K(),r=V("br")},l(a){ne(e.$$.fragment,a),n=B(a),r=z(a,"BR",{})},m(a,o){re(e,a,o),j(a,n,o),j(a,r,o),s=!0},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),se(e,a)}}}function k0(t){let e;return{c(){e=Q("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(n){e=x(n,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function E0(t){let e,n,r,s,a=t[14].length+"",o,i,l,f,c,h,d,$,g,b,y="copy",u,p,I,k=t[14].length>2048&&Ga(t);return{c(){k&&k.c(),e=K(),n=V("div"),r=V("code"),s=Q("The encoded model has a string length of "),o=Q(a),i=Q(" characters."),l=K(),f=V("p"),c=V("button"),h=V("a"),d=Q("Share URL"),$=K(),g=V("span"),b=V("button"),b.textContent=y,this.h()},l(_){k&&k.l(_),e=B(_),n=z(_,"DIV",{});var w=Y(n);r=z(w,"CODE",{});var v=Y(r);s=x(v,"The encoded model has a string length of "),o=x(v,a),i=x(v," characters."),v.forEach(S),w.forEach(S),l=B(_),f=z(_,"P",{});var R=Y(f);c=z(R,"BUTTON",{class:!0});var C=Y(c);h=z(C,"A",{href:!0});var N=Y(h);d=x(N,"Share URL"),N.forEach(S),C.forEach(S),$=B(R),g=z(R,"SPAN",{});var m=Y(g);b=z(m,"BUTTON",{class:!0,"data-svelte-h":!0}),be(b)!=="svelte-1uua65l"&&(b.textContent=y),m.forEach(S),R.forEach(S),this.h()},h(){H(h,"href",t[15]),H(c,"class","svelte-c3va9l"),H(b,"class","svelte-c3va9l")},m(_,w){k&&k.m(_,w),j(_,e,w),j(_,n,w),O(n,r),O(r,s),O(r,o),O(r,i),j(_,l,w),j(_,f,w),O(f,c),O(c,h),O(h,d),O(f,$),O(f,g),O(g,b),u=!0,p||(I=ae(b,"click",t[43]),p=!0)},p(_,w){_[14].length>2048?k?w[0]&16384&&M(k,1):(k=Ga(_),k.c(),M(k,1),k.m(e.parentNode,e)):k&&(Me(),F(k,1,1,()=>{k=null}),Ve()),(!u||w[0]&16384)&&a!==(a=_[14].length+"")&&Oe(o,a),(!u||w[0]&32768)&&H(h,"href",_[15])},i(_){u||(M(k),u=!0)},o(_){F(k),u=!1},d(_){_&&(S(e),S(n),S(l),S(f)),k&&k.d(_),p=!1,I()}}}function Ja(t){let e,n,r;return{c(){e=V("div"),n=V("div"),r=Q(t[19]),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=Y(e);n=z(a,"DIV",{class:!0});var o=Y(n);r=x(o,t[19]),o.forEach(S),a.forEach(S),this.h()},h(){H(n,"class","notification-blink svelte-c3va9l"),H(e,"class","notification svelte-c3va9l")},m(s,a){j(s,e,a),O(e,n),O(n,r)},p(s,a){a[0]&524288&&Oe(r,s[19])},d(s){s&&S(e)}}}function S0(t){let e;return{c(){e=Q("Clear")},l(n){e=x(n,"Clear")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function P0(t){let e;return{c(){e=Q("Load")},l(n){e=x(n,"Load")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function C0(t){let e;return{c(){e=Q("STIX 2.1")},l(n){e=x(n,"STIX 2.1")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function N0(t){let e,n;return e=new qe({props:{$$slots:{default:[C0]},$$scope:{ctx:t}}}),e.$on("click",t[46]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s[2]&4194304&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function T0(t){let e;return{c(){e=Q("Save")},l(n){e=x(n,"Save")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function I0(t){let e;return{c(){e=Q("CAD JSON")},l(n){e=x(n,"CAD JSON")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function O0(t){let e;return{c(){e=Q("Turtle")},l(n){e=x(n,"Turtle")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function D0(t){let e;return{c(){e=Q("D3FEND Extension")},l(n){e=x(n,"D3FEND Extension")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function R0(t){let e;return{c(){e=Q("PNG")},l(n){e=x(n,"PNG")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function j0(t){let e,n,r,s,a,o,i,l;return e=new qe({props:{$$slots:{default:[I0]},$$scope:{ctx:t}}}),e.$on("click",t[49]),r=new qe({props:{$$slots:{default:[O0]},$$scope:{ctx:t}}}),r.$on("click",t[50]),a=new qe({props:{$$slots:{default:[D0]},$$scope:{ctx:t}}}),a.$on("click",t[51]),i=new qe({props:{$$slots:{default:[R0]},$$scope:{ctx:t}}}),i.$on("click",t[52]),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),s=K(),te(a.$$.fragment),o=K(),te(i.$$.fragment)},l(f){ne(e.$$.fragment,f),n=B(f),ne(r.$$.fragment,f),s=B(f),ne(a.$$.fragment,f),o=B(f),ne(i.$$.fragment,f)},m(f,c){re(e,f,c),j(f,n,c),re(r,f,c),j(f,s,c),re(a,f,c),j(f,o,c),re(i,f,c),l=!0},p(f,c){const h={};c[2]&4194304&&(h.$$scope={dirty:c,ctx:f}),e.$set(h);const d={};c[2]&4194304&&(d.$$scope={dirty:c,ctx:f}),r.$set(d);const $={};c[2]&4194304&&($.$$scope={dirty:c,ctx:f}),a.$set($);const g={};c[2]&4194304&&(g.$$scope={dirty:c,ctx:f}),i.$set(g)},i(f){l||(M(e.$$.fragment,f),M(r.$$.fragment,f),M(a.$$.fragment,f),M(i.$$.fragment,f),l=!0)},o(f){F(e.$$.fragment,f),F(r.$$.fragment,f),F(a.$$.fragment,f),F(i.$$.fragment,f),l=!1},d(f){f&&(S(n),S(s),S(o)),se(e,f),se(r,f),se(a,f),se(i,f)}}}function A0(t){let e;return{c(){e=Q("Share")},l(n){e=x(n,"Share")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function M0(t){let e;return{c(){e=Q("CAD Embed")},l(n){e=x(n,"CAD Embed")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function V0(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g,b,y,u,p,I;e=new qe({props:{disabled:!t[17].length,$$slots:{default:[S0]},$$scope:{ctx:t}}}),e.$on("click",t[31]),r=new qe({props:{$$slots:{default:[P0]},$$scope:{ctx:t}}}),r.$on("click",t[45]),a=new Er({props:{title:"Import...",$$slots:{default:[N0]},$$scope:{ctx:t}}});function k(w){t[47](w)}let _={};return t[7]!==void 0&&(_.selectedFile=t[7]),i=new a0({props:_}),ke.push(()=>Le(i,"selectedFile",k)),i.$on("fileSelected",t[30]),d=new qe({props:{keybind:"Ctrl+S",disabled:!t[17].length,$$slots:{default:[T0]},$$scope:{ctx:t}}}),d.$on("click",t[48]),g=new Er({props:{title:"Save As...",disabled:!t[17].length,$$slots:{default:[j0]},$$scope:{ctx:t}}}),y=new qe({props:{disabled:!t[17].length,$$slots:{default:[A0]},$$scope:{ctx:t}}}),y.$on("click",t[35]),p=new qe({props:{disabled:!t[17].length,$$slots:{default:[M0]},$$scope:{ctx:t}}}),p.$on("click",t[36]),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),s=K(),te(a.$$.fragment),o=K(),te(i.$$.fragment),f=K(),c=V("hr"),h=K(),te(d.$$.fragment),$=K(),te(g.$$.fragment),b=K(),te(y.$$.fragment),u=K(),te(p.$$.fragment),this.h()},l(w){ne(e.$$.fragment,w),n=B(w),ne(r.$$.fragment,w),s=B(w),ne(a.$$.fragment,w),o=B(w),ne(i.$$.fragment,w),f=B(w),c=z(w,"HR",{class:!0}),h=B(w),ne(d.$$.fragment,w),$=B(w),ne(g.$$.fragment,w),b=B(w),ne(y.$$.fragment,w),u=B(w),ne(p.$$.fragment,w),this.h()},h(){H(c,"class","svelte-c3va9l")},m(w,v){re(e,w,v),j(w,n,v),re(r,w,v),j(w,s,v),re(a,w,v),j(w,o,v),re(i,w,v),j(w,f,v),j(w,c,v),j(w,h,v),re(d,w,v),j(w,$,v),re(g,w,v),j(w,b,v),re(y,w,v),j(w,u,v),re(p,w,v),I=!0},p(w,v){const R={};v[0]&131072&&(R.disabled=!w[17].length),v[2]&4194304&&(R.$$scope={dirty:v,ctx:w}),e.$set(R);const C={};v[2]&4194304&&(C.$$scope={dirty:v,ctx:w}),r.$set(C);const N={};v[2]&4194304&&(N.$$scope={dirty:v,ctx:w}),a.$set(N);const m={};!l&&v[0]&128&&(l=!0,m.selectedFile=w[7],ze(()=>l=!1)),i.$set(m);const E={};v[0]&131072&&(E.disabled=!w[17].length),v[2]&4194304&&(E.$$scope={dirty:v,ctx:w}),d.$set(E);const T={};v[0]&131072&&(T.disabled=!w[17].length),v[2]&4194304&&(T.$$scope={dirty:v,ctx:w}),g.$set(T);const G={};v[0]&131072&&(G.disabled=!w[17].length),v[2]&4194304&&(G.$$scope={dirty:v,ctx:w}),y.$set(G);const ue={};v[0]&131072&&(ue.disabled=!w[17].length),v[2]&4194304&&(ue.$$scope={dirty:v,ctx:w}),p.$set(ue)},i(w){I||(M(e.$$.fragment,w),M(r.$$.fragment,w),M(a.$$.fragment,w),M(i.$$.fragment,w),M(d.$$.fragment,w),M(g.$$.fragment,w),M(y.$$.fragment,w),M(p.$$.fragment,w),I=!0)},o(w){F(e.$$.fragment,w),F(r.$$.fragment,w),F(a.$$.fragment,w),F(i.$$.fragment,w),F(d.$$.fragment,w),F(g.$$.fragment,w),F(y.$$.fragment,w),F(p.$$.fragment,w),I=!1},d(w){w&&(S(n),S(s),S(o),S(f),S(c),S(h),S($),S(b),S(u)),se(e,w),se(r,w),se(a,w),se(i,w),se(d,w),se(g,w),se(y,w),se(p,w)}}}function z0(t){let e;return{c(){e=Q("Graph Metadata")},l(n){e=x(n,"Graph Metadata")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function L0(t){let e,n;return e=new qe({props:{$$slots:{default:[z0]},$$scope:{ctx:t}}}),e.$on("click",t[53]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s[2]&4194304&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function F0(t){let e;return{c(){e=Q("Reset View")},l(n){e=x(n,"Reset View")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function q0(t){let e;return{c(){e=Q("Fullscreen")},l(n){e=x(n,"Fullscreen")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function U0(t){let e;return{c(){e=Q("Exit Fullscreen")},l(n){e=x(n,"Exit Fullscreen")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function H0(t){let e;function n(a,o){return a[6]?U0:q0}let r=n(t),s=r(t);return{c(){s.c(),e=Ze()},l(a){s.l(a),e=Ze()},m(a,o){s.m(a,o),j(a,e,o)},p(a,o){r!==(r=n(a))&&(s.d(1),s=r(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){a&&S(e),s.d(a)}}}function K0(t){let e,n,r,s;return e=new qe({props:{$$slots:{default:[F0]},$$scope:{ctx:t}}}),e.$on("click",t[54]),r=new qe({props:{$$slots:{default:[H0]},$$scope:{ctx:t}}}),r.$on("click",t[55]),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment)},l(a){ne(e.$$.fragment,a),n=B(a),ne(r.$$.fragment,a)},m(a,o){re(e,a,o),j(a,n,o),re(r,a,o),s=!0},p(a,o){const i={};o[2]&4194304&&(i.$$scope={dirty:o,ctx:a}),e.$set(i);const l={};o[0]&64|o[2]&4194304&&(l.$$scope={dirty:o,ctx:a}),r.$set(l)},i(a){s||(M(e.$$.fragment,a),M(r.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),F(r.$$.fragment,a),s=!1},d(a){a&&S(n),se(e,a),se(r,a)}}}function B0(t){let e,n="Documentation";return{c(){e=V("a"),e.textContent=n,this.h()},l(r){e=z(r,"A",{style:!0,href:!0,"data-svelte-h":!0}),be(e)!=="svelte-o82y97"&&(e.textContent=n),this.h()},h(){Fe(e,"color","inherit"),Fe(e,"text-decoration","inherit"),H(e,"href","/cad/docs/")},m(r,s){j(r,e,s)},p:ce,d(r){r&&S(e)}}}function G0(t){let e,n;return e=new qe({props:{$$slots:{default:[B0]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s[2]&4194304&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Wa(t){let e,n,r,s,a,o=t[4]>1&&Xa();return{c(){e=V("button"),n=Q(t[4]),r=Q(" import alert"),o&&o.c(),this.h()},l(i){e=z(i,"BUTTON",{class:!0});var l=Y(e);n=x(l,t[4]),r=x(l," import alert"),o&&o.l(l),l.forEach(S),this.h()},h(){H(e,"class","svelte-c3va9l")},m(i,l){j(i,e,l),O(e,n),O(e,r),o&&o.m(e,null),s||(a=ae(e,"click",t[24]),s=!0)},p(i,l){l[0]&16&&Oe(n,i[4]),i[4]>1?o||(o=Xa(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(i){i&&S(e),o&&o.d(),s=!1,a()}}}function Xa(t){let e;return{c(){e=Q("s")},l(n){e=x(n,"s")},m(n,r){j(n,e,r)},d(n){n&&S(e)}}}function Ya(t){let e,n;return e=new qg({props:{close_menu:t[33],id:t[8].id,top:t[8].top,left:t[8].left,right:t[8].right,bottom:t[8].bottom}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const a={};s[0]&256&&(a.id=r[8].id),s[0]&256&&(a.top=r[8].top),s[0]&256&&(a.left=r[8].left),s[0]&256&&(a.right=r[8].right),s[0]&256&&(a.bottom=r[8].bottom),e.$set(a)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function J0(t){let e,n,r,s,a,o,i;e=new xl({props:{position:"top-left"}}),r=new Bl({props:{variant:Gl.Dots}});let l=t[8]&&Ya(t);return o=new Jl({props:{position:"top-right"}}),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),s=K(),l&&l.c(),a=K(),te(o.$$.fragment)},l(f){ne(e.$$.fragment,f),n=B(f),ne(r.$$.fragment,f),s=B(f),l&&l.l(f),a=B(f),ne(o.$$.fragment,f)},m(f,c){re(e,f,c),j(f,n,c),re(r,f,c),j(f,s,c),l&&l.m(f,c),j(f,a,c),re(o,f,c),i=!0},p(f,c){f[8]?l?(l.p(f,c),c[0]&256&&M(l,1)):(l=Ya(f),l.c(),M(l,1),l.m(a.parentNode,a)):l&&(Me(),F(l,1,1,()=>{l=null}),Ve())},i(f){i||(M(e.$$.fragment,f),M(r.$$.fragment,f),M(l),M(o.$$.fragment,f),i=!0)},o(f){F(e.$$.fragment,f),F(r.$$.fragment,f),F(l),F(o.$$.fragment,f),i=!1},d(f){f&&(S(n),S(s),S(a)),se(e,f),se(r,f),l&&l.d(f),se(o,f)}}}function W0(t){let e,n;return e=new f0({props:{slot:"connectionLine"}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p:ce,i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function X0(t){let e,n,r,s,a,o;return n=new e0({}),s=new ei({props:{id:"main_flow",nodes:Un,nodeTypes:pl,edges:ri,edgeTypes:gl,fitView:!0,defaultEdgeOptions:t[22],maxZoom:2,minZoom:.3,deleteKey:["Delete","Backspace"],$$slots:{connectionLine:[W0],default:[J0]},$$scope:{ctx:t}}}),s.$on("dragover",t[27]),s.$on("drop",t[29]),s.$on("connect",t[28]),s.$on("nodecontextmenu",t[32]),s.$on("nodeclick",t[34]),s.$on("paneclick",t[33]),{c(){e=V("div"),te(n.$$.fragment),r=K(),te(s.$$.fragment),this.h()},l(i){e=z(i,"DIV",{slot:!0,id:!0,class:!0});var l=Y(e);ne(n.$$.fragment,l),r=B(l),ne(s.$$.fragment,l),l.forEach(S),this.h()},h(){H(e,"slot","flow"),H(e,"id","slotted-flow"),H(e,"class","svelte-c3va9l"),Tl(()=>t[57].call(e))},m(i,l){j(i,e,l),re(n,e,null),O(e,r),re(s,e,null),a=Il(e,t[57].bind(e)),o=!0},p(i,l){const f={};l[0]&256|l[2]&4194304&&(f.$$scope={dirty:l,ctx:i}),s.$set(f)},i(i){o||(M(n.$$.fragment,i),M(s.$$.fragment,i),o=!0)},o(i){F(n.$$.fragment,i),F(s.$$.fragment,i),o=!1},d(i){i&&S(e),se(n),se(s),a()}}}function Y0(t){let e,n,r;return n=new vl({}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{slot:!0,class:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){H(e,"slot","drawer"),H(e,"class","side-panel close svelte-c3va9l")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p:ce,i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function Z0(t){let e,n,r,s,a,o,i,l,f,c,h,d,$,g='<span class="fancy-font svelte-c3va9l" title="Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"><a style="color:inherit; text-decoration: none;" href="/">D3FEND</a> <span class="CAD"><span style="color:rgb(255, 108, 108); text-shadow: 0 0 2px black">C</span><span class="A svelte-c3va9l" style="color:white;text-shadow: 0 0 2px black;">A</span><span style="color:rgb(152, 196, 255); text-shadow: 0 0 2px black;">D</span></span></span>',b,y,u,p,I,k,_,w,v,R,C,N,m,E,T,G,ue,Z,ie;function Ee(A){t[41](A)}let ve={title:t[0].title,content:t[0].content,options:t[0].options,$$slots:{default:[$0]},$$scope:{ctx:t}};t[0].is_open!==void 0&&(ve.is_open=t[0].is_open),e=new Sa({props:ve}),ke.push(()=>Le(e,"is_open",Ee)),e.$on("optionSelected",t[20]);function W(A){t[42](A)}let q={title:t[1].title,content:t[1].content,options:t[1].options,$$slots:{default:[w0]},$$scope:{ctx:t}};t[1].is_open!==void 0&&(q.is_open=t[1].is_open),s=new Sa({props:q}),ke.push(()=>Le(s,"is_open",W)),s.$on("optionSelected",t[21]);function U(A){t[44](A)}let L={title:"Share this model with a URL",$$slots:{default:[E0]},$$scope:{ctx:t}};t[13]!==void 0&&(L.is_open=t[13]),i=new Gg({props:L}),ke.push(()=>Le(i,"is_open",U));let P=t[19]&&Ja(t);u=new lr({props:{title:"File",$$slots:{default:[V0]},$$scope:{ctx:t}}}),I=new lr({props:{title:"Edit",$$slots:{default:[L0]},$$scope:{ctx:t}}}),_=new lr({props:{title:"View",$$slots:{default:[K0]},$$scope:{ctx:t}}}),v=new lr({props:{title:"Help",$$slots:{default:[G0]},$$scope:{ctx:t}}});let D=t[4]&&Wa(t);return G=new ml({props:{$$slots:{drawer:[Y0],flow:[X0]},$$scope:{ctx:t}}}),G.$on("keydown",t[37]),{c(){te(e.$$.fragment),r=K(),te(s.$$.fragment),o=K(),te(i.$$.fragment),f=K(),P&&P.c(),c=K(),h=V("div"),d=V("div"),$=V("span"),$.innerHTML=g,b=K(),y=V("span"),te(u.$$.fragment),p=K(),te(I.$$.fragment),k=K(),te(_.$$.fragment),w=K(),te(v.$$.fragment),R=K(),C=V("span"),N=V("input"),m=K(),E=V("span"),D&&D.c(),T=K(),te(G.$$.fragment),this.h()},l(A){ne(e.$$.fragment,A),r=B(A),ne(s.$$.fragment,A),o=B(A),ne(i.$$.fragment,A),f=B(A),P&&P.l(A),c=B(A),h=z(A,"DIV",{id:!0,class:!0});var J=Y(h);d=z(J,"DIV",{class:!0});var ee=Y(d);$=z(ee,"SPAN",{class:!0,"data-svelte-h":!0}),be($)!=="svelte-1mj44z0"&&($.innerHTML=g),b=B(ee),y=z(ee,"SPAN",{class:!0});var le=Y(y);ne(u.$$.fragment,le),p=B(le),ne(I.$$.fragment,le),k=B(le),ne(_.$$.fragment,le),w=B(le),ne(v.$$.fragment,le),le.forEach(S),ee.forEach(S),R=B(J),C=z(J,"SPAN",{});var he=Y(C);N=z(he,"INPUT",{class:!0,type:!0}),he.forEach(S),m=B(J),E=z(J,"SPAN",{class:!0});var ge=Y(E);D&&D.l(ge),ge.forEach(S),J.forEach(S),T=B(A),ne(G.$$.fragment,A),this.h()},h(){H($,"class","title svelte-c3va9l"),H(y,"class","menu-bar svelte-c3va9l"),H(d,"class","left-toolbar-container svelte-c3va9l"),H(N,"class","filename svelte-c3va9l"),H(N,"type","text"),H(E,"class","right-toolbar-container svelte-c3va9l"),H(h,"id","toolbar"),H(h,"class","svelte-c3va9l")},m(A,J){re(e,A,J),j(A,r,J),re(s,A,J),j(A,o,J),re(i,A,J),j(A,f,J),P&&P.m(A,J),j(A,c,J),j(A,h,J),O(h,d),O(d,$),O(d,b),O(d,y),re(u,y,null),O(y,p),re(I,y,null),O(y,k),re(_,y,null),O(y,w),re(v,y,null),O(h,R),O(h,C),O(C,N),st(N,t[5]),O(h,m),O(h,E),D&&D.m(E,null),j(A,T,J),re(G,A,J),ue=!0,Z||(ie=ae(N,"input",t[56]),Z=!0)},p(A,J){const ee={};J[0]&1&&(ee.title=A[0].title),J[0]&1&&(ee.content=A[0].content),J[0]&1&&(ee.options=A[0].options),J[0]&4|J[2]&4194304&&(ee.$$scope={dirty:J,ctx:A}),!n&&J[0]&1&&(n=!0,ee.is_open=A[0].is_open,ze(()=>n=!1)),e.$set(ee);const le={};J[0]&2&&(le.title=A[1].title),J[0]&2&&(le.content=A[1].content),J[0]&2&&(le.options=A[1].options),J[2]&4194304&&(le.$$scope={dirty:J,ctx:A}),!a&&J[0]&2&&(a=!0,le.is_open=A[1].is_open,ze(()=>a=!1)),s.$set(le);const he={};J[0]&49152|J[2]&4194304&&(he.$$scope={dirty:J,ctx:A}),!l&&J[0]&8192&&(l=!0,he.is_open=A[13],ze(()=>l=!1)),i.$set(he),A[19]?P?P.p(A,J):(P=Ja(A),P.c(),P.m(c.parentNode,c)):P&&(P.d(1),P=null);const ge={};J[0]&131200|J[2]&4194304&&(ge.$$scope={dirty:J,ctx:A}),u.$set(ge);const Se={};J[0]&2048|J[2]&4194304&&(Se.$$scope={dirty:J,ctx:A}),I.$set(Se);const Ge={};J[0]&65600|J[2]&4194304&&(Ge.$$scope={dirty:J,ctx:A}),_.$set(Ge);const xe={};J[2]&4194304&&(xe.$$scope={dirty:J,ctx:A}),v.$set(xe),J[0]&32&&N.value!==A[5]&&st(N,A[5]),A[4]?D?D.p(A,J):(D=Wa(A),D.c(),D.m(E,null)):D&&(D.d(1),D=null);const Xe={};J[0]&1792|J[2]&4194304&&(Xe.$$scope={dirty:J,ctx:A}),G.$set(Xe)},i(A){ue||(M(e.$$.fragment,A),M(s.$$.fragment,A),M(i.$$.fragment,A),M(u.$$.fragment,A),M(I.$$.fragment,A),M(_.$$.fragment,A),M(v.$$.fragment,A),M(G.$$.fragment,A),ue=!0)},o(A){F(e.$$.fragment,A),F(s.$$.fragment,A),F(i.$$.fragment,A),F(u.$$.fragment,A),F(I.$$.fragment,A),F(_.$$.fragment,A),F(v.$$.fragment,A),F(G.$$.fragment,A),ue=!1},d(A){A&&(S(r),S(o),S(f),S(c),S(h),S(T)),se(e,A),se(s,A),se(i,A),P&&P.d(A),se(u),se(I),se(_),se(v),D&&D.d(),se(G,A),Z=!1,ie()}}}function Q0(t){let e,n,r,s,a,o,i,l,f,c,h,d,$;e=new Ql({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}});function g(w){t[38](w)}let b={title:t[4]+" import alerts",$$slots:{default:[v0]},$$scope:{ctx:t}};t[12]!==void 0&&(b.is_open=t[12]),r=new d0({props:b}),ke.push(()=>Le(r,"is_open",g));function y(w){t[39](w)}function u(w){t[40](w)}let p={};t[11]!==void 0&&(p.is_open=t[11]),t[18]!==void 0&&(p.meta=t[18]),o=new m0({props:p}),ke.push(()=>Le(o,"is_open",y)),ke.push(()=>Le(o,"meta",u));function I(w){t[58](w)}function k(w){t[59](w)}let _={position:"hidden",$$slots:{default:[Z0]},$$scope:{ctx:t}};return t[6]!==void 0&&(_.is_fullscreen=t[6]),t[16]!==void 0&&(_.toggleFullscreen=t[16]),c=new Zg({props:_}),ke.push(()=>Le(c,"is_fullscreen",I)),ke.push(()=>Le(c,"toggleFullscreen",k)),{c(){te(e.$$.fragment),n=K(),te(r.$$.fragment),a=K(),te(o.$$.fragment),f=K(),te(c.$$.fragment)},l(w){ne(e.$$.fragment,w),n=B(w),ne(r.$$.fragment,w),a=B(w),ne(o.$$.fragment,w),f=B(w),ne(c.$$.fragment,w)},m(w,v){re(e,w,v),j(w,n,v),re(r,w,v),j(w,a,v),re(o,w,v),j(w,f,v),re(c,w,v),$=!0},p(w,v){const R={};v[0]&16&&(R.title=w[4]+" import alerts"),v[0]&8|v[2]&4194304&&(R.$$scope={dirty:v,ctx:w}),!s&&v[0]&4096&&(s=!0,R.is_open=w[12],ze(()=>s=!1)),r.$set(R);const C={};!i&&v[0]&2048&&(i=!0,C.is_open=w[11],ze(()=>i=!1)),!l&&v[0]&262144&&(l=!0,C.meta=w[18],ze(()=>l=!1)),o.$set(C);const N={};v[0]&782327|v[2]&4194304&&(N.$$scope={dirty:v,ctx:w}),!h&&v[0]&64&&(h=!0,N.is_fullscreen=w[6],ze(()=>h=!1)),!d&&v[0]&65536&&(d=!0,N.toggleFullscreen=w[16],ze(()=>d=!1)),c.$set(N)},i(w){$||(M(e.$$.fragment,w),M(r.$$.fragment,w),M(o.$$.fragment,w),M(c.$$.fragment,w),$=!0)},o(w){F(e.$$.fragment,w),F(r.$$.fragment,w),F(o.$$.fragment,w),F(c.$$.fragment,w),$=!1},d(w){w&&(S(n),S(a),S(f)),se(e,w),se(r,w),se(o,w),se(c,w)}}}function Za(t){const e="Are you sure you want to leave this page?";return t.returnValue=e,e}function x0(t,e){if(!t.length)return;const n={x:0,y:0},r=t.find(f=>f.id.startsWith("report"));if(!r){console.warn("Central node not found for radial layout.");return}const s=r.id,a=e.filter(f=>f.source===s||f.target===s).map(f=>f.source===s?f.target:f.source).map(f=>t.find(c=>c.id===f)).filter(f=>f);a.length;const o=2*Math.PI/a.length,l=300+200/(2*Math.sin(Math.PI/t.length));r.position={x:n.x,y:n.y},a.forEach((f,c)=>{const h=o*c;f.position={x:n.x+l*Math.cos(h),y:n.y+l*Math.sin(h)},f.position={x:f.position.x-(f.width||100)/2,y:f.position.y-(f.height||50)/2}})}function e1(t,e){x0(t,e)}function t1(t,e,n){let r,s,a,o,i;Gt(t,Un,X=>n(17,r=X)),Gt(t,Dl,X=>n(62,s=X)),Gt(t,ri,X=>n(63,a=X)),Gt(t,Pn,X=>n(18,o=X)),Gt(t,nt,X=>n(19,i=X));var l=this&&this.__awaiter||function(X,de,fe,$e){function Ae(Ye){return Ye instanceof fe?Ye:new fe(function(At){At(Ye)})}return new(fe||(fe=Promise))(function(Ye,At){function kn(hn){try{Ln($e.next(hn))}catch(Rr){At(Rr)}}function En(hn){try{Ln($e.throw(hn))}catch(Rr){At(Rr)}}function Ln(hn){hn.done?Ye(hn.value):Ae(hn.value).then(kn,En)}Ln(($e=$e.apply(X,de||[])).next())})};const f=new B_({useDefaults:!0,allErrors:!0});J_(f),X_(f);let c={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},h={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},d;s.url.searchParams.get("load")&&(d=s.url.searchParams.get("load"),c.is_open=!0),s.url.searchParams.get("loadg")&&(h.is_open=!0);function $(X){const de=X.detail;de.value==="load"?(nt.add("loading remote URL"),ue(d),nt.clear()):de.value}function g(X){const de=X.detail;if(de.value==="load"){nt.add("loading graph from URL");const fe=s.url.searchParams.get("loadg"),$e=_o.uncrush(fe);let Ae=JSON.parse($e);R(Ae),nt.clear()}else de.value}es(()=>l(void 0,void 0,void 0,function*(){nt.add("Mounting app...");try{yield ti.initialize(),nt.clear()}catch(X){console.error("Failed to initialize Oxigraph in +layout.svelte",X),X.message}}));let b={type:"editableEdge",data:{label:void 0},markerEnd:{type:Sr.ArrowClosed}},y,u,p="d3fend-cad.json",I=!1;function k(){console.log("Saving As D3FEND Ontology Extension..."),nt.add("Generating D3FEND Ontology Extension in Turtle file");let X=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","extension-name");const de="d3fend-cad-ext-"+X+".ttl";Yl(X).then(fe=>{nt.clear();const $e=new Blob([fe],{type:"text/turtle"}),Ae=window.URL.createObjectURL($e),Ye=document.createElement("a");Ye.href=Ae,de&&(Ye.download=de,document.body.appendChild(Ye),Ye.click(),document.body.removeChild(Ye)),window.URL.revokeObjectURL(Ae)}).catch(fe=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",fe)})}function _(X="json"){X==="json"?v():X==="turtle"?w():X==="extension"?k():X==="png"&&Xh(r,p),X=""}function w(){nt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),Wl().then(X=>{nt.clear();const de=new Blob([X],{type:"text/turtle"}),fe=window.URL.createObjectURL(de),$e=document.createElement("a");$e.href=fe;let Ae=prompt("Enter filename to save as Turtle file",p.replace("json","ttl"));n(4,u=0),Ae&&($e.download=Ae,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(fe)}).catch(X=>{console.error("Error serializing graph to Turtle: ",X)})}function v(){const X=JSON.stringify({meta:o,nodes:r,edges:a},null,4),de=new Blob([X],{type:"application/json"}),fe=window.URL.createObjectURL(de),$e=document.createElement("a");$e.href=fe;let Ae=prompt("Enter filename to save as JSON file",p);n(4,u=0),Ae&&(n(5,p=Ae),$e.download=Ae,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(fe)}function R(X){try{const de=f.compile(jr),fe=de(X);n(3,y=de.errors),fe?n(4,u=0):X=N(de.errors,X);const $e=X.nodes,Ae=X.edges;X.meta&&Jt(Pn,o=X.meta,o),nt.add("loading graph from data..."),er($e,Ae),T(),window.addEventListener("beforeunload",Ye=>(console.log("User is leaving the page"),Za(Ye))),nt.clear()}catch(de){console.error("Error parsing JSON:",de)}}const C={eventNode:"event-node",attackSelectorNode:"attack-node",countermeasureSelectorNode:"countermeasure-node",artifactSelectorNode:"artifact-node",informationSelectorNode:"artifact-node",agentSelectorNode:"agent-node",vulnerabilitySelectorNode:"vulnerability-node",conditionDefinitionNode:"condition-node",noteNode:"note-node",thingNode:"thing-node"};function N(X,de){n(4,u=X.length);for(const fe of X){if(fe.params.missingProperty=="user_properties"&&fe.instancePath.includes("/nodes/")){const $e=parseInt(fe.instancePath.match(/\/nodes\/(\d+)/)[1]);de.nodes[$e].data.user_properties=[]}if(fe.params.missingProperty==="meta"&&(de.meta=Object.assign(Object.assign({},ni),de.meta)),fe.keyword==="enum"&&fe.instancePath.includes("/nodes/")&&fe.params.allowedValues){const $e=parseInt(fe.instancePath.match(/\/nodes\/(\d+)/)[1]),Ae=de.nodes[$e].type;de.nodes[$e].type=C[Ae]||"thing-node",fe.message=`Invalid node type ${Ae} at index ${$e}. Allowed types are: ${fe.params.allowedValues.join(", ")}. Defaulting to 'thing-node'.`,nt.add("Old node types have been migrated to new names, please save a new CAD file.")}}return de}function m(){n(12,Se=!0)}const{screenToFlowPosition:E,fitView:T}=oi();function G(X){const de=X.target.files[0];if(de){const fe=new FileReader;fe.onload=$e=>{if(typeof $e.target.result=="string"){n(5,p=de.name);try{let Ae=JSON.parse($e.target.result);const Ye=f.compile(jr),At=Ye(Ae);n(3,y=Ye.errors),At?n(4,u=0):Ae=N(Ye.errors,Ae),Ae.meta&&Jt(Pn,o=Ae.meta,o);const kn=Ae.nodes,En=Ae.edges;er(kn,En),T(),window.addEventListener("beforeunload",Ln=>(console.log("User is leaving the page"),Za(Ln)))}catch(Ae){console.error("Error parsing JSON:",Ae)}}else console.error("File content is not a string.")},fe.onerror=()=>{console.error("Error reading file:",fe.error)},fe.readAsText(de)}}function ue(X){return l(this,void 0,void 0,function*(){if(X)try{let fe=yield(yield fetch(X)).json();const $e=f.compile(jr),Ae=$e(fe);n(3,y=$e.errors),Ae?n(4,u=0):fe=N($e.errors,fe),fe.meta&&Jt(Pn,o=fe.meta,o);const Ye=fe.nodes,At=fe.edges;er(Ye,At),T()}catch(de){console.error("Error parsing JSON:",de)}})}function Z(X){X.accept=".json",X.onchange=de=>{G(de)}}function ie(X){return l(this,void 0,void 0,function*(){X.accept=".json",X.onchange=de=>{const fe=de.target.files[0];if(fe){n(5,p=fe.name);const $e=new FileReader;$e.onload=Ae=>l(this,void 0,void 0,function*(){if(typeof Ae.target.result=="string")try{nt.add("Processing STIX file...");const Ye=JSON.parse(Ae.target.result),{nodes:At,edges:kn}=yield th(Ye),En=nh(Ye);En&&Jt(Pn,o=En,o),e1(At,kn),er(At,kn),T(),nt.add("STIX file imported successfully!"),nt.clear()}catch(Ye){console.error("Error parsing STIX JSON:",Ye)}else console.error("File content is not a string.")}),$e.onerror=()=>{console.error("Error reading file:",$e.error)},$e.readAsText(fe)}}})}function Ee(){return l(this,arguments,void 0,function*(X="cad"){const de=document.createElement("input");de.type="file",X==="cad"?Z(de):X==="stix21"?yield ie(de):console.error("Unsupported file type selected."),de.click()})}const ve=X=>{X.preventDefault(),X.dataTransfer&&(X.dataTransfer.dropEffect="move")},W=X=>console.log("handle onConnect",X),q=X=>{if(X.preventDefault(),!X.dataTransfer)return null;const de=X.dataTransfer.getData("application/svelteflow"),fe=E({x:X.clientX,y:X.clientY}),$e={id:`${Math.random()}`,type:de,position:fe,data:{label:null,sequence:"0",user_properties:[]}};r.push($e),Un.set(r)};function U(X){return l(this,void 0,void 0,function*(){const de=X.detail;n(5,p=de);try{const fe=yield fetch(`/resources/cad/examples/${de}`);if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const $e=yield fe.json();R($e)}catch(fe){console.error("Error fetching JSON file:",fe)}})}let L;function P(){nt.clear(),Xl(),n(4,u=0),n(7,L="Example Graphs..."),n(5,p="d3fend-cad.json"),Ar.set(null)}let D,A,J;function ee({detail:{event:X,node:de}}){X.preventDefault();let fe=50;n(8,D={id:de.id,top:X.clientY<J-fe?X.clientY:void 0,left:X.clientX<A-fe?X.clientX:void 0,right:X.clientX>=A-fe?A-X.clientX:void 0,bottom:X.clientY>=J-fe?J-X.clientY:void 0}),he({detail:{event:X,node:de}})}function le(){n(8,D=null),Ar.set(null)}function he({detail:{event:X,node:de}}){Ar.set(de)}let ge=!1,Se=!1,Ge=!1,xe,Xe;function ut(){nt.add("compressing graph to string..."),n(13,Ge=!0);const X=_o.crush(JSON.stringify({nodes:r,edges:a}));n(14,xe=encodeURIComponent(X)),n(15,Xe=s.url.origin+`/cad/?loadg=${xe}`),nt.clear()}function et(){Rl("/cad-view/")}let Rt,Pt;function vt(X){if(X.ctrlKey==!0&&X.key=="a")X.preventDefault(),r.forEach(de=>de.selected=!0),Un.set(r);else if(X.ctrlKey==!0&&X.key=="s")X.preventDefault(),_("json");else if(X.ctrlKey==!0&&X.key=="c")X.preventDefault(),Pt=r.map(de=>de.selected?de:null).filter(de=>de!==null),r.forEach(de=>de.selected=!1);else if(X.ctrlKey==!0&&X.key=="v"&&(X.preventDefault(),Pt)){let de=1;Jt(Un,r=r.concat(Pt.map(fe=>{let $e=`${fe.id}_copy${de}`;for(;r.some(Ye=>Ye.id===$e);)if(de++,$e=`${fe.id}_copy${de}`,de>1e3)return console.error("Something probably went wrong here. Stopping."),null;const Ae=Object.assign(Object.assign({},fe),{data:Object.assign(Object.assign({},fe.data),{user_properties:structuredClone(fe.data.user_properties)}),id:$e,position:{x:fe.position.x+20*de,y:fe.position.y+20*de}});return de++,Ae})).filter(fe=>fe!=null),r)}}function nn(X){Se=X,n(12,Se)}function Kt(X){ge=X,n(11,ge)}function Ct(X){o=X,Pn.set(o)}function kt(X){t.$$.not_equal(c.is_open,X)&&(c.is_open=X,n(0,c))}function bt(X){t.$$.not_equal(h.is_open,X)&&(h.is_open=X,n(1,h))}const Bt=()=>Al(Xe);function Zt(X){Ge=X,n(13,Ge)}const _n=()=>Ee("cad"),jt=()=>Ee("stix21");function tt(X){L=X,n(7,L)}const rn=()=>_("json"),ot=()=>_("json"),sn=()=>_("turtle"),at=()=>_("extension"),oe=()=>_("png"),we=()=>n(11,ge=!ge),me=()=>T({duration:250}),Et=()=>Rt();function yn(){p=this.value,n(5,p)}function wn(){A=this.clientWidth,J=this.clientHeight,n(9,A),n(10,J)}function on(X){I=X,n(6,I)}function an(X){Rt=X,n(16,Rt)}return[c,h,d,y,u,p,I,L,D,A,J,ge,Se,Ge,xe,Xe,Rt,r,o,i,$,g,b,_,m,T,Ee,ve,W,q,U,P,ee,le,he,ut,et,vt,nn,Kt,Ct,kt,bt,Bt,Zt,_n,jt,tt,rn,ot,sn,at,oe,we,me,Et,yn,wn,on,an]}class n1 extends Re{constructor(e){super(),je(this,e,t1,Q0,Ie,{},null,[-1,-1,-1])}}function r1(t){let e,n;return e=new n1({}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function s1(t){let e,n,r;return n=new Dt({props:{$$slots:{default:[r1]},$$scope:{ctx:t}}}),{c(){e=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{style:!0});var a=Y(e);ne(n.$$.fragment,a),a.forEach(S),this.h()},h(){Fe(e,"padding","7px")},m(s,a){j(s,e,a),re(n,e,null),r=!0},p(s,[a]){const o={};a&2&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(M(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&S(e),se(n)}}}function o1(t,e,n){let{data:r}=e;return t.$$set=s=>{"data"in s&&n(0,r=s.data)},t.$$.update=()=>{t.$$.dirty&1&&(bl.set(r.remote_d3fend_tree),$l.set(r.attack),yl.set(r.dao_list),wl.set(r.dao_tree),kl.set(r.digital_event),El.set(r.event_tree),Sl.set(r.weaknesses),Pl.set(r.properties_list),Cl.set(r.properties_tree),Nl.set(r.digital_information))},[r]}class N1 extends Re{constructor(e){super(),je(this,e,o1,s1,Ie,{data:0})}}export{N1 as component,C1 as universal};
